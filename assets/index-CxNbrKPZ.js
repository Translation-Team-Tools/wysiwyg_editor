var wS=Object.defineProperty;var TS=(r,e,t)=>e in r?wS(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t;var ph=(r,e,t)=>TS(r,typeof e!="symbol"?e+"":e,t);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))i(o);new MutationObserver(o=>{for(const a of o)if(a.type==="childList")for(const u of a.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&i(u)}).observe(document,{childList:!0,subtree:!0});function t(o){const a={};return o.integrity&&(a.integrity=o.integrity),o.referrerPolicy&&(a.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?a.credentials="include":o.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function i(o){if(o.ep)return;o.ep=!0;const a=t(o);fetch(o.href,a)}})();var OS=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Mu(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}var mh={exports:{}},iu={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Dy;function kS(){if(Dy)return iu;Dy=1;var r=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function t(i,o,a){var u=null;if(a!==void 0&&(u=""+a),o.key!==void 0&&(u=""+o.key),"key"in o){a={};for(var f in o)f!=="key"&&(a[f]=o[f])}else a=o;return o=a.ref,{$$typeof:r,type:i,key:u,ref:o!==void 0?o:null,props:a}}return iu.Fragment=e,iu.jsx=t,iu.jsxs=t,iu}var Ry;function CS(){return Ry||(Ry=1,mh.exports=kS()),mh.exports}var ue=CS(),gh={exports:{}},ut={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var By;function AS(){if(By)return ut;By=1;var r=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),a=Symbol.for("react.consumer"),u=Symbol.for("react.context"),f=Symbol.for("react.forward_ref"),h=Symbol.for("react.suspense"),m=Symbol.for("react.memo"),v=Symbol.for("react.lazy"),S=Symbol.iterator;function w(L){return L===null||typeof L!="object"?null:(L=S&&L[S]||L["@@iterator"],typeof L=="function"?L:null)}var O={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},T=Object.assign,A={};function R(L,le,Ne){this.props=L,this.context=le,this.refs=A,this.updater=Ne||O}R.prototype.isReactComponent={},R.prototype.setState=function(L,le){if(typeof L!="object"&&typeof L!="function"&&L!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,L,le,"setState")},R.prototype.forceUpdate=function(L){this.updater.enqueueForceUpdate(this,L,"forceUpdate")};function W(){}W.prototype=R.prototype;function Te(L,le,Ne){this.props=L,this.context=le,this.refs=A,this.updater=Ne||O}var _e=Te.prototype=new W;_e.constructor=Te,T(_e,R.prototype),_e.isPureReactComponent=!0;var Le=Array.isArray,ve={H:null,A:null,T:null,S:null,V:null},Re=Object.prototype.hasOwnProperty;function Fe(L,le,Ne,xe,Ge,ft){return Ne=ft.ref,{$$typeof:r,type:L,key:le,ref:Ne!==void 0?Ne:null,props:ft}}function me(L,le){return Fe(L.type,le,void 0,void 0,void 0,L.props)}function Ce(L){return typeof L=="object"&&L!==null&&L.$$typeof===r}function St(L){var le={"=":"=0",":":"=2"};return"$"+L.replace(/[=:]/g,function(Ne){return le[Ne]})}var sn=/\/+/g;function jt(L,le){return typeof L=="object"&&L!==null&&L.key!=null?St(""+L.key):le.toString(36)}function Ln(){}function ir(L){switch(L.status){case"fulfilled":return L.value;case"rejected":throw L.reason;default:switch(typeof L.status=="string"?L.then(Ln,Ln):(L.status="pending",L.then(function(le){L.status==="pending"&&(L.status="fulfilled",L.value=le)},function(le){L.status==="pending"&&(L.status="rejected",L.reason=le)})),L.status){case"fulfilled":return L.value;case"rejected":throw L.reason}}throw L}function Xt(L,le,Ne,xe,Ge){var ft=typeof L;(ft==="undefined"||ft==="boolean")&&(L=null);var Qe=!1;if(L===null)Qe=!0;else switch(ft){case"bigint":case"string":case"number":Qe=!0;break;case"object":switch(L.$$typeof){case r:case e:Qe=!0;break;case v:return Qe=L._init,Xt(Qe(L._payload),le,Ne,xe,Ge)}}if(Qe)return Ge=Ge(L),Qe=xe===""?"."+jt(L,0):xe,Le(Ge)?(Ne="",Qe!=null&&(Ne=Qe.replace(sn,"$&/")+"/"),Xt(Ge,le,Ne,"",function(Ve){return Ve})):Ge!=null&&(Ce(Ge)&&(Ge=me(Ge,Ne+(Ge.key==null||L&&L.key===Ge.key?"":(""+Ge.key).replace(sn,"$&/")+"/")+Qe)),le.push(Ge)),1;Qe=0;var gn=xe===""?".":xe+":";if(Le(L))for(var Nt=0;Nt<L.length;Nt++)xe=L[Nt],ft=gn+jt(xe,Nt),Qe+=Xt(xe,le,Ne,ft,Ge);else if(Nt=w(L),typeof Nt=="function")for(L=Nt.call(L),Nt=0;!(xe=L.next()).done;)xe=xe.value,ft=gn+jt(xe,Nt++),Qe+=Xt(xe,le,Ne,ft,Ge);else if(ft==="object"){if(typeof L.then=="function")return Xt(ir(L),le,Ne,xe,Ge);throw le=String(L),Error("Objects are not valid as a React child (found: "+(le==="[object Object]"?"object with keys {"+Object.keys(L).join(", ")+"}":le)+"). If you meant to render a collection of children, use an array instead.")}return Qe}function te(L,le,Ne){if(L==null)return L;var xe=[],Ge=0;return Xt(L,xe,"","",function(ft){return le.call(Ne,ft,Ge++)}),xe}function ke(L){if(L._status===-1){var le=L._result;le=le(),le.then(function(Ne){(L._status===0||L._status===-1)&&(L._status=1,L._result=Ne)},function(Ne){(L._status===0||L._status===-1)&&(L._status=2,L._result=Ne)}),L._status===-1&&(L._status=0,L._result=le)}if(L._status===1)return L._result.default;throw L._result}var Ke=typeof reportError=="function"?reportError:function(L){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var le=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof L=="object"&&L!==null&&typeof L.message=="string"?String(L.message):String(L),error:L});if(!window.dispatchEvent(le))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",L);return}console.error(L)};function vt(){}return ut.Children={map:te,forEach:function(L,le,Ne){te(L,function(){le.apply(this,arguments)},Ne)},count:function(L){var le=0;return te(L,function(){le++}),le},toArray:function(L){return te(L,function(le){return le})||[]},only:function(L){if(!Ce(L))throw Error("React.Children.only expected to receive a single React element child.");return L}},ut.Component=R,ut.Fragment=t,ut.Profiler=o,ut.PureComponent=Te,ut.StrictMode=i,ut.Suspense=h,ut.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=ve,ut.__COMPILER_RUNTIME={__proto__:null,c:function(L){return ve.H.useMemoCache(L)}},ut.cache=function(L){return function(){return L.apply(null,arguments)}},ut.cloneElement=function(L,le,Ne){if(L==null)throw Error("The argument must be a React element, but you passed "+L+".");var xe=T({},L.props),Ge=L.key,ft=void 0;if(le!=null)for(Qe in le.ref!==void 0&&(ft=void 0),le.key!==void 0&&(Ge=""+le.key),le)!Re.call(le,Qe)||Qe==="key"||Qe==="__self"||Qe==="__source"||Qe==="ref"&&le.ref===void 0||(xe[Qe]=le[Qe]);var Qe=arguments.length-2;if(Qe===1)xe.children=Ne;else if(1<Qe){for(var gn=Array(Qe),Nt=0;Nt<Qe;Nt++)gn[Nt]=arguments[Nt+2];xe.children=gn}return Fe(L.type,Ge,void 0,void 0,ft,xe)},ut.createContext=function(L){return L={$$typeof:u,_currentValue:L,_currentValue2:L,_threadCount:0,Provider:null,Consumer:null},L.Provider=L,L.Consumer={$$typeof:a,_context:L},L},ut.createElement=function(L,le,Ne){var xe,Ge={},ft=null;if(le!=null)for(xe in le.key!==void 0&&(ft=""+le.key),le)Re.call(le,xe)&&xe!=="key"&&xe!=="__self"&&xe!=="__source"&&(Ge[xe]=le[xe]);var Qe=arguments.length-2;if(Qe===1)Ge.children=Ne;else if(1<Qe){for(var gn=Array(Qe),Nt=0;Nt<Qe;Nt++)gn[Nt]=arguments[Nt+2];Ge.children=gn}if(L&&L.defaultProps)for(xe in Qe=L.defaultProps,Qe)Ge[xe]===void 0&&(Ge[xe]=Qe[xe]);return Fe(L,ft,void 0,void 0,null,Ge)},ut.createRef=function(){return{current:null}},ut.forwardRef=function(L){return{$$typeof:f,render:L}},ut.isValidElement=Ce,ut.lazy=function(L){return{$$typeof:v,_payload:{_status:-1,_result:L},_init:ke}},ut.memo=function(L,le){return{$$typeof:m,type:L,compare:le===void 0?null:le}},ut.startTransition=function(L){var le=ve.T,Ne={};ve.T=Ne;try{var xe=L(),Ge=ve.S;Ge!==null&&Ge(Ne,xe),typeof xe=="object"&&xe!==null&&typeof xe.then=="function"&&xe.then(vt,Ke)}catch(ft){Ke(ft)}finally{ve.T=le}},ut.unstable_useCacheRefresh=function(){return ve.H.useCacheRefresh()},ut.use=function(L){return ve.H.use(L)},ut.useActionState=function(L,le,Ne){return ve.H.useActionState(L,le,Ne)},ut.useCallback=function(L,le){return ve.H.useCallback(L,le)},ut.useContext=function(L){return ve.H.useContext(L)},ut.useDebugValue=function(){},ut.useDeferredValue=function(L,le){return ve.H.useDeferredValue(L,le)},ut.useEffect=function(L,le,Ne){var xe=ve.H;if(typeof Ne=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return xe.useEffect(L,le)},ut.useId=function(){return ve.H.useId()},ut.useImperativeHandle=function(L,le,Ne){return ve.H.useImperativeHandle(L,le,Ne)},ut.useInsertionEffect=function(L,le){return ve.H.useInsertionEffect(L,le)},ut.useLayoutEffect=function(L,le){return ve.H.useLayoutEffect(L,le)},ut.useMemo=function(L,le){return ve.H.useMemo(L,le)},ut.useOptimistic=function(L,le){return ve.H.useOptimistic(L,le)},ut.useReducer=function(L,le,Ne){return ve.H.useReducer(L,le,Ne)},ut.useRef=function(L){return ve.H.useRef(L)},ut.useState=function(L){return ve.H.useState(L)},ut.useSyncExternalStore=function(L,le,Ne){return ve.H.useSyncExternalStore(L,le,Ne)},ut.useTransition=function(){return ve.H.useTransition()},ut.version="19.1.0",ut}var zy;function dp(){return zy||(zy=1,gh.exports=AS()),gh.exports}var Pe=dp();const rn=Mu(Pe);var yh={exports:{}},su={},vh={exports:{}},bh={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ly;function _S(){return Ly||(Ly=1,function(r){function e(te,ke){var Ke=te.length;te.push(ke);e:for(;0<Ke;){var vt=Ke-1>>>1,L=te[vt];if(0<o(L,ke))te[vt]=ke,te[Ke]=L,Ke=vt;else break e}}function t(te){return te.length===0?null:te[0]}function i(te){if(te.length===0)return null;var ke=te[0],Ke=te.pop();if(Ke!==ke){te[0]=Ke;e:for(var vt=0,L=te.length,le=L>>>1;vt<le;){var Ne=2*(vt+1)-1,xe=te[Ne],Ge=Ne+1,ft=te[Ge];if(0>o(xe,Ke))Ge<L&&0>o(ft,xe)?(te[vt]=ft,te[Ge]=Ke,vt=Ge):(te[vt]=xe,te[Ne]=Ke,vt=Ne);else if(Ge<L&&0>o(ft,Ke))te[vt]=ft,te[Ge]=Ke,vt=Ge;else break e}}return ke}function o(te,ke){var Ke=te.sortIndex-ke.sortIndex;return Ke!==0?Ke:te.id-ke.id}if(r.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var a=performance;r.unstable_now=function(){return a.now()}}else{var u=Date,f=u.now();r.unstable_now=function(){return u.now()-f}}var h=[],m=[],v=1,S=null,w=3,O=!1,T=!1,A=!1,R=!1,W=typeof setTimeout=="function"?setTimeout:null,Te=typeof clearTimeout=="function"?clearTimeout:null,_e=typeof setImmediate<"u"?setImmediate:null;function Le(te){for(var ke=t(m);ke!==null;){if(ke.callback===null)i(m);else if(ke.startTime<=te)i(m),ke.sortIndex=ke.expirationTime,e(h,ke);else break;ke=t(m)}}function ve(te){if(A=!1,Le(te),!T)if(t(h)!==null)T=!0,Re||(Re=!0,jt());else{var ke=t(m);ke!==null&&Xt(ve,ke.startTime-te)}}var Re=!1,Fe=-1,me=5,Ce=-1;function St(){return R?!0:!(r.unstable_now()-Ce<me)}function sn(){if(R=!1,Re){var te=r.unstable_now();Ce=te;var ke=!0;try{e:{T=!1,A&&(A=!1,Te(Fe),Fe=-1),O=!0;var Ke=w;try{t:{for(Le(te),S=t(h);S!==null&&!(S.expirationTime>te&&St());){var vt=S.callback;if(typeof vt=="function"){S.callback=null,w=S.priorityLevel;var L=vt(S.expirationTime<=te);if(te=r.unstable_now(),typeof L=="function"){S.callback=L,Le(te),ke=!0;break t}S===t(h)&&i(h),Le(te)}else i(h);S=t(h)}if(S!==null)ke=!0;else{var le=t(m);le!==null&&Xt(ve,le.startTime-te),ke=!1}}break e}finally{S=null,w=Ke,O=!1}ke=void 0}}finally{ke?jt():Re=!1}}}var jt;if(typeof _e=="function")jt=function(){_e(sn)};else if(typeof MessageChannel<"u"){var Ln=new MessageChannel,ir=Ln.port2;Ln.port1.onmessage=sn,jt=function(){ir.postMessage(null)}}else jt=function(){W(sn,0)};function Xt(te,ke){Fe=W(function(){te(r.unstable_now())},ke)}r.unstable_IdlePriority=5,r.unstable_ImmediatePriority=1,r.unstable_LowPriority=4,r.unstable_NormalPriority=3,r.unstable_Profiling=null,r.unstable_UserBlockingPriority=2,r.unstable_cancelCallback=function(te){te.callback=null},r.unstable_forceFrameRate=function(te){0>te||125<te?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):me=0<te?Math.floor(1e3/te):5},r.unstable_getCurrentPriorityLevel=function(){return w},r.unstable_next=function(te){switch(w){case 1:case 2:case 3:var ke=3;break;default:ke=w}var Ke=w;w=ke;try{return te()}finally{w=Ke}},r.unstable_requestPaint=function(){R=!0},r.unstable_runWithPriority=function(te,ke){switch(te){case 1:case 2:case 3:case 4:case 5:break;default:te=3}var Ke=w;w=te;try{return ke()}finally{w=Ke}},r.unstable_scheduleCallback=function(te,ke,Ke){var vt=r.unstable_now();switch(typeof Ke=="object"&&Ke!==null?(Ke=Ke.delay,Ke=typeof Ke=="number"&&0<Ke?vt+Ke:vt):Ke=vt,te){case 1:var L=-1;break;case 2:L=250;break;case 5:L=1073741823;break;case 4:L=1e4;break;default:L=5e3}return L=Ke+L,te={id:v++,callback:ke,priorityLevel:te,startTime:Ke,expirationTime:L,sortIndex:-1},Ke>vt?(te.sortIndex=Ke,e(m,te),t(h)===null&&te===t(m)&&(A?(Te(Fe),Fe=-1):A=!0,Xt(ve,Ke-vt))):(te.sortIndex=L,e(h,te),T||O||(T=!0,Re||(Re=!0,jt()))),te},r.unstable_shouldYield=St,r.unstable_wrapCallback=function(te){var ke=w;return function(){var Ke=w;w=ke;try{return te.apply(this,arguments)}finally{w=Ke}}}}(bh)),bh}var jy;function NS(){return jy||(jy=1,vh.exports=_S()),vh.exports}var Sh={exports:{}},Zn={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Hy;function DS(){if(Hy)return Zn;Hy=1;var r=dp();function e(h){var m="https://react.dev/errors/"+h;if(1<arguments.length){m+="?args[]="+encodeURIComponent(arguments[1]);for(var v=2;v<arguments.length;v++)m+="&args[]="+encodeURIComponent(arguments[v])}return"Minified React error #"+h+"; visit "+m+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function t(){}var i={d:{f:t,r:function(){throw Error(e(522))},D:t,C:t,L:t,m:t,X:t,S:t,M:t},p:0,findDOMNode:null},o=Symbol.for("react.portal");function a(h,m,v){var S=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:o,key:S==null?null:""+S,children:h,containerInfo:m,implementation:v}}var u=r.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function f(h,m){if(h==="font")return"";if(typeof m=="string")return m==="use-credentials"?m:""}return Zn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=i,Zn.createPortal=function(h,m){var v=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!m||m.nodeType!==1&&m.nodeType!==9&&m.nodeType!==11)throw Error(e(299));return a(h,m,null,v)},Zn.flushSync=function(h){var m=u.T,v=i.p;try{if(u.T=null,i.p=2,h)return h()}finally{u.T=m,i.p=v,i.d.f()}},Zn.preconnect=function(h,m){typeof h=="string"&&(m?(m=m.crossOrigin,m=typeof m=="string"?m==="use-credentials"?m:"":void 0):m=null,i.d.C(h,m))},Zn.prefetchDNS=function(h){typeof h=="string"&&i.d.D(h)},Zn.preinit=function(h,m){if(typeof h=="string"&&m&&typeof m.as=="string"){var v=m.as,S=f(v,m.crossOrigin),w=typeof m.integrity=="string"?m.integrity:void 0,O=typeof m.fetchPriority=="string"?m.fetchPriority:void 0;v==="style"?i.d.S(h,typeof m.precedence=="string"?m.precedence:void 0,{crossOrigin:S,integrity:w,fetchPriority:O}):v==="script"&&i.d.X(h,{crossOrigin:S,integrity:w,fetchPriority:O,nonce:typeof m.nonce=="string"?m.nonce:void 0})}},Zn.preinitModule=function(h,m){if(typeof h=="string")if(typeof m=="object"&&m!==null){if(m.as==null||m.as==="script"){var v=f(m.as,m.crossOrigin);i.d.M(h,{crossOrigin:v,integrity:typeof m.integrity=="string"?m.integrity:void 0,nonce:typeof m.nonce=="string"?m.nonce:void 0})}}else m==null&&i.d.M(h)},Zn.preload=function(h,m){if(typeof h=="string"&&typeof m=="object"&&m!==null&&typeof m.as=="string"){var v=m.as,S=f(v,m.crossOrigin);i.d.L(h,v,{crossOrigin:S,integrity:typeof m.integrity=="string"?m.integrity:void 0,nonce:typeof m.nonce=="string"?m.nonce:void 0,type:typeof m.type=="string"?m.type:void 0,fetchPriority:typeof m.fetchPriority=="string"?m.fetchPriority:void 0,referrerPolicy:typeof m.referrerPolicy=="string"?m.referrerPolicy:void 0,imageSrcSet:typeof m.imageSrcSet=="string"?m.imageSrcSet:void 0,imageSizes:typeof m.imageSizes=="string"?m.imageSizes:void 0,media:typeof m.media=="string"?m.media:void 0})}},Zn.preloadModule=function(h,m){if(typeof h=="string")if(m){var v=f(m.as,m.crossOrigin);i.d.m(h,{as:typeof m.as=="string"&&m.as!=="script"?m.as:void 0,crossOrigin:v,integrity:typeof m.integrity=="string"?m.integrity:void 0})}else i.d.m(h)},Zn.requestFormReset=function(h){i.d.r(h)},Zn.unstable_batchedUpdates=function(h,m){return h(m)},Zn.useFormState=function(h,m,v){return u.H.useFormState(h,m,v)},Zn.useFormStatus=function(){return u.H.useHostTransitionStatus()},Zn.version="19.1.0",Zn}var qy;function cv(){if(qy)return Sh.exports;qy=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(e){console.error(e)}}return r(),Sh.exports=DS(),Sh.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Uy;function RS(){if(Uy)return su;Uy=1;var r=NS(),e=dp(),t=cv();function i(n){var s="https://react.dev/errors/"+n;if(1<arguments.length){s+="?args[]="+encodeURIComponent(arguments[1]);for(var l=2;l<arguments.length;l++)s+="&args[]="+encodeURIComponent(arguments[l])}return"Minified React error #"+n+"; visit "+s+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function o(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function a(n){var s=n,l=n;if(n.alternate)for(;s.return;)s=s.return;else{n=s;do s=n,(s.flags&4098)!==0&&(l=s.return),n=s.return;while(n)}return s.tag===3?l:null}function u(n){if(n.tag===13){var s=n.memoizedState;if(s===null&&(n=n.alternate,n!==null&&(s=n.memoizedState)),s!==null)return s.dehydrated}return null}function f(n){if(a(n)!==n)throw Error(i(188))}function h(n){var s=n.alternate;if(!s){if(s=a(n),s===null)throw Error(i(188));return s!==n?null:n}for(var l=n,c=s;;){var p=l.return;if(p===null)break;var y=p.alternate;if(y===null){if(c=p.return,c!==null){l=c;continue}break}if(p.child===y.child){for(y=p.child;y;){if(y===l)return f(p),n;if(y===c)return f(p),s;y=y.sibling}throw Error(i(188))}if(l.return!==c.return)l=p,c=y;else{for(var E=!1,C=p.child;C;){if(C===l){E=!0,l=p,c=y;break}if(C===c){E=!0,c=p,l=y;break}C=C.sibling}if(!E){for(C=y.child;C;){if(C===l){E=!0,l=y,c=p;break}if(C===c){E=!0,c=y,l=p;break}C=C.sibling}if(!E)throw Error(i(189))}}if(l.alternate!==c)throw Error(i(190))}if(l.tag!==3)throw Error(i(188));return l.stateNode.current===l?n:s}function m(n){var s=n.tag;if(s===5||s===26||s===27||s===6)return n;for(n=n.child;n!==null;){if(s=m(n),s!==null)return s;n=n.sibling}return null}var v=Object.assign,S=Symbol.for("react.element"),w=Symbol.for("react.transitional.element"),O=Symbol.for("react.portal"),T=Symbol.for("react.fragment"),A=Symbol.for("react.strict_mode"),R=Symbol.for("react.profiler"),W=Symbol.for("react.provider"),Te=Symbol.for("react.consumer"),_e=Symbol.for("react.context"),Le=Symbol.for("react.forward_ref"),ve=Symbol.for("react.suspense"),Re=Symbol.for("react.suspense_list"),Fe=Symbol.for("react.memo"),me=Symbol.for("react.lazy"),Ce=Symbol.for("react.activity"),St=Symbol.for("react.memo_cache_sentinel"),sn=Symbol.iterator;function jt(n){return n===null||typeof n!="object"?null:(n=sn&&n[sn]||n["@@iterator"],typeof n=="function"?n:null)}var Ln=Symbol.for("react.client.reference");function ir(n){if(n==null)return null;if(typeof n=="function")return n.$$typeof===Ln?null:n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case T:return"Fragment";case R:return"Profiler";case A:return"StrictMode";case ve:return"Suspense";case Re:return"SuspenseList";case Ce:return"Activity"}if(typeof n=="object")switch(n.$$typeof){case O:return"Portal";case _e:return(n.displayName||"Context")+".Provider";case Te:return(n._context.displayName||"Context")+".Consumer";case Le:var s=n.render;return n=n.displayName,n||(n=s.displayName||s.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case Fe:return s=n.displayName||null,s!==null?s:ir(n.type)||"Memo";case me:s=n._payload,n=n._init;try{return ir(n(s))}catch{}}return null}var Xt=Array.isArray,te=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ke=t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Ke={pending:!1,data:null,method:null,action:null},vt=[],L=-1;function le(n){return{current:n}}function Ne(n){0>L||(n.current=vt[L],vt[L]=null,L--)}function xe(n,s){L++,vt[L]=n.current,n.current=s}var Ge=le(null),ft=le(null),Qe=le(null),gn=le(null);function Nt(n,s){switch(xe(Qe,s),xe(ft,n),xe(Ge,null),s.nodeType){case 9:case 11:n=(n=s.documentElement)&&(n=n.namespaceURI)?oy(n):0;break;default:if(n=s.tagName,s=s.namespaceURI)s=oy(s),n=ly(s,n);else switch(n){case"svg":n=1;break;case"math":n=2;break;default:n=0}}Ne(Ge),xe(Ge,n)}function Ve(){Ne(Ge),Ne(ft),Ne(Qe)}function oi(n){n.memoizedState!==null&&xe(gn,n);var s=Ge.current,l=ly(s,n.type);s!==l&&(xe(ft,n),xe(Ge,l))}function li(n){ft.current===n&&(Ne(Ge),Ne(ft)),gn.current===n&&(Ne(gn),Wa._currentValue=Ke)}var xt=Object.prototype.hasOwnProperty,ai=r.unstable_scheduleCallback,uo=r.unstable_cancelCallback,ui=r.unstable_shouldYield,sa=r.unstable_requestPaint,pr=r.unstable_now,oa=r.unstable_getCurrentPriorityLevel,Jo=r.unstable_ImmediatePriority,Ki=r.unstable_UserBlockingPriority,jn=r.unstable_NormalPriority,Zo=r.unstable_LowPriority,ci=r.unstable_IdlePriority,qr=r.log,Ti=r.unstable_setDisableYieldValue,on=null,Ht=null;function sr(n){if(typeof qr=="function"&&Ti(n),Ht&&typeof Ht.setStrictMode=="function")try{Ht.setStrictMode(on,n)}catch{}}var Wt=Math.clz32?Math.clz32:fi,co=Math.log,vs=Math.LN2;function fi(n){return n>>>=0,n===0?32:31-(co(n)/vs|0)|0}var di=256,hi=4194304;function Mn(n){var s=n&42;if(s!==0)return s;switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return n&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return n}}function je(n,s,l){var c=n.pendingLanes;if(c===0)return 0;var p=0,y=n.suspendedLanes,E=n.pingedLanes;n=n.warmLanes;var C=c&134217727;return C!==0?(c=C&~y,c!==0?p=Mn(c):(E&=C,E!==0?p=Mn(E):l||(l=C&~n,l!==0&&(p=Mn(l))))):(C=c&~y,C!==0?p=Mn(C):E!==0?p=Mn(E):l||(l=c&~n,l!==0&&(p=Mn(l)))),p===0?0:s!==0&&s!==p&&(s&y)===0&&(y=p&-p,l=s&-s,y>=l||y===32&&(l&4194048)!==0)?s:p}function wr(n,s){return(n.pendingLanes&~(n.suspendedLanes&~n.pingedLanes)&s)===0}function Tr(n,s){switch(n){case 1:case 2:case 4:case 8:case 64:return s+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Oi(){var n=di;return di<<=1,(di&4194048)===0&&(di=256),n}function we(){var n=hi;return hi<<=1,(hi&62914560)===0&&(hi=4194304),n}function Pi(n){for(var s=[],l=0;31>l;l++)s.push(n);return s}function pi(n,s){n.pendingLanes|=s,s!==268435456&&(n.suspendedLanes=0,n.pingedLanes=0,n.warmLanes=0)}function Ur(n,s,l,c,p,y){var E=n.pendingLanes;n.pendingLanes=l,n.suspendedLanes=0,n.pingedLanes=0,n.warmLanes=0,n.expiredLanes&=l,n.entangledLanes&=l,n.errorRecoveryDisabledLanes&=l,n.shellSuspendCounter=0;var C=n.entanglements,D=n.expirationTimes,X=n.hiddenUpdates;for(l=E&~l;0<l;){var re=31-Wt(l),oe=1<<re;C[re]=0,D[re]=-1;var Q=X[re];if(Q!==null)for(X[re]=null,re=0;re<Q.length;re++){var J=Q[re];J!==null&&(J.lane&=-536870913)}l&=~oe}c!==0&&z(n,c,0),y!==0&&p===0&&n.tag!==0&&(n.suspendedLanes|=y&~(E&~s))}function z(n,s,l){n.pendingLanes|=s,n.suspendedLanes&=~s;var c=31-Wt(s);n.entangledLanes|=s,n.entanglements[c]=n.entanglements[c]|1073741824|l&4194090}function ie(n,s){var l=n.entangledLanes|=s;for(n=n.entanglements;l;){var c=31-Wt(l),p=1<<c;p&s|n[c]&s&&(n[c]|=s),l&=~p}}function Se(n){switch(n){case 2:n=1;break;case 8:n=4;break;case 32:n=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:n=128;break;case 268435456:n=134217728;break;default:n=0}return n}function We(n){return n&=-n,2<n?8<n?(n&134217727)!==0?32:268435456:8:2}function Ot(){var n=ke.p;return n!==0?n:(n=window.event,n===void 0?32:Oy(n.type))}function Ct(n,s){var l=ke.p;try{return ke.p=n,s()}finally{ke.p=l}}var Ae=Math.random().toString(36).slice(2),ge="__reactFiber$"+Ae,ye="__reactProps$"+Ae,lt="__reactContainer$"+Ae,qt="__reactEvents$"+Ae,Vr="__reactListeners$"+Ae,ki="__reactHandles$"+Ae,mi="__reactResources$"+Ae,Yi="__reactMarker$"+Ae;function Gn(n){delete n[ge],delete n[ye],delete n[qt],delete n[Vr],delete n[ki]}function or(n){var s=n[ge];if(s)return s;for(var l=n.parentNode;l;){if(s=l[lt]||l[ge]){if(l=s.alternate,s.child!==null||l!==null&&l.child!==null)for(n=fy(n);n!==null;){if(l=n[ge])return l;n=fy(n)}return s}n=l,l=n.parentNode}return null}function Hn(n){if(n=n[ge]||n[lt]){var s=n.tag;if(s===5||s===6||s===13||s===26||s===27||s===3)return n}return null}function Ir(n){var s=n.tag;if(s===5||s===26||s===27||s===6)return n.stateNode;throw Error(i(33))}function gi(n){var s=n[mi];return s||(s=n[mi]={hoistableStyles:new Map,hoistableScripts:new Map}),s}function Mt(n){n[Yi]=!0}var fo=new Set,Kr={};function Pr(n,s){yn(n,s),yn(n+"Capture",s)}function yn(n,s){for(Kr[n]=s,n=0;n<s.length;n++)fo.add(s[n])}var Ut=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Or={},mr={};function Wo(n){return xt.call(mr,n)?!0:xt.call(Or,n)?!1:Ut.test(n)?mr[n]=!0:(Or[n]=!0,!1)}function kr(n,s,l){if(Wo(s))if(l===null)n.removeAttribute(s);else{switch(typeof l){case"undefined":case"function":case"symbol":n.removeAttribute(s);return;case"boolean":var c=s.toLowerCase().slice(0,5);if(c!=="data-"&&c!=="aria-"){n.removeAttribute(s);return}}n.setAttribute(s,""+l)}}function gr(n,s,l){if(l===null)n.removeAttribute(s);else{switch(typeof l){case"undefined":case"function":case"symbol":case"boolean":n.removeAttribute(s);return}n.setAttribute(s,""+l)}}function lr(n,s,l,c){if(c===null)n.removeAttribute(l);else{switch(typeof c){case"undefined":case"function":case"symbol":case"boolean":n.removeAttribute(l);return}n.setAttributeNS(s,l,""+c)}}var ce,He;function st(n){if(ce===void 0)try{throw Error()}catch(l){var s=l.stack.trim().match(/\n( *(at )?)/);ce=s&&s[1]||"",He=-1<l.stack.indexOf(`
    at`)?" (<anonymous>)":-1<l.stack.indexOf("@")?"@unknown:0:0":""}return`
`+ce+n+He}var bt=!1;function Vt(n,s){if(!n||bt)return"";bt=!0;var l=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var c={DetermineComponentFrameRoot:function(){try{if(s){var oe=function(){throw Error()};if(Object.defineProperty(oe.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(oe,[])}catch(J){var Q=J}Reflect.construct(n,[],oe)}else{try{oe.call()}catch(J){Q=J}n.call(oe.prototype)}}else{try{throw Error()}catch(J){Q=J}(oe=n())&&typeof oe.catch=="function"&&oe.catch(function(){})}}catch(J){if(J&&Q&&typeof J.stack=="string")return[J.stack,Q.stack]}return[null,null]}};c.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var p=Object.getOwnPropertyDescriptor(c.DetermineComponentFrameRoot,"name");p&&p.configurable&&Object.defineProperty(c.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var y=c.DetermineComponentFrameRoot(),E=y[0],C=y[1];if(E&&C){var D=E.split(`
`),X=C.split(`
`);for(p=c=0;c<D.length&&!D[c].includes("DetermineComponentFrameRoot");)c++;for(;p<X.length&&!X[p].includes("DetermineComponentFrameRoot");)p++;if(c===D.length||p===X.length)for(c=D.length-1,p=X.length-1;1<=c&&0<=p&&D[c]!==X[p];)p--;for(;1<=c&&0<=p;c--,p--)if(D[c]!==X[p]){if(c!==1||p!==1)do if(c--,p--,0>p||D[c]!==X[p]){var re=`
`+D[c].replace(" at new "," at ");return n.displayName&&re.includes("<anonymous>")&&(re=re.replace("<anonymous>",n.displayName)),re}while(1<=c&&0<=p);break}}}finally{bt=!1,Error.prepareStackTrace=l}return(l=n?n.displayName||n.name:"")?st(l):""}function tt(n){switch(n.tag){case 26:case 27:case 5:return st(n.type);case 16:return st("Lazy");case 13:return st("Suspense");case 19:return st("SuspenseList");case 0:case 15:return Vt(n.type,!1);case 11:return Vt(n.type.render,!1);case 1:return Vt(n.type,!0);case 31:return st("Activity");default:return""}}function yr(n){try{var s="";do s+=tt(n),n=n.return;while(n);return s}catch(l){return`
Error generating stack: `+l.message+`
`+l.stack}}function ln(n){switch(typeof n){case"bigint":case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function vn(n){var s=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(s==="checkbox"||s==="radio")}function pt(n){var s=vn(n)?"checked":"value",l=Object.getOwnPropertyDescriptor(n.constructor.prototype,s),c=""+n[s];if(!n.hasOwnProperty(s)&&typeof l<"u"&&typeof l.get=="function"&&typeof l.set=="function"){var p=l.get,y=l.set;return Object.defineProperty(n,s,{configurable:!0,get:function(){return p.call(this)},set:function(E){c=""+E,y.call(this,E)}}),Object.defineProperty(n,s,{enumerable:l.enumerable}),{getValue:function(){return c},setValue:function(E){c=""+E},stopTracking:function(){n._valueTracker=null,delete n[s]}}}}function Cr(n){n._valueTracker||(n._valueTracker=pt(n))}function yi(n){if(!n)return!1;var s=n._valueTracker;if(!s)return!0;var l=s.getValue(),c="";return n&&(c=vn(n)?n.checked?"true":"false":n.value),n=c,n!==l?(s.setValue(n),!0):!1}function vr(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}var ho=/[\n"\\]/g;function wn(n){return n.replace(ho,function(s){return"\\"+s.charCodeAt(0).toString(16)+" "})}function Ci(n,s,l,c,p,y,E,C){n.name="",E!=null&&typeof E!="function"&&typeof E!="symbol"&&typeof E!="boolean"?n.type=E:n.removeAttribute("type"),s!=null?E==="number"?(s===0&&n.value===""||n.value!=s)&&(n.value=""+ln(s)):n.value!==""+ln(s)&&(n.value=""+ln(s)):E!=="submit"&&E!=="reset"||n.removeAttribute("value"),s!=null?Ar(n,E,ln(s)):l!=null?Ar(n,E,ln(l)):c!=null&&n.removeAttribute("value"),p==null&&y!=null&&(n.defaultChecked=!!y),p!=null&&(n.checked=p&&typeof p!="function"&&typeof p!="symbol"),C!=null&&typeof C!="function"&&typeof C!="symbol"&&typeof C!="boolean"?n.name=""+ln(C):n.removeAttribute("name")}function po(n,s,l,c,p,y,E,C){if(y!=null&&typeof y!="function"&&typeof y!="symbol"&&typeof y!="boolean"&&(n.type=y),s!=null||l!=null){if(!(y!=="submit"&&y!=="reset"||s!=null))return;l=l!=null?""+ln(l):"",s=s!=null?""+ln(s):l,C||s===n.value||(n.value=s),n.defaultValue=s}c=c??p,c=typeof c!="function"&&typeof c!="symbol"&&!!c,n.checked=C?n.checked:!!c,n.defaultChecked=!!c,E!=null&&typeof E!="function"&&typeof E!="symbol"&&typeof E!="boolean"&&(n.name=E)}function Ar(n,s,l){s==="number"&&vr(n.ownerDocument)===n||n.defaultValue===""+l||(n.defaultValue=""+l)}function Yr(n,s,l,c){if(n=n.options,s){s={};for(var p=0;p<l.length;p++)s["$"+l[p]]=!0;for(l=0;l<n.length;l++)p=s.hasOwnProperty("$"+n[l].value),n[l].selected!==p&&(n[l].selected=p),p&&c&&(n[l].defaultSelected=!0)}else{for(l=""+ln(l),s=null,p=0;p<n.length;p++){if(n[p].value===l){n[p].selected=!0,c&&(n[p].defaultSelected=!0);return}s!==null||n[p].disabled||(s=n[p])}s!==null&&(s.selected=!0)}}function bn(n,s,l){if(s!=null&&(s=""+ln(s),s!==n.value&&(n.value=s),l==null)){n.defaultValue!==s&&(n.defaultValue=s);return}n.defaultValue=l!=null?""+ln(l):""}function mo(n,s,l,c){if(s==null){if(c!=null){if(l!=null)throw Error(i(92));if(Xt(c)){if(1<c.length)throw Error(i(93));c=c[0]}l=c}l==null&&(l=""),s=l}l=ln(s),n.defaultValue=l,c=n.textContent,c===l&&c!==""&&c!==null&&(n.value=c)}function Gr(n,s){if(s){var l=n.firstChild;if(l&&l===n.lastChild&&l.nodeType===3){l.nodeValue=s;return}}n.textContent=s}var Oe=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Gi(n,s,l){var c=s.indexOf("--")===0;l==null||typeof l=="boolean"||l===""?c?n.setProperty(s,""):s==="float"?n.cssFloat="":n[s]="":c?n.setProperty(s,l):typeof l!="number"||l===0||Oe.has(s)?s==="float"?n.cssFloat=l:n[s]=(""+l).trim():n[s]=l+"px"}function Ft(n,s,l){if(s!=null&&typeof s!="object")throw Error(i(62));if(n=n.style,l!=null){for(var c in l)!l.hasOwnProperty(c)||s!=null&&s.hasOwnProperty(c)||(c.indexOf("--")===0?n.setProperty(c,""):c==="float"?n.cssFloat="":n[c]="");for(var p in s)c=s[p],s.hasOwnProperty(p)&&l[p]!==c&&Gi(n,p,c)}else for(var y in s)s.hasOwnProperty(y)&&Gi(n,y,s[y])}function wt(n){if(n.indexOf("-")===-1)return!1;switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var an=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),$n=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function _r(n){return $n.test(""+n)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":n}var Xn=null;function Me(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var ze=null,qe=null;function at(n){var s=Hn(n);if(s&&(n=s.stateNode)){var l=n[ye]||null;e:switch(n=s.stateNode,s.type){case"input":if(Ci(n,l.value,l.defaultValue,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name),s=l.name,l.type==="radio"&&s!=null){for(l=n;l.parentNode;)l=l.parentNode;for(l=l.querySelectorAll('input[name="'+wn(""+s)+'"][type="radio"]'),s=0;s<l.length;s++){var c=l[s];if(c!==n&&c.form===n.form){var p=c[ye]||null;if(!p)throw Error(i(90));Ci(c,p.value,p.defaultValue,p.defaultValue,p.checked,p.defaultChecked,p.type,p.name)}}for(s=0;s<l.length;s++)c=l[s],c.form===n.form&&yi(c)}break e;case"textarea":bn(n,l.value,l.defaultValue);break e;case"select":s=l.value,s!=null&&Yr(n,!!l.multiple,s,!1)}}}var It=!1;function Tn(n,s,l){if(It)return n(s,l);It=!0;try{var c=n(s);return c}finally{if(It=!1,(ze!==null||qe!==null)&&(pc(),ze&&(s=ze,n=qe,qe=ze=null,at(s),n)))for(s=0;s<n.length;s++)at(n[s])}}function vi(n,s){var l=n.stateNode;if(l===null)return null;var c=l[ye]||null;if(c===null)return null;l=c[s];e:switch(s){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(c=!c.disabled)||(n=n.type,c=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!c;break e;default:n=!1}if(n)return null;if(l&&typeof l!="function")throw Error(i(231,s,typeof l));return l}var un=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),la=!1;if(un)try{var Fn={};Object.defineProperty(Fn,"passive",{get:function(){la=!0}}),window.addEventListener("test",Fn,Fn),window.removeEventListener("test",Fn,Fn)}catch{la=!1}var $r=null,el=null,bs=null;function Ss(){if(bs)return bs;var n,s=el,l=s.length,c,p="value"in $r?$r.value:$r.textContent,y=p.length;for(n=0;n<l&&s[n]===p[n];n++);var E=l-n;for(c=1;c<=E&&s[l-c]===p[y-c];c++);return bs=p.slice(n,1<c?1-c:void 0)}function xs(n){var s=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&s===13&&(n=13)):n=s,n===10&&(n=13),32<=n||n===13?n:0}function go(){return!0}function ku(){return!1}function cn(n){function s(l,c,p,y,E){this._reactName=l,this._targetInst=p,this.type=c,this.nativeEvent=y,this.target=E,this.currentTarget=null;for(var C in n)n.hasOwnProperty(C)&&(l=n[C],this[C]=l?l(y):y[C]);return this.isDefaultPrevented=(y.defaultPrevented!=null?y.defaultPrevented:y.returnValue===!1)?go:ku,this.isPropagationStopped=ku,this}return v(s.prototype,{preventDefault:function(){this.defaultPrevented=!0;var l=this.nativeEvent;l&&(l.preventDefault?l.preventDefault():typeof l.returnValue!="unknown"&&(l.returnValue=!1),this.isDefaultPrevented=go)},stopPropagation:function(){var l=this.nativeEvent;l&&(l.stopPropagation?l.stopPropagation():typeof l.cancelBubble!="unknown"&&(l.cancelBubble=!0),this.isPropagationStopped=go)},persist:function(){},isPersistent:go}),s}var $i={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},tl=cn($i),Ai=v({},$i,{view:0,detail:0}),nl=cn(Ai),yo,aa,vo,rl=v({},Ai,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Xi,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==vo&&(vo&&n.type==="mousemove"?(yo=n.screenX-vo.screenX,aa=n.screenY-vo.screenY):aa=yo=0,vo=n),yo)},movementY:function(n){return"movementY"in n?n.movementY:aa}}),il=cn(rl),ua=v({},rl,{dataTransfer:0}),Cu=cn(ua),sl=v({},Ai,{relatedTarget:0}),Es=cn(sl),ol=v({},$i,{animationName:0,elapsedTime:0,pseudoElement:0}),Au=cn(ol),Cf=v({},$i,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),ll=cn(Cf),ca=v({},$i,{data:0}),al=cn(ca),fa={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},da={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},On={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function bo(n){var s=this.nativeEvent;return s.getModifierState?s.getModifierState(n):(n=On[n])?!!s[n]:!1}function Xi(){return bo}var _u=v({},Ai,{key:function(n){if(n.key){var s=fa[n.key]||n.key;if(s!=="Unidentified")return s}return n.type==="keypress"?(n=xs(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?da[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Xi,charCode:function(n){return n.type==="keypress"?xs(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?xs(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),ul=cn(_u),Nu=v({},rl,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),ha=cn(Nu),cl=v({},Ai,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Xi}),pa=cn(cl),Fi=v({},$i,{propertyName:0,elapsedTime:0,pseudoElement:0}),ma=cn(Fi),ga=v({},rl,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),fl=cn(ga),ya=v({},$i,{newState:0,oldState:0}),Du=cn(ya),Af=[9,13,27,32],So=un&&"CompositionEvent"in window,_i=null;un&&"documentMode"in document&&(_i=document.documentMode);var _f=un&&"TextEvent"in window&&!_i,dl=un&&(!So||_i&&8<_i&&11>=_i),hl=" ",Ru=!1;function va(n,s){switch(n){case"keyup":return Af.indexOf(s.keyCode)!==-1;case"keydown":return s.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Bu(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var Qi=!1;function zu(n,s){switch(n){case"compositionend":return Bu(s);case"keypress":return s.which!==32?null:(Ru=!0,hl);case"textInput":return n=s.data,n===hl&&Ru?null:n;default:return null}}function Nf(n,s){if(Qi)return n==="compositionend"||!So&&va(n,s)?(n=Ss(),bs=el=$r=null,Qi=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(s.ctrlKey||s.altKey||s.metaKey)||s.ctrlKey&&s.altKey){if(s.char&&1<s.char.length)return s.char;if(s.which)return String.fromCharCode(s.which)}return null;case"compositionend":return dl&&s.locale!=="ko"?null:s.data;default:return null}}var Lu={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function pl(n){var s=n&&n.nodeName&&n.nodeName.toLowerCase();return s==="input"?!!Lu[n.type]:s==="textarea"}function ba(n,s,l,c){ze?qe?qe.push(c):qe=[c]:ze=c,s=Sc(s,"onChange"),0<s.length&&(l=new tl("onChange","change",null,l,c),n.push({event:l,listeners:s}))}var Ms=null,xo=null;function Df(n){ty(n,0)}function ml(n){var s=Ir(n);if(yi(s))return n}function Eo(n,s){if(n==="change")return s}var Xr=!1;if(un){var Yt;if(un){var ws="oninput"in document;if(!ws){var ar=document.createElement("div");ar.setAttribute("oninput","return;"),ws=typeof ar.oninput=="function"}Yt=ws}else Yt=!1;Xr=Yt&&(!document.documentMode||9<document.documentMode)}function ju(){Ms&&(Ms.detachEvent("onpropertychange",gl),xo=Ms=null)}function gl(n){if(n.propertyName==="value"&&ml(xo)){var s=[];ba(s,xo,n,Me(n)),Tn(Df,s)}}function Hu(n,s,l){n==="focusin"?(ju(),Ms=s,xo=l,Ms.attachEvent("onpropertychange",gl)):n==="focusout"&&ju()}function Ji(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return ml(xo)}function Sa(n,s){if(n==="click")return ml(s)}function Ts(n,s){if(n==="input"||n==="change")return ml(s)}function Ni(n,s){return n===s&&(n!==0||1/n===1/s)||n!==n&&s!==s}var Qn=typeof Object.is=="function"?Object.is:Ni;function d(n,s){if(Qn(n,s))return!0;if(typeof n!="object"||n===null||typeof s!="object"||s===null)return!1;var l=Object.keys(n),c=Object.keys(s);if(l.length!==c.length)return!1;for(c=0;c<l.length;c++){var p=l[c];if(!xt.call(s,p)||!Qn(n[p],s[p]))return!1}return!0}function g(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function b(n,s){var l=g(n);n=0;for(var c;l;){if(l.nodeType===3){if(c=n+l.textContent.length,n<=s&&c>=s)return{node:l,offset:s-n};n=c}e:{for(;l;){if(l.nextSibling){l=l.nextSibling;break e}l=l.parentNode}l=void 0}l=g(l)}}function x(n,s){return n&&s?n===s?!0:n&&n.nodeType===3?!1:s&&s.nodeType===3?x(n,s.parentNode):"contains"in n?n.contains(s):n.compareDocumentPosition?!!(n.compareDocumentPosition(s)&16):!1:!1}function M(n){n=n!=null&&n.ownerDocument!=null&&n.ownerDocument.defaultView!=null?n.ownerDocument.defaultView:window;for(var s=vr(n.document);s instanceof n.HTMLIFrameElement;){try{var l=typeof s.contentWindow.location.href=="string"}catch{l=!1}if(l)n=s.contentWindow;else break;s=vr(n.document)}return s}function k(n){var s=n&&n.nodeName&&n.nodeName.toLowerCase();return s&&(s==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||s==="textarea"||n.contentEditable==="true")}var _=un&&"documentMode"in document&&11>=document.documentMode,N=null,H=null,U=null,K=!1;function B(n,s,l){var c=l.window===l?l.document:l.nodeType===9?l:l.ownerDocument;K||N==null||N!==vr(c)||(c=N,"selectionStart"in c&&k(c)?c={start:c.selectionStart,end:c.selectionEnd}:(c=(c.ownerDocument&&c.ownerDocument.defaultView||window).getSelection(),c={anchorNode:c.anchorNode,anchorOffset:c.anchorOffset,focusNode:c.focusNode,focusOffset:c.focusOffset}),U&&d(U,c)||(U=c,c=Sc(H,"onSelect"),0<c.length&&(s=new tl("onSelect","select",null,s,l),n.push({event:s,listeners:c}),s.target=N)))}function Y(n,s){var l={};return l[n.toLowerCase()]=s.toLowerCase(),l["Webkit"+n]="webkit"+s,l["Moz"+n]="moz"+s,l}var j={animationend:Y("Animation","AnimationEnd"),animationiteration:Y("Animation","AnimationIteration"),animationstart:Y("Animation","AnimationStart"),transitionrun:Y("Transition","TransitionRun"),transitionstart:Y("Transition","TransitionStart"),transitioncancel:Y("Transition","TransitionCancel"),transitionend:Y("Transition","TransitionEnd")},I={},G={};un&&(G=document.createElement("div").style,"AnimationEvent"in window||(delete j.animationend.animation,delete j.animationiteration.animation,delete j.animationstart.animation),"TransitionEvent"in window||delete j.transitionend.transition);function V(n){if(I[n])return I[n];if(!j[n])return n;var s=j[n],l;for(l in s)if(s.hasOwnProperty(l)&&l in G)return I[n]=s[l];return n}var F=V("animationend"),Z=V("animationiteration"),ee=V("animationstart"),ne=V("transitionrun"),he=V("transitionstart"),be=V("transitioncancel"),fe=V("transitionend"),pe=new Map,Ee="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Ee.push("scrollEnd");function de(n,s){pe.set(n,s),Pr(s,[n])}var Be=new WeakMap;function $e(n,s){if(typeof n=="object"&&n!==null){var l=Be.get(n);return l!==void 0?l:(s={value:n,source:s,stack:yr(s)},Be.set(n,s),s)}return{value:n,source:s,stack:yr(s)}}var Je=[],ot=0,qn=0;function nt(){for(var n=ot,s=qn=ot=0;s<n;){var l=Je[s];Je[s++]=null;var c=Je[s];Je[s++]=null;var p=Je[s];Je[s++]=null;var y=Je[s];if(Je[s++]=null,c!==null&&p!==null){var E=c.pending;E===null?p.next=p:(p.next=E.next,E.next=p),c.pending=p}y!==0&&kn(l,p,y)}}function en(n,s,l,c){Je[ot++]=n,Je[ot++]=s,Je[ot++]=l,Je[ot++]=c,qn|=c,n.lanes|=c,n=n.alternate,n!==null&&(n.lanes|=c)}function fn(n,s,l,c){return en(n,s,l,c),Fr(n)}function bi(n,s){return en(n,null,null,s),Fr(n)}function kn(n,s,l){n.lanes|=l;var c=n.alternate;c!==null&&(c.lanes|=l);for(var p=!1,y=n.return;y!==null;)y.childLanes|=l,c=y.alternate,c!==null&&(c.childLanes|=l),y.tag===22&&(n=y.stateNode,n===null||n._visibility&1||(p=!0)),n=y,y=y.return;return n.tag===3?(y=n.stateNode,p&&s!==null&&(p=31-Wt(l),n=y.hiddenUpdates,c=n[p],c===null?n[p]=[s]:c.push(s),s.lane=l|536870912),y):null}function Fr(n){if(50<Ya)throw Ya=0,Hd=null,Error(i(185));for(var s=n.return;s!==null;)n=s,s=n.return;return n.tag===3?n.stateNode:null}var Di={};function u1(n,s,l,c){this.tag=n,this.key=l,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=s,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=c,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Nr(n,s,l,c){return new u1(n,s,l,c)}function Rf(n){return n=n.prototype,!(!n||!n.isReactComponent)}function Zi(n,s){var l=n.alternate;return l===null?(l=Nr(n.tag,s,n.key,n.mode),l.elementType=n.elementType,l.type=n.type,l.stateNode=n.stateNode,l.alternate=n,n.alternate=l):(l.pendingProps=s,l.type=n.type,l.flags=0,l.subtreeFlags=0,l.deletions=null),l.flags=n.flags&65011712,l.childLanes=n.childLanes,l.lanes=n.lanes,l.child=n.child,l.memoizedProps=n.memoizedProps,l.memoizedState=n.memoizedState,l.updateQueue=n.updateQueue,s=n.dependencies,l.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext},l.sibling=n.sibling,l.index=n.index,l.ref=n.ref,l.refCleanup=n.refCleanup,l}function Up(n,s){n.flags&=65011714;var l=n.alternate;return l===null?(n.childLanes=0,n.lanes=s,n.child=null,n.subtreeFlags=0,n.memoizedProps=null,n.memoizedState=null,n.updateQueue=null,n.dependencies=null,n.stateNode=null):(n.childLanes=l.childLanes,n.lanes=l.lanes,n.child=l.child,n.subtreeFlags=0,n.deletions=null,n.memoizedProps=l.memoizedProps,n.memoizedState=l.memoizedState,n.updateQueue=l.updateQueue,n.type=l.type,s=l.dependencies,n.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext}),n}function qu(n,s,l,c,p,y){var E=0;if(c=n,typeof n=="function")Rf(n)&&(E=1);else if(typeof n=="string")E=fS(n,l,Ge.current)?26:n==="html"||n==="head"||n==="body"?27:5;else e:switch(n){case Ce:return n=Nr(31,l,s,p),n.elementType=Ce,n.lanes=y,n;case T:return Mo(l.children,p,y,s);case A:E=8,p|=24;break;case R:return n=Nr(12,l,s,p|2),n.elementType=R,n.lanes=y,n;case ve:return n=Nr(13,l,s,p),n.elementType=ve,n.lanes=y,n;case Re:return n=Nr(19,l,s,p),n.elementType=Re,n.lanes=y,n;default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case W:case _e:E=10;break e;case Te:E=9;break e;case Le:E=11;break e;case Fe:E=14;break e;case me:E=16,c=null;break e}E=29,l=Error(i(130,n===null?"null":typeof n,"")),c=null}return s=Nr(E,l,s,p),s.elementType=n,s.type=c,s.lanes=y,s}function Mo(n,s,l,c){return n=Nr(7,n,c,s),n.lanes=l,n}function Bf(n,s,l){return n=Nr(6,n,null,s),n.lanes=l,n}function zf(n,s,l){return s=Nr(4,n.children!==null?n.children:[],n.key,s),s.lanes=l,s.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},s}var yl=[],vl=0,Uu=null,Vu=0,Qr=[],Jr=0,wo=null,Wi=1,es="";function To(n,s){yl[vl++]=Vu,yl[vl++]=Uu,Uu=n,Vu=s}function Vp(n,s,l){Qr[Jr++]=Wi,Qr[Jr++]=es,Qr[Jr++]=wo,wo=n;var c=Wi;n=es;var p=32-Wt(c)-1;c&=~(1<<p),l+=1;var y=32-Wt(s)+p;if(30<y){var E=p-p%5;y=(c&(1<<E)-1).toString(32),c>>=E,p-=E,Wi=1<<32-Wt(s)+p|l<<p|c,es=y+n}else Wi=1<<y|l<<p|c,es=n}function Lf(n){n.return!==null&&(To(n,1),Vp(n,1,0))}function jf(n){for(;n===Uu;)Uu=yl[--vl],yl[vl]=null,Vu=yl[--vl],yl[vl]=null;for(;n===wo;)wo=Qr[--Jr],Qr[Jr]=null,es=Qr[--Jr],Qr[Jr]=null,Wi=Qr[--Jr],Qr[Jr]=null}var ur=null,Qt=null,kt=!1,Oo=null,Ri=!1,Hf=Error(i(519));function ko(n){var s=Error(i(418,""));throw Ma($e(s,n)),Hf}function Ip(n){var s=n.stateNode,l=n.type,c=n.memoizedProps;switch(s[ge]=n,s[ye]=c,l){case"dialog":yt("cancel",s),yt("close",s);break;case"iframe":case"object":case"embed":yt("load",s);break;case"video":case"audio":for(l=0;l<$a.length;l++)yt($a[l],s);break;case"source":yt("error",s);break;case"img":case"image":case"link":yt("error",s),yt("load",s);break;case"details":yt("toggle",s);break;case"input":yt("invalid",s),po(s,c.value,c.defaultValue,c.checked,c.defaultChecked,c.type,c.name,!0),Cr(s);break;case"select":yt("invalid",s);break;case"textarea":yt("invalid",s),mo(s,c.value,c.defaultValue,c.children),Cr(s)}l=c.children,typeof l!="string"&&typeof l!="number"&&typeof l!="bigint"||s.textContent===""+l||c.suppressHydrationWarning===!0||sy(s.textContent,l)?(c.popover!=null&&(yt("beforetoggle",s),yt("toggle",s)),c.onScroll!=null&&yt("scroll",s),c.onScrollEnd!=null&&yt("scrollend",s),c.onClick!=null&&(s.onclick=xc),s=!0):s=!1,s||ko(n)}function Kp(n){for(ur=n.return;ur;)switch(ur.tag){case 5:case 13:Ri=!1;return;case 27:case 3:Ri=!0;return;default:ur=ur.return}}function xa(n){if(n!==ur)return!1;if(!kt)return Kp(n),kt=!0,!1;var s=n.tag,l;if((l=s!==3&&s!==27)&&((l=s===5)&&(l=n.type,l=!(l!=="form"&&l!=="button")||eh(n.type,n.memoizedProps)),l=!l),l&&Qt&&ko(n),Kp(n),s===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(i(317));e:{for(n=n.nextSibling,s=0;n;){if(n.nodeType===8)if(l=n.data,l==="/$"){if(s===0){Qt=xi(n.nextSibling);break e}s--}else l!=="$"&&l!=="$!"&&l!=="$?"||s++;n=n.nextSibling}Qt=null}}else s===27?(s=Qt,Vs(n.type)?(n=ih,ih=null,Qt=n):Qt=s):Qt=ur?xi(n.stateNode.nextSibling):null;return!0}function Ea(){Qt=ur=null,kt=!1}function Pp(){var n=Oo;return n!==null&&(xr===null?xr=n:xr.push.apply(xr,n),Oo=null),n}function Ma(n){Oo===null?Oo=[n]:Oo.push(n)}var qf=le(null),Co=null,ts=null;function Os(n,s,l){xe(qf,s._currentValue),s._currentValue=l}function ns(n){n._currentValue=qf.current,Ne(qf)}function Uf(n,s,l){for(;n!==null;){var c=n.alternate;if((n.childLanes&s)!==s?(n.childLanes|=s,c!==null&&(c.childLanes|=s)):c!==null&&(c.childLanes&s)!==s&&(c.childLanes|=s),n===l)break;n=n.return}}function Vf(n,s,l,c){var p=n.child;for(p!==null&&(p.return=n);p!==null;){var y=p.dependencies;if(y!==null){var E=p.child;y=y.firstContext;e:for(;y!==null;){var C=y;y=p;for(var D=0;D<s.length;D++)if(C.context===s[D]){y.lanes|=l,C=y.alternate,C!==null&&(C.lanes|=l),Uf(y.return,l,n),c||(E=null);break e}y=C.next}}else if(p.tag===18){if(E=p.return,E===null)throw Error(i(341));E.lanes|=l,y=E.alternate,y!==null&&(y.lanes|=l),Uf(E,l,n),E=null}else E=p.child;if(E!==null)E.return=p;else for(E=p;E!==null;){if(E===n){E=null;break}if(p=E.sibling,p!==null){p.return=E.return,E=p;break}E=E.return}p=E}}function wa(n,s,l,c){n=null;for(var p=s,y=!1;p!==null;){if(!y){if((p.flags&524288)!==0)y=!0;else if((p.flags&262144)!==0)break}if(p.tag===10){var E=p.alternate;if(E===null)throw Error(i(387));if(E=E.memoizedProps,E!==null){var C=p.type;Qn(p.pendingProps.value,E.value)||(n!==null?n.push(C):n=[C])}}else if(p===gn.current){if(E=p.alternate,E===null)throw Error(i(387));E.memoizedState.memoizedState!==p.memoizedState.memoizedState&&(n!==null?n.push(Wa):n=[Wa])}p=p.return}n!==null&&Vf(s,n,l,c),s.flags|=262144}function Iu(n){for(n=n.firstContext;n!==null;){if(!Qn(n.context._currentValue,n.memoizedValue))return!0;n=n.next}return!1}function Ao(n){Co=n,ts=null,n=n.dependencies,n!==null&&(n.firstContext=null)}function Jn(n){return Yp(Co,n)}function Ku(n,s){return Co===null&&Ao(n),Yp(n,s)}function Yp(n,s){var l=s._currentValue;if(s={context:s,memoizedValue:l,next:null},ts===null){if(n===null)throw Error(i(308));ts=s,n.dependencies={lanes:0,firstContext:s},n.flags|=524288}else ts=ts.next=s;return l}var c1=typeof AbortController<"u"?AbortController:function(){var n=[],s=this.signal={aborted:!1,addEventListener:function(l,c){n.push(c)}};this.abort=function(){s.aborted=!0,n.forEach(function(l){return l()})}},f1=r.unstable_scheduleCallback,d1=r.unstable_NormalPriority,Sn={$$typeof:_e,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function If(){return{controller:new c1,data:new Map,refCount:0}}function Ta(n){n.refCount--,n.refCount===0&&f1(d1,function(){n.controller.abort()})}var Oa=null,Kf=0,bl=0,Sl=null;function h1(n,s){if(Oa===null){var l=Oa=[];Kf=0,bl=Yd(),Sl={status:"pending",value:void 0,then:function(c){l.push(c)}}}return Kf++,s.then(Gp,Gp),s}function Gp(){if(--Kf===0&&Oa!==null){Sl!==null&&(Sl.status="fulfilled");var n=Oa;Oa=null,bl=0,Sl=null;for(var s=0;s<n.length;s++)(0,n[s])()}}function p1(n,s){var l=[],c={status:"pending",value:null,reason:null,then:function(p){l.push(p)}};return n.then(function(){c.status="fulfilled",c.value=s;for(var p=0;p<l.length;p++)(0,l[p])(s)},function(p){for(c.status="rejected",c.reason=p,p=0;p<l.length;p++)(0,l[p])(void 0)}),c}var $p=te.S;te.S=function(n,s){typeof s=="object"&&s!==null&&typeof s.then=="function"&&h1(n,s),$p!==null&&$p(n,s)};var _o=le(null);function Pf(){var n=_o.current;return n!==null?n:Kt.pooledCache}function Pu(n,s){s===null?xe(_o,_o.current):xe(_o,s.pool)}function Xp(){var n=Pf();return n===null?null:{parent:Sn._currentValue,pool:n}}var ka=Error(i(460)),Fp=Error(i(474)),Yu=Error(i(542)),Yf={then:function(){}};function Qp(n){return n=n.status,n==="fulfilled"||n==="rejected"}function Gu(){}function Jp(n,s,l){switch(l=n[l],l===void 0?n.push(s):l!==s&&(s.then(Gu,Gu),s=l),s.status){case"fulfilled":return s.value;case"rejected":throw n=s.reason,Wp(n),n;default:if(typeof s.status=="string")s.then(Gu,Gu);else{if(n=Kt,n!==null&&100<n.shellSuspendCounter)throw Error(i(482));n=s,n.status="pending",n.then(function(c){if(s.status==="pending"){var p=s;p.status="fulfilled",p.value=c}},function(c){if(s.status==="pending"){var p=s;p.status="rejected",p.reason=c}})}switch(s.status){case"fulfilled":return s.value;case"rejected":throw n=s.reason,Wp(n),n}throw Ca=s,ka}}var Ca=null;function Zp(){if(Ca===null)throw Error(i(459));var n=Ca;return Ca=null,n}function Wp(n){if(n===ka||n===Yu)throw Error(i(483))}var ks=!1;function Gf(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function $f(n,s){n=n.updateQueue,s.updateQueue===n&&(s.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,callbacks:null})}function Cs(n){return{lane:n,tag:0,payload:null,callback:null,next:null}}function As(n,s,l){var c=n.updateQueue;if(c===null)return null;if(c=c.shared,(At&2)!==0){var p=c.pending;return p===null?s.next=s:(s.next=p.next,p.next=s),c.pending=s,s=Fr(n),kn(n,null,l),s}return en(n,c,s,l),Fr(n)}function Aa(n,s,l){if(s=s.updateQueue,s!==null&&(s=s.shared,(l&4194048)!==0)){var c=s.lanes;c&=n.pendingLanes,l|=c,s.lanes=l,ie(n,l)}}function Xf(n,s){var l=n.updateQueue,c=n.alternate;if(c!==null&&(c=c.updateQueue,l===c)){var p=null,y=null;if(l=l.firstBaseUpdate,l!==null){do{var E={lane:l.lane,tag:l.tag,payload:l.payload,callback:null,next:null};y===null?p=y=E:y=y.next=E,l=l.next}while(l!==null);y===null?p=y=s:y=y.next=s}else p=y=s;l={baseState:c.baseState,firstBaseUpdate:p,lastBaseUpdate:y,shared:c.shared,callbacks:c.callbacks},n.updateQueue=l;return}n=l.lastBaseUpdate,n===null?l.firstBaseUpdate=s:n.next=s,l.lastBaseUpdate=s}var Ff=!1;function _a(){if(Ff){var n=Sl;if(n!==null)throw n}}function Na(n,s,l,c){Ff=!1;var p=n.updateQueue;ks=!1;var y=p.firstBaseUpdate,E=p.lastBaseUpdate,C=p.shared.pending;if(C!==null){p.shared.pending=null;var D=C,X=D.next;D.next=null,E===null?y=X:E.next=X,E=D;var re=n.alternate;re!==null&&(re=re.updateQueue,C=re.lastBaseUpdate,C!==E&&(C===null?re.firstBaseUpdate=X:C.next=X,re.lastBaseUpdate=D))}if(y!==null){var oe=p.baseState;E=0,re=X=D=null,C=y;do{var Q=C.lane&-536870913,J=Q!==C.lane;if(J?(Et&Q)===Q:(c&Q)===Q){Q!==0&&Q===bl&&(Ff=!0),re!==null&&(re=re.next={lane:0,tag:C.tag,payload:C.payload,callback:null,next:null});e:{var rt=n,Ze=C;Q=s;var Bt=l;switch(Ze.tag){case 1:if(rt=Ze.payload,typeof rt=="function"){oe=rt.call(Bt,oe,Q);break e}oe=rt;break e;case 3:rt.flags=rt.flags&-65537|128;case 0:if(rt=Ze.payload,Q=typeof rt=="function"?rt.call(Bt,oe,Q):rt,Q==null)break e;oe=v({},oe,Q);break e;case 2:ks=!0}}Q=C.callback,Q!==null&&(n.flags|=64,J&&(n.flags|=8192),J=p.callbacks,J===null?p.callbacks=[Q]:J.push(Q))}else J={lane:Q,tag:C.tag,payload:C.payload,callback:C.callback,next:null},re===null?(X=re=J,D=oe):re=re.next=J,E|=Q;if(C=C.next,C===null){if(C=p.shared.pending,C===null)break;J=C,C=J.next,J.next=null,p.lastBaseUpdate=J,p.shared.pending=null}}while(!0);re===null&&(D=oe),p.baseState=D,p.firstBaseUpdate=X,p.lastBaseUpdate=re,y===null&&(p.shared.lanes=0),js|=E,n.lanes=E,n.memoizedState=oe}}function em(n,s){if(typeof n!="function")throw Error(i(191,n));n.call(s)}function tm(n,s){var l=n.callbacks;if(l!==null)for(n.callbacks=null,n=0;n<l.length;n++)em(l[n],s)}var xl=le(null),$u=le(0);function nm(n,s){n=cs,xe($u,n),xe(xl,s),cs=n|s.baseLanes}function Qf(){xe($u,cs),xe(xl,xl.current)}function Jf(){cs=$u.current,Ne(xl),Ne($u)}var _s=0,dt=null,Dt=null,dn=null,Xu=!1,El=!1,No=!1,Fu=0,Da=0,Ml=null,m1=0;function tn(){throw Error(i(321))}function Zf(n,s){if(s===null)return!1;for(var l=0;l<s.length&&l<n.length;l++)if(!Qn(n[l],s[l]))return!1;return!0}function Wf(n,s,l,c,p,y){return _s=y,dt=s,s.memoizedState=null,s.updateQueue=null,s.lanes=0,te.H=n===null||n.memoizedState===null?qm:Um,No=!1,y=l(c,p),No=!1,El&&(y=im(s,l,c,p)),rm(n),y}function rm(n){te.H=tc;var s=Dt!==null&&Dt.next!==null;if(_s=0,dn=Dt=dt=null,Xu=!1,Da=0,Ml=null,s)throw Error(i(300));n===null||Cn||(n=n.dependencies,n!==null&&Iu(n)&&(Cn=!0))}function im(n,s,l,c){dt=n;var p=0;do{if(El&&(Ml=null),Da=0,El=!1,25<=p)throw Error(i(301));if(p+=1,dn=Dt=null,n.updateQueue!=null){var y=n.updateQueue;y.lastEffect=null,y.events=null,y.stores=null,y.memoCache!=null&&(y.memoCache.index=0)}te.H=E1,y=s(l,c)}while(El);return y}function g1(){var n=te.H,s=n.useState()[0];return s=typeof s.then=="function"?Ra(s):s,n=n.useState()[0],(Dt!==null?Dt.memoizedState:null)!==n&&(dt.flags|=1024),s}function ed(){var n=Fu!==0;return Fu=0,n}function td(n,s,l){s.updateQueue=n.updateQueue,s.flags&=-2053,n.lanes&=~l}function nd(n){if(Xu){for(n=n.memoizedState;n!==null;){var s=n.queue;s!==null&&(s.pending=null),n=n.next}Xu=!1}_s=0,dn=Dt=dt=null,El=!1,Da=Fu=0,Ml=null}function br(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return dn===null?dt.memoizedState=dn=n:dn=dn.next=n,dn}function hn(){if(Dt===null){var n=dt.alternate;n=n!==null?n.memoizedState:null}else n=Dt.next;var s=dn===null?dt.memoizedState:dn.next;if(s!==null)dn=s,Dt=n;else{if(n===null)throw dt.alternate===null?Error(i(467)):Error(i(310));Dt=n,n={memoizedState:Dt.memoizedState,baseState:Dt.baseState,baseQueue:Dt.baseQueue,queue:Dt.queue,next:null},dn===null?dt.memoizedState=dn=n:dn=dn.next=n}return dn}function rd(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Ra(n){var s=Da;return Da+=1,Ml===null&&(Ml=[]),n=Jp(Ml,n,s),s=dt,(dn===null?s.memoizedState:dn.next)===null&&(s=s.alternate,te.H=s===null||s.memoizedState===null?qm:Um),n}function Qu(n){if(n!==null&&typeof n=="object"){if(typeof n.then=="function")return Ra(n);if(n.$$typeof===_e)return Jn(n)}throw Error(i(438,String(n)))}function id(n){var s=null,l=dt.updateQueue;if(l!==null&&(s=l.memoCache),s==null){var c=dt.alternate;c!==null&&(c=c.updateQueue,c!==null&&(c=c.memoCache,c!=null&&(s={data:c.data.map(function(p){return p.slice()}),index:0})))}if(s==null&&(s={data:[],index:0}),l===null&&(l=rd(),dt.updateQueue=l),l.memoCache=s,l=s.data[s.index],l===void 0)for(l=s.data[s.index]=Array(n),c=0;c<n;c++)l[c]=St;return s.index++,l}function rs(n,s){return typeof s=="function"?s(n):s}function Ju(n){var s=hn();return sd(s,Dt,n)}function sd(n,s,l){var c=n.queue;if(c===null)throw Error(i(311));c.lastRenderedReducer=l;var p=n.baseQueue,y=c.pending;if(y!==null){if(p!==null){var E=p.next;p.next=y.next,y.next=E}s.baseQueue=p=y,c.pending=null}if(y=n.baseState,p===null)n.memoizedState=y;else{s=p.next;var C=E=null,D=null,X=s,re=!1;do{var oe=X.lane&-536870913;if(oe!==X.lane?(Et&oe)===oe:(_s&oe)===oe){var Q=X.revertLane;if(Q===0)D!==null&&(D=D.next={lane:0,revertLane:0,action:X.action,hasEagerState:X.hasEagerState,eagerState:X.eagerState,next:null}),oe===bl&&(re=!0);else if((_s&Q)===Q){X=X.next,Q===bl&&(re=!0);continue}else oe={lane:0,revertLane:X.revertLane,action:X.action,hasEagerState:X.hasEagerState,eagerState:X.eagerState,next:null},D===null?(C=D=oe,E=y):D=D.next=oe,dt.lanes|=Q,js|=Q;oe=X.action,No&&l(y,oe),y=X.hasEagerState?X.eagerState:l(y,oe)}else Q={lane:oe,revertLane:X.revertLane,action:X.action,hasEagerState:X.hasEagerState,eagerState:X.eagerState,next:null},D===null?(C=D=Q,E=y):D=D.next=Q,dt.lanes|=oe,js|=oe;X=X.next}while(X!==null&&X!==s);if(D===null?E=y:D.next=C,!Qn(y,n.memoizedState)&&(Cn=!0,re&&(l=Sl,l!==null)))throw l;n.memoizedState=y,n.baseState=E,n.baseQueue=D,c.lastRenderedState=y}return p===null&&(c.lanes=0),[n.memoizedState,c.dispatch]}function od(n){var s=hn(),l=s.queue;if(l===null)throw Error(i(311));l.lastRenderedReducer=n;var c=l.dispatch,p=l.pending,y=s.memoizedState;if(p!==null){l.pending=null;var E=p=p.next;do y=n(y,E.action),E=E.next;while(E!==p);Qn(y,s.memoizedState)||(Cn=!0),s.memoizedState=y,s.baseQueue===null&&(s.baseState=y),l.lastRenderedState=y}return[y,c]}function sm(n,s,l){var c=dt,p=hn(),y=kt;if(y){if(l===void 0)throw Error(i(407));l=l()}else l=s();var E=!Qn((Dt||p).memoizedState,l);E&&(p.memoizedState=l,Cn=!0),p=p.queue;var C=am.bind(null,c,p,n);if(Ba(2048,8,C,[n]),p.getSnapshot!==s||E||dn!==null&&dn.memoizedState.tag&1){if(c.flags|=2048,wl(9,Zu(),lm.bind(null,c,p,l,s),null),Kt===null)throw Error(i(349));y||(_s&124)!==0||om(c,s,l)}return l}function om(n,s,l){n.flags|=16384,n={getSnapshot:s,value:l},s=dt.updateQueue,s===null?(s=rd(),dt.updateQueue=s,s.stores=[n]):(l=s.stores,l===null?s.stores=[n]:l.push(n))}function lm(n,s,l,c){s.value=l,s.getSnapshot=c,um(s)&&cm(n)}function am(n,s,l){return l(function(){um(s)&&cm(n)})}function um(n){var s=n.getSnapshot;n=n.value;try{var l=s();return!Qn(n,l)}catch{return!0}}function cm(n){var s=bi(n,2);s!==null&&Lr(s,n,2)}function ld(n){var s=br();if(typeof n=="function"){var l=n;if(n=l(),No){sr(!0);try{l()}finally{sr(!1)}}}return s.memoizedState=s.baseState=n,s.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:rs,lastRenderedState:n},s}function fm(n,s,l,c){return n.baseState=l,sd(n,Dt,typeof c=="function"?c:rs)}function y1(n,s,l,c,p){if(ec(n))throw Error(i(485));if(n=s.action,n!==null){var y={payload:p,action:n,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(E){y.listeners.push(E)}};te.T!==null?l(!0):y.isTransition=!1,c(y),l=s.pending,l===null?(y.next=s.pending=y,dm(s,y)):(y.next=l.next,s.pending=l.next=y)}}function dm(n,s){var l=s.action,c=s.payload,p=n.state;if(s.isTransition){var y=te.T,E={};te.T=E;try{var C=l(p,c),D=te.S;D!==null&&D(E,C),hm(n,s,C)}catch(X){ad(n,s,X)}finally{te.T=y}}else try{y=l(p,c),hm(n,s,y)}catch(X){ad(n,s,X)}}function hm(n,s,l){l!==null&&typeof l=="object"&&typeof l.then=="function"?l.then(function(c){pm(n,s,c)},function(c){return ad(n,s,c)}):pm(n,s,l)}function pm(n,s,l){s.status="fulfilled",s.value=l,mm(s),n.state=l,s=n.pending,s!==null&&(l=s.next,l===s?n.pending=null:(l=l.next,s.next=l,dm(n,l)))}function ad(n,s,l){var c=n.pending;if(n.pending=null,c!==null){c=c.next;do s.status="rejected",s.reason=l,mm(s),s=s.next;while(s!==c)}n.action=null}function mm(n){n=n.listeners;for(var s=0;s<n.length;s++)(0,n[s])()}function gm(n,s){return s}function ym(n,s){if(kt){var l=Kt.formState;if(l!==null){e:{var c=dt;if(kt){if(Qt){t:{for(var p=Qt,y=Ri;p.nodeType!==8;){if(!y){p=null;break t}if(p=xi(p.nextSibling),p===null){p=null;break t}}y=p.data,p=y==="F!"||y==="F"?p:null}if(p){Qt=xi(p.nextSibling),c=p.data==="F!";break e}}ko(c)}c=!1}c&&(s=l[0])}}return l=br(),l.memoizedState=l.baseState=s,c={pending:null,lanes:0,dispatch:null,lastRenderedReducer:gm,lastRenderedState:s},l.queue=c,l=Lm.bind(null,dt,c),c.dispatch=l,c=ld(!1),y=hd.bind(null,dt,!1,c.queue),c=br(),p={state:s,dispatch:null,action:n,pending:null},c.queue=p,l=y1.bind(null,dt,p,y,l),p.dispatch=l,c.memoizedState=n,[s,l,!1]}function vm(n){var s=hn();return bm(s,Dt,n)}function bm(n,s,l){if(s=sd(n,s,gm)[0],n=Ju(rs)[0],typeof s=="object"&&s!==null&&typeof s.then=="function")try{var c=Ra(s)}catch(E){throw E===ka?Yu:E}else c=s;s=hn();var p=s.queue,y=p.dispatch;return l!==s.memoizedState&&(dt.flags|=2048,wl(9,Zu(),v1.bind(null,p,l),null)),[c,y,n]}function v1(n,s){n.action=s}function Sm(n){var s=hn(),l=Dt;if(l!==null)return bm(s,l,n);hn(),s=s.memoizedState,l=hn();var c=l.queue.dispatch;return l.memoizedState=n,[s,c,!1]}function wl(n,s,l,c){return n={tag:n,create:l,deps:c,inst:s,next:null},s=dt.updateQueue,s===null&&(s=rd(),dt.updateQueue=s),l=s.lastEffect,l===null?s.lastEffect=n.next=n:(c=l.next,l.next=n,n.next=c,s.lastEffect=n),n}function Zu(){return{destroy:void 0,resource:void 0}}function xm(){return hn().memoizedState}function Wu(n,s,l,c){var p=br();c=c===void 0?null:c,dt.flags|=n,p.memoizedState=wl(1|s,Zu(),l,c)}function Ba(n,s,l,c){var p=hn();c=c===void 0?null:c;var y=p.memoizedState.inst;Dt!==null&&c!==null&&Zf(c,Dt.memoizedState.deps)?p.memoizedState=wl(s,y,l,c):(dt.flags|=n,p.memoizedState=wl(1|s,y,l,c))}function Em(n,s){Wu(8390656,8,n,s)}function Mm(n,s){Ba(2048,8,n,s)}function wm(n,s){return Ba(4,2,n,s)}function Tm(n,s){return Ba(4,4,n,s)}function Om(n,s){if(typeof s=="function"){n=n();var l=s(n);return function(){typeof l=="function"?l():s(null)}}if(s!=null)return n=n(),s.current=n,function(){s.current=null}}function km(n,s,l){l=l!=null?l.concat([n]):null,Ba(4,4,Om.bind(null,s,n),l)}function ud(){}function Cm(n,s){var l=hn();s=s===void 0?null:s;var c=l.memoizedState;return s!==null&&Zf(s,c[1])?c[0]:(l.memoizedState=[n,s],n)}function Am(n,s){var l=hn();s=s===void 0?null:s;var c=l.memoizedState;if(s!==null&&Zf(s,c[1]))return c[0];if(c=n(),No){sr(!0);try{n()}finally{sr(!1)}}return l.memoizedState=[c,s],c}function cd(n,s,l){return l===void 0||(_s&1073741824)!==0?n.memoizedState=s:(n.memoizedState=l,n=Dg(),dt.lanes|=n,js|=n,l)}function _m(n,s,l,c){return Qn(l,s)?l:xl.current!==null?(n=cd(n,l,c),Qn(n,s)||(Cn=!0),n):(_s&42)===0?(Cn=!0,n.memoizedState=l):(n=Dg(),dt.lanes|=n,js|=n,s)}function Nm(n,s,l,c,p){var y=ke.p;ke.p=y!==0&&8>y?y:8;var E=te.T,C={};te.T=C,hd(n,!1,s,l);try{var D=p(),X=te.S;if(X!==null&&X(C,D),D!==null&&typeof D=="object"&&typeof D.then=="function"){var re=p1(D,c);za(n,s,re,zr(n))}else za(n,s,c,zr(n))}catch(oe){za(n,s,{then:function(){},status:"rejected",reason:oe},zr())}finally{ke.p=y,te.T=E}}function b1(){}function fd(n,s,l,c){if(n.tag!==5)throw Error(i(476));var p=Dm(n).queue;Nm(n,p,s,Ke,l===null?b1:function(){return Rm(n),l(c)})}function Dm(n){var s=n.memoizedState;if(s!==null)return s;s={memoizedState:Ke,baseState:Ke,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:rs,lastRenderedState:Ke},next:null};var l={};return s.next={memoizedState:l,baseState:l,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:rs,lastRenderedState:l},next:null},n.memoizedState=s,n=n.alternate,n!==null&&(n.memoizedState=s),s}function Rm(n){var s=Dm(n).next.queue;za(n,s,{},zr())}function dd(){return Jn(Wa)}function Bm(){return hn().memoizedState}function zm(){return hn().memoizedState}function S1(n){for(var s=n.return;s!==null;){switch(s.tag){case 24:case 3:var l=zr();n=Cs(l);var c=As(s,n,l);c!==null&&(Lr(c,s,l),Aa(c,s,l)),s={cache:If()},n.payload=s;return}s=s.return}}function x1(n,s,l){var c=zr();l={lane:c,revertLane:0,action:l,hasEagerState:!1,eagerState:null,next:null},ec(n)?jm(s,l):(l=fn(n,s,l,c),l!==null&&(Lr(l,n,c),Hm(l,s,c)))}function Lm(n,s,l){var c=zr();za(n,s,l,c)}function za(n,s,l,c){var p={lane:c,revertLane:0,action:l,hasEagerState:!1,eagerState:null,next:null};if(ec(n))jm(s,p);else{var y=n.alternate;if(n.lanes===0&&(y===null||y.lanes===0)&&(y=s.lastRenderedReducer,y!==null))try{var E=s.lastRenderedState,C=y(E,l);if(p.hasEagerState=!0,p.eagerState=C,Qn(C,E))return en(n,s,p,0),Kt===null&&nt(),!1}catch{}finally{}if(l=fn(n,s,p,c),l!==null)return Lr(l,n,c),Hm(l,s,c),!0}return!1}function hd(n,s,l,c){if(c={lane:2,revertLane:Yd(),action:c,hasEagerState:!1,eagerState:null,next:null},ec(n)){if(s)throw Error(i(479))}else s=fn(n,l,c,2),s!==null&&Lr(s,n,2)}function ec(n){var s=n.alternate;return n===dt||s!==null&&s===dt}function jm(n,s){El=Xu=!0;var l=n.pending;l===null?s.next=s:(s.next=l.next,l.next=s),n.pending=s}function Hm(n,s,l){if((l&4194048)!==0){var c=s.lanes;c&=n.pendingLanes,l|=c,s.lanes=l,ie(n,l)}}var tc={readContext:Jn,use:Qu,useCallback:tn,useContext:tn,useEffect:tn,useImperativeHandle:tn,useLayoutEffect:tn,useInsertionEffect:tn,useMemo:tn,useReducer:tn,useRef:tn,useState:tn,useDebugValue:tn,useDeferredValue:tn,useTransition:tn,useSyncExternalStore:tn,useId:tn,useHostTransitionStatus:tn,useFormState:tn,useActionState:tn,useOptimistic:tn,useMemoCache:tn,useCacheRefresh:tn},qm={readContext:Jn,use:Qu,useCallback:function(n,s){return br().memoizedState=[n,s===void 0?null:s],n},useContext:Jn,useEffect:Em,useImperativeHandle:function(n,s,l){l=l!=null?l.concat([n]):null,Wu(4194308,4,Om.bind(null,s,n),l)},useLayoutEffect:function(n,s){return Wu(4194308,4,n,s)},useInsertionEffect:function(n,s){Wu(4,2,n,s)},useMemo:function(n,s){var l=br();s=s===void 0?null:s;var c=n();if(No){sr(!0);try{n()}finally{sr(!1)}}return l.memoizedState=[c,s],c},useReducer:function(n,s,l){var c=br();if(l!==void 0){var p=l(s);if(No){sr(!0);try{l(s)}finally{sr(!1)}}}else p=s;return c.memoizedState=c.baseState=p,n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:p},c.queue=n,n=n.dispatch=x1.bind(null,dt,n),[c.memoizedState,n]},useRef:function(n){var s=br();return n={current:n},s.memoizedState=n},useState:function(n){n=ld(n);var s=n.queue,l=Lm.bind(null,dt,s);return s.dispatch=l,[n.memoizedState,l]},useDebugValue:ud,useDeferredValue:function(n,s){var l=br();return cd(l,n,s)},useTransition:function(){var n=ld(!1);return n=Nm.bind(null,dt,n.queue,!0,!1),br().memoizedState=n,[!1,n]},useSyncExternalStore:function(n,s,l){var c=dt,p=br();if(kt){if(l===void 0)throw Error(i(407));l=l()}else{if(l=s(),Kt===null)throw Error(i(349));(Et&124)!==0||om(c,s,l)}p.memoizedState=l;var y={value:l,getSnapshot:s};return p.queue=y,Em(am.bind(null,c,y,n),[n]),c.flags|=2048,wl(9,Zu(),lm.bind(null,c,y,l,s),null),l},useId:function(){var n=br(),s=Kt.identifierPrefix;if(kt){var l=es,c=Wi;l=(c&~(1<<32-Wt(c)-1)).toString(32)+l,s=""+s+"R"+l,l=Fu++,0<l&&(s+="H"+l.toString(32)),s+=""}else l=m1++,s=""+s+"r"+l.toString(32)+"";return n.memoizedState=s},useHostTransitionStatus:dd,useFormState:ym,useActionState:ym,useOptimistic:function(n){var s=br();s.memoizedState=s.baseState=n;var l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return s.queue=l,s=hd.bind(null,dt,!0,l),l.dispatch=s,[n,s]},useMemoCache:id,useCacheRefresh:function(){return br().memoizedState=S1.bind(null,dt)}},Um={readContext:Jn,use:Qu,useCallback:Cm,useContext:Jn,useEffect:Mm,useImperativeHandle:km,useInsertionEffect:wm,useLayoutEffect:Tm,useMemo:Am,useReducer:Ju,useRef:xm,useState:function(){return Ju(rs)},useDebugValue:ud,useDeferredValue:function(n,s){var l=hn();return _m(l,Dt.memoizedState,n,s)},useTransition:function(){var n=Ju(rs)[0],s=hn().memoizedState;return[typeof n=="boolean"?n:Ra(n),s]},useSyncExternalStore:sm,useId:Bm,useHostTransitionStatus:dd,useFormState:vm,useActionState:vm,useOptimistic:function(n,s){var l=hn();return fm(l,Dt,n,s)},useMemoCache:id,useCacheRefresh:zm},E1={readContext:Jn,use:Qu,useCallback:Cm,useContext:Jn,useEffect:Mm,useImperativeHandle:km,useInsertionEffect:wm,useLayoutEffect:Tm,useMemo:Am,useReducer:od,useRef:xm,useState:function(){return od(rs)},useDebugValue:ud,useDeferredValue:function(n,s){var l=hn();return Dt===null?cd(l,n,s):_m(l,Dt.memoizedState,n,s)},useTransition:function(){var n=od(rs)[0],s=hn().memoizedState;return[typeof n=="boolean"?n:Ra(n),s]},useSyncExternalStore:sm,useId:Bm,useHostTransitionStatus:dd,useFormState:Sm,useActionState:Sm,useOptimistic:function(n,s){var l=hn();return Dt!==null?fm(l,Dt,n,s):(l.baseState=n,[n,l.queue.dispatch])},useMemoCache:id,useCacheRefresh:zm},Tl=null,La=0;function nc(n){var s=La;return La+=1,Tl===null&&(Tl=[]),Jp(Tl,n,s)}function ja(n,s){s=s.props.ref,n.ref=s!==void 0?s:null}function rc(n,s){throw s.$$typeof===S?Error(i(525)):(n=Object.prototype.toString.call(s),Error(i(31,n==="[object Object]"?"object with keys {"+Object.keys(s).join(", ")+"}":n)))}function Vm(n){var s=n._init;return s(n._payload)}function Im(n){function s(P,q){if(n){var $=P.deletions;$===null?(P.deletions=[q],P.flags|=16):$.push(q)}}function l(P,q){if(!n)return null;for(;q!==null;)s(P,q),q=q.sibling;return null}function c(P){for(var q=new Map;P!==null;)P.key!==null?q.set(P.key,P):q.set(P.index,P),P=P.sibling;return q}function p(P,q){return P=Zi(P,q),P.index=0,P.sibling=null,P}function y(P,q,$){return P.index=$,n?($=P.alternate,$!==null?($=$.index,$<q?(P.flags|=67108866,q):$):(P.flags|=67108866,q)):(P.flags|=1048576,q)}function E(P){return n&&P.alternate===null&&(P.flags|=67108866),P}function C(P,q,$,se){return q===null||q.tag!==6?(q=Bf($,P.mode,se),q.return=P,q):(q=p(q,$),q.return=P,q)}function D(P,q,$,se){var Ue=$.type;return Ue===T?re(P,q,$.props.children,se,$.key):q!==null&&(q.elementType===Ue||typeof Ue=="object"&&Ue!==null&&Ue.$$typeof===me&&Vm(Ue)===q.type)?(q=p(q,$.props),ja(q,$),q.return=P,q):(q=qu($.type,$.key,$.props,null,P.mode,se),ja(q,$),q.return=P,q)}function X(P,q,$,se){return q===null||q.tag!==4||q.stateNode.containerInfo!==$.containerInfo||q.stateNode.implementation!==$.implementation?(q=zf($,P.mode,se),q.return=P,q):(q=p(q,$.children||[]),q.return=P,q)}function re(P,q,$,se,Ue){return q===null||q.tag!==7?(q=Mo($,P.mode,se,Ue),q.return=P,q):(q=p(q,$),q.return=P,q)}function oe(P,q,$){if(typeof q=="string"&&q!==""||typeof q=="number"||typeof q=="bigint")return q=Bf(""+q,P.mode,$),q.return=P,q;if(typeof q=="object"&&q!==null){switch(q.$$typeof){case w:return $=qu(q.type,q.key,q.props,null,P.mode,$),ja($,q),$.return=P,$;case O:return q=zf(q,P.mode,$),q.return=P,q;case me:var se=q._init;return q=se(q._payload),oe(P,q,$)}if(Xt(q)||jt(q))return q=Mo(q,P.mode,$,null),q.return=P,q;if(typeof q.then=="function")return oe(P,nc(q),$);if(q.$$typeof===_e)return oe(P,Ku(P,q),$);rc(P,q)}return null}function Q(P,q,$,se){var Ue=q!==null?q.key:null;if(typeof $=="string"&&$!==""||typeof $=="number"||typeof $=="bigint")return Ue!==null?null:C(P,q,""+$,se);if(typeof $=="object"&&$!==null){switch($.$$typeof){case w:return $.key===Ue?D(P,q,$,se):null;case O:return $.key===Ue?X(P,q,$,se):null;case me:return Ue=$._init,$=Ue($._payload),Q(P,q,$,se)}if(Xt($)||jt($))return Ue!==null?null:re(P,q,$,se,null);if(typeof $.then=="function")return Q(P,q,nc($),se);if($.$$typeof===_e)return Q(P,q,Ku(P,$),se);rc(P,$)}return null}function J(P,q,$,se,Ue){if(typeof se=="string"&&se!==""||typeof se=="number"||typeof se=="bigint")return P=P.get($)||null,C(q,P,""+se,Ue);if(typeof se=="object"&&se!==null){switch(se.$$typeof){case w:return P=P.get(se.key===null?$:se.key)||null,D(q,P,se,Ue);case O:return P=P.get(se.key===null?$:se.key)||null,X(q,P,se,Ue);case me:var mt=se._init;return se=mt(se._payload),J(P,q,$,se,Ue)}if(Xt(se)||jt(se))return P=P.get($)||null,re(q,P,se,Ue,null);if(typeof se.then=="function")return J(P,q,$,nc(se),Ue);if(se.$$typeof===_e)return J(P,q,$,Ku(q,se),Ue);rc(q,se)}return null}function rt(P,q,$,se){for(var Ue=null,mt=null,Ye=q,et=q=0,_n=null;Ye!==null&&et<$.length;et++){Ye.index>et?(_n=Ye,Ye=null):_n=Ye.sibling;var Tt=Q(P,Ye,$[et],se);if(Tt===null){Ye===null&&(Ye=_n);break}n&&Ye&&Tt.alternate===null&&s(P,Ye),q=y(Tt,q,et),mt===null?Ue=Tt:mt.sibling=Tt,mt=Tt,Ye=_n}if(et===$.length)return l(P,Ye),kt&&To(P,et),Ue;if(Ye===null){for(;et<$.length;et++)Ye=oe(P,$[et],se),Ye!==null&&(q=y(Ye,q,et),mt===null?Ue=Ye:mt.sibling=Ye,mt=Ye);return kt&&To(P,et),Ue}for(Ye=c(Ye);et<$.length;et++)_n=J(Ye,P,et,$[et],se),_n!==null&&(n&&_n.alternate!==null&&Ye.delete(_n.key===null?et:_n.key),q=y(_n,q,et),mt===null?Ue=_n:mt.sibling=_n,mt=_n);return n&&Ye.forEach(function(Gs){return s(P,Gs)}),kt&&To(P,et),Ue}function Ze(P,q,$,se){if($==null)throw Error(i(151));for(var Ue=null,mt=null,Ye=q,et=q=0,_n=null,Tt=$.next();Ye!==null&&!Tt.done;et++,Tt=$.next()){Ye.index>et?(_n=Ye,Ye=null):_n=Ye.sibling;var Gs=Q(P,Ye,Tt.value,se);if(Gs===null){Ye===null&&(Ye=_n);break}n&&Ye&&Gs.alternate===null&&s(P,Ye),q=y(Gs,q,et),mt===null?Ue=Gs:mt.sibling=Gs,mt=Gs,Ye=_n}if(Tt.done)return l(P,Ye),kt&&To(P,et),Ue;if(Ye===null){for(;!Tt.done;et++,Tt=$.next())Tt=oe(P,Tt.value,se),Tt!==null&&(q=y(Tt,q,et),mt===null?Ue=Tt:mt.sibling=Tt,mt=Tt);return kt&&To(P,et),Ue}for(Ye=c(Ye);!Tt.done;et++,Tt=$.next())Tt=J(Ye,P,et,Tt.value,se),Tt!==null&&(n&&Tt.alternate!==null&&Ye.delete(Tt.key===null?et:Tt.key),q=y(Tt,q,et),mt===null?Ue=Tt:mt.sibling=Tt,mt=Tt);return n&&Ye.forEach(function(MS){return s(P,MS)}),kt&&To(P,et),Ue}function Bt(P,q,$,se){if(typeof $=="object"&&$!==null&&$.type===T&&$.key===null&&($=$.props.children),typeof $=="object"&&$!==null){switch($.$$typeof){case w:e:{for(var Ue=$.key;q!==null;){if(q.key===Ue){if(Ue=$.type,Ue===T){if(q.tag===7){l(P,q.sibling),se=p(q,$.props.children),se.return=P,P=se;break e}}else if(q.elementType===Ue||typeof Ue=="object"&&Ue!==null&&Ue.$$typeof===me&&Vm(Ue)===q.type){l(P,q.sibling),se=p(q,$.props),ja(se,$),se.return=P,P=se;break e}l(P,q);break}else s(P,q);q=q.sibling}$.type===T?(se=Mo($.props.children,P.mode,se,$.key),se.return=P,P=se):(se=qu($.type,$.key,$.props,null,P.mode,se),ja(se,$),se.return=P,P=se)}return E(P);case O:e:{for(Ue=$.key;q!==null;){if(q.key===Ue)if(q.tag===4&&q.stateNode.containerInfo===$.containerInfo&&q.stateNode.implementation===$.implementation){l(P,q.sibling),se=p(q,$.children||[]),se.return=P,P=se;break e}else{l(P,q);break}else s(P,q);q=q.sibling}se=zf($,P.mode,se),se.return=P,P=se}return E(P);case me:return Ue=$._init,$=Ue($._payload),Bt(P,q,$,se)}if(Xt($))return rt(P,q,$,se);if(jt($)){if(Ue=jt($),typeof Ue!="function")throw Error(i(150));return $=Ue.call($),Ze(P,q,$,se)}if(typeof $.then=="function")return Bt(P,q,nc($),se);if($.$$typeof===_e)return Bt(P,q,Ku(P,$),se);rc(P,$)}return typeof $=="string"&&$!==""||typeof $=="number"||typeof $=="bigint"?($=""+$,q!==null&&q.tag===6?(l(P,q.sibling),se=p(q,$),se.return=P,P=se):(l(P,q),se=Bf($,P.mode,se),se.return=P,P=se),E(P)):l(P,q)}return function(P,q,$,se){try{La=0;var Ue=Bt(P,q,$,se);return Tl=null,Ue}catch(Ye){if(Ye===ka||Ye===Yu)throw Ye;var mt=Nr(29,Ye,null,P.mode);return mt.lanes=se,mt.return=P,mt}finally{}}}var Ol=Im(!0),Km=Im(!1),Zr=le(null),Bi=null;function Ns(n){var s=n.alternate;xe(xn,xn.current&1),xe(Zr,n),Bi===null&&(s===null||xl.current!==null||s.memoizedState!==null)&&(Bi=n)}function Pm(n){if(n.tag===22){if(xe(xn,xn.current),xe(Zr,n),Bi===null){var s=n.alternate;s!==null&&s.memoizedState!==null&&(Bi=n)}}else Ds()}function Ds(){xe(xn,xn.current),xe(Zr,Zr.current)}function is(n){Ne(Zr),Bi===n&&(Bi=null),Ne(xn)}var xn=le(0);function ic(n){for(var s=n;s!==null;){if(s.tag===13){var l=s.memoizedState;if(l!==null&&(l=l.dehydrated,l===null||l.data==="$?"||rh(l)))return s}else if(s.tag===19&&s.memoizedProps.revealOrder!==void 0){if((s.flags&128)!==0)return s}else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===n)break;for(;s.sibling===null;){if(s.return===null||s.return===n)return null;s=s.return}s.sibling.return=s.return,s=s.sibling}return null}function pd(n,s,l,c){s=n.memoizedState,l=l(c,s),l=l==null?s:v({},s,l),n.memoizedState=l,n.lanes===0&&(n.updateQueue.baseState=l)}var md={enqueueSetState:function(n,s,l){n=n._reactInternals;var c=zr(),p=Cs(c);p.payload=s,l!=null&&(p.callback=l),s=As(n,p,c),s!==null&&(Lr(s,n,c),Aa(s,n,c))},enqueueReplaceState:function(n,s,l){n=n._reactInternals;var c=zr(),p=Cs(c);p.tag=1,p.payload=s,l!=null&&(p.callback=l),s=As(n,p,c),s!==null&&(Lr(s,n,c),Aa(s,n,c))},enqueueForceUpdate:function(n,s){n=n._reactInternals;var l=zr(),c=Cs(l);c.tag=2,s!=null&&(c.callback=s),s=As(n,c,l),s!==null&&(Lr(s,n,l),Aa(s,n,l))}};function Ym(n,s,l,c,p,y,E){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(c,y,E):s.prototype&&s.prototype.isPureReactComponent?!d(l,c)||!d(p,y):!0}function Gm(n,s,l,c){n=s.state,typeof s.componentWillReceiveProps=="function"&&s.componentWillReceiveProps(l,c),typeof s.UNSAFE_componentWillReceiveProps=="function"&&s.UNSAFE_componentWillReceiveProps(l,c),s.state!==n&&md.enqueueReplaceState(s,s.state,null)}function Do(n,s){var l=s;if("ref"in s){l={};for(var c in s)c!=="ref"&&(l[c]=s[c])}if(n=n.defaultProps){l===s&&(l=v({},l));for(var p in n)l[p]===void 0&&(l[p]=n[p])}return l}var sc=typeof reportError=="function"?reportError:function(n){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var s=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof n=="object"&&n!==null&&typeof n.message=="string"?String(n.message):String(n),error:n});if(!window.dispatchEvent(s))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",n);return}console.error(n)};function $m(n){sc(n)}function Xm(n){console.error(n)}function Fm(n){sc(n)}function oc(n,s){try{var l=n.onUncaughtError;l(s.value,{componentStack:s.stack})}catch(c){setTimeout(function(){throw c})}}function Qm(n,s,l){try{var c=n.onCaughtError;c(l.value,{componentStack:l.stack,errorBoundary:s.tag===1?s.stateNode:null})}catch(p){setTimeout(function(){throw p})}}function gd(n,s,l){return l=Cs(l),l.tag=3,l.payload={element:null},l.callback=function(){oc(n,s)},l}function Jm(n){return n=Cs(n),n.tag=3,n}function Zm(n,s,l,c){var p=l.type.getDerivedStateFromError;if(typeof p=="function"){var y=c.value;n.payload=function(){return p(y)},n.callback=function(){Qm(s,l,c)}}var E=l.stateNode;E!==null&&typeof E.componentDidCatch=="function"&&(n.callback=function(){Qm(s,l,c),typeof p!="function"&&(Hs===null?Hs=new Set([this]):Hs.add(this));var C=c.stack;this.componentDidCatch(c.value,{componentStack:C!==null?C:""})})}function M1(n,s,l,c,p){if(l.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){if(s=l.alternate,s!==null&&wa(s,l,p,!0),l=Zr.current,l!==null){switch(l.tag){case 13:return Bi===null?Ud():l.alternate===null&&Jt===0&&(Jt=3),l.flags&=-257,l.flags|=65536,l.lanes=p,c===Yf?l.flags|=16384:(s=l.updateQueue,s===null?l.updateQueue=new Set([c]):s.add(c),Id(n,c,p)),!1;case 22:return l.flags|=65536,c===Yf?l.flags|=16384:(s=l.updateQueue,s===null?(s={transitions:null,markerInstances:null,retryQueue:new Set([c])},l.updateQueue=s):(l=s.retryQueue,l===null?s.retryQueue=new Set([c]):l.add(c)),Id(n,c,p)),!1}throw Error(i(435,l.tag))}return Id(n,c,p),Ud(),!1}if(kt)return s=Zr.current,s!==null?((s.flags&65536)===0&&(s.flags|=256),s.flags|=65536,s.lanes=p,c!==Hf&&(n=Error(i(422),{cause:c}),Ma($e(n,l)))):(c!==Hf&&(s=Error(i(423),{cause:c}),Ma($e(s,l))),n=n.current.alternate,n.flags|=65536,p&=-p,n.lanes|=p,c=$e(c,l),p=gd(n.stateNode,c,p),Xf(n,p),Jt!==4&&(Jt=2)),!1;var y=Error(i(520),{cause:c});if(y=$e(y,l),Pa===null?Pa=[y]:Pa.push(y),Jt!==4&&(Jt=2),s===null)return!0;c=$e(c,l),l=s;do{switch(l.tag){case 3:return l.flags|=65536,n=p&-p,l.lanes|=n,n=gd(l.stateNode,c,n),Xf(l,n),!1;case 1:if(s=l.type,y=l.stateNode,(l.flags&128)===0&&(typeof s.getDerivedStateFromError=="function"||y!==null&&typeof y.componentDidCatch=="function"&&(Hs===null||!Hs.has(y))))return l.flags|=65536,p&=-p,l.lanes|=p,p=Jm(p),Zm(p,n,l,c),Xf(l,p),!1}l=l.return}while(l!==null);return!1}var Wm=Error(i(461)),Cn=!1;function Un(n,s,l,c){s.child=n===null?Km(s,null,l,c):Ol(s,n.child,l,c)}function eg(n,s,l,c,p){l=l.render;var y=s.ref;if("ref"in c){var E={};for(var C in c)C!=="ref"&&(E[C]=c[C])}else E=c;return Ao(s),c=Wf(n,s,l,E,y,p),C=ed(),n!==null&&!Cn?(td(n,s,p),ss(n,s,p)):(kt&&C&&Lf(s),s.flags|=1,Un(n,s,c,p),s.child)}function tg(n,s,l,c,p){if(n===null){var y=l.type;return typeof y=="function"&&!Rf(y)&&y.defaultProps===void 0&&l.compare===null?(s.tag=15,s.type=y,ng(n,s,y,c,p)):(n=qu(l.type,null,c,s,s.mode,p),n.ref=s.ref,n.return=s,s.child=n)}if(y=n.child,!wd(n,p)){var E=y.memoizedProps;if(l=l.compare,l=l!==null?l:d,l(E,c)&&n.ref===s.ref)return ss(n,s,p)}return s.flags|=1,n=Zi(y,c),n.ref=s.ref,n.return=s,s.child=n}function ng(n,s,l,c,p){if(n!==null){var y=n.memoizedProps;if(d(y,c)&&n.ref===s.ref)if(Cn=!1,s.pendingProps=c=y,wd(n,p))(n.flags&131072)!==0&&(Cn=!0);else return s.lanes=n.lanes,ss(n,s,p)}return yd(n,s,l,c,p)}function rg(n,s,l){var c=s.pendingProps,p=c.children,y=n!==null?n.memoizedState:null;if(c.mode==="hidden"){if((s.flags&128)!==0){if(c=y!==null?y.baseLanes|l:l,n!==null){for(p=s.child=n.child,y=0;p!==null;)y=y|p.lanes|p.childLanes,p=p.sibling;s.childLanes=y&~c}else s.childLanes=0,s.child=null;return ig(n,s,c,l)}if((l&536870912)!==0)s.memoizedState={baseLanes:0,cachePool:null},n!==null&&Pu(s,y!==null?y.cachePool:null),y!==null?nm(s,y):Qf(),Pm(s);else return s.lanes=s.childLanes=536870912,ig(n,s,y!==null?y.baseLanes|l:l,l)}else y!==null?(Pu(s,y.cachePool),nm(s,y),Ds(),s.memoizedState=null):(n!==null&&Pu(s,null),Qf(),Ds());return Un(n,s,p,l),s.child}function ig(n,s,l,c){var p=Pf();return p=p===null?null:{parent:Sn._currentValue,pool:p},s.memoizedState={baseLanes:l,cachePool:p},n!==null&&Pu(s,null),Qf(),Pm(s),n!==null&&wa(n,s,c,!0),null}function lc(n,s){var l=s.ref;if(l===null)n!==null&&n.ref!==null&&(s.flags|=4194816);else{if(typeof l!="function"&&typeof l!="object")throw Error(i(284));(n===null||n.ref!==l)&&(s.flags|=4194816)}}function yd(n,s,l,c,p){return Ao(s),l=Wf(n,s,l,c,void 0,p),c=ed(),n!==null&&!Cn?(td(n,s,p),ss(n,s,p)):(kt&&c&&Lf(s),s.flags|=1,Un(n,s,l,p),s.child)}function sg(n,s,l,c,p,y){return Ao(s),s.updateQueue=null,l=im(s,c,l,p),rm(n),c=ed(),n!==null&&!Cn?(td(n,s,y),ss(n,s,y)):(kt&&c&&Lf(s),s.flags|=1,Un(n,s,l,y),s.child)}function og(n,s,l,c,p){if(Ao(s),s.stateNode===null){var y=Di,E=l.contextType;typeof E=="object"&&E!==null&&(y=Jn(E)),y=new l(c,y),s.memoizedState=y.state!==null&&y.state!==void 0?y.state:null,y.updater=md,s.stateNode=y,y._reactInternals=s,y=s.stateNode,y.props=c,y.state=s.memoizedState,y.refs={},Gf(s),E=l.contextType,y.context=typeof E=="object"&&E!==null?Jn(E):Di,y.state=s.memoizedState,E=l.getDerivedStateFromProps,typeof E=="function"&&(pd(s,l,E,c),y.state=s.memoizedState),typeof l.getDerivedStateFromProps=="function"||typeof y.getSnapshotBeforeUpdate=="function"||typeof y.UNSAFE_componentWillMount!="function"&&typeof y.componentWillMount!="function"||(E=y.state,typeof y.componentWillMount=="function"&&y.componentWillMount(),typeof y.UNSAFE_componentWillMount=="function"&&y.UNSAFE_componentWillMount(),E!==y.state&&md.enqueueReplaceState(y,y.state,null),Na(s,c,y,p),_a(),y.state=s.memoizedState),typeof y.componentDidMount=="function"&&(s.flags|=4194308),c=!0}else if(n===null){y=s.stateNode;var C=s.memoizedProps,D=Do(l,C);y.props=D;var X=y.context,re=l.contextType;E=Di,typeof re=="object"&&re!==null&&(E=Jn(re));var oe=l.getDerivedStateFromProps;re=typeof oe=="function"||typeof y.getSnapshotBeforeUpdate=="function",C=s.pendingProps!==C,re||typeof y.UNSAFE_componentWillReceiveProps!="function"&&typeof y.componentWillReceiveProps!="function"||(C||X!==E)&&Gm(s,y,c,E),ks=!1;var Q=s.memoizedState;y.state=Q,Na(s,c,y,p),_a(),X=s.memoizedState,C||Q!==X||ks?(typeof oe=="function"&&(pd(s,l,oe,c),X=s.memoizedState),(D=ks||Ym(s,l,D,c,Q,X,E))?(re||typeof y.UNSAFE_componentWillMount!="function"&&typeof y.componentWillMount!="function"||(typeof y.componentWillMount=="function"&&y.componentWillMount(),typeof y.UNSAFE_componentWillMount=="function"&&y.UNSAFE_componentWillMount()),typeof y.componentDidMount=="function"&&(s.flags|=4194308)):(typeof y.componentDidMount=="function"&&(s.flags|=4194308),s.memoizedProps=c,s.memoizedState=X),y.props=c,y.state=X,y.context=E,c=D):(typeof y.componentDidMount=="function"&&(s.flags|=4194308),c=!1)}else{y=s.stateNode,$f(n,s),E=s.memoizedProps,re=Do(l,E),y.props=re,oe=s.pendingProps,Q=y.context,X=l.contextType,D=Di,typeof X=="object"&&X!==null&&(D=Jn(X)),C=l.getDerivedStateFromProps,(X=typeof C=="function"||typeof y.getSnapshotBeforeUpdate=="function")||typeof y.UNSAFE_componentWillReceiveProps!="function"&&typeof y.componentWillReceiveProps!="function"||(E!==oe||Q!==D)&&Gm(s,y,c,D),ks=!1,Q=s.memoizedState,y.state=Q,Na(s,c,y,p),_a();var J=s.memoizedState;E!==oe||Q!==J||ks||n!==null&&n.dependencies!==null&&Iu(n.dependencies)?(typeof C=="function"&&(pd(s,l,C,c),J=s.memoizedState),(re=ks||Ym(s,l,re,c,Q,J,D)||n!==null&&n.dependencies!==null&&Iu(n.dependencies))?(X||typeof y.UNSAFE_componentWillUpdate!="function"&&typeof y.componentWillUpdate!="function"||(typeof y.componentWillUpdate=="function"&&y.componentWillUpdate(c,J,D),typeof y.UNSAFE_componentWillUpdate=="function"&&y.UNSAFE_componentWillUpdate(c,J,D)),typeof y.componentDidUpdate=="function"&&(s.flags|=4),typeof y.getSnapshotBeforeUpdate=="function"&&(s.flags|=1024)):(typeof y.componentDidUpdate!="function"||E===n.memoizedProps&&Q===n.memoizedState||(s.flags|=4),typeof y.getSnapshotBeforeUpdate!="function"||E===n.memoizedProps&&Q===n.memoizedState||(s.flags|=1024),s.memoizedProps=c,s.memoizedState=J),y.props=c,y.state=J,y.context=D,c=re):(typeof y.componentDidUpdate!="function"||E===n.memoizedProps&&Q===n.memoizedState||(s.flags|=4),typeof y.getSnapshotBeforeUpdate!="function"||E===n.memoizedProps&&Q===n.memoizedState||(s.flags|=1024),c=!1)}return y=c,lc(n,s),c=(s.flags&128)!==0,y||c?(y=s.stateNode,l=c&&typeof l.getDerivedStateFromError!="function"?null:y.render(),s.flags|=1,n!==null&&c?(s.child=Ol(s,n.child,null,p),s.child=Ol(s,null,l,p)):Un(n,s,l,p),s.memoizedState=y.state,n=s.child):n=ss(n,s,p),n}function lg(n,s,l,c){return Ea(),s.flags|=256,Un(n,s,l,c),s.child}var vd={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function bd(n){return{baseLanes:n,cachePool:Xp()}}function Sd(n,s,l){return n=n!==null?n.childLanes&~l:0,s&&(n|=Wr),n}function ag(n,s,l){var c=s.pendingProps,p=!1,y=(s.flags&128)!==0,E;if((E=y)||(E=n!==null&&n.memoizedState===null?!1:(xn.current&2)!==0),E&&(p=!0,s.flags&=-129),E=(s.flags&32)!==0,s.flags&=-33,n===null){if(kt){if(p?Ns(s):Ds(),kt){var C=Qt,D;if(D=C){e:{for(D=C,C=Ri;D.nodeType!==8;){if(!C){C=null;break e}if(D=xi(D.nextSibling),D===null){C=null;break e}}C=D}C!==null?(s.memoizedState={dehydrated:C,treeContext:wo!==null?{id:Wi,overflow:es}:null,retryLane:536870912,hydrationErrors:null},D=Nr(18,null,null,0),D.stateNode=C,D.return=s,s.child=D,ur=s,Qt=null,D=!0):D=!1}D||ko(s)}if(C=s.memoizedState,C!==null&&(C=C.dehydrated,C!==null))return rh(C)?s.lanes=32:s.lanes=536870912,null;is(s)}return C=c.children,c=c.fallback,p?(Ds(),p=s.mode,C=ac({mode:"hidden",children:C},p),c=Mo(c,p,l,null),C.return=s,c.return=s,C.sibling=c,s.child=C,p=s.child,p.memoizedState=bd(l),p.childLanes=Sd(n,E,l),s.memoizedState=vd,c):(Ns(s),xd(s,C))}if(D=n.memoizedState,D!==null&&(C=D.dehydrated,C!==null)){if(y)s.flags&256?(Ns(s),s.flags&=-257,s=Ed(n,s,l)):s.memoizedState!==null?(Ds(),s.child=n.child,s.flags|=128,s=null):(Ds(),p=c.fallback,C=s.mode,c=ac({mode:"visible",children:c.children},C),p=Mo(p,C,l,null),p.flags|=2,c.return=s,p.return=s,c.sibling=p,s.child=c,Ol(s,n.child,null,l),c=s.child,c.memoizedState=bd(l),c.childLanes=Sd(n,E,l),s.memoizedState=vd,s=p);else if(Ns(s),rh(C)){if(E=C.nextSibling&&C.nextSibling.dataset,E)var X=E.dgst;E=X,c=Error(i(419)),c.stack="",c.digest=E,Ma({value:c,source:null,stack:null}),s=Ed(n,s,l)}else if(Cn||wa(n,s,l,!1),E=(l&n.childLanes)!==0,Cn||E){if(E=Kt,E!==null&&(c=l&-l,c=(c&42)!==0?1:Se(c),c=(c&(E.suspendedLanes|l))!==0?0:c,c!==0&&c!==D.retryLane))throw D.retryLane=c,bi(n,c),Lr(E,n,c),Wm;C.data==="$?"||Ud(),s=Ed(n,s,l)}else C.data==="$?"?(s.flags|=192,s.child=n.child,s=null):(n=D.treeContext,Qt=xi(C.nextSibling),ur=s,kt=!0,Oo=null,Ri=!1,n!==null&&(Qr[Jr++]=Wi,Qr[Jr++]=es,Qr[Jr++]=wo,Wi=n.id,es=n.overflow,wo=s),s=xd(s,c.children),s.flags|=4096);return s}return p?(Ds(),p=c.fallback,C=s.mode,D=n.child,X=D.sibling,c=Zi(D,{mode:"hidden",children:c.children}),c.subtreeFlags=D.subtreeFlags&65011712,X!==null?p=Zi(X,p):(p=Mo(p,C,l,null),p.flags|=2),p.return=s,c.return=s,c.sibling=p,s.child=c,c=p,p=s.child,C=n.child.memoizedState,C===null?C=bd(l):(D=C.cachePool,D!==null?(X=Sn._currentValue,D=D.parent!==X?{parent:X,pool:X}:D):D=Xp(),C={baseLanes:C.baseLanes|l,cachePool:D}),p.memoizedState=C,p.childLanes=Sd(n,E,l),s.memoizedState=vd,c):(Ns(s),l=n.child,n=l.sibling,l=Zi(l,{mode:"visible",children:c.children}),l.return=s,l.sibling=null,n!==null&&(E=s.deletions,E===null?(s.deletions=[n],s.flags|=16):E.push(n)),s.child=l,s.memoizedState=null,l)}function xd(n,s){return s=ac({mode:"visible",children:s},n.mode),s.return=n,n.child=s}function ac(n,s){return n=Nr(22,n,null,s),n.lanes=0,n.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},n}function Ed(n,s,l){return Ol(s,n.child,null,l),n=xd(s,s.pendingProps.children),n.flags|=2,s.memoizedState=null,n}function ug(n,s,l){n.lanes|=s;var c=n.alternate;c!==null&&(c.lanes|=s),Uf(n.return,s,l)}function Md(n,s,l,c,p){var y=n.memoizedState;y===null?n.memoizedState={isBackwards:s,rendering:null,renderingStartTime:0,last:c,tail:l,tailMode:p}:(y.isBackwards=s,y.rendering=null,y.renderingStartTime=0,y.last=c,y.tail=l,y.tailMode=p)}function cg(n,s,l){var c=s.pendingProps,p=c.revealOrder,y=c.tail;if(Un(n,s,c.children,l),c=xn.current,(c&2)!==0)c=c&1|2,s.flags|=128;else{if(n!==null&&(n.flags&128)!==0)e:for(n=s.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&ug(n,l,s);else if(n.tag===19)ug(n,l,s);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===s)break e;for(;n.sibling===null;){if(n.return===null||n.return===s)break e;n=n.return}n.sibling.return=n.return,n=n.sibling}c&=1}switch(xe(xn,c),p){case"forwards":for(l=s.child,p=null;l!==null;)n=l.alternate,n!==null&&ic(n)===null&&(p=l),l=l.sibling;l=p,l===null?(p=s.child,s.child=null):(p=l.sibling,l.sibling=null),Md(s,!1,p,l,y);break;case"backwards":for(l=null,p=s.child,s.child=null;p!==null;){if(n=p.alternate,n!==null&&ic(n)===null){s.child=p;break}n=p.sibling,p.sibling=l,l=p,p=n}Md(s,!0,l,null,y);break;case"together":Md(s,!1,null,null,void 0);break;default:s.memoizedState=null}return s.child}function ss(n,s,l){if(n!==null&&(s.dependencies=n.dependencies),js|=s.lanes,(l&s.childLanes)===0)if(n!==null){if(wa(n,s,l,!1),(l&s.childLanes)===0)return null}else return null;if(n!==null&&s.child!==n.child)throw Error(i(153));if(s.child!==null){for(n=s.child,l=Zi(n,n.pendingProps),s.child=l,l.return=s;n.sibling!==null;)n=n.sibling,l=l.sibling=Zi(n,n.pendingProps),l.return=s;l.sibling=null}return s.child}function wd(n,s){return(n.lanes&s)!==0?!0:(n=n.dependencies,!!(n!==null&&Iu(n)))}function w1(n,s,l){switch(s.tag){case 3:Nt(s,s.stateNode.containerInfo),Os(s,Sn,n.memoizedState.cache),Ea();break;case 27:case 5:oi(s);break;case 4:Nt(s,s.stateNode.containerInfo);break;case 10:Os(s,s.type,s.memoizedProps.value);break;case 13:var c=s.memoizedState;if(c!==null)return c.dehydrated!==null?(Ns(s),s.flags|=128,null):(l&s.child.childLanes)!==0?ag(n,s,l):(Ns(s),n=ss(n,s,l),n!==null?n.sibling:null);Ns(s);break;case 19:var p=(n.flags&128)!==0;if(c=(l&s.childLanes)!==0,c||(wa(n,s,l,!1),c=(l&s.childLanes)!==0),p){if(c)return cg(n,s,l);s.flags|=128}if(p=s.memoizedState,p!==null&&(p.rendering=null,p.tail=null,p.lastEffect=null),xe(xn,xn.current),c)break;return null;case 22:case 23:return s.lanes=0,rg(n,s,l);case 24:Os(s,Sn,n.memoizedState.cache)}return ss(n,s,l)}function fg(n,s,l){if(n!==null)if(n.memoizedProps!==s.pendingProps)Cn=!0;else{if(!wd(n,l)&&(s.flags&128)===0)return Cn=!1,w1(n,s,l);Cn=(n.flags&131072)!==0}else Cn=!1,kt&&(s.flags&1048576)!==0&&Vp(s,Vu,s.index);switch(s.lanes=0,s.tag){case 16:e:{n=s.pendingProps;var c=s.elementType,p=c._init;if(c=p(c._payload),s.type=c,typeof c=="function")Rf(c)?(n=Do(c,n),s.tag=1,s=og(null,s,c,n,l)):(s.tag=0,s=yd(null,s,c,n,l));else{if(c!=null){if(p=c.$$typeof,p===Le){s.tag=11,s=eg(null,s,c,n,l);break e}else if(p===Fe){s.tag=14,s=tg(null,s,c,n,l);break e}}throw s=ir(c)||c,Error(i(306,s,""))}}return s;case 0:return yd(n,s,s.type,s.pendingProps,l);case 1:return c=s.type,p=Do(c,s.pendingProps),og(n,s,c,p,l);case 3:e:{if(Nt(s,s.stateNode.containerInfo),n===null)throw Error(i(387));c=s.pendingProps;var y=s.memoizedState;p=y.element,$f(n,s),Na(s,c,null,l);var E=s.memoizedState;if(c=E.cache,Os(s,Sn,c),c!==y.cache&&Vf(s,[Sn],l,!0),_a(),c=E.element,y.isDehydrated)if(y={element:c,isDehydrated:!1,cache:E.cache},s.updateQueue.baseState=y,s.memoizedState=y,s.flags&256){s=lg(n,s,c,l);break e}else if(c!==p){p=$e(Error(i(424)),s),Ma(p),s=lg(n,s,c,l);break e}else{switch(n=s.stateNode.containerInfo,n.nodeType){case 9:n=n.body;break;default:n=n.nodeName==="HTML"?n.ownerDocument.body:n}for(Qt=xi(n.firstChild),ur=s,kt=!0,Oo=null,Ri=!0,l=Km(s,null,c,l),s.child=l;l;)l.flags=l.flags&-3|4096,l=l.sibling}else{if(Ea(),c===p){s=ss(n,s,l);break e}Un(n,s,c,l)}s=s.child}return s;case 26:return lc(n,s),n===null?(l=my(s.type,null,s.pendingProps,null))?s.memoizedState=l:kt||(l=s.type,n=s.pendingProps,c=Ec(Qe.current).createElement(l),c[ge]=s,c[ye]=n,In(c,l,n),Mt(c),s.stateNode=c):s.memoizedState=my(s.type,n.memoizedProps,s.pendingProps,n.memoizedState),null;case 27:return oi(s),n===null&&kt&&(c=s.stateNode=dy(s.type,s.pendingProps,Qe.current),ur=s,Ri=!0,p=Qt,Vs(s.type)?(ih=p,Qt=xi(c.firstChild)):Qt=p),Un(n,s,s.pendingProps.children,l),lc(n,s),n===null&&(s.flags|=4194304),s.child;case 5:return n===null&&kt&&((p=c=Qt)&&(c=Z1(c,s.type,s.pendingProps,Ri),c!==null?(s.stateNode=c,ur=s,Qt=xi(c.firstChild),Ri=!1,p=!0):p=!1),p||ko(s)),oi(s),p=s.type,y=s.pendingProps,E=n!==null?n.memoizedProps:null,c=y.children,eh(p,y)?c=null:E!==null&&eh(p,E)&&(s.flags|=32),s.memoizedState!==null&&(p=Wf(n,s,g1,null,null,l),Wa._currentValue=p),lc(n,s),Un(n,s,c,l),s.child;case 6:return n===null&&kt&&((n=l=Qt)&&(l=W1(l,s.pendingProps,Ri),l!==null?(s.stateNode=l,ur=s,Qt=null,n=!0):n=!1),n||ko(s)),null;case 13:return ag(n,s,l);case 4:return Nt(s,s.stateNode.containerInfo),c=s.pendingProps,n===null?s.child=Ol(s,null,c,l):Un(n,s,c,l),s.child;case 11:return eg(n,s,s.type,s.pendingProps,l);case 7:return Un(n,s,s.pendingProps,l),s.child;case 8:return Un(n,s,s.pendingProps.children,l),s.child;case 12:return Un(n,s,s.pendingProps.children,l),s.child;case 10:return c=s.pendingProps,Os(s,s.type,c.value),Un(n,s,c.children,l),s.child;case 9:return p=s.type._context,c=s.pendingProps.children,Ao(s),p=Jn(p),c=c(p),s.flags|=1,Un(n,s,c,l),s.child;case 14:return tg(n,s,s.type,s.pendingProps,l);case 15:return ng(n,s,s.type,s.pendingProps,l);case 19:return cg(n,s,l);case 31:return c=s.pendingProps,l=s.mode,c={mode:c.mode,children:c.children},n===null?(l=ac(c,l),l.ref=s.ref,s.child=l,l.return=s,s=l):(l=Zi(n.child,c),l.ref=s.ref,s.child=l,l.return=s,s=l),s;case 22:return rg(n,s,l);case 24:return Ao(s),c=Jn(Sn),n===null?(p=Pf(),p===null&&(p=Kt,y=If(),p.pooledCache=y,y.refCount++,y!==null&&(p.pooledCacheLanes|=l),p=y),s.memoizedState={parent:c,cache:p},Gf(s),Os(s,Sn,p)):((n.lanes&l)!==0&&($f(n,s),Na(s,null,null,l),_a()),p=n.memoizedState,y=s.memoizedState,p.parent!==c?(p={parent:c,cache:c},s.memoizedState=p,s.lanes===0&&(s.memoizedState=s.updateQueue.baseState=p),Os(s,Sn,c)):(c=y.cache,Os(s,Sn,c),c!==p.cache&&Vf(s,[Sn],l,!0))),Un(n,s,s.pendingProps.children,l),s.child;case 29:throw s.pendingProps}throw Error(i(156,s.tag))}function ls(n){n.flags|=4}function dg(n,s){if(s.type!=="stylesheet"||(s.state.loading&4)!==0)n.flags&=-16777217;else if(n.flags|=16777216,!Sy(s)){if(s=Zr.current,s!==null&&((Et&4194048)===Et?Bi!==null:(Et&62914560)!==Et&&(Et&536870912)===0||s!==Bi))throw Ca=Yf,Fp;n.flags|=8192}}function uc(n,s){s!==null&&(n.flags|=4),n.flags&16384&&(s=n.tag!==22?we():536870912,n.lanes|=s,_l|=s)}function Ha(n,s){if(!kt)switch(n.tailMode){case"hidden":s=n.tail;for(var l=null;s!==null;)s.alternate!==null&&(l=s),s=s.sibling;l===null?n.tail=null:l.sibling=null;break;case"collapsed":l=n.tail;for(var c=null;l!==null;)l.alternate!==null&&(c=l),l=l.sibling;c===null?s||n.tail===null?n.tail=null:n.tail.sibling=null:c.sibling=null}}function $t(n){var s=n.alternate!==null&&n.alternate.child===n.child,l=0,c=0;if(s)for(var p=n.child;p!==null;)l|=p.lanes|p.childLanes,c|=p.subtreeFlags&65011712,c|=p.flags&65011712,p.return=n,p=p.sibling;else for(p=n.child;p!==null;)l|=p.lanes|p.childLanes,c|=p.subtreeFlags,c|=p.flags,p.return=n,p=p.sibling;return n.subtreeFlags|=c,n.childLanes=l,s}function T1(n,s,l){var c=s.pendingProps;switch(jf(s),s.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return $t(s),null;case 1:return $t(s),null;case 3:return l=s.stateNode,c=null,n!==null&&(c=n.memoizedState.cache),s.memoizedState.cache!==c&&(s.flags|=2048),ns(Sn),Ve(),l.pendingContext&&(l.context=l.pendingContext,l.pendingContext=null),(n===null||n.child===null)&&(xa(s)?ls(s):n===null||n.memoizedState.isDehydrated&&(s.flags&256)===0||(s.flags|=1024,Pp())),$t(s),null;case 26:return l=s.memoizedState,n===null?(ls(s),l!==null?($t(s),dg(s,l)):($t(s),s.flags&=-16777217)):l?l!==n.memoizedState?(ls(s),$t(s),dg(s,l)):($t(s),s.flags&=-16777217):(n.memoizedProps!==c&&ls(s),$t(s),s.flags&=-16777217),null;case 27:li(s),l=Qe.current;var p=s.type;if(n!==null&&s.stateNode!=null)n.memoizedProps!==c&&ls(s);else{if(!c){if(s.stateNode===null)throw Error(i(166));return $t(s),null}n=Ge.current,xa(s)?Ip(s):(n=dy(p,c,l),s.stateNode=n,ls(s))}return $t(s),null;case 5:if(li(s),l=s.type,n!==null&&s.stateNode!=null)n.memoizedProps!==c&&ls(s);else{if(!c){if(s.stateNode===null)throw Error(i(166));return $t(s),null}if(n=Ge.current,xa(s))Ip(s);else{switch(p=Ec(Qe.current),n){case 1:n=p.createElementNS("http://www.w3.org/2000/svg",l);break;case 2:n=p.createElementNS("http://www.w3.org/1998/Math/MathML",l);break;default:switch(l){case"svg":n=p.createElementNS("http://www.w3.org/2000/svg",l);break;case"math":n=p.createElementNS("http://www.w3.org/1998/Math/MathML",l);break;case"script":n=p.createElement("div"),n.innerHTML="<script><\/script>",n=n.removeChild(n.firstChild);break;case"select":n=typeof c.is=="string"?p.createElement("select",{is:c.is}):p.createElement("select"),c.multiple?n.multiple=!0:c.size&&(n.size=c.size);break;default:n=typeof c.is=="string"?p.createElement(l,{is:c.is}):p.createElement(l)}}n[ge]=s,n[ye]=c;e:for(p=s.child;p!==null;){if(p.tag===5||p.tag===6)n.appendChild(p.stateNode);else if(p.tag!==4&&p.tag!==27&&p.child!==null){p.child.return=p,p=p.child;continue}if(p===s)break e;for(;p.sibling===null;){if(p.return===null||p.return===s)break e;p=p.return}p.sibling.return=p.return,p=p.sibling}s.stateNode=n;e:switch(In(n,l,c),l){case"button":case"input":case"select":case"textarea":n=!!c.autoFocus;break e;case"img":n=!0;break e;default:n=!1}n&&ls(s)}}return $t(s),s.flags&=-16777217,null;case 6:if(n&&s.stateNode!=null)n.memoizedProps!==c&&ls(s);else{if(typeof c!="string"&&s.stateNode===null)throw Error(i(166));if(n=Qe.current,xa(s)){if(n=s.stateNode,l=s.memoizedProps,c=null,p=ur,p!==null)switch(p.tag){case 27:case 5:c=p.memoizedProps}n[ge]=s,n=!!(n.nodeValue===l||c!==null&&c.suppressHydrationWarning===!0||sy(n.nodeValue,l)),n||ko(s)}else n=Ec(n).createTextNode(c),n[ge]=s,s.stateNode=n}return $t(s),null;case 13:if(c=s.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(p=xa(s),c!==null&&c.dehydrated!==null){if(n===null){if(!p)throw Error(i(318));if(p=s.memoizedState,p=p!==null?p.dehydrated:null,!p)throw Error(i(317));p[ge]=s}else Ea(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;$t(s),p=!1}else p=Pp(),n!==null&&n.memoizedState!==null&&(n.memoizedState.hydrationErrors=p),p=!0;if(!p)return s.flags&256?(is(s),s):(is(s),null)}if(is(s),(s.flags&128)!==0)return s.lanes=l,s;if(l=c!==null,n=n!==null&&n.memoizedState!==null,l){c=s.child,p=null,c.alternate!==null&&c.alternate.memoizedState!==null&&c.alternate.memoizedState.cachePool!==null&&(p=c.alternate.memoizedState.cachePool.pool);var y=null;c.memoizedState!==null&&c.memoizedState.cachePool!==null&&(y=c.memoizedState.cachePool.pool),y!==p&&(c.flags|=2048)}return l!==n&&l&&(s.child.flags|=8192),uc(s,s.updateQueue),$t(s),null;case 4:return Ve(),n===null&&Fd(s.stateNode.containerInfo),$t(s),null;case 10:return ns(s.type),$t(s),null;case 19:if(Ne(xn),p=s.memoizedState,p===null)return $t(s),null;if(c=(s.flags&128)!==0,y=p.rendering,y===null)if(c)Ha(p,!1);else{if(Jt!==0||n!==null&&(n.flags&128)!==0)for(n=s.child;n!==null;){if(y=ic(n),y!==null){for(s.flags|=128,Ha(p,!1),n=y.updateQueue,s.updateQueue=n,uc(s,n),s.subtreeFlags=0,n=l,l=s.child;l!==null;)Up(l,n),l=l.sibling;return xe(xn,xn.current&1|2),s.child}n=n.sibling}p.tail!==null&&pr()>dc&&(s.flags|=128,c=!0,Ha(p,!1),s.lanes=4194304)}else{if(!c)if(n=ic(y),n!==null){if(s.flags|=128,c=!0,n=n.updateQueue,s.updateQueue=n,uc(s,n),Ha(p,!0),p.tail===null&&p.tailMode==="hidden"&&!y.alternate&&!kt)return $t(s),null}else 2*pr()-p.renderingStartTime>dc&&l!==536870912&&(s.flags|=128,c=!0,Ha(p,!1),s.lanes=4194304);p.isBackwards?(y.sibling=s.child,s.child=y):(n=p.last,n!==null?n.sibling=y:s.child=y,p.last=y)}return p.tail!==null?(s=p.tail,p.rendering=s,p.tail=s.sibling,p.renderingStartTime=pr(),s.sibling=null,n=xn.current,xe(xn,c?n&1|2:n&1),s):($t(s),null);case 22:case 23:return is(s),Jf(),c=s.memoizedState!==null,n!==null?n.memoizedState!==null!==c&&(s.flags|=8192):c&&(s.flags|=8192),c?(l&536870912)!==0&&(s.flags&128)===0&&($t(s),s.subtreeFlags&6&&(s.flags|=8192)):$t(s),l=s.updateQueue,l!==null&&uc(s,l.retryQueue),l=null,n!==null&&n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(l=n.memoizedState.cachePool.pool),c=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(c=s.memoizedState.cachePool.pool),c!==l&&(s.flags|=2048),n!==null&&Ne(_o),null;case 24:return l=null,n!==null&&(l=n.memoizedState.cache),s.memoizedState.cache!==l&&(s.flags|=2048),ns(Sn),$t(s),null;case 25:return null;case 30:return null}throw Error(i(156,s.tag))}function O1(n,s){switch(jf(s),s.tag){case 1:return n=s.flags,n&65536?(s.flags=n&-65537|128,s):null;case 3:return ns(Sn),Ve(),n=s.flags,(n&65536)!==0&&(n&128)===0?(s.flags=n&-65537|128,s):null;case 26:case 27:case 5:return li(s),null;case 13:if(is(s),n=s.memoizedState,n!==null&&n.dehydrated!==null){if(s.alternate===null)throw Error(i(340));Ea()}return n=s.flags,n&65536?(s.flags=n&-65537|128,s):null;case 19:return Ne(xn),null;case 4:return Ve(),null;case 10:return ns(s.type),null;case 22:case 23:return is(s),Jf(),n!==null&&Ne(_o),n=s.flags,n&65536?(s.flags=n&-65537|128,s):null;case 24:return ns(Sn),null;case 25:return null;default:return null}}function hg(n,s){switch(jf(s),s.tag){case 3:ns(Sn),Ve();break;case 26:case 27:case 5:li(s);break;case 4:Ve();break;case 13:is(s);break;case 19:Ne(xn);break;case 10:ns(s.type);break;case 22:case 23:is(s),Jf(),n!==null&&Ne(_o);break;case 24:ns(Sn)}}function qa(n,s){try{var l=s.updateQueue,c=l!==null?l.lastEffect:null;if(c!==null){var p=c.next;l=p;do{if((l.tag&n)===n){c=void 0;var y=l.create,E=l.inst;c=y(),E.destroy=c}l=l.next}while(l!==p)}}catch(C){zt(s,s.return,C)}}function Rs(n,s,l){try{var c=s.updateQueue,p=c!==null?c.lastEffect:null;if(p!==null){var y=p.next;c=y;do{if((c.tag&n)===n){var E=c.inst,C=E.destroy;if(C!==void 0){E.destroy=void 0,p=s;var D=l,X=C;try{X()}catch(re){zt(p,D,re)}}}c=c.next}while(c!==y)}}catch(re){zt(s,s.return,re)}}function pg(n){var s=n.updateQueue;if(s!==null){var l=n.stateNode;try{tm(s,l)}catch(c){zt(n,n.return,c)}}}function mg(n,s,l){l.props=Do(n.type,n.memoizedProps),l.state=n.memoizedState;try{l.componentWillUnmount()}catch(c){zt(n,s,c)}}function Ua(n,s){try{var l=n.ref;if(l!==null){switch(n.tag){case 26:case 27:case 5:var c=n.stateNode;break;case 30:c=n.stateNode;break;default:c=n.stateNode}typeof l=="function"?n.refCleanup=l(c):l.current=c}}catch(p){zt(n,s,p)}}function zi(n,s){var l=n.ref,c=n.refCleanup;if(l!==null)if(typeof c=="function")try{c()}catch(p){zt(n,s,p)}finally{n.refCleanup=null,n=n.alternate,n!=null&&(n.refCleanup=null)}else if(typeof l=="function")try{l(null)}catch(p){zt(n,s,p)}else l.current=null}function gg(n){var s=n.type,l=n.memoizedProps,c=n.stateNode;try{e:switch(s){case"button":case"input":case"select":case"textarea":l.autoFocus&&c.focus();break e;case"img":l.src?c.src=l.src:l.srcSet&&(c.srcset=l.srcSet)}}catch(p){zt(n,n.return,p)}}function Td(n,s,l){try{var c=n.stateNode;$1(c,n.type,l,s),c[ye]=s}catch(p){zt(n,n.return,p)}}function yg(n){return n.tag===5||n.tag===3||n.tag===26||n.tag===27&&Vs(n.type)||n.tag===4}function Od(n){e:for(;;){for(;n.sibling===null;){if(n.return===null||yg(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.tag===27&&Vs(n.type)||n.flags&2||n.child===null||n.tag===4)continue e;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function kd(n,s,l){var c=n.tag;if(c===5||c===6)n=n.stateNode,s?(l.nodeType===9?l.body:l.nodeName==="HTML"?l.ownerDocument.body:l).insertBefore(n,s):(s=l.nodeType===9?l.body:l.nodeName==="HTML"?l.ownerDocument.body:l,s.appendChild(n),l=l._reactRootContainer,l!=null||s.onclick!==null||(s.onclick=xc));else if(c!==4&&(c===27&&Vs(n.type)&&(l=n.stateNode,s=null),n=n.child,n!==null))for(kd(n,s,l),n=n.sibling;n!==null;)kd(n,s,l),n=n.sibling}function cc(n,s,l){var c=n.tag;if(c===5||c===6)n=n.stateNode,s?l.insertBefore(n,s):l.appendChild(n);else if(c!==4&&(c===27&&Vs(n.type)&&(l=n.stateNode),n=n.child,n!==null))for(cc(n,s,l),n=n.sibling;n!==null;)cc(n,s,l),n=n.sibling}function vg(n){var s=n.stateNode,l=n.memoizedProps;try{for(var c=n.type,p=s.attributes;p.length;)s.removeAttributeNode(p[0]);In(s,c,l),s[ge]=n,s[ye]=l}catch(y){zt(n,n.return,y)}}var as=!1,nn=!1,Cd=!1,bg=typeof WeakSet=="function"?WeakSet:Set,An=null;function k1(n,s){if(n=n.containerInfo,Zd=Cc,n=M(n),k(n)){if("selectionStart"in n)var l={start:n.selectionStart,end:n.selectionEnd};else e:{l=(l=n.ownerDocument)&&l.defaultView||window;var c=l.getSelection&&l.getSelection();if(c&&c.rangeCount!==0){l=c.anchorNode;var p=c.anchorOffset,y=c.focusNode;c=c.focusOffset;try{l.nodeType,y.nodeType}catch{l=null;break e}var E=0,C=-1,D=-1,X=0,re=0,oe=n,Q=null;t:for(;;){for(var J;oe!==l||p!==0&&oe.nodeType!==3||(C=E+p),oe!==y||c!==0&&oe.nodeType!==3||(D=E+c),oe.nodeType===3&&(E+=oe.nodeValue.length),(J=oe.firstChild)!==null;)Q=oe,oe=J;for(;;){if(oe===n)break t;if(Q===l&&++X===p&&(C=E),Q===y&&++re===c&&(D=E),(J=oe.nextSibling)!==null)break;oe=Q,Q=oe.parentNode}oe=J}l=C===-1||D===-1?null:{start:C,end:D}}else l=null}l=l||{start:0,end:0}}else l=null;for(Wd={focusedElem:n,selectionRange:l},Cc=!1,An=s;An!==null;)if(s=An,n=s.child,(s.subtreeFlags&1024)!==0&&n!==null)n.return=s,An=n;else for(;An!==null;){switch(s=An,y=s.alternate,n=s.flags,s.tag){case 0:break;case 11:case 15:break;case 1:if((n&1024)!==0&&y!==null){n=void 0,l=s,p=y.memoizedProps,y=y.memoizedState,c=l.stateNode;try{var rt=Do(l.type,p,l.elementType===l.type);n=c.getSnapshotBeforeUpdate(rt,y),c.__reactInternalSnapshotBeforeUpdate=n}catch(Ze){zt(l,l.return,Ze)}}break;case 3:if((n&1024)!==0){if(n=s.stateNode.containerInfo,l=n.nodeType,l===9)nh(n);else if(l===1)switch(n.nodeName){case"HEAD":case"HTML":case"BODY":nh(n);break;default:n.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((n&1024)!==0)throw Error(i(163))}if(n=s.sibling,n!==null){n.return=s.return,An=n;break}An=s.return}}function Sg(n,s,l){var c=l.flags;switch(l.tag){case 0:case 11:case 15:Bs(n,l),c&4&&qa(5,l);break;case 1:if(Bs(n,l),c&4)if(n=l.stateNode,s===null)try{n.componentDidMount()}catch(E){zt(l,l.return,E)}else{var p=Do(l.type,s.memoizedProps);s=s.memoizedState;try{n.componentDidUpdate(p,s,n.__reactInternalSnapshotBeforeUpdate)}catch(E){zt(l,l.return,E)}}c&64&&pg(l),c&512&&Ua(l,l.return);break;case 3:if(Bs(n,l),c&64&&(n=l.updateQueue,n!==null)){if(s=null,l.child!==null)switch(l.child.tag){case 27:case 5:s=l.child.stateNode;break;case 1:s=l.child.stateNode}try{tm(n,s)}catch(E){zt(l,l.return,E)}}break;case 27:s===null&&c&4&&vg(l);case 26:case 5:Bs(n,l),s===null&&c&4&&gg(l),c&512&&Ua(l,l.return);break;case 12:Bs(n,l);break;case 13:Bs(n,l),c&4&&Mg(n,l),c&64&&(n=l.memoizedState,n!==null&&(n=n.dehydrated,n!==null&&(l=L1.bind(null,l),eS(n,l))));break;case 22:if(c=l.memoizedState!==null||as,!c){s=s!==null&&s.memoizedState!==null||nn,p=as;var y=nn;as=c,(nn=s)&&!y?zs(n,l,(l.subtreeFlags&8772)!==0):Bs(n,l),as=p,nn=y}break;case 30:break;default:Bs(n,l)}}function xg(n){var s=n.alternate;s!==null&&(n.alternate=null,xg(s)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(s=n.stateNode,s!==null&&Gn(s)),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}var Gt=null,Sr=!1;function us(n,s,l){for(l=l.child;l!==null;)Eg(n,s,l),l=l.sibling}function Eg(n,s,l){if(Ht&&typeof Ht.onCommitFiberUnmount=="function")try{Ht.onCommitFiberUnmount(on,l)}catch{}switch(l.tag){case 26:nn||zi(l,s),us(n,s,l),l.memoizedState?l.memoizedState.count--:l.stateNode&&(l=l.stateNode,l.parentNode.removeChild(l));break;case 27:nn||zi(l,s);var c=Gt,p=Sr;Vs(l.type)&&(Gt=l.stateNode,Sr=!1),us(n,s,l),Fa(l.stateNode),Gt=c,Sr=p;break;case 5:nn||zi(l,s);case 6:if(c=Gt,p=Sr,Gt=null,us(n,s,l),Gt=c,Sr=p,Gt!==null)if(Sr)try{(Gt.nodeType===9?Gt.body:Gt.nodeName==="HTML"?Gt.ownerDocument.body:Gt).removeChild(l.stateNode)}catch(y){zt(l,s,y)}else try{Gt.removeChild(l.stateNode)}catch(y){zt(l,s,y)}break;case 18:Gt!==null&&(Sr?(n=Gt,cy(n.nodeType===9?n.body:n.nodeName==="HTML"?n.ownerDocument.body:n,l.stateNode),ru(n)):cy(Gt,l.stateNode));break;case 4:c=Gt,p=Sr,Gt=l.stateNode.containerInfo,Sr=!0,us(n,s,l),Gt=c,Sr=p;break;case 0:case 11:case 14:case 15:nn||Rs(2,l,s),nn||Rs(4,l,s),us(n,s,l);break;case 1:nn||(zi(l,s),c=l.stateNode,typeof c.componentWillUnmount=="function"&&mg(l,s,c)),us(n,s,l);break;case 21:us(n,s,l);break;case 22:nn=(c=nn)||l.memoizedState!==null,us(n,s,l),nn=c;break;default:us(n,s,l)}}function Mg(n,s){if(s.memoizedState===null&&(n=s.alternate,n!==null&&(n=n.memoizedState,n!==null&&(n=n.dehydrated,n!==null))))try{ru(n)}catch(l){zt(s,s.return,l)}}function C1(n){switch(n.tag){case 13:case 19:var s=n.stateNode;return s===null&&(s=n.stateNode=new bg),s;case 22:return n=n.stateNode,s=n._retryCache,s===null&&(s=n._retryCache=new bg),s;default:throw Error(i(435,n.tag))}}function Ad(n,s){var l=C1(n);s.forEach(function(c){var p=j1.bind(null,n,c);l.has(c)||(l.add(c),c.then(p,p))})}function Dr(n,s){var l=s.deletions;if(l!==null)for(var c=0;c<l.length;c++){var p=l[c],y=n,E=s,C=E;e:for(;C!==null;){switch(C.tag){case 27:if(Vs(C.type)){Gt=C.stateNode,Sr=!1;break e}break;case 5:Gt=C.stateNode,Sr=!1;break e;case 3:case 4:Gt=C.stateNode.containerInfo,Sr=!0;break e}C=C.return}if(Gt===null)throw Error(i(160));Eg(y,E,p),Gt=null,Sr=!1,y=p.alternate,y!==null&&(y.return=null),p.return=null}if(s.subtreeFlags&13878)for(s=s.child;s!==null;)wg(s,n),s=s.sibling}var Si=null;function wg(n,s){var l=n.alternate,c=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:Dr(s,n),Rr(n),c&4&&(Rs(3,n,n.return),qa(3,n),Rs(5,n,n.return));break;case 1:Dr(s,n),Rr(n),c&512&&(nn||l===null||zi(l,l.return)),c&64&&as&&(n=n.updateQueue,n!==null&&(c=n.callbacks,c!==null&&(l=n.shared.hiddenCallbacks,n.shared.hiddenCallbacks=l===null?c:l.concat(c))));break;case 26:var p=Si;if(Dr(s,n),Rr(n),c&512&&(nn||l===null||zi(l,l.return)),c&4){var y=l!==null?l.memoizedState:null;if(c=n.memoizedState,l===null)if(c===null)if(n.stateNode===null){e:{c=n.type,l=n.memoizedProps,p=p.ownerDocument||p;t:switch(c){case"title":y=p.getElementsByTagName("title")[0],(!y||y[Yi]||y[ge]||y.namespaceURI==="http://www.w3.org/2000/svg"||y.hasAttribute("itemprop"))&&(y=p.createElement(c),p.head.insertBefore(y,p.querySelector("head > title"))),In(y,c,l),y[ge]=n,Mt(y),c=y;break e;case"link":var E=vy("link","href",p).get(c+(l.href||""));if(E){for(var C=0;C<E.length;C++)if(y=E[C],y.getAttribute("href")===(l.href==null||l.href===""?null:l.href)&&y.getAttribute("rel")===(l.rel==null?null:l.rel)&&y.getAttribute("title")===(l.title==null?null:l.title)&&y.getAttribute("crossorigin")===(l.crossOrigin==null?null:l.crossOrigin)){E.splice(C,1);break t}}y=p.createElement(c),In(y,c,l),p.head.appendChild(y);break;case"meta":if(E=vy("meta","content",p).get(c+(l.content||""))){for(C=0;C<E.length;C++)if(y=E[C],y.getAttribute("content")===(l.content==null?null:""+l.content)&&y.getAttribute("name")===(l.name==null?null:l.name)&&y.getAttribute("property")===(l.property==null?null:l.property)&&y.getAttribute("http-equiv")===(l.httpEquiv==null?null:l.httpEquiv)&&y.getAttribute("charset")===(l.charSet==null?null:l.charSet)){E.splice(C,1);break t}}y=p.createElement(c),In(y,c,l),p.head.appendChild(y);break;default:throw Error(i(468,c))}y[ge]=n,Mt(y),c=y}n.stateNode=c}else by(p,n.type,n.stateNode);else n.stateNode=yy(p,c,n.memoizedProps);else y!==c?(y===null?l.stateNode!==null&&(l=l.stateNode,l.parentNode.removeChild(l)):y.count--,c===null?by(p,n.type,n.stateNode):yy(p,c,n.memoizedProps)):c===null&&n.stateNode!==null&&Td(n,n.memoizedProps,l.memoizedProps)}break;case 27:Dr(s,n),Rr(n),c&512&&(nn||l===null||zi(l,l.return)),l!==null&&c&4&&Td(n,n.memoizedProps,l.memoizedProps);break;case 5:if(Dr(s,n),Rr(n),c&512&&(nn||l===null||zi(l,l.return)),n.flags&32){p=n.stateNode;try{Gr(p,"")}catch(J){zt(n,n.return,J)}}c&4&&n.stateNode!=null&&(p=n.memoizedProps,Td(n,p,l!==null?l.memoizedProps:p)),c&1024&&(Cd=!0);break;case 6:if(Dr(s,n),Rr(n),c&4){if(n.stateNode===null)throw Error(i(162));c=n.memoizedProps,l=n.stateNode;try{l.nodeValue=c}catch(J){zt(n,n.return,J)}}break;case 3:if(Tc=null,p=Si,Si=Mc(s.containerInfo),Dr(s,n),Si=p,Rr(n),c&4&&l!==null&&l.memoizedState.isDehydrated)try{ru(s.containerInfo)}catch(J){zt(n,n.return,J)}Cd&&(Cd=!1,Tg(n));break;case 4:c=Si,Si=Mc(n.stateNode.containerInfo),Dr(s,n),Rr(n),Si=c;break;case 12:Dr(s,n),Rr(n);break;case 13:Dr(s,n),Rr(n),n.child.flags&8192&&n.memoizedState!==null!=(l!==null&&l.memoizedState!==null)&&(zd=pr()),c&4&&(c=n.updateQueue,c!==null&&(n.updateQueue=null,Ad(n,c)));break;case 22:p=n.memoizedState!==null;var D=l!==null&&l.memoizedState!==null,X=as,re=nn;if(as=X||p,nn=re||D,Dr(s,n),nn=re,as=X,Rr(n),c&8192)e:for(s=n.stateNode,s._visibility=p?s._visibility&-2:s._visibility|1,p&&(l===null||D||as||nn||Ro(n)),l=null,s=n;;){if(s.tag===5||s.tag===26){if(l===null){D=l=s;try{if(y=D.stateNode,p)E=y.style,typeof E.setProperty=="function"?E.setProperty("display","none","important"):E.display="none";else{C=D.stateNode;var oe=D.memoizedProps.style,Q=oe!=null&&oe.hasOwnProperty("display")?oe.display:null;C.style.display=Q==null||typeof Q=="boolean"?"":(""+Q).trim()}}catch(J){zt(D,D.return,J)}}}else if(s.tag===6){if(l===null){D=s;try{D.stateNode.nodeValue=p?"":D.memoizedProps}catch(J){zt(D,D.return,J)}}}else if((s.tag!==22&&s.tag!==23||s.memoizedState===null||s===n)&&s.child!==null){s.child.return=s,s=s.child;continue}if(s===n)break e;for(;s.sibling===null;){if(s.return===null||s.return===n)break e;l===s&&(l=null),s=s.return}l===s&&(l=null),s.sibling.return=s.return,s=s.sibling}c&4&&(c=n.updateQueue,c!==null&&(l=c.retryQueue,l!==null&&(c.retryQueue=null,Ad(n,l))));break;case 19:Dr(s,n),Rr(n),c&4&&(c=n.updateQueue,c!==null&&(n.updateQueue=null,Ad(n,c)));break;case 30:break;case 21:break;default:Dr(s,n),Rr(n)}}function Rr(n){var s=n.flags;if(s&2){try{for(var l,c=n.return;c!==null;){if(yg(c)){l=c;break}c=c.return}if(l==null)throw Error(i(160));switch(l.tag){case 27:var p=l.stateNode,y=Od(n);cc(n,y,p);break;case 5:var E=l.stateNode;l.flags&32&&(Gr(E,""),l.flags&=-33);var C=Od(n);cc(n,C,E);break;case 3:case 4:var D=l.stateNode.containerInfo,X=Od(n);kd(n,X,D);break;default:throw Error(i(161))}}catch(re){zt(n,n.return,re)}n.flags&=-3}s&4096&&(n.flags&=-4097)}function Tg(n){if(n.subtreeFlags&1024)for(n=n.child;n!==null;){var s=n;Tg(s),s.tag===5&&s.flags&1024&&s.stateNode.reset(),n=n.sibling}}function Bs(n,s){if(s.subtreeFlags&8772)for(s=s.child;s!==null;)Sg(n,s.alternate,s),s=s.sibling}function Ro(n){for(n=n.child;n!==null;){var s=n;switch(s.tag){case 0:case 11:case 14:case 15:Rs(4,s,s.return),Ro(s);break;case 1:zi(s,s.return);var l=s.stateNode;typeof l.componentWillUnmount=="function"&&mg(s,s.return,l),Ro(s);break;case 27:Fa(s.stateNode);case 26:case 5:zi(s,s.return),Ro(s);break;case 22:s.memoizedState===null&&Ro(s);break;case 30:Ro(s);break;default:Ro(s)}n=n.sibling}}function zs(n,s,l){for(l=l&&(s.subtreeFlags&8772)!==0,s=s.child;s!==null;){var c=s.alternate,p=n,y=s,E=y.flags;switch(y.tag){case 0:case 11:case 15:zs(p,y,l),qa(4,y);break;case 1:if(zs(p,y,l),c=y,p=c.stateNode,typeof p.componentDidMount=="function")try{p.componentDidMount()}catch(X){zt(c,c.return,X)}if(c=y,p=c.updateQueue,p!==null){var C=c.stateNode;try{var D=p.shared.hiddenCallbacks;if(D!==null)for(p.shared.hiddenCallbacks=null,p=0;p<D.length;p++)em(D[p],C)}catch(X){zt(c,c.return,X)}}l&&E&64&&pg(y),Ua(y,y.return);break;case 27:vg(y);case 26:case 5:zs(p,y,l),l&&c===null&&E&4&&gg(y),Ua(y,y.return);break;case 12:zs(p,y,l);break;case 13:zs(p,y,l),l&&E&4&&Mg(p,y);break;case 22:y.memoizedState===null&&zs(p,y,l),Ua(y,y.return);break;case 30:break;default:zs(p,y,l)}s=s.sibling}}function _d(n,s){var l=null;n!==null&&n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(l=n.memoizedState.cachePool.pool),n=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(n=s.memoizedState.cachePool.pool),n!==l&&(n!=null&&n.refCount++,l!=null&&Ta(l))}function Nd(n,s){n=null,s.alternate!==null&&(n=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==n&&(s.refCount++,n!=null&&Ta(n))}function Li(n,s,l,c){if(s.subtreeFlags&10256)for(s=s.child;s!==null;)Og(n,s,l,c),s=s.sibling}function Og(n,s,l,c){var p=s.flags;switch(s.tag){case 0:case 11:case 15:Li(n,s,l,c),p&2048&&qa(9,s);break;case 1:Li(n,s,l,c);break;case 3:Li(n,s,l,c),p&2048&&(n=null,s.alternate!==null&&(n=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==n&&(s.refCount++,n!=null&&Ta(n)));break;case 12:if(p&2048){Li(n,s,l,c),n=s.stateNode;try{var y=s.memoizedProps,E=y.id,C=y.onPostCommit;typeof C=="function"&&C(E,s.alternate===null?"mount":"update",n.passiveEffectDuration,-0)}catch(D){zt(s,s.return,D)}}else Li(n,s,l,c);break;case 13:Li(n,s,l,c);break;case 23:break;case 22:y=s.stateNode,E=s.alternate,s.memoizedState!==null?y._visibility&2?Li(n,s,l,c):Va(n,s):y._visibility&2?Li(n,s,l,c):(y._visibility|=2,kl(n,s,l,c,(s.subtreeFlags&10256)!==0)),p&2048&&_d(E,s);break;case 24:Li(n,s,l,c),p&2048&&Nd(s.alternate,s);break;default:Li(n,s,l,c)}}function kl(n,s,l,c,p){for(p=p&&(s.subtreeFlags&10256)!==0,s=s.child;s!==null;){var y=n,E=s,C=l,D=c,X=E.flags;switch(E.tag){case 0:case 11:case 15:kl(y,E,C,D,p),qa(8,E);break;case 23:break;case 22:var re=E.stateNode;E.memoizedState!==null?re._visibility&2?kl(y,E,C,D,p):Va(y,E):(re._visibility|=2,kl(y,E,C,D,p)),p&&X&2048&&_d(E.alternate,E);break;case 24:kl(y,E,C,D,p),p&&X&2048&&Nd(E.alternate,E);break;default:kl(y,E,C,D,p)}s=s.sibling}}function Va(n,s){if(s.subtreeFlags&10256)for(s=s.child;s!==null;){var l=n,c=s,p=c.flags;switch(c.tag){case 22:Va(l,c),p&2048&&_d(c.alternate,c);break;case 24:Va(l,c),p&2048&&Nd(c.alternate,c);break;default:Va(l,c)}s=s.sibling}}var Ia=8192;function Cl(n){if(n.subtreeFlags&Ia)for(n=n.child;n!==null;)kg(n),n=n.sibling}function kg(n){switch(n.tag){case 26:Cl(n),n.flags&Ia&&n.memoizedState!==null&&hS(Si,n.memoizedState,n.memoizedProps);break;case 5:Cl(n);break;case 3:case 4:var s=Si;Si=Mc(n.stateNode.containerInfo),Cl(n),Si=s;break;case 22:n.memoizedState===null&&(s=n.alternate,s!==null&&s.memoizedState!==null?(s=Ia,Ia=16777216,Cl(n),Ia=s):Cl(n));break;default:Cl(n)}}function Cg(n){var s=n.alternate;if(s!==null&&(n=s.child,n!==null)){s.child=null;do s=n.sibling,n.sibling=null,n=s;while(n!==null)}}function Ka(n){var s=n.deletions;if((n.flags&16)!==0){if(s!==null)for(var l=0;l<s.length;l++){var c=s[l];An=c,_g(c,n)}Cg(n)}if(n.subtreeFlags&10256)for(n=n.child;n!==null;)Ag(n),n=n.sibling}function Ag(n){switch(n.tag){case 0:case 11:case 15:Ka(n),n.flags&2048&&Rs(9,n,n.return);break;case 3:Ka(n);break;case 12:Ka(n);break;case 22:var s=n.stateNode;n.memoizedState!==null&&s._visibility&2&&(n.return===null||n.return.tag!==13)?(s._visibility&=-3,fc(n)):Ka(n);break;default:Ka(n)}}function fc(n){var s=n.deletions;if((n.flags&16)!==0){if(s!==null)for(var l=0;l<s.length;l++){var c=s[l];An=c,_g(c,n)}Cg(n)}for(n=n.child;n!==null;){switch(s=n,s.tag){case 0:case 11:case 15:Rs(8,s,s.return),fc(s);break;case 22:l=s.stateNode,l._visibility&2&&(l._visibility&=-3,fc(s));break;default:fc(s)}n=n.sibling}}function _g(n,s){for(;An!==null;){var l=An;switch(l.tag){case 0:case 11:case 15:Rs(8,l,s);break;case 23:case 22:if(l.memoizedState!==null&&l.memoizedState.cachePool!==null){var c=l.memoizedState.cachePool.pool;c!=null&&c.refCount++}break;case 24:Ta(l.memoizedState.cache)}if(c=l.child,c!==null)c.return=l,An=c;else e:for(l=n;An!==null;){c=An;var p=c.sibling,y=c.return;if(xg(c),c===l){An=null;break e}if(p!==null){p.return=y,An=p;break e}An=y}}}var A1={getCacheForType:function(n){var s=Jn(Sn),l=s.data.get(n);return l===void 0&&(l=n(),s.data.set(n,l)),l}},_1=typeof WeakMap=="function"?WeakMap:Map,At=0,Kt=null,gt=null,Et=0,_t=0,Br=null,Ls=!1,Al=!1,Dd=!1,cs=0,Jt=0,js=0,Bo=0,Rd=0,Wr=0,_l=0,Pa=null,xr=null,Bd=!1,zd=0,dc=1/0,hc=null,Hs=null,Vn=0,qs=null,Nl=null,Dl=0,Ld=0,jd=null,Ng=null,Ya=0,Hd=null;function zr(){if((At&2)!==0&&Et!==0)return Et&-Et;if(te.T!==null){var n=bl;return n!==0?n:Yd()}return Ot()}function Dg(){Wr===0&&(Wr=(Et&536870912)===0||kt?Oi():536870912);var n=Zr.current;return n!==null&&(n.flags|=32),Wr}function Lr(n,s,l){(n===Kt&&(_t===2||_t===9)||n.cancelPendingCommit!==null)&&(Rl(n,0),Us(n,Et,Wr,!1)),pi(n,l),((At&2)===0||n!==Kt)&&(n===Kt&&((At&2)===0&&(Bo|=l),Jt===4&&Us(n,Et,Wr,!1)),ji(n))}function Rg(n,s,l){if((At&6)!==0)throw Error(i(327));var c=!l&&(s&124)===0&&(s&n.expiredLanes)===0||wr(n,s),p=c?R1(n,s):Vd(n,s,!0),y=c;do{if(p===0){Al&&!c&&Us(n,s,0,!1);break}else{if(l=n.current.alternate,y&&!N1(l)){p=Vd(n,s,!1),y=!1;continue}if(p===2){if(y=s,n.errorRecoveryDisabledLanes&y)var E=0;else E=n.pendingLanes&-536870913,E=E!==0?E:E&536870912?536870912:0;if(E!==0){s=E;e:{var C=n;p=Pa;var D=C.current.memoizedState.isDehydrated;if(D&&(Rl(C,E).flags|=256),E=Vd(C,E,!1),E!==2){if(Dd&&!D){C.errorRecoveryDisabledLanes|=y,Bo|=y,p=4;break e}y=xr,xr=p,y!==null&&(xr===null?xr=y:xr.push.apply(xr,y))}p=E}if(y=!1,p!==2)continue}}if(p===1){Rl(n,0),Us(n,s,0,!0);break}e:{switch(c=n,y=p,y){case 0:case 1:throw Error(i(345));case 4:if((s&4194048)!==s)break;case 6:Us(c,s,Wr,!Ls);break e;case 2:xr=null;break;case 3:case 5:break;default:throw Error(i(329))}if((s&62914560)===s&&(p=zd+300-pr(),10<p)){if(Us(c,s,Wr,!Ls),je(c,0,!0)!==0)break e;c.timeoutHandle=ay(Bg.bind(null,c,l,xr,hc,Bd,s,Wr,Bo,_l,Ls,y,2,-0,0),p);break e}Bg(c,l,xr,hc,Bd,s,Wr,Bo,_l,Ls,y,0,-0,0)}}break}while(!0);ji(n)}function Bg(n,s,l,c,p,y,E,C,D,X,re,oe,Q,J){if(n.timeoutHandle=-1,oe=s.subtreeFlags,(oe&8192||(oe&16785408)===16785408)&&(Za={stylesheets:null,count:0,unsuspend:dS},kg(s),oe=pS(),oe!==null)){n.cancelPendingCommit=oe(Vg.bind(null,n,s,y,l,c,p,E,C,D,re,1,Q,J)),Us(n,y,E,!X);return}Vg(n,s,y,l,c,p,E,C,D)}function N1(n){for(var s=n;;){var l=s.tag;if((l===0||l===11||l===15)&&s.flags&16384&&(l=s.updateQueue,l!==null&&(l=l.stores,l!==null)))for(var c=0;c<l.length;c++){var p=l[c],y=p.getSnapshot;p=p.value;try{if(!Qn(y(),p))return!1}catch{return!1}}if(l=s.child,s.subtreeFlags&16384&&l!==null)l.return=s,s=l;else{if(s===n)break;for(;s.sibling===null;){if(s.return===null||s.return===n)return!0;s=s.return}s.sibling.return=s.return,s=s.sibling}}return!0}function Us(n,s,l,c){s&=~Rd,s&=~Bo,n.suspendedLanes|=s,n.pingedLanes&=~s,c&&(n.warmLanes|=s),c=n.expirationTimes;for(var p=s;0<p;){var y=31-Wt(p),E=1<<y;c[y]=-1,p&=~E}l!==0&&z(n,l,s)}function pc(){return(At&6)===0?(Ga(0),!1):!0}function qd(){if(gt!==null){if(_t===0)var n=gt.return;else n=gt,ts=Co=null,nd(n),Tl=null,La=0,n=gt;for(;n!==null;)hg(n.alternate,n),n=n.return;gt=null}}function Rl(n,s){var l=n.timeoutHandle;l!==-1&&(n.timeoutHandle=-1,F1(l)),l=n.cancelPendingCommit,l!==null&&(n.cancelPendingCommit=null,l()),qd(),Kt=n,gt=l=Zi(n.current,null),Et=s,_t=0,Br=null,Ls=!1,Al=wr(n,s),Dd=!1,_l=Wr=Rd=Bo=js=Jt=0,xr=Pa=null,Bd=!1,(s&8)!==0&&(s|=s&32);var c=n.entangledLanes;if(c!==0)for(n=n.entanglements,c&=s;0<c;){var p=31-Wt(c),y=1<<p;s|=n[p],c&=~y}return cs=s,nt(),l}function zg(n,s){dt=null,te.H=tc,s===ka||s===Yu?(s=Zp(),_t=3):s===Fp?(s=Zp(),_t=4):_t=s===Wm?8:s!==null&&typeof s=="object"&&typeof s.then=="function"?6:1,Br=s,gt===null&&(Jt=1,oc(n,$e(s,n.current)))}function Lg(){var n=te.H;return te.H=tc,n===null?tc:n}function jg(){var n=te.A;return te.A=A1,n}function Ud(){Jt=4,Ls||(Et&4194048)!==Et&&Zr.current!==null||(Al=!0),(js&134217727)===0&&(Bo&134217727)===0||Kt===null||Us(Kt,Et,Wr,!1)}function Vd(n,s,l){var c=At;At|=2;var p=Lg(),y=jg();(Kt!==n||Et!==s)&&(hc=null,Rl(n,s)),s=!1;var E=Jt;e:do try{if(_t!==0&&gt!==null){var C=gt,D=Br;switch(_t){case 8:qd(),E=6;break e;case 3:case 2:case 9:case 6:Zr.current===null&&(s=!0);var X=_t;if(_t=0,Br=null,Bl(n,C,D,X),l&&Al){E=0;break e}break;default:X=_t,_t=0,Br=null,Bl(n,C,D,X)}}D1(),E=Jt;break}catch(re){zg(n,re)}while(!0);return s&&n.shellSuspendCounter++,ts=Co=null,At=c,te.H=p,te.A=y,gt===null&&(Kt=null,Et=0,nt()),E}function D1(){for(;gt!==null;)Hg(gt)}function R1(n,s){var l=At;At|=2;var c=Lg(),p=jg();Kt!==n||Et!==s?(hc=null,dc=pr()+500,Rl(n,s)):Al=wr(n,s);e:do try{if(_t!==0&&gt!==null){s=gt;var y=Br;t:switch(_t){case 1:_t=0,Br=null,Bl(n,s,y,1);break;case 2:case 9:if(Qp(y)){_t=0,Br=null,qg(s);break}s=function(){_t!==2&&_t!==9||Kt!==n||(_t=7),ji(n)},y.then(s,s);break e;case 3:_t=7;break e;case 4:_t=5;break e;case 7:Qp(y)?(_t=0,Br=null,qg(s)):(_t=0,Br=null,Bl(n,s,y,7));break;case 5:var E=null;switch(gt.tag){case 26:E=gt.memoizedState;case 5:case 27:var C=gt;if(!E||Sy(E)){_t=0,Br=null;var D=C.sibling;if(D!==null)gt=D;else{var X=C.return;X!==null?(gt=X,mc(X)):gt=null}break t}}_t=0,Br=null,Bl(n,s,y,5);break;case 6:_t=0,Br=null,Bl(n,s,y,6);break;case 8:qd(),Jt=6;break e;default:throw Error(i(462))}}B1();break}catch(re){zg(n,re)}while(!0);return ts=Co=null,te.H=c,te.A=p,At=l,gt!==null?0:(Kt=null,Et=0,nt(),Jt)}function B1(){for(;gt!==null&&!ui();)Hg(gt)}function Hg(n){var s=fg(n.alternate,n,cs);n.memoizedProps=n.pendingProps,s===null?mc(n):gt=s}function qg(n){var s=n,l=s.alternate;switch(s.tag){case 15:case 0:s=sg(l,s,s.pendingProps,s.type,void 0,Et);break;case 11:s=sg(l,s,s.pendingProps,s.type.render,s.ref,Et);break;case 5:nd(s);default:hg(l,s),s=gt=Up(s,cs),s=fg(l,s,cs)}n.memoizedProps=n.pendingProps,s===null?mc(n):gt=s}function Bl(n,s,l,c){ts=Co=null,nd(s),Tl=null,La=0;var p=s.return;try{if(M1(n,p,s,l,Et)){Jt=1,oc(n,$e(l,n.current)),gt=null;return}}catch(y){if(p!==null)throw gt=p,y;Jt=1,oc(n,$e(l,n.current)),gt=null;return}s.flags&32768?(kt||c===1?n=!0:Al||(Et&536870912)!==0?n=!1:(Ls=n=!0,(c===2||c===9||c===3||c===6)&&(c=Zr.current,c!==null&&c.tag===13&&(c.flags|=16384))),Ug(s,n)):mc(s)}function mc(n){var s=n;do{if((s.flags&32768)!==0){Ug(s,Ls);return}n=s.return;var l=T1(s.alternate,s,cs);if(l!==null){gt=l;return}if(s=s.sibling,s!==null){gt=s;return}gt=s=n}while(s!==null);Jt===0&&(Jt=5)}function Ug(n,s){do{var l=O1(n.alternate,n);if(l!==null){l.flags&=32767,gt=l;return}if(l=n.return,l!==null&&(l.flags|=32768,l.subtreeFlags=0,l.deletions=null),!s&&(n=n.sibling,n!==null)){gt=n;return}gt=n=l}while(n!==null);Jt=6,gt=null}function Vg(n,s,l,c,p,y,E,C,D){n.cancelPendingCommit=null;do gc();while(Vn!==0);if((At&6)!==0)throw Error(i(327));if(s!==null){if(s===n.current)throw Error(i(177));if(y=s.lanes|s.childLanes,y|=qn,Ur(n,l,y,E,C,D),n===Kt&&(gt=Kt=null,Et=0),Nl=s,qs=n,Dl=l,Ld=y,jd=p,Ng=c,(s.subtreeFlags&10256)!==0||(s.flags&10256)!==0?(n.callbackNode=null,n.callbackPriority=0,H1(jn,function(){return Gg(),null})):(n.callbackNode=null,n.callbackPriority=0),c=(s.flags&13878)!==0,(s.subtreeFlags&13878)!==0||c){c=te.T,te.T=null,p=ke.p,ke.p=2,E=At,At|=4;try{k1(n,s,l)}finally{At=E,ke.p=p,te.T=c}}Vn=1,Ig(),Kg(),Pg()}}function Ig(){if(Vn===1){Vn=0;var n=qs,s=Nl,l=(s.flags&13878)!==0;if((s.subtreeFlags&13878)!==0||l){l=te.T,te.T=null;var c=ke.p;ke.p=2;var p=At;At|=4;try{wg(s,n);var y=Wd,E=M(n.containerInfo),C=y.focusedElem,D=y.selectionRange;if(E!==C&&C&&C.ownerDocument&&x(C.ownerDocument.documentElement,C)){if(D!==null&&k(C)){var X=D.start,re=D.end;if(re===void 0&&(re=X),"selectionStart"in C)C.selectionStart=X,C.selectionEnd=Math.min(re,C.value.length);else{var oe=C.ownerDocument||document,Q=oe&&oe.defaultView||window;if(Q.getSelection){var J=Q.getSelection(),rt=C.textContent.length,Ze=Math.min(D.start,rt),Bt=D.end===void 0?Ze:Math.min(D.end,rt);!J.extend&&Ze>Bt&&(E=Bt,Bt=Ze,Ze=E);var P=b(C,Ze),q=b(C,Bt);if(P&&q&&(J.rangeCount!==1||J.anchorNode!==P.node||J.anchorOffset!==P.offset||J.focusNode!==q.node||J.focusOffset!==q.offset)){var $=oe.createRange();$.setStart(P.node,P.offset),J.removeAllRanges(),Ze>Bt?(J.addRange($),J.extend(q.node,q.offset)):($.setEnd(q.node,q.offset),J.addRange($))}}}}for(oe=[],J=C;J=J.parentNode;)J.nodeType===1&&oe.push({element:J,left:J.scrollLeft,top:J.scrollTop});for(typeof C.focus=="function"&&C.focus(),C=0;C<oe.length;C++){var se=oe[C];se.element.scrollLeft=se.left,se.element.scrollTop=se.top}}Cc=!!Zd,Wd=Zd=null}finally{At=p,ke.p=c,te.T=l}}n.current=s,Vn=2}}function Kg(){if(Vn===2){Vn=0;var n=qs,s=Nl,l=(s.flags&8772)!==0;if((s.subtreeFlags&8772)!==0||l){l=te.T,te.T=null;var c=ke.p;ke.p=2;var p=At;At|=4;try{Sg(n,s.alternate,s)}finally{At=p,ke.p=c,te.T=l}}Vn=3}}function Pg(){if(Vn===4||Vn===3){Vn=0,sa();var n=qs,s=Nl,l=Dl,c=Ng;(s.subtreeFlags&10256)!==0||(s.flags&10256)!==0?Vn=5:(Vn=0,Nl=qs=null,Yg(n,n.pendingLanes));var p=n.pendingLanes;if(p===0&&(Hs=null),We(l),s=s.stateNode,Ht&&typeof Ht.onCommitFiberRoot=="function")try{Ht.onCommitFiberRoot(on,s,void 0,(s.current.flags&128)===128)}catch{}if(c!==null){s=te.T,p=ke.p,ke.p=2,te.T=null;try{for(var y=n.onRecoverableError,E=0;E<c.length;E++){var C=c[E];y(C.value,{componentStack:C.stack})}}finally{te.T=s,ke.p=p}}(Dl&3)!==0&&gc(),ji(n),p=n.pendingLanes,(l&4194090)!==0&&(p&42)!==0?n===Hd?Ya++:(Ya=0,Hd=n):Ya=0,Ga(0)}}function Yg(n,s){(n.pooledCacheLanes&=s)===0&&(s=n.pooledCache,s!=null&&(n.pooledCache=null,Ta(s)))}function gc(n){return Ig(),Kg(),Pg(),Gg()}function Gg(){if(Vn!==5)return!1;var n=qs,s=Ld;Ld=0;var l=We(Dl),c=te.T,p=ke.p;try{ke.p=32>l?32:l,te.T=null,l=jd,jd=null;var y=qs,E=Dl;if(Vn=0,Nl=qs=null,Dl=0,(At&6)!==0)throw Error(i(331));var C=At;if(At|=4,Ag(y.current),Og(y,y.current,E,l),At=C,Ga(0,!1),Ht&&typeof Ht.onPostCommitFiberRoot=="function")try{Ht.onPostCommitFiberRoot(on,y)}catch{}return!0}finally{ke.p=p,te.T=c,Yg(n,s)}}function $g(n,s,l){s=$e(l,s),s=gd(n.stateNode,s,2),n=As(n,s,2),n!==null&&(pi(n,2),ji(n))}function zt(n,s,l){if(n.tag===3)$g(n,n,l);else for(;s!==null;){if(s.tag===3){$g(s,n,l);break}else if(s.tag===1){var c=s.stateNode;if(typeof s.type.getDerivedStateFromError=="function"||typeof c.componentDidCatch=="function"&&(Hs===null||!Hs.has(c))){n=$e(l,n),l=Jm(2),c=As(s,l,2),c!==null&&(Zm(l,c,s,n),pi(c,2),ji(c));break}}s=s.return}}function Id(n,s,l){var c=n.pingCache;if(c===null){c=n.pingCache=new _1;var p=new Set;c.set(s,p)}else p=c.get(s),p===void 0&&(p=new Set,c.set(s,p));p.has(l)||(Dd=!0,p.add(l),n=z1.bind(null,n,s,l),s.then(n,n))}function z1(n,s,l){var c=n.pingCache;c!==null&&c.delete(s),n.pingedLanes|=n.suspendedLanes&l,n.warmLanes&=~l,Kt===n&&(Et&l)===l&&(Jt===4||Jt===3&&(Et&62914560)===Et&&300>pr()-zd?(At&2)===0&&Rl(n,0):Rd|=l,_l===Et&&(_l=0)),ji(n)}function Xg(n,s){s===0&&(s=we()),n=bi(n,s),n!==null&&(pi(n,s),ji(n))}function L1(n){var s=n.memoizedState,l=0;s!==null&&(l=s.retryLane),Xg(n,l)}function j1(n,s){var l=0;switch(n.tag){case 13:var c=n.stateNode,p=n.memoizedState;p!==null&&(l=p.retryLane);break;case 19:c=n.stateNode;break;case 22:c=n.stateNode._retryCache;break;default:throw Error(i(314))}c!==null&&c.delete(s),Xg(n,l)}function H1(n,s){return ai(n,s)}var yc=null,zl=null,Kd=!1,vc=!1,Pd=!1,zo=0;function ji(n){n!==zl&&n.next===null&&(zl===null?yc=zl=n:zl=zl.next=n),vc=!0,Kd||(Kd=!0,U1())}function Ga(n,s){if(!Pd&&vc){Pd=!0;do for(var l=!1,c=yc;c!==null;){if(n!==0){var p=c.pendingLanes;if(p===0)var y=0;else{var E=c.suspendedLanes,C=c.pingedLanes;y=(1<<31-Wt(42|n)+1)-1,y&=p&~(E&~C),y=y&201326741?y&201326741|1:y?y|2:0}y!==0&&(l=!0,Zg(c,y))}else y=Et,y=je(c,c===Kt?y:0,c.cancelPendingCommit!==null||c.timeoutHandle!==-1),(y&3)===0||wr(c,y)||(l=!0,Zg(c,y));c=c.next}while(l);Pd=!1}}function q1(){Fg()}function Fg(){vc=Kd=!1;var n=0;zo!==0&&(X1()&&(n=zo),zo=0);for(var s=pr(),l=null,c=yc;c!==null;){var p=c.next,y=Qg(c,s);y===0?(c.next=null,l===null?yc=p:l.next=p,p===null&&(zl=l)):(l=c,(n!==0||(y&3)!==0)&&(vc=!0)),c=p}Ga(n)}function Qg(n,s){for(var l=n.suspendedLanes,c=n.pingedLanes,p=n.expirationTimes,y=n.pendingLanes&-62914561;0<y;){var E=31-Wt(y),C=1<<E,D=p[E];D===-1?((C&l)===0||(C&c)!==0)&&(p[E]=Tr(C,s)):D<=s&&(n.expiredLanes|=C),y&=~C}if(s=Kt,l=Et,l=je(n,n===s?l:0,n.cancelPendingCommit!==null||n.timeoutHandle!==-1),c=n.callbackNode,l===0||n===s&&(_t===2||_t===9)||n.cancelPendingCommit!==null)return c!==null&&c!==null&&uo(c),n.callbackNode=null,n.callbackPriority=0;if((l&3)===0||wr(n,l)){if(s=l&-l,s===n.callbackPriority)return s;switch(c!==null&&uo(c),We(l)){case 2:case 8:l=Ki;break;case 32:l=jn;break;case 268435456:l=ci;break;default:l=jn}return c=Jg.bind(null,n),l=ai(l,c),n.callbackPriority=s,n.callbackNode=l,s}return c!==null&&c!==null&&uo(c),n.callbackPriority=2,n.callbackNode=null,2}function Jg(n,s){if(Vn!==0&&Vn!==5)return n.callbackNode=null,n.callbackPriority=0,null;var l=n.callbackNode;if(gc()&&n.callbackNode!==l)return null;var c=Et;return c=je(n,n===Kt?c:0,n.cancelPendingCommit!==null||n.timeoutHandle!==-1),c===0?null:(Rg(n,c,s),Qg(n,pr()),n.callbackNode!=null&&n.callbackNode===l?Jg.bind(null,n):null)}function Zg(n,s){if(gc())return null;Rg(n,s,!0)}function U1(){Q1(function(){(At&6)!==0?ai(Jo,q1):Fg()})}function Yd(){return zo===0&&(zo=Oi()),zo}function Wg(n){return n==null||typeof n=="symbol"||typeof n=="boolean"?null:typeof n=="function"?n:_r(""+n)}function ey(n,s){var l=s.ownerDocument.createElement("input");return l.name=s.name,l.value=s.value,n.id&&l.setAttribute("form",n.id),s.parentNode.insertBefore(l,s),n=new FormData(n),l.parentNode.removeChild(l),n}function V1(n,s,l,c,p){if(s==="submit"&&l&&l.stateNode===p){var y=Wg((p[ye]||null).action),E=c.submitter;E&&(s=(s=E[ye]||null)?Wg(s.formAction):E.getAttribute("formAction"),s!==null&&(y=s,E=null));var C=new tl("action","action",null,c,p);n.push({event:C,listeners:[{instance:null,listener:function(){if(c.defaultPrevented){if(zo!==0){var D=E?ey(p,E):new FormData(p);fd(l,{pending:!0,data:D,method:p.method,action:y},null,D)}}else typeof y=="function"&&(C.preventDefault(),D=E?ey(p,E):new FormData(p),fd(l,{pending:!0,data:D,method:p.method,action:y},y,D))},currentTarget:p}]})}}for(var Gd=0;Gd<Ee.length;Gd++){var $d=Ee[Gd],I1=$d.toLowerCase(),K1=$d[0].toUpperCase()+$d.slice(1);de(I1,"on"+K1)}de(F,"onAnimationEnd"),de(Z,"onAnimationIteration"),de(ee,"onAnimationStart"),de("dblclick","onDoubleClick"),de("focusin","onFocus"),de("focusout","onBlur"),de(ne,"onTransitionRun"),de(he,"onTransitionStart"),de(be,"onTransitionCancel"),de(fe,"onTransitionEnd"),yn("onMouseEnter",["mouseout","mouseover"]),yn("onMouseLeave",["mouseout","mouseover"]),yn("onPointerEnter",["pointerout","pointerover"]),yn("onPointerLeave",["pointerout","pointerover"]),Pr("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Pr("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Pr("onBeforeInput",["compositionend","keypress","textInput","paste"]),Pr("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Pr("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Pr("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var $a="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),P1=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat($a));function ty(n,s){s=(s&4)!==0;for(var l=0;l<n.length;l++){var c=n[l],p=c.event;c=c.listeners;e:{var y=void 0;if(s)for(var E=c.length-1;0<=E;E--){var C=c[E],D=C.instance,X=C.currentTarget;if(C=C.listener,D!==y&&p.isPropagationStopped())break e;y=C,p.currentTarget=X;try{y(p)}catch(re){sc(re)}p.currentTarget=null,y=D}else for(E=0;E<c.length;E++){if(C=c[E],D=C.instance,X=C.currentTarget,C=C.listener,D!==y&&p.isPropagationStopped())break e;y=C,p.currentTarget=X;try{y(p)}catch(re){sc(re)}p.currentTarget=null,y=D}}}}function yt(n,s){var l=s[qt];l===void 0&&(l=s[qt]=new Set);var c=n+"__bubble";l.has(c)||(ny(s,n,2,!1),l.add(c))}function Xd(n,s,l){var c=0;s&&(c|=4),ny(l,n,c,s)}var bc="_reactListening"+Math.random().toString(36).slice(2);function Fd(n){if(!n[bc]){n[bc]=!0,fo.forEach(function(l){l!=="selectionchange"&&(P1.has(l)||Xd(l,!1,n),Xd(l,!0,n))});var s=n.nodeType===9?n:n.ownerDocument;s===null||s[bc]||(s[bc]=!0,Xd("selectionchange",!1,s))}}function ny(n,s,l,c){switch(Oy(s)){case 2:var p=yS;break;case 8:p=vS;break;default:p=uh}l=p.bind(null,s,l,n),p=void 0,!la||s!=="touchstart"&&s!=="touchmove"&&s!=="wheel"||(p=!0),c?p!==void 0?n.addEventListener(s,l,{capture:!0,passive:p}):n.addEventListener(s,l,!0):p!==void 0?n.addEventListener(s,l,{passive:p}):n.addEventListener(s,l,!1)}function Qd(n,s,l,c,p){var y=c;if((s&1)===0&&(s&2)===0&&c!==null)e:for(;;){if(c===null)return;var E=c.tag;if(E===3||E===4){var C=c.stateNode.containerInfo;if(C===p)break;if(E===4)for(E=c.return;E!==null;){var D=E.tag;if((D===3||D===4)&&E.stateNode.containerInfo===p)return;E=E.return}for(;C!==null;){if(E=or(C),E===null)return;if(D=E.tag,D===5||D===6||D===26||D===27){c=y=E;continue e}C=C.parentNode}}c=c.return}Tn(function(){var X=y,re=Me(l),oe=[];e:{var Q=pe.get(n);if(Q!==void 0){var J=tl,rt=n;switch(n){case"keypress":if(xs(l)===0)break e;case"keydown":case"keyup":J=ul;break;case"focusin":rt="focus",J=Es;break;case"focusout":rt="blur",J=Es;break;case"beforeblur":case"afterblur":J=Es;break;case"click":if(l.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":J=il;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":J=Cu;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":J=pa;break;case F:case Z:case ee:J=Au;break;case fe:J=ma;break;case"scroll":case"scrollend":J=nl;break;case"wheel":J=fl;break;case"copy":case"cut":case"paste":J=ll;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":J=ha;break;case"toggle":case"beforetoggle":J=Du}var Ze=(s&4)!==0,Bt=!Ze&&(n==="scroll"||n==="scrollend"),P=Ze?Q!==null?Q+"Capture":null:Q;Ze=[];for(var q=X,$;q!==null;){var se=q;if($=se.stateNode,se=se.tag,se!==5&&se!==26&&se!==27||$===null||P===null||(se=vi(q,P),se!=null&&Ze.push(Xa(q,se,$))),Bt)break;q=q.return}0<Ze.length&&(Q=new J(Q,rt,null,l,re),oe.push({event:Q,listeners:Ze}))}}if((s&7)===0){e:{if(Q=n==="mouseover"||n==="pointerover",J=n==="mouseout"||n==="pointerout",Q&&l!==Xn&&(rt=l.relatedTarget||l.fromElement)&&(or(rt)||rt[lt]))break e;if((J||Q)&&(Q=re.window===re?re:(Q=re.ownerDocument)?Q.defaultView||Q.parentWindow:window,J?(rt=l.relatedTarget||l.toElement,J=X,rt=rt?or(rt):null,rt!==null&&(Bt=a(rt),Ze=rt.tag,rt!==Bt||Ze!==5&&Ze!==27&&Ze!==6)&&(rt=null)):(J=null,rt=X),J!==rt)){if(Ze=il,se="onMouseLeave",P="onMouseEnter",q="mouse",(n==="pointerout"||n==="pointerover")&&(Ze=ha,se="onPointerLeave",P="onPointerEnter",q="pointer"),Bt=J==null?Q:Ir(J),$=rt==null?Q:Ir(rt),Q=new Ze(se,q+"leave",J,l,re),Q.target=Bt,Q.relatedTarget=$,se=null,or(re)===X&&(Ze=new Ze(P,q+"enter",rt,l,re),Ze.target=$,Ze.relatedTarget=Bt,se=Ze),Bt=se,J&&rt)t:{for(Ze=J,P=rt,q=0,$=Ze;$;$=Ll($))q++;for($=0,se=P;se;se=Ll(se))$++;for(;0<q-$;)Ze=Ll(Ze),q--;for(;0<$-q;)P=Ll(P),$--;for(;q--;){if(Ze===P||P!==null&&Ze===P.alternate)break t;Ze=Ll(Ze),P=Ll(P)}Ze=null}else Ze=null;J!==null&&ry(oe,Q,J,Ze,!1),rt!==null&&Bt!==null&&ry(oe,Bt,rt,Ze,!0)}}e:{if(Q=X?Ir(X):window,J=Q.nodeName&&Q.nodeName.toLowerCase(),J==="select"||J==="input"&&Q.type==="file")var Ue=Eo;else if(pl(Q))if(Xr)Ue=Ts;else{Ue=Ji;var mt=Hu}else J=Q.nodeName,!J||J.toLowerCase()!=="input"||Q.type!=="checkbox"&&Q.type!=="radio"?X&&wt(X.elementType)&&(Ue=Eo):Ue=Sa;if(Ue&&(Ue=Ue(n,X))){ba(oe,Ue,l,re);break e}mt&&mt(n,Q,X),n==="focusout"&&X&&Q.type==="number"&&X.memoizedProps.value!=null&&Ar(Q,"number",Q.value)}switch(mt=X?Ir(X):window,n){case"focusin":(pl(mt)||mt.contentEditable==="true")&&(N=mt,H=X,U=null);break;case"focusout":U=H=N=null;break;case"mousedown":K=!0;break;case"contextmenu":case"mouseup":case"dragend":K=!1,B(oe,l,re);break;case"selectionchange":if(_)break;case"keydown":case"keyup":B(oe,l,re)}var Ye;if(So)e:{switch(n){case"compositionstart":var et="onCompositionStart";break e;case"compositionend":et="onCompositionEnd";break e;case"compositionupdate":et="onCompositionUpdate";break e}et=void 0}else Qi?va(n,l)&&(et="onCompositionEnd"):n==="keydown"&&l.keyCode===229&&(et="onCompositionStart");et&&(dl&&l.locale!=="ko"&&(Qi||et!=="onCompositionStart"?et==="onCompositionEnd"&&Qi&&(Ye=Ss()):($r=re,el="value"in $r?$r.value:$r.textContent,Qi=!0)),mt=Sc(X,et),0<mt.length&&(et=new al(et,n,null,l,re),oe.push({event:et,listeners:mt}),Ye?et.data=Ye:(Ye=Bu(l),Ye!==null&&(et.data=Ye)))),(Ye=_f?zu(n,l):Nf(n,l))&&(et=Sc(X,"onBeforeInput"),0<et.length&&(mt=new al("onBeforeInput","beforeinput",null,l,re),oe.push({event:mt,listeners:et}),mt.data=Ye)),V1(oe,n,X,l,re)}ty(oe,s)})}function Xa(n,s,l){return{instance:n,listener:s,currentTarget:l}}function Sc(n,s){for(var l=s+"Capture",c=[];n!==null;){var p=n,y=p.stateNode;if(p=p.tag,p!==5&&p!==26&&p!==27||y===null||(p=vi(n,l),p!=null&&c.unshift(Xa(n,p,y)),p=vi(n,s),p!=null&&c.push(Xa(n,p,y))),n.tag===3)return c;n=n.return}return[]}function Ll(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5&&n.tag!==27);return n||null}function ry(n,s,l,c,p){for(var y=s._reactName,E=[];l!==null&&l!==c;){var C=l,D=C.alternate,X=C.stateNode;if(C=C.tag,D!==null&&D===c)break;C!==5&&C!==26&&C!==27||X===null||(D=X,p?(X=vi(l,y),X!=null&&E.unshift(Xa(l,X,D))):p||(X=vi(l,y),X!=null&&E.push(Xa(l,X,D)))),l=l.return}E.length!==0&&n.push({event:s,listeners:E})}var Y1=/\r\n?/g,G1=/\u0000|\uFFFD/g;function iy(n){return(typeof n=="string"?n:""+n).replace(Y1,`
`).replace(G1,"")}function sy(n,s){return s=iy(s),iy(n)===s}function xc(){}function Rt(n,s,l,c,p,y){switch(l){case"children":typeof c=="string"?s==="body"||s==="textarea"&&c===""||Gr(n,c):(typeof c=="number"||typeof c=="bigint")&&s!=="body"&&Gr(n,""+c);break;case"className":gr(n,"class",c);break;case"tabIndex":gr(n,"tabindex",c);break;case"dir":case"role":case"viewBox":case"width":case"height":gr(n,l,c);break;case"style":Ft(n,c,y);break;case"data":if(s!=="object"){gr(n,"data",c);break}case"src":case"href":if(c===""&&(s!=="a"||l!=="href")){n.removeAttribute(l);break}if(c==null||typeof c=="function"||typeof c=="symbol"||typeof c=="boolean"){n.removeAttribute(l);break}c=_r(""+c),n.setAttribute(l,c);break;case"action":case"formAction":if(typeof c=="function"){n.setAttribute(l,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof y=="function"&&(l==="formAction"?(s!=="input"&&Rt(n,s,"name",p.name,p,null),Rt(n,s,"formEncType",p.formEncType,p,null),Rt(n,s,"formMethod",p.formMethod,p,null),Rt(n,s,"formTarget",p.formTarget,p,null)):(Rt(n,s,"encType",p.encType,p,null),Rt(n,s,"method",p.method,p,null),Rt(n,s,"target",p.target,p,null)));if(c==null||typeof c=="symbol"||typeof c=="boolean"){n.removeAttribute(l);break}c=_r(""+c),n.setAttribute(l,c);break;case"onClick":c!=null&&(n.onclick=xc);break;case"onScroll":c!=null&&yt("scroll",n);break;case"onScrollEnd":c!=null&&yt("scrollend",n);break;case"dangerouslySetInnerHTML":if(c!=null){if(typeof c!="object"||!("__html"in c))throw Error(i(61));if(l=c.__html,l!=null){if(p.children!=null)throw Error(i(60));n.innerHTML=l}}break;case"multiple":n.multiple=c&&typeof c!="function"&&typeof c!="symbol";break;case"muted":n.muted=c&&typeof c!="function"&&typeof c!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(c==null||typeof c=="function"||typeof c=="boolean"||typeof c=="symbol"){n.removeAttribute("xlink:href");break}l=_r(""+c),n.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",l);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":c!=null&&typeof c!="function"&&typeof c!="symbol"?n.setAttribute(l,""+c):n.removeAttribute(l);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":c&&typeof c!="function"&&typeof c!="symbol"?n.setAttribute(l,""):n.removeAttribute(l);break;case"capture":case"download":c===!0?n.setAttribute(l,""):c!==!1&&c!=null&&typeof c!="function"&&typeof c!="symbol"?n.setAttribute(l,c):n.removeAttribute(l);break;case"cols":case"rows":case"size":case"span":c!=null&&typeof c!="function"&&typeof c!="symbol"&&!isNaN(c)&&1<=c?n.setAttribute(l,c):n.removeAttribute(l);break;case"rowSpan":case"start":c==null||typeof c=="function"||typeof c=="symbol"||isNaN(c)?n.removeAttribute(l):n.setAttribute(l,c);break;case"popover":yt("beforetoggle",n),yt("toggle",n),kr(n,"popover",c);break;case"xlinkActuate":lr(n,"http://www.w3.org/1999/xlink","xlink:actuate",c);break;case"xlinkArcrole":lr(n,"http://www.w3.org/1999/xlink","xlink:arcrole",c);break;case"xlinkRole":lr(n,"http://www.w3.org/1999/xlink","xlink:role",c);break;case"xlinkShow":lr(n,"http://www.w3.org/1999/xlink","xlink:show",c);break;case"xlinkTitle":lr(n,"http://www.w3.org/1999/xlink","xlink:title",c);break;case"xlinkType":lr(n,"http://www.w3.org/1999/xlink","xlink:type",c);break;case"xmlBase":lr(n,"http://www.w3.org/XML/1998/namespace","xml:base",c);break;case"xmlLang":lr(n,"http://www.w3.org/XML/1998/namespace","xml:lang",c);break;case"xmlSpace":lr(n,"http://www.w3.org/XML/1998/namespace","xml:space",c);break;case"is":kr(n,"is",c);break;case"innerText":case"textContent":break;default:(!(2<l.length)||l[0]!=="o"&&l[0]!=="O"||l[1]!=="n"&&l[1]!=="N")&&(l=an.get(l)||l,kr(n,l,c))}}function Jd(n,s,l,c,p,y){switch(l){case"style":Ft(n,c,y);break;case"dangerouslySetInnerHTML":if(c!=null){if(typeof c!="object"||!("__html"in c))throw Error(i(61));if(l=c.__html,l!=null){if(p.children!=null)throw Error(i(60));n.innerHTML=l}}break;case"children":typeof c=="string"?Gr(n,c):(typeof c=="number"||typeof c=="bigint")&&Gr(n,""+c);break;case"onScroll":c!=null&&yt("scroll",n);break;case"onScrollEnd":c!=null&&yt("scrollend",n);break;case"onClick":c!=null&&(n.onclick=xc);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Kr.hasOwnProperty(l))e:{if(l[0]==="o"&&l[1]==="n"&&(p=l.endsWith("Capture"),s=l.slice(2,p?l.length-7:void 0),y=n[ye]||null,y=y!=null?y[l]:null,typeof y=="function"&&n.removeEventListener(s,y,p),typeof c=="function")){typeof y!="function"&&y!==null&&(l in n?n[l]=null:n.hasAttribute(l)&&n.removeAttribute(l)),n.addEventListener(s,c,p);break e}l in n?n[l]=c:c===!0?n.setAttribute(l,""):kr(n,l,c)}}}function In(n,s,l){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":yt("error",n),yt("load",n);var c=!1,p=!1,y;for(y in l)if(l.hasOwnProperty(y)){var E=l[y];if(E!=null)switch(y){case"src":c=!0;break;case"srcSet":p=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(i(137,s));default:Rt(n,s,y,E,l,null)}}p&&Rt(n,s,"srcSet",l.srcSet,l,null),c&&Rt(n,s,"src",l.src,l,null);return;case"input":yt("invalid",n);var C=y=E=p=null,D=null,X=null;for(c in l)if(l.hasOwnProperty(c)){var re=l[c];if(re!=null)switch(c){case"name":p=re;break;case"type":E=re;break;case"checked":D=re;break;case"defaultChecked":X=re;break;case"value":y=re;break;case"defaultValue":C=re;break;case"children":case"dangerouslySetInnerHTML":if(re!=null)throw Error(i(137,s));break;default:Rt(n,s,c,re,l,null)}}po(n,y,C,D,X,E,p,!1),Cr(n);return;case"select":yt("invalid",n),c=E=y=null;for(p in l)if(l.hasOwnProperty(p)&&(C=l[p],C!=null))switch(p){case"value":y=C;break;case"defaultValue":E=C;break;case"multiple":c=C;default:Rt(n,s,p,C,l,null)}s=y,l=E,n.multiple=!!c,s!=null?Yr(n,!!c,s,!1):l!=null&&Yr(n,!!c,l,!0);return;case"textarea":yt("invalid",n),y=p=c=null;for(E in l)if(l.hasOwnProperty(E)&&(C=l[E],C!=null))switch(E){case"value":c=C;break;case"defaultValue":p=C;break;case"children":y=C;break;case"dangerouslySetInnerHTML":if(C!=null)throw Error(i(91));break;default:Rt(n,s,E,C,l,null)}mo(n,c,p,y),Cr(n);return;case"option":for(D in l)if(l.hasOwnProperty(D)&&(c=l[D],c!=null))switch(D){case"selected":n.selected=c&&typeof c!="function"&&typeof c!="symbol";break;default:Rt(n,s,D,c,l,null)}return;case"dialog":yt("beforetoggle",n),yt("toggle",n),yt("cancel",n),yt("close",n);break;case"iframe":case"object":yt("load",n);break;case"video":case"audio":for(c=0;c<$a.length;c++)yt($a[c],n);break;case"image":yt("error",n),yt("load",n);break;case"details":yt("toggle",n);break;case"embed":case"source":case"link":yt("error",n),yt("load",n);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(X in l)if(l.hasOwnProperty(X)&&(c=l[X],c!=null))switch(X){case"children":case"dangerouslySetInnerHTML":throw Error(i(137,s));default:Rt(n,s,X,c,l,null)}return;default:if(wt(s)){for(re in l)l.hasOwnProperty(re)&&(c=l[re],c!==void 0&&Jd(n,s,re,c,l,void 0));return}}for(C in l)l.hasOwnProperty(C)&&(c=l[C],c!=null&&Rt(n,s,C,c,l,null))}function $1(n,s,l,c){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var p=null,y=null,E=null,C=null,D=null,X=null,re=null;for(J in l){var oe=l[J];if(l.hasOwnProperty(J)&&oe!=null)switch(J){case"checked":break;case"value":break;case"defaultValue":D=oe;default:c.hasOwnProperty(J)||Rt(n,s,J,null,c,oe)}}for(var Q in c){var J=c[Q];if(oe=l[Q],c.hasOwnProperty(Q)&&(J!=null||oe!=null))switch(Q){case"type":y=J;break;case"name":p=J;break;case"checked":X=J;break;case"defaultChecked":re=J;break;case"value":E=J;break;case"defaultValue":C=J;break;case"children":case"dangerouslySetInnerHTML":if(J!=null)throw Error(i(137,s));break;default:J!==oe&&Rt(n,s,Q,J,c,oe)}}Ci(n,E,C,D,X,re,y,p);return;case"select":J=E=C=Q=null;for(y in l)if(D=l[y],l.hasOwnProperty(y)&&D!=null)switch(y){case"value":break;case"multiple":J=D;default:c.hasOwnProperty(y)||Rt(n,s,y,null,c,D)}for(p in c)if(y=c[p],D=l[p],c.hasOwnProperty(p)&&(y!=null||D!=null))switch(p){case"value":Q=y;break;case"defaultValue":C=y;break;case"multiple":E=y;default:y!==D&&Rt(n,s,p,y,c,D)}s=C,l=E,c=J,Q!=null?Yr(n,!!l,Q,!1):!!c!=!!l&&(s!=null?Yr(n,!!l,s,!0):Yr(n,!!l,l?[]:"",!1));return;case"textarea":J=Q=null;for(C in l)if(p=l[C],l.hasOwnProperty(C)&&p!=null&&!c.hasOwnProperty(C))switch(C){case"value":break;case"children":break;default:Rt(n,s,C,null,c,p)}for(E in c)if(p=c[E],y=l[E],c.hasOwnProperty(E)&&(p!=null||y!=null))switch(E){case"value":Q=p;break;case"defaultValue":J=p;break;case"children":break;case"dangerouslySetInnerHTML":if(p!=null)throw Error(i(91));break;default:p!==y&&Rt(n,s,E,p,c,y)}bn(n,Q,J);return;case"option":for(var rt in l)if(Q=l[rt],l.hasOwnProperty(rt)&&Q!=null&&!c.hasOwnProperty(rt))switch(rt){case"selected":n.selected=!1;break;default:Rt(n,s,rt,null,c,Q)}for(D in c)if(Q=c[D],J=l[D],c.hasOwnProperty(D)&&Q!==J&&(Q!=null||J!=null))switch(D){case"selected":n.selected=Q&&typeof Q!="function"&&typeof Q!="symbol";break;default:Rt(n,s,D,Q,c,J)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Ze in l)Q=l[Ze],l.hasOwnProperty(Ze)&&Q!=null&&!c.hasOwnProperty(Ze)&&Rt(n,s,Ze,null,c,Q);for(X in c)if(Q=c[X],J=l[X],c.hasOwnProperty(X)&&Q!==J&&(Q!=null||J!=null))switch(X){case"children":case"dangerouslySetInnerHTML":if(Q!=null)throw Error(i(137,s));break;default:Rt(n,s,X,Q,c,J)}return;default:if(wt(s)){for(var Bt in l)Q=l[Bt],l.hasOwnProperty(Bt)&&Q!==void 0&&!c.hasOwnProperty(Bt)&&Jd(n,s,Bt,void 0,c,Q);for(re in c)Q=c[re],J=l[re],!c.hasOwnProperty(re)||Q===J||Q===void 0&&J===void 0||Jd(n,s,re,Q,c,J);return}}for(var P in l)Q=l[P],l.hasOwnProperty(P)&&Q!=null&&!c.hasOwnProperty(P)&&Rt(n,s,P,null,c,Q);for(oe in c)Q=c[oe],J=l[oe],!c.hasOwnProperty(oe)||Q===J||Q==null&&J==null||Rt(n,s,oe,Q,c,J)}var Zd=null,Wd=null;function Ec(n){return n.nodeType===9?n:n.ownerDocument}function oy(n){switch(n){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function ly(n,s){if(n===0)switch(s){case"svg":return 1;case"math":return 2;default:return 0}return n===1&&s==="foreignObject"?0:n}function eh(n,s){return n==="textarea"||n==="noscript"||typeof s.children=="string"||typeof s.children=="number"||typeof s.children=="bigint"||typeof s.dangerouslySetInnerHTML=="object"&&s.dangerouslySetInnerHTML!==null&&s.dangerouslySetInnerHTML.__html!=null}var th=null;function X1(){var n=window.event;return n&&n.type==="popstate"?n===th?!1:(th=n,!0):(th=null,!1)}var ay=typeof setTimeout=="function"?setTimeout:void 0,F1=typeof clearTimeout=="function"?clearTimeout:void 0,uy=typeof Promise=="function"?Promise:void 0,Q1=typeof queueMicrotask=="function"?queueMicrotask:typeof uy<"u"?function(n){return uy.resolve(null).then(n).catch(J1)}:ay;function J1(n){setTimeout(function(){throw n})}function Vs(n){return n==="head"}function cy(n,s){var l=s,c=0,p=0;do{var y=l.nextSibling;if(n.removeChild(l),y&&y.nodeType===8)if(l=y.data,l==="/$"){if(0<c&&8>c){l=c;var E=n.ownerDocument;if(l&1&&Fa(E.documentElement),l&2&&Fa(E.body),l&4)for(l=E.head,Fa(l),E=l.firstChild;E;){var C=E.nextSibling,D=E.nodeName;E[Yi]||D==="SCRIPT"||D==="STYLE"||D==="LINK"&&E.rel.toLowerCase()==="stylesheet"||l.removeChild(E),E=C}}if(p===0){n.removeChild(y),ru(s);return}p--}else l==="$"||l==="$?"||l==="$!"?p++:c=l.charCodeAt(0)-48;else c=0;l=y}while(l);ru(s)}function nh(n){var s=n.firstChild;for(s&&s.nodeType===10&&(s=s.nextSibling);s;){var l=s;switch(s=s.nextSibling,l.nodeName){case"HTML":case"HEAD":case"BODY":nh(l),Gn(l);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(l.rel.toLowerCase()==="stylesheet")continue}n.removeChild(l)}}function Z1(n,s,l,c){for(;n.nodeType===1;){var p=l;if(n.nodeName.toLowerCase()!==s.toLowerCase()){if(!c&&(n.nodeName!=="INPUT"||n.type!=="hidden"))break}else if(c){if(!n[Yi])switch(s){case"meta":if(!n.hasAttribute("itemprop"))break;return n;case"link":if(y=n.getAttribute("rel"),y==="stylesheet"&&n.hasAttribute("data-precedence"))break;if(y!==p.rel||n.getAttribute("href")!==(p.href==null||p.href===""?null:p.href)||n.getAttribute("crossorigin")!==(p.crossOrigin==null?null:p.crossOrigin)||n.getAttribute("title")!==(p.title==null?null:p.title))break;return n;case"style":if(n.hasAttribute("data-precedence"))break;return n;case"script":if(y=n.getAttribute("src"),(y!==(p.src==null?null:p.src)||n.getAttribute("type")!==(p.type==null?null:p.type)||n.getAttribute("crossorigin")!==(p.crossOrigin==null?null:p.crossOrigin))&&y&&n.hasAttribute("async")&&!n.hasAttribute("itemprop"))break;return n;default:return n}}else if(s==="input"&&n.type==="hidden"){var y=p.name==null?null:""+p.name;if(p.type==="hidden"&&n.getAttribute("name")===y)return n}else return n;if(n=xi(n.nextSibling),n===null)break}return null}function W1(n,s,l){if(s==="")return null;for(;n.nodeType!==3;)if((n.nodeType!==1||n.nodeName!=="INPUT"||n.type!=="hidden")&&!l||(n=xi(n.nextSibling),n===null))return null;return n}function rh(n){return n.data==="$!"||n.data==="$?"&&n.ownerDocument.readyState==="complete"}function eS(n,s){var l=n.ownerDocument;if(n.data!=="$?"||l.readyState==="complete")s();else{var c=function(){s(),l.removeEventListener("DOMContentLoaded",c)};l.addEventListener("DOMContentLoaded",c),n._reactRetry=c}}function xi(n){for(;n!=null;n=n.nextSibling){var s=n.nodeType;if(s===1||s===3)break;if(s===8){if(s=n.data,s==="$"||s==="$!"||s==="$?"||s==="F!"||s==="F")break;if(s==="/$")return null}}return n}var ih=null;function fy(n){n=n.previousSibling;for(var s=0;n;){if(n.nodeType===8){var l=n.data;if(l==="$"||l==="$!"||l==="$?"){if(s===0)return n;s--}else l==="/$"&&s++}n=n.previousSibling}return null}function dy(n,s,l){switch(s=Ec(l),n){case"html":if(n=s.documentElement,!n)throw Error(i(452));return n;case"head":if(n=s.head,!n)throw Error(i(453));return n;case"body":if(n=s.body,!n)throw Error(i(454));return n;default:throw Error(i(451))}}function Fa(n){for(var s=n.attributes;s.length;)n.removeAttributeNode(s[0]);Gn(n)}var ei=new Map,hy=new Set;function Mc(n){return typeof n.getRootNode=="function"?n.getRootNode():n.nodeType===9?n:n.ownerDocument}var fs=ke.d;ke.d={f:tS,r:nS,D:rS,C:iS,L:sS,m:oS,X:aS,S:lS,M:uS};function tS(){var n=fs.f(),s=pc();return n||s}function nS(n){var s=Hn(n);s!==null&&s.tag===5&&s.type==="form"?Rm(s):fs.r(n)}var jl=typeof document>"u"?null:document;function py(n,s,l){var c=jl;if(c&&typeof s=="string"&&s){var p=wn(s);p='link[rel="'+n+'"][href="'+p+'"]',typeof l=="string"&&(p+='[crossorigin="'+l+'"]'),hy.has(p)||(hy.add(p),n={rel:n,crossOrigin:l,href:s},c.querySelector(p)===null&&(s=c.createElement("link"),In(s,"link",n),Mt(s),c.head.appendChild(s)))}}function rS(n){fs.D(n),py("dns-prefetch",n,null)}function iS(n,s){fs.C(n,s),py("preconnect",n,s)}function sS(n,s,l){fs.L(n,s,l);var c=jl;if(c&&n&&s){var p='link[rel="preload"][as="'+wn(s)+'"]';s==="image"&&l&&l.imageSrcSet?(p+='[imagesrcset="'+wn(l.imageSrcSet)+'"]',typeof l.imageSizes=="string"&&(p+='[imagesizes="'+wn(l.imageSizes)+'"]')):p+='[href="'+wn(n)+'"]';var y=p;switch(s){case"style":y=Hl(n);break;case"script":y=ql(n)}ei.has(y)||(n=v({rel:"preload",href:s==="image"&&l&&l.imageSrcSet?void 0:n,as:s},l),ei.set(y,n),c.querySelector(p)!==null||s==="style"&&c.querySelector(Qa(y))||s==="script"&&c.querySelector(Ja(y))||(s=c.createElement("link"),In(s,"link",n),Mt(s),c.head.appendChild(s)))}}function oS(n,s){fs.m(n,s);var l=jl;if(l&&n){var c=s&&typeof s.as=="string"?s.as:"script",p='link[rel="modulepreload"][as="'+wn(c)+'"][href="'+wn(n)+'"]',y=p;switch(c){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":y=ql(n)}if(!ei.has(y)&&(n=v({rel:"modulepreload",href:n},s),ei.set(y,n),l.querySelector(p)===null)){switch(c){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(l.querySelector(Ja(y)))return}c=l.createElement("link"),In(c,"link",n),Mt(c),l.head.appendChild(c)}}}function lS(n,s,l){fs.S(n,s,l);var c=jl;if(c&&n){var p=gi(c).hoistableStyles,y=Hl(n);s=s||"default";var E=p.get(y);if(!E){var C={loading:0,preload:null};if(E=c.querySelector(Qa(y)))C.loading=5;else{n=v({rel:"stylesheet",href:n,"data-precedence":s},l),(l=ei.get(y))&&sh(n,l);var D=E=c.createElement("link");Mt(D),In(D,"link",n),D._p=new Promise(function(X,re){D.onload=X,D.onerror=re}),D.addEventListener("load",function(){C.loading|=1}),D.addEventListener("error",function(){C.loading|=2}),C.loading|=4,wc(E,s,c)}E={type:"stylesheet",instance:E,count:1,state:C},p.set(y,E)}}}function aS(n,s){fs.X(n,s);var l=jl;if(l&&n){var c=gi(l).hoistableScripts,p=ql(n),y=c.get(p);y||(y=l.querySelector(Ja(p)),y||(n=v({src:n,async:!0},s),(s=ei.get(p))&&oh(n,s),y=l.createElement("script"),Mt(y),In(y,"link",n),l.head.appendChild(y)),y={type:"script",instance:y,count:1,state:null},c.set(p,y))}}function uS(n,s){fs.M(n,s);var l=jl;if(l&&n){var c=gi(l).hoistableScripts,p=ql(n),y=c.get(p);y||(y=l.querySelector(Ja(p)),y||(n=v({src:n,async:!0,type:"module"},s),(s=ei.get(p))&&oh(n,s),y=l.createElement("script"),Mt(y),In(y,"link",n),l.head.appendChild(y)),y={type:"script",instance:y,count:1,state:null},c.set(p,y))}}function my(n,s,l,c){var p=(p=Qe.current)?Mc(p):null;if(!p)throw Error(i(446));switch(n){case"meta":case"title":return null;case"style":return typeof l.precedence=="string"&&typeof l.href=="string"?(s=Hl(l.href),l=gi(p).hoistableStyles,c=l.get(s),c||(c={type:"style",instance:null,count:0,state:null},l.set(s,c)),c):{type:"void",instance:null,count:0,state:null};case"link":if(l.rel==="stylesheet"&&typeof l.href=="string"&&typeof l.precedence=="string"){n=Hl(l.href);var y=gi(p).hoistableStyles,E=y.get(n);if(E||(p=p.ownerDocument||p,E={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},y.set(n,E),(y=p.querySelector(Qa(n)))&&!y._p&&(E.instance=y,E.state.loading=5),ei.has(n)||(l={rel:"preload",as:"style",href:l.href,crossOrigin:l.crossOrigin,integrity:l.integrity,media:l.media,hrefLang:l.hrefLang,referrerPolicy:l.referrerPolicy},ei.set(n,l),y||cS(p,n,l,E.state))),s&&c===null)throw Error(i(528,""));return E}if(s&&c!==null)throw Error(i(529,""));return null;case"script":return s=l.async,l=l.src,typeof l=="string"&&s&&typeof s!="function"&&typeof s!="symbol"?(s=ql(l),l=gi(p).hoistableScripts,c=l.get(s),c||(c={type:"script",instance:null,count:0,state:null},l.set(s,c)),c):{type:"void",instance:null,count:0,state:null};default:throw Error(i(444,n))}}function Hl(n){return'href="'+wn(n)+'"'}function Qa(n){return'link[rel="stylesheet"]['+n+"]"}function gy(n){return v({},n,{"data-precedence":n.precedence,precedence:null})}function cS(n,s,l,c){n.querySelector('link[rel="preload"][as="style"]['+s+"]")?c.loading=1:(s=n.createElement("link"),c.preload=s,s.addEventListener("load",function(){return c.loading|=1}),s.addEventListener("error",function(){return c.loading|=2}),In(s,"link",l),Mt(s),n.head.appendChild(s))}function ql(n){return'[src="'+wn(n)+'"]'}function Ja(n){return"script[async]"+n}function yy(n,s,l){if(s.count++,s.instance===null)switch(s.type){case"style":var c=n.querySelector('style[data-href~="'+wn(l.href)+'"]');if(c)return s.instance=c,Mt(c),c;var p=v({},l,{"data-href":l.href,"data-precedence":l.precedence,href:null,precedence:null});return c=(n.ownerDocument||n).createElement("style"),Mt(c),In(c,"style",p),wc(c,l.precedence,n),s.instance=c;case"stylesheet":p=Hl(l.href);var y=n.querySelector(Qa(p));if(y)return s.state.loading|=4,s.instance=y,Mt(y),y;c=gy(l),(p=ei.get(p))&&sh(c,p),y=(n.ownerDocument||n).createElement("link"),Mt(y);var E=y;return E._p=new Promise(function(C,D){E.onload=C,E.onerror=D}),In(y,"link",c),s.state.loading|=4,wc(y,l.precedence,n),s.instance=y;case"script":return y=ql(l.src),(p=n.querySelector(Ja(y)))?(s.instance=p,Mt(p),p):(c=l,(p=ei.get(y))&&(c=v({},l),oh(c,p)),n=n.ownerDocument||n,p=n.createElement("script"),Mt(p),In(p,"link",c),n.head.appendChild(p),s.instance=p);case"void":return null;default:throw Error(i(443,s.type))}else s.type==="stylesheet"&&(s.state.loading&4)===0&&(c=s.instance,s.state.loading|=4,wc(c,l.precedence,n));return s.instance}function wc(n,s,l){for(var c=l.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),p=c.length?c[c.length-1]:null,y=p,E=0;E<c.length;E++){var C=c[E];if(C.dataset.precedence===s)y=C;else if(y!==p)break}y?y.parentNode.insertBefore(n,y.nextSibling):(s=l.nodeType===9?l.head:l,s.insertBefore(n,s.firstChild))}function sh(n,s){n.crossOrigin==null&&(n.crossOrigin=s.crossOrigin),n.referrerPolicy==null&&(n.referrerPolicy=s.referrerPolicy),n.title==null&&(n.title=s.title)}function oh(n,s){n.crossOrigin==null&&(n.crossOrigin=s.crossOrigin),n.referrerPolicy==null&&(n.referrerPolicy=s.referrerPolicy),n.integrity==null&&(n.integrity=s.integrity)}var Tc=null;function vy(n,s,l){if(Tc===null){var c=new Map,p=Tc=new Map;p.set(l,c)}else p=Tc,c=p.get(l),c||(c=new Map,p.set(l,c));if(c.has(n))return c;for(c.set(n,null),l=l.getElementsByTagName(n),p=0;p<l.length;p++){var y=l[p];if(!(y[Yi]||y[ge]||n==="link"&&y.getAttribute("rel")==="stylesheet")&&y.namespaceURI!=="http://www.w3.org/2000/svg"){var E=y.getAttribute(s)||"";E=n+E;var C=c.get(E);C?C.push(y):c.set(E,[y])}}return c}function by(n,s,l){n=n.ownerDocument||n,n.head.insertBefore(l,s==="title"?n.querySelector("head > title"):null)}function fS(n,s,l){if(l===1||s.itemProp!=null)return!1;switch(n){case"meta":case"title":return!0;case"style":if(typeof s.precedence!="string"||typeof s.href!="string"||s.href==="")break;return!0;case"link":if(typeof s.rel!="string"||typeof s.href!="string"||s.href===""||s.onLoad||s.onError)break;switch(s.rel){case"stylesheet":return n=s.disabled,typeof s.precedence=="string"&&n==null;default:return!0}case"script":if(s.async&&typeof s.async!="function"&&typeof s.async!="symbol"&&!s.onLoad&&!s.onError&&s.src&&typeof s.src=="string")return!0}return!1}function Sy(n){return!(n.type==="stylesheet"&&(n.state.loading&3)===0)}var Za=null;function dS(){}function hS(n,s,l){if(Za===null)throw Error(i(475));var c=Za;if(s.type==="stylesheet"&&(typeof l.media!="string"||matchMedia(l.media).matches!==!1)&&(s.state.loading&4)===0){if(s.instance===null){var p=Hl(l.href),y=n.querySelector(Qa(p));if(y){n=y._p,n!==null&&typeof n=="object"&&typeof n.then=="function"&&(c.count++,c=Oc.bind(c),n.then(c,c)),s.state.loading|=4,s.instance=y,Mt(y);return}y=n.ownerDocument||n,l=gy(l),(p=ei.get(p))&&sh(l,p),y=y.createElement("link"),Mt(y);var E=y;E._p=new Promise(function(C,D){E.onload=C,E.onerror=D}),In(y,"link",l),s.instance=y}c.stylesheets===null&&(c.stylesheets=new Map),c.stylesheets.set(s,n),(n=s.state.preload)&&(s.state.loading&3)===0&&(c.count++,s=Oc.bind(c),n.addEventListener("load",s),n.addEventListener("error",s))}}function pS(){if(Za===null)throw Error(i(475));var n=Za;return n.stylesheets&&n.count===0&&lh(n,n.stylesheets),0<n.count?function(s){var l=setTimeout(function(){if(n.stylesheets&&lh(n,n.stylesheets),n.unsuspend){var c=n.unsuspend;n.unsuspend=null,c()}},6e4);return n.unsuspend=s,function(){n.unsuspend=null,clearTimeout(l)}}:null}function Oc(){if(this.count--,this.count===0){if(this.stylesheets)lh(this,this.stylesheets);else if(this.unsuspend){var n=this.unsuspend;this.unsuspend=null,n()}}}var kc=null;function lh(n,s){n.stylesheets=null,n.unsuspend!==null&&(n.count++,kc=new Map,s.forEach(mS,n),kc=null,Oc.call(n))}function mS(n,s){if(!(s.state.loading&4)){var l=kc.get(n);if(l)var c=l.get(null);else{l=new Map,kc.set(n,l);for(var p=n.querySelectorAll("link[data-precedence],style[data-precedence]"),y=0;y<p.length;y++){var E=p[y];(E.nodeName==="LINK"||E.getAttribute("media")!=="not all")&&(l.set(E.dataset.precedence,E),c=E)}c&&l.set(null,c)}p=s.instance,E=p.getAttribute("data-precedence"),y=l.get(E)||c,y===c&&l.set(null,p),l.set(E,p),this.count++,c=Oc.bind(this),p.addEventListener("load",c),p.addEventListener("error",c),y?y.parentNode.insertBefore(p,y.nextSibling):(n=n.nodeType===9?n.head:n,n.insertBefore(p,n.firstChild)),s.state.loading|=4}}var Wa={$$typeof:_e,Provider:null,Consumer:null,_currentValue:Ke,_currentValue2:Ke,_threadCount:0};function gS(n,s,l,c,p,y,E,C){this.tag=1,this.containerInfo=n,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Pi(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Pi(0),this.hiddenUpdates=Pi(null),this.identifierPrefix=c,this.onUncaughtError=p,this.onCaughtError=y,this.onRecoverableError=E,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=C,this.incompleteTransitions=new Map}function xy(n,s,l,c,p,y,E,C,D,X,re,oe){return n=new gS(n,s,l,E,C,D,X,oe),s=1,y===!0&&(s|=24),y=Nr(3,null,null,s),n.current=y,y.stateNode=n,s=If(),s.refCount++,n.pooledCache=s,s.refCount++,y.memoizedState={element:c,isDehydrated:l,cache:s},Gf(y),n}function Ey(n){return n?(n=Di,n):Di}function My(n,s,l,c,p,y){p=Ey(p),c.context===null?c.context=p:c.pendingContext=p,c=Cs(s),c.payload={element:l},y=y===void 0?null:y,y!==null&&(c.callback=y),l=As(n,c,s),l!==null&&(Lr(l,n,s),Aa(l,n,s))}function wy(n,s){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var l=n.retryLane;n.retryLane=l!==0&&l<s?l:s}}function ah(n,s){wy(n,s),(n=n.alternate)&&wy(n,s)}function Ty(n){if(n.tag===13){var s=bi(n,67108864);s!==null&&Lr(s,n,67108864),ah(n,67108864)}}var Cc=!0;function yS(n,s,l,c){var p=te.T;te.T=null;var y=ke.p;try{ke.p=2,uh(n,s,l,c)}finally{ke.p=y,te.T=p}}function vS(n,s,l,c){var p=te.T;te.T=null;var y=ke.p;try{ke.p=8,uh(n,s,l,c)}finally{ke.p=y,te.T=p}}function uh(n,s,l,c){if(Cc){var p=ch(c);if(p===null)Qd(n,s,c,Ac,l),ky(n,c);else if(SS(p,n,s,l,c))c.stopPropagation();else if(ky(n,c),s&4&&-1<bS.indexOf(n)){for(;p!==null;){var y=Hn(p);if(y!==null)switch(y.tag){case 3:if(y=y.stateNode,y.current.memoizedState.isDehydrated){var E=Mn(y.pendingLanes);if(E!==0){var C=y;for(C.pendingLanes|=2,C.entangledLanes|=2;E;){var D=1<<31-Wt(E);C.entanglements[1]|=D,E&=~D}ji(y),(At&6)===0&&(dc=pr()+500,Ga(0))}}break;case 13:C=bi(y,2),C!==null&&Lr(C,y,2),pc(),ah(y,2)}if(y=ch(c),y===null&&Qd(n,s,c,Ac,l),y===p)break;p=y}p!==null&&c.stopPropagation()}else Qd(n,s,c,null,l)}}function ch(n){return n=Me(n),fh(n)}var Ac=null;function fh(n){if(Ac=null,n=or(n),n!==null){var s=a(n);if(s===null)n=null;else{var l=s.tag;if(l===13){if(n=u(s),n!==null)return n;n=null}else if(l===3){if(s.stateNode.current.memoizedState.isDehydrated)return s.tag===3?s.stateNode.containerInfo:null;n=null}else s!==n&&(n=null)}}return Ac=n,null}function Oy(n){switch(n){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(oa()){case Jo:return 2;case Ki:return 8;case jn:case Zo:return 32;case ci:return 268435456;default:return 32}default:return 32}}var dh=!1,Is=null,Ks=null,Ps=null,eu=new Map,tu=new Map,Ys=[],bS="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function ky(n,s){switch(n){case"focusin":case"focusout":Is=null;break;case"dragenter":case"dragleave":Ks=null;break;case"mouseover":case"mouseout":Ps=null;break;case"pointerover":case"pointerout":eu.delete(s.pointerId);break;case"gotpointercapture":case"lostpointercapture":tu.delete(s.pointerId)}}function nu(n,s,l,c,p,y){return n===null||n.nativeEvent!==y?(n={blockedOn:s,domEventName:l,eventSystemFlags:c,nativeEvent:y,targetContainers:[p]},s!==null&&(s=Hn(s),s!==null&&Ty(s)),n):(n.eventSystemFlags|=c,s=n.targetContainers,p!==null&&s.indexOf(p)===-1&&s.push(p),n)}function SS(n,s,l,c,p){switch(s){case"focusin":return Is=nu(Is,n,s,l,c,p),!0;case"dragenter":return Ks=nu(Ks,n,s,l,c,p),!0;case"mouseover":return Ps=nu(Ps,n,s,l,c,p),!0;case"pointerover":var y=p.pointerId;return eu.set(y,nu(eu.get(y)||null,n,s,l,c,p)),!0;case"gotpointercapture":return y=p.pointerId,tu.set(y,nu(tu.get(y)||null,n,s,l,c,p)),!0}return!1}function Cy(n){var s=or(n.target);if(s!==null){var l=a(s);if(l!==null){if(s=l.tag,s===13){if(s=u(l),s!==null){n.blockedOn=s,Ct(n.priority,function(){if(l.tag===13){var c=zr();c=Se(c);var p=bi(l,c);p!==null&&Lr(p,l,c),ah(l,c)}});return}}else if(s===3&&l.stateNode.current.memoizedState.isDehydrated){n.blockedOn=l.tag===3?l.stateNode.containerInfo:null;return}}}n.blockedOn=null}function _c(n){if(n.blockedOn!==null)return!1;for(var s=n.targetContainers;0<s.length;){var l=ch(n.nativeEvent);if(l===null){l=n.nativeEvent;var c=new l.constructor(l.type,l);Xn=c,l.target.dispatchEvent(c),Xn=null}else return s=Hn(l),s!==null&&Ty(s),n.blockedOn=l,!1;s.shift()}return!0}function Ay(n,s,l){_c(n)&&l.delete(s)}function xS(){dh=!1,Is!==null&&_c(Is)&&(Is=null),Ks!==null&&_c(Ks)&&(Ks=null),Ps!==null&&_c(Ps)&&(Ps=null),eu.forEach(Ay),tu.forEach(Ay)}function Nc(n,s){n.blockedOn===s&&(n.blockedOn=null,dh||(dh=!0,r.unstable_scheduleCallback(r.unstable_NormalPriority,xS)))}var Dc=null;function _y(n){Dc!==n&&(Dc=n,r.unstable_scheduleCallback(r.unstable_NormalPriority,function(){Dc===n&&(Dc=null);for(var s=0;s<n.length;s+=3){var l=n[s],c=n[s+1],p=n[s+2];if(typeof c!="function"){if(fh(c||l)===null)continue;break}var y=Hn(l);y!==null&&(n.splice(s,3),s-=3,fd(y,{pending:!0,data:p,method:l.method,action:c},c,p))}}))}function ru(n){function s(D){return Nc(D,n)}Is!==null&&Nc(Is,n),Ks!==null&&Nc(Ks,n),Ps!==null&&Nc(Ps,n),eu.forEach(s),tu.forEach(s);for(var l=0;l<Ys.length;l++){var c=Ys[l];c.blockedOn===n&&(c.blockedOn=null)}for(;0<Ys.length&&(l=Ys[0],l.blockedOn===null);)Cy(l),l.blockedOn===null&&Ys.shift();if(l=(n.ownerDocument||n).$$reactFormReplay,l!=null)for(c=0;c<l.length;c+=3){var p=l[c],y=l[c+1],E=p[ye]||null;if(typeof y=="function")E||_y(l);else if(E){var C=null;if(y&&y.hasAttribute("formAction")){if(p=y,E=y[ye]||null)C=E.formAction;else if(fh(p)!==null)continue}else C=E.action;typeof C=="function"?l[c+1]=C:(l.splice(c,3),c-=3),_y(l)}}}function hh(n){this._internalRoot=n}Rc.prototype.render=hh.prototype.render=function(n){var s=this._internalRoot;if(s===null)throw Error(i(409));var l=s.current,c=zr();My(l,c,n,s,null,null)},Rc.prototype.unmount=hh.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var s=n.containerInfo;My(n.current,2,null,n,null,null),pc(),s[lt]=null}};function Rc(n){this._internalRoot=n}Rc.prototype.unstable_scheduleHydration=function(n){if(n){var s=Ot();n={blockedOn:null,target:n,priority:s};for(var l=0;l<Ys.length&&s!==0&&s<Ys[l].priority;l++);Ys.splice(l,0,n),l===0&&Cy(n)}};var Ny=e.version;if(Ny!=="19.1.0")throw Error(i(527,Ny,"19.1.0"));ke.findDOMNode=function(n){var s=n._reactInternals;if(s===void 0)throw typeof n.render=="function"?Error(i(188)):(n=Object.keys(n).join(","),Error(i(268,n)));return n=h(s),n=n!==null?m(n):null,n=n===null?null:n.stateNode,n};var ES={bundleType:0,version:"19.1.0",rendererPackageName:"react-dom",currentDispatcherRef:te,reconcilerVersion:"19.1.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Bc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Bc.isDisabled&&Bc.supportsFiber)try{on=Bc.inject(ES),Ht=Bc}catch{}}return su.createRoot=function(n,s){if(!o(n))throw Error(i(299));var l=!1,c="",p=$m,y=Xm,E=Fm,C=null;return s!=null&&(s.unstable_strictMode===!0&&(l=!0),s.identifierPrefix!==void 0&&(c=s.identifierPrefix),s.onUncaughtError!==void 0&&(p=s.onUncaughtError),s.onCaughtError!==void 0&&(y=s.onCaughtError),s.onRecoverableError!==void 0&&(E=s.onRecoverableError),s.unstable_transitionCallbacks!==void 0&&(C=s.unstable_transitionCallbacks)),s=xy(n,1,!1,null,null,l,c,p,y,E,C,null),n[lt]=s.current,Fd(n),new hh(s)},su.hydrateRoot=function(n,s,l){if(!o(n))throw Error(i(299));var c=!1,p="",y=$m,E=Xm,C=Fm,D=null,X=null;return l!=null&&(l.unstable_strictMode===!0&&(c=!0),l.identifierPrefix!==void 0&&(p=l.identifierPrefix),l.onUncaughtError!==void 0&&(y=l.onUncaughtError),l.onCaughtError!==void 0&&(E=l.onCaughtError),l.onRecoverableError!==void 0&&(C=l.onRecoverableError),l.unstable_transitionCallbacks!==void 0&&(D=l.unstable_transitionCallbacks),l.formState!==void 0&&(X=l.formState)),s=xy(n,1,!0,s,l??null,c,p,y,E,C,D,X),s.context=Ey(null),l=s.current,c=zr(),c=Se(c),p=Cs(c),p.callback=null,As(l,p,c),l=c,s.current.lanes=l,pi(s,l),ji(s),n[lt]=s.current,Fd(n),new Rc(s)},su.version="19.1.0",su}var Vy;function BS(){if(Vy)return yh.exports;Vy=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(e){console.error(e)}}return r(),yh.exports=RS(),yh.exports}var zS=BS();const LS=Mu(zS);var Pc={exports:{}},jS=Pc.exports,Iy;function HS(){return Iy||(Iy=1,function(r,e){(function(t,i){r.exports=i()})(jS,function(){var t=function(d,g){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(b,x){b.__proto__=x}||function(b,x){for(var M in x)Object.prototype.hasOwnProperty.call(x,M)&&(b[M]=x[M])})(d,g)},i=function(){return(i=Object.assign||function(d){for(var g,b=1,x=arguments.length;b<x;b++)for(var M in g=arguments[b])Object.prototype.hasOwnProperty.call(g,M)&&(d[M]=g[M]);return d}).apply(this,arguments)};function o(d,g,b){for(var x,M=0,k=g.length;M<k;M++)!x&&M in g||((x=x||Array.prototype.slice.call(g,0,M))[M]=g[M]);return d.concat(x||Array.prototype.slice.call(g))}var a=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:OS,u=Object.keys,f=Array.isArray;function h(d,g){return typeof g!="object"||u(g).forEach(function(b){d[b]=g[b]}),d}typeof Promise>"u"||a.Promise||(a.Promise=Promise);var m=Object.getPrototypeOf,v={}.hasOwnProperty;function S(d,g){return v.call(d,g)}function w(d,g){typeof g=="function"&&(g=g(m(d))),(typeof Reflect>"u"?u:Reflect.ownKeys)(g).forEach(function(b){T(d,b,g[b])})}var O=Object.defineProperty;function T(d,g,b,x){O(d,g,h(b&&S(b,"get")&&typeof b.get=="function"?{get:b.get,set:b.set,configurable:!0}:{value:b,configurable:!0,writable:!0},x))}function A(d){return{from:function(g){return d.prototype=Object.create(g.prototype),T(d.prototype,"constructor",d),{extend:w.bind(null,d.prototype)}}}}var R=Object.getOwnPropertyDescriptor,W=[].slice;function Te(d,g,b){return W.call(d,g,b)}function _e(d,g){return g(d)}function Le(d){if(!d)throw new Error("Assertion Failed")}function ve(d){a.setImmediate?setImmediate(d):setTimeout(d,0)}function Re(d,g){if(typeof g=="string"&&S(d,g))return d[g];if(!g)return d;if(typeof g!="string"){for(var b=[],x=0,M=g.length;x<M;++x){var k=Re(d,g[x]);b.push(k)}return b}var _=g.indexOf(".");if(_!==-1){var N=d[g.substr(0,_)];return N==null?void 0:Re(N,g.substr(_+1))}}function Fe(d,g,b){if(d&&g!==void 0&&!("isFrozen"in Object&&Object.isFrozen(d)))if(typeof g!="string"&&"length"in g){Le(typeof b!="string"&&"length"in b);for(var x=0,M=g.length;x<M;++x)Fe(d,g[x],b[x])}else{var k,_,N=g.indexOf(".");N!==-1?(k=g.substr(0,N),(_=g.substr(N+1))===""?b===void 0?f(d)&&!isNaN(parseInt(k))?d.splice(k,1):delete d[k]:d[k]=b:Fe(N=!(N=d[k])||!S(d,k)?d[k]={}:N,_,b)):b===void 0?f(d)&&!isNaN(parseInt(g))?d.splice(g,1):delete d[g]:d[g]=b}}function me(d){var g,b={};for(g in d)S(d,g)&&(b[g]=d[g]);return b}var Ce=[].concat;function St(d){return Ce.apply([],d)}var on="BigUint64Array,BigInt64Array,Array,Boolean,String,Date,RegExp,Blob,File,FileList,FileSystemFileHandle,FileSystemDirectoryHandle,ArrayBuffer,DataView,Uint8ClampedArray,ImageBitmap,ImageData,Map,Set,CryptoKey".split(",").concat(St([8,16,32,64].map(function(d){return["Int","Uint","Float"].map(function(g){return g+d+"Array"})}))).filter(function(d){return a[d]}),sn=new Set(on.map(function(d){return a[d]})),jt=null;function Ln(d){return jt=new WeakMap,d=function g(b){if(!b||typeof b!="object")return b;var x=jt.get(b);if(x)return x;if(f(b)){x=[],jt.set(b,x);for(var M=0,k=b.length;M<k;++M)x.push(g(b[M]))}else if(sn.has(b.constructor))x=b;else{var _,N=m(b);for(_ in x=N===Object.prototype?{}:Object.create(N),jt.set(b,x),b)S(b,_)&&(x[_]=g(b[_]))}return x}(d),jt=null,d}var ir={}.toString;function Xt(d){return ir.call(d).slice(8,-1)}var te=typeof Symbol<"u"?Symbol.iterator:"@@iterator",ke=typeof te=="symbol"?function(d){var g;return d!=null&&(g=d[te])&&g.apply(d)}:function(){return null};function Ke(d,g){return g=d.indexOf(g),0<=g&&d.splice(g,1),0<=g}var vt={};function L(d){var g,b,x,M;if(arguments.length===1){if(f(d))return d.slice();if(this===vt&&typeof d=="string")return[d];if(M=ke(d)){for(b=[];!(x=M.next()).done;)b.push(x.value);return b}if(d==null)return[d];if(typeof(g=d.length)!="number")return[d];for(b=new Array(g);g--;)b[g]=d[g];return b}for(g=arguments.length,b=new Array(g);g--;)b[g]=arguments[g];return b}var le=typeof Symbol<"u"?function(d){return d[Symbol.toStringTag]==="AsyncFunction"}:function(){return!1},Ti=["Unknown","Constraint","Data","TransactionInactive","ReadOnly","Version","NotFound","InvalidState","InvalidAccess","Abort","Timeout","QuotaExceeded","Syntax","DataClone"],ar=["Modify","Bulk","OpenFailed","VersionChange","Schema","Upgrade","InvalidTable","MissingAPI","NoSuchDatabase","InvalidArgument","SubTransaction","Unsupported","Internal","DatabaseClosed","PrematureCommit","ForeignAwait"].concat(Ti),Ne={VersionChanged:"Database version changed by other database connection",DatabaseClosed:"Database has been closed",Abort:"Transaction aborted",TransactionInactive:"Transaction has already completed or failed",MissingAPI:"IndexedDB API missing. Please visit https://tinyurl.com/y2uuvskb"};function xe(d,g){this.name=d,this.message=g}function Ge(d,g){return d+". Errors: "+Object.keys(g).map(function(b){return g[b].toString()}).filter(function(b,x,M){return M.indexOf(b)===x}).join(`
`)}function ft(d,g,b,x){this.failures=g,this.failedKeys=x,this.successCount=b,this.message=Ge(d,g)}function Qe(d,g){this.name="BulkError",this.failures=Object.keys(g).map(function(b){return g[b]}),this.failuresByPos=g,this.message=Ge(d,this.failures)}A(xe).from(Error).extend({toString:function(){return this.name+": "+this.message}}),A(ft).from(xe),A(Qe).from(xe);var gn=ar.reduce(function(d,g){return d[g]=g+"Error",d},{}),Nt=xe,Ve=ar.reduce(function(d,g){var b=g+"Error";function x(M,k){this.name=b,M?typeof M=="string"?(this.message="".concat(M).concat(k?`
 `+k:""),this.inner=k||null):typeof M=="object"&&(this.message="".concat(M.name," ").concat(M.message),this.inner=M):(this.message=Ne[g]||b,this.inner=null)}return A(x).from(Nt),d[g]=x,d},{});Ve.Syntax=SyntaxError,Ve.Type=TypeError,Ve.Range=RangeError;var oi=Ti.reduce(function(d,g){return d[g+"Error"]=Ve[g],d},{}),li=ar.reduce(function(d,g){return["Syntax","Type","Range"].indexOf(g)===-1&&(d[g+"Error"]=Ve[g]),d},{});function xt(){}function ai(d){return d}function uo(d,g){return d==null||d===ai?g:function(b){return g(d(b))}}function ui(d,g){return function(){d.apply(this,arguments),g.apply(this,arguments)}}function sa(d,g){return d===xt?g:function(){var b=d.apply(this,arguments);b!==void 0&&(arguments[0]=b);var x=this.onsuccess,M=this.onerror;this.onsuccess=null,this.onerror=null;var k=g.apply(this,arguments);return x&&(this.onsuccess=this.onsuccess?ui(x,this.onsuccess):x),M&&(this.onerror=this.onerror?ui(M,this.onerror):M),k!==void 0?k:b}}function pr(d,g){return d===xt?g:function(){d.apply(this,arguments);var b=this.onsuccess,x=this.onerror;this.onsuccess=this.onerror=null,g.apply(this,arguments),b&&(this.onsuccess=this.onsuccess?ui(b,this.onsuccess):b),x&&(this.onerror=this.onerror?ui(x,this.onerror):x)}}function oa(d,g){return d===xt?g:function(b){var x=d.apply(this,arguments);h(b,x);var M=this.onsuccess,k=this.onerror;return this.onsuccess=null,this.onerror=null,b=g.apply(this,arguments),M&&(this.onsuccess=this.onsuccess?ui(M,this.onsuccess):M),k&&(this.onerror=this.onerror?ui(k,this.onerror):k),x===void 0?b===void 0?void 0:b:h(x,b)}}function Jo(d,g){return d===xt?g:function(){return g.apply(this,arguments)!==!1&&d.apply(this,arguments)}}function Ki(d,g){return d===xt?g:function(){var b=d.apply(this,arguments);if(b&&typeof b.then=="function"){for(var x=this,M=arguments.length,k=new Array(M);M--;)k[M]=arguments[M];return b.then(function(){return g.apply(x,k)})}return g.apply(this,arguments)}}li.ModifyError=ft,li.DexieError=xe,li.BulkError=Qe;var jn=typeof location<"u"&&/^(http|https):\/\/(localhost|127\.0\.0\.1)/.test(location.href);function Zo(d){jn=d}var ci={},qr=100,on=typeof Promise>"u"?[]:function(){var d=Promise.resolve();if(typeof crypto>"u"||!crypto.subtle)return[d,m(d),d];var g=crypto.subtle.digest("SHA-512",new Uint8Array([0]));return[g,m(g),d]}(),Ti=on[0],ar=on[1],on=on[2],ar=ar&&ar.then,Ht=Ti&&Ti.constructor,sr=!!on,Wt=function(d,g){wr.push([d,g]),vs&&(queueMicrotask(We),vs=!1)},co=!0,vs=!0,fi=[],di=[],hi=ai,Mn={id:"global",global:!0,ref:0,unhandleds:[],onunhandled:xt,pgp:!1,env:{},finalize:xt},je=Mn,wr=[],Tr=0,Oi=[];function we(d){if(typeof this!="object")throw new TypeError("Promises must be constructed via new");this._listeners=[],this._lib=!1;var g=this._PSD=je;if(typeof d!="function"){if(d!==ci)throw new TypeError("Not a function");return this._state=arguments[1],this._value=arguments[2],void(this._state===!1&&Ur(this,this._value))}this._state=null,this._value=null,++g.ref,function b(x,M){try{M(function(k){if(x._state===null){if(k===x)throw new TypeError("A promise cannot be resolved with itself.");var _=x._lib&&Ot();k&&typeof k.then=="function"?b(x,function(N,H){k instanceof we?k._then(N,H):k.then(N,H)}):(x._state=!0,x._value=k,z(x)),_&&Ct()}},Ur.bind(null,x))}catch(k){Ur(x,k)}}(this,d)}var Pi={get:function(){var d=je,g=mi;function b(x,M){var k=this,_=!d.global&&(d!==je||g!==mi),N=_&&!Hn(),H=new we(function(U,K){ie(k,new pi(Pr(x,d,_,N),Pr(M,d,_,N),U,K,d))});return this._consoleTask&&(H._consoleTask=this._consoleTask),H}return b.prototype=ci,b},set:function(d){T(this,"then",d&&d.prototype===ci?Pi:{get:function(){return d},set:Pi.set})}};function pi(d,g,b,x,M){this.onFulfilled=typeof d=="function"?d:null,this.onRejected=typeof g=="function"?g:null,this.resolve=b,this.reject=x,this.psd=M}function Ur(d,g){var b,x;di.push(g),d._state===null&&(b=d._lib&&Ot(),g=hi(g),d._state=!1,d._value=g,x=d,fi.some(function(M){return M._value===x._value})||fi.push(x),z(d),b&&Ct())}function z(d){var g=d._listeners;d._listeners=[];for(var b=0,x=g.length;b<x;++b)ie(d,g[b]);var M=d._PSD;--M.ref||M.finalize(),Tr===0&&(++Tr,Wt(function(){--Tr==0&&Ae()},[]))}function ie(d,g){if(d._state!==null){var b=d._state?g.onFulfilled:g.onRejected;if(b===null)return(d._state?g.resolve:g.reject)(d._value);++g.psd.ref,++Tr,Wt(Se,[b,d,g])}else d._listeners.push(g)}function Se(d,g,b){try{var x,M=g._value;!g._state&&di.length&&(di=[]),x=jn&&g._consoleTask?g._consoleTask.run(function(){return d(M)}):d(M),g._state||di.indexOf(M)!==-1||function(k){for(var _=fi.length;_;)if(fi[--_]._value===k._value)return fi.splice(_,1)}(g),b.resolve(x)}catch(k){b.reject(k)}finally{--Tr==0&&Ae(),--b.psd.ref||b.psd.finalize()}}function We(){Kr(Mn,function(){Ot()&&Ct()})}function Ot(){var d=co;return vs=co=!1,d}function Ct(){var d,g,b;do for(;0<wr.length;)for(d=wr,wr=[],b=d.length,g=0;g<b;++g){var x=d[g];x[0].apply(null,x[1])}while(0<wr.length);vs=co=!0}function Ae(){var d=fi;fi=[],d.forEach(function(x){x._PSD.onunhandled.call(null,x._value,x)});for(var g=Oi.slice(0),b=g.length;b;)g[--b]()}function ge(d){return new we(ci,!1,d)}function ye(d,g){var b=je;return function(){var x=Ot(),M=je;try{return Mt(b,!0),d.apply(this,arguments)}catch(k){g&&g(k)}finally{Mt(M,!1),x&&Ct()}}}w(we.prototype,{then:Pi,_then:function(d,g){ie(this,new pi(null,null,d,g,je))},catch:function(d){if(arguments.length===1)return this.then(null,d);var g=d,b=arguments[1];return typeof g=="function"?this.then(null,function(x){return(x instanceof g?b:ge)(x)}):this.then(null,function(x){return(x&&x.name===g?b:ge)(x)})},finally:function(d){return this.then(function(g){return we.resolve(d()).then(function(){return g})},function(g){return we.resolve(d()).then(function(){return ge(g)})})},timeout:function(d,g){var b=this;return d<1/0?new we(function(x,M){var k=setTimeout(function(){return M(new Ve.Timeout(g))},d);b.then(x,M).finally(clearTimeout.bind(null,k))}):this}}),typeof Symbol<"u"&&Symbol.toStringTag&&T(we.prototype,Symbol.toStringTag,"Dexie.Promise"),Mn.env=fo(),w(we,{all:function(){var d=L.apply(null,arguments).map(Ir);return new we(function(g,b){d.length===0&&g([]);var x=d.length;d.forEach(function(M,k){return we.resolve(M).then(function(_){d[k]=_,--x||g(d)},b)})})},resolve:function(d){return d instanceof we?d:d&&typeof d.then=="function"?new we(function(g,b){d.then(g,b)}):new we(ci,!0,d)},reject:ge,race:function(){var d=L.apply(null,arguments).map(Ir);return new we(function(g,b){d.map(function(x){return we.resolve(x).then(g,b)})})},PSD:{get:function(){return je},set:function(d){return je=d}},totalEchoes:{get:function(){return mi}},newPSD:Gn,usePSD:Kr,scheduler:{get:function(){return Wt},set:function(d){Wt=d}},rejectionMapper:{get:function(){return hi},set:function(d){hi=d}},follow:function(d,g){return new we(function(b,x){return Gn(function(M,k){var _=je;_.unhandleds=[],_.onunhandled=k,_.finalize=ui(function(){var N,H=this;N=function(){H.unhandleds.length===0?M():k(H.unhandleds[0])},Oi.push(function U(){N(),Oi.splice(Oi.indexOf(U),1)}),++Tr,Wt(function(){--Tr==0&&Ae()},[])},_.finalize),d()},g,b,x)})}}),Ht&&(Ht.allSettled&&T(we,"allSettled",function(){var d=L.apply(null,arguments).map(Ir);return new we(function(g){d.length===0&&g([]);var b=d.length,x=new Array(b);d.forEach(function(M,k){return we.resolve(M).then(function(_){return x[k]={status:"fulfilled",value:_}},function(_){return x[k]={status:"rejected",reason:_}}).then(function(){return--b||g(x)})})})}),Ht.any&&typeof AggregateError<"u"&&T(we,"any",function(){var d=L.apply(null,arguments).map(Ir);return new we(function(g,b){d.length===0&&b(new AggregateError([]));var x=d.length,M=new Array(x);d.forEach(function(k,_){return we.resolve(k).then(function(N){return g(N)},function(N){M[_]=N,--x||b(new AggregateError(M))})})})}),Ht.withResolvers&&(we.withResolvers=Ht.withResolvers));var lt={awaits:0,echoes:0,id:0},qt=0,Vr=[],ki=0,mi=0,Yi=0;function Gn(d,g,b,x){var M=je,k=Object.create(M);return k.parent=M,k.ref=0,k.global=!1,k.id=++Yi,Mn.env,k.env=sr?{Promise:we,PromiseProp:{value:we,configurable:!0,writable:!0},all:we.all,race:we.race,allSettled:we.allSettled,any:we.any,resolve:we.resolve,reject:we.reject}:{},g&&h(k,g),++M.ref,k.finalize=function(){--this.parent.ref||this.parent.finalize()},x=Kr(k,d,b,x),k.ref===0&&k.finalize(),x}function or(){return lt.id||(lt.id=++qt),++lt.awaits,lt.echoes+=qr,lt.id}function Hn(){return!!lt.awaits&&(--lt.awaits==0&&(lt.id=0),lt.echoes=lt.awaits*qr,!0)}function Ir(d){return lt.echoes&&d&&d.constructor===Ht?(or(),d.then(function(g){return Hn(),g},function(g){return Hn(),Ut(g)})):d}function gi(){var d=Vr[Vr.length-1];Vr.pop(),Mt(d,!1)}function Mt(d,g){var b,x=je;(g?!lt.echoes||ki++&&d===je:!ki||--ki&&d===je)||queueMicrotask(g?(function(M){++mi,lt.echoes&&--lt.echoes!=0||(lt.echoes=lt.awaits=lt.id=0),Vr.push(je),Mt(M,!0)}).bind(null,d):gi),d!==je&&(je=d,x===Mn&&(Mn.env=fo()),sr&&(b=Mn.env.Promise,g=d.env,(x.global||d.global)&&(Object.defineProperty(a,"Promise",g.PromiseProp),b.all=g.all,b.race=g.race,b.resolve=g.resolve,b.reject=g.reject,g.allSettled&&(b.allSettled=g.allSettled),g.any&&(b.any=g.any))))}function fo(){var d=a.Promise;return sr?{Promise:d,PromiseProp:Object.getOwnPropertyDescriptor(a,"Promise"),all:d.all,race:d.race,allSettled:d.allSettled,any:d.any,resolve:d.resolve,reject:d.reject}:{}}function Kr(d,g,b,x,M){var k=je;try{return Mt(d,!0),g(b,x,M)}finally{Mt(k,!1)}}function Pr(d,g,b,x){return typeof d!="function"?d:function(){var M=je;b&&or(),Mt(g,!0);try{return d.apply(this,arguments)}finally{Mt(M,!1),x&&queueMicrotask(Hn)}}}function yn(d){Promise===Ht&&lt.echoes===0?ki===0?d():enqueueNativeMicroTask(d):setTimeout(d,0)}(""+ar).indexOf("[native code]")===-1&&(or=Hn=xt);var Ut=we.reject,Or="",mr="Invalid key provided. Keys must be of type string, number, Date or Array<string | number | Date>.",Wo="String expected.",kr=[],gr="__dbnames",lr="readonly",ce="readwrite";function He(d,g){return d?g?function(){return d.apply(this,arguments)&&g.apply(this,arguments)}:d:g}var st={type:3,lower:-1/0,lowerOpen:!1,upper:[[]],upperOpen:!1};function bt(d){return typeof d!="string"||/\./.test(d)?function(g){return g}:function(g){return g[d]===void 0&&d in g&&delete(g=Ln(g))[d],g}}function Vt(){throw Ve.Type()}function tt(d,g){try{var b=yr(d),x=yr(g);if(b!==x)return b==="Array"?1:x==="Array"?-1:b==="binary"?1:x==="binary"?-1:b==="string"?1:x==="string"?-1:b==="Date"?1:x!=="Date"?NaN:-1;switch(b){case"number":case"Date":case"string":return g<d?1:d<g?-1:0;case"binary":return function(M,k){for(var _=M.length,N=k.length,H=_<N?_:N,U=0;U<H;++U)if(M[U]!==k[U])return M[U]<k[U]?-1:1;return _===N?0:_<N?-1:1}(ln(d),ln(g));case"Array":return function(M,k){for(var _=M.length,N=k.length,H=_<N?_:N,U=0;U<H;++U){var K=tt(M[U],k[U]);if(K!==0)return K}return _===N?0:_<N?-1:1}(d,g)}}catch{}return NaN}function yr(d){var g=typeof d;return g!="object"?g:ArrayBuffer.isView(d)?"binary":(d=Xt(d),d==="ArrayBuffer"?"binary":d)}function ln(d){return d instanceof Uint8Array?d:ArrayBuffer.isView(d)?new Uint8Array(d.buffer,d.byteOffset,d.byteLength):new Uint8Array(d)}var vn=(pt.prototype._trans=function(d,g,b){var x=this._tx||je.trans,M=this.name,k=jn&&typeof console<"u"&&console.createTask&&console.createTask("Dexie: ".concat(d==="readonly"?"read":"write"," ").concat(this.name));function _(U,K,B){if(!B.schema[M])throw new Ve.NotFound("Table "+M+" not part of transaction");return g(B.idbtrans,B)}var N=Ot();try{var H=x&&x.db._novip===this.db._novip?x===je.trans?x._promise(d,_,b):Gn(function(){return x._promise(d,_,b)},{trans:x,transless:je.transless||je}):function U(K,B,Y,j){if(K.idbdb&&(K._state.openComplete||je.letThrough||K._vip)){var I=K._createTransaction(B,Y,K._dbSchema);try{I.create(),K._state.PR1398_maxLoop=3}catch(G){return G.name===gn.InvalidState&&K.isOpen()&&0<--K._state.PR1398_maxLoop?(console.warn("Dexie: Need to reopen db"),K.close({disableAutoOpen:!1}),K.open().then(function(){return U(K,B,Y,j)})):Ut(G)}return I._promise(B,function(G,V){return Gn(function(){return je.trans=I,j(G,V,I)})}).then(function(G){if(B==="readwrite")try{I.idbtrans.commit()}catch{}return B==="readonly"?G:I._completion.then(function(){return G})})}if(K._state.openComplete)return Ut(new Ve.DatabaseClosed(K._state.dbOpenError));if(!K._state.isBeingOpened){if(!K._state.autoOpen)return Ut(new Ve.DatabaseClosed);K.open().catch(xt)}return K._state.dbReadyPromise.then(function(){return U(K,B,Y,j)})}(this.db,d,[this.name],_);return k&&(H._consoleTask=k,H=H.catch(function(U){return console.trace(U),Ut(U)})),H}finally{N&&Ct()}},pt.prototype.get=function(d,g){var b=this;return d&&d.constructor===Object?this.where(d).first(g):d==null?Ut(new Ve.Type("Invalid argument to Table.get()")):this._trans("readonly",function(x){return b.core.get({trans:x,key:d}).then(function(M){return b.hook.reading.fire(M)})}).then(g)},pt.prototype.where=function(d){if(typeof d=="string")return new this.db.WhereClause(this,d);if(f(d))return new this.db.WhereClause(this,"[".concat(d.join("+"),"]"));var g=u(d);if(g.length===1)return this.where(g[0]).equals(d[g[0]]);var b=this.schema.indexes.concat(this.schema.primKey).filter(function(N){if(N.compound&&g.every(function(U){return 0<=N.keyPath.indexOf(U)})){for(var H=0;H<g.length;++H)if(g.indexOf(N.keyPath[H])===-1)return!1;return!0}return!1}).sort(function(N,H){return N.keyPath.length-H.keyPath.length})[0];if(b&&this.db._maxKey!==Or){var k=b.keyPath.slice(0,g.length);return this.where(k).equals(k.map(function(H){return d[H]}))}!b&&jn&&console.warn("The query ".concat(JSON.stringify(d)," on ").concat(this.name," would benefit from a ")+"compound index [".concat(g.join("+"),"]"));var x=this.schema.idxByName;function M(N,H){return tt(N,H)===0}var _=g.reduce(function(B,H){var U=B[0],K=B[1],B=x[H],Y=d[H];return[U||B,U||!B?He(K,B&&B.multi?function(j){return j=Re(j,H),f(j)&&j.some(function(I){return M(Y,I)})}:function(j){return M(Y,Re(j,H))}):K]},[null,null]),k=_[0],_=_[1];return k?this.where(k.name).equals(d[k.keyPath]).filter(_):b?this.filter(_):this.where(g).equals("")},pt.prototype.filter=function(d){return this.toCollection().and(d)},pt.prototype.count=function(d){return this.toCollection().count(d)},pt.prototype.offset=function(d){return this.toCollection().offset(d)},pt.prototype.limit=function(d){return this.toCollection().limit(d)},pt.prototype.each=function(d){return this.toCollection().each(d)},pt.prototype.toArray=function(d){return this.toCollection().toArray(d)},pt.prototype.toCollection=function(){return new this.db.Collection(new this.db.WhereClause(this))},pt.prototype.orderBy=function(d){return new this.db.Collection(new this.db.WhereClause(this,f(d)?"[".concat(d.join("+"),"]"):d))},pt.prototype.reverse=function(){return this.toCollection().reverse()},pt.prototype.mapToClass=function(d){var g,b=this.db,x=this.name;function M(){return g!==null&&g.apply(this,arguments)||this}(this.schema.mappedClass=d).prototype instanceof Vt&&(function(H,U){if(typeof U!="function"&&U!==null)throw new TypeError("Class extends value "+String(U)+" is not a constructor or null");function K(){this.constructor=H}t(H,U),H.prototype=U===null?Object.create(U):(K.prototype=U.prototype,new K)}(M,g=d),Object.defineProperty(M.prototype,"db",{get:function(){return b},enumerable:!1,configurable:!0}),M.prototype.table=function(){return x},d=M);for(var k=new Set,_=d.prototype;_;_=m(_))Object.getOwnPropertyNames(_).forEach(function(H){return k.add(H)});function N(H){if(!H)return H;var U,K=Object.create(d.prototype);for(U in H)if(!k.has(U))try{K[U]=H[U]}catch{}return K}return this.schema.readHook&&this.hook.reading.unsubscribe(this.schema.readHook),this.schema.readHook=N,this.hook("reading",N),d},pt.prototype.defineClass=function(){return this.mapToClass(function(d){h(this,d)})},pt.prototype.add=function(d,g){var b=this,x=this.schema.primKey,M=x.auto,k=x.keyPath,_=d;return k&&M&&(_=bt(k)(d)),this._trans("readwrite",function(N){return b.core.mutate({trans:N,type:"add",keys:g!=null?[g]:null,values:[_]})}).then(function(N){return N.numFailures?we.reject(N.failures[0]):N.lastResult}).then(function(N){if(k)try{Fe(d,k,N)}catch{}return N})},pt.prototype.update=function(d,g){return typeof d!="object"||f(d)?this.where(":id").equals(d).modify(g):(d=Re(d,this.schema.primKey.keyPath),d===void 0?Ut(new Ve.InvalidArgument("Given object does not contain its primary key")):this.where(":id").equals(d).modify(g))},pt.prototype.put=function(d,g){var b=this,x=this.schema.primKey,M=x.auto,k=x.keyPath,_=d;return k&&M&&(_=bt(k)(d)),this._trans("readwrite",function(N){return b.core.mutate({trans:N,type:"put",values:[_],keys:g!=null?[g]:null})}).then(function(N){return N.numFailures?we.reject(N.failures[0]):N.lastResult}).then(function(N){if(k)try{Fe(d,k,N)}catch{}return N})},pt.prototype.delete=function(d){var g=this;return this._trans("readwrite",function(b){return g.core.mutate({trans:b,type:"delete",keys:[d]})}).then(function(b){return b.numFailures?we.reject(b.failures[0]):void 0})},pt.prototype.clear=function(){var d=this;return this._trans("readwrite",function(g){return d.core.mutate({trans:g,type:"deleteRange",range:st})}).then(function(g){return g.numFailures?we.reject(g.failures[0]):void 0})},pt.prototype.bulkGet=function(d){var g=this;return this._trans("readonly",function(b){return g.core.getMany({keys:d,trans:b}).then(function(x){return x.map(function(M){return g.hook.reading.fire(M)})})})},pt.prototype.bulkAdd=function(d,g,b){var x=this,M=Array.isArray(g)?g:void 0,k=(b=b||(M?void 0:g))?b.allKeys:void 0;return this._trans("readwrite",function(_){var U=x.schema.primKey,N=U.auto,U=U.keyPath;if(U&&M)throw new Ve.InvalidArgument("bulkAdd(): keys argument invalid on tables with inbound keys");if(M&&M.length!==d.length)throw new Ve.InvalidArgument("Arguments objects and keys must have the same length");var H=d.length,U=U&&N?d.map(bt(U)):d;return x.core.mutate({trans:_,type:"add",keys:M,values:U,wantResults:k}).then(function(I){var B=I.numFailures,Y=I.results,j=I.lastResult,I=I.failures;if(B===0)return k?Y:j;throw new Qe("".concat(x.name,".bulkAdd(): ").concat(B," of ").concat(H," operations failed"),I)})})},pt.prototype.bulkPut=function(d,g,b){var x=this,M=Array.isArray(g)?g:void 0,k=(b=b||(M?void 0:g))?b.allKeys:void 0;return this._trans("readwrite",function(_){var U=x.schema.primKey,N=U.auto,U=U.keyPath;if(U&&M)throw new Ve.InvalidArgument("bulkPut(): keys argument invalid on tables with inbound keys");if(M&&M.length!==d.length)throw new Ve.InvalidArgument("Arguments objects and keys must have the same length");var H=d.length,U=U&&N?d.map(bt(U)):d;return x.core.mutate({trans:_,type:"put",keys:M,values:U,wantResults:k}).then(function(I){var B=I.numFailures,Y=I.results,j=I.lastResult,I=I.failures;if(B===0)return k?Y:j;throw new Qe("".concat(x.name,".bulkPut(): ").concat(B," of ").concat(H," operations failed"),I)})})},pt.prototype.bulkUpdate=function(d){var g=this,b=this.core,x=d.map(function(_){return _.key}),M=d.map(function(_){return _.changes}),k=[];return this._trans("readwrite",function(_){return b.getMany({trans:_,keys:x,cache:"clone"}).then(function(N){var H=[],U=[];d.forEach(function(B,Y){var j=B.key,I=B.changes,G=N[Y];if(G){for(var V=0,F=Object.keys(I);V<F.length;V++){var Z=F[V],ee=I[Z];if(Z===g.schema.primKey.keyPath){if(tt(ee,j)!==0)throw new Ve.Constraint("Cannot update primary key in bulkUpdate()")}else Fe(G,Z,ee)}k.push(Y),H.push(j),U.push(G)}});var K=H.length;return b.mutate({trans:_,type:"put",keys:H,values:U,updates:{keys:x,changeSpecs:M}}).then(function(B){var Y=B.numFailures,j=B.failures;if(Y===0)return K;for(var I=0,G=Object.keys(j);I<G.length;I++){var V,F=G[I],Z=k[Number(F)];Z!=null&&(V=j[F],delete j[F],j[Z]=V)}throw new Qe("".concat(g.name,".bulkUpdate(): ").concat(Y," of ").concat(K," operations failed"),j)})})})},pt.prototype.bulkDelete=function(d){var g=this,b=d.length;return this._trans("readwrite",function(x){return g.core.mutate({trans:x,type:"delete",keys:d})}).then(function(_){var M=_.numFailures,k=_.lastResult,_=_.failures;if(M===0)return k;throw new Qe("".concat(g.name,".bulkDelete(): ").concat(M," of ").concat(b," operations failed"),_)})},pt);function pt(){}function Cr(d){function g(_,N){if(N){for(var H=arguments.length,U=new Array(H-1);--H;)U[H-1]=arguments[H];return b[_].subscribe.apply(null,U),d}if(typeof _=="string")return b[_]}var b={};g.addEventType=k;for(var x=1,M=arguments.length;x<M;++x)k(arguments[x]);return g;function k(_,N,H){if(typeof _!="object"){var U;N=N||Jo;var K={subscribers:[],fire:H=H||xt,subscribe:function(B){K.subscribers.indexOf(B)===-1&&(K.subscribers.push(B),K.fire=N(K.fire,B))},unsubscribe:function(B){K.subscribers=K.subscribers.filter(function(Y){return Y!==B}),K.fire=K.subscribers.reduce(N,H)}};return b[_]=g[_]=K}u(U=_).forEach(function(B){var Y=U[B];if(f(Y))k(B,U[B][0],U[B][1]);else{if(Y!=="asap")throw new Ve.InvalidArgument("Invalid event config");var j=k(B,ai,function(){for(var I=arguments.length,G=new Array(I);I--;)G[I]=arguments[I];j.subscribers.forEach(function(V){ve(function(){V.apply(null,G)})})})}})}}function yi(d,g){return A(g).from({prototype:d}),g}function vr(d,g){return!(d.filter||d.algorithm||d.or)&&(g?d.justLimit:!d.replayFilter)}function ho(d,g){d.filter=He(d.filter,g)}function wn(d,g,b){var x=d.replayFilter;d.replayFilter=x?function(){return He(x(),g())}:g,d.justLimit=b&&!x}function Ci(d,g){if(d.isPrimKey)return g.primaryKey;var b=g.getIndexByKeyPath(d.index);if(!b)throw new Ve.Schema("KeyPath "+d.index+" on object store "+g.name+" is not indexed");return b}function po(d,g,b){var x=Ci(d,g.schema);return g.openCursor({trans:b,values:!d.keysOnly,reverse:d.dir==="prev",unique:!!d.unique,query:{index:x,range:d.range}})}function Ar(d,g,b,x){var M=d.replayFilter?He(d.filter,d.replayFilter()):d.filter;if(d.or){var k={},_=function(N,H,U){var K,B;M&&!M(H,U,function(Y){return H.stop(Y)},function(Y){return H.fail(Y)})||((B=""+(K=H.primaryKey))=="[object ArrayBuffer]"&&(B=""+new Uint8Array(K)),S(k,B)||(k[B]=!0,g(N,H,U)))};return Promise.all([d.or._iterate(_,b),Yr(po(d,x,b),d.algorithm,_,!d.keysOnly&&d.valueMapper)])}return Yr(po(d,x,b),He(d.algorithm,M),g,!d.keysOnly&&d.valueMapper)}function Yr(d,g,b,x){var M=ye(x?function(k,_,N){return b(x(k),_,N)}:b);return d.then(function(k){if(k)return k.start(function(){var _=function(){return k.continue()};g&&!g(k,function(N){return _=N},function(N){k.stop(N),_=xt},function(N){k.fail(N),_=xt})||M(k.value,k,function(N){return _=N}),_()})})}var bn=(mo.prototype.execute=function(d){var g=this["@@propmod"];if(g.add!==void 0){var b=g.add;if(f(b))return o(o([],f(d)?d:[],!0),b).sort();if(typeof b=="number")return(Number(d)||0)+b;if(typeof b=="bigint")try{return BigInt(d)+b}catch{return BigInt(0)+b}throw new TypeError("Invalid term ".concat(b))}if(g.remove!==void 0){var x=g.remove;if(f(x))return f(d)?d.filter(function(M){return!x.includes(M)}).sort():[];if(typeof x=="number")return Number(d)-x;if(typeof x=="bigint")try{return BigInt(d)-x}catch{return BigInt(0)-x}throw new TypeError("Invalid subtrahend ".concat(x))}return b=(b=g.replacePrefix)===null||b===void 0?void 0:b[0],b&&typeof d=="string"&&d.startsWith(b)?g.replacePrefix[1]+d.substring(b.length):d},mo);function mo(d){this["@@propmod"]=d}var Gr=(Oe.prototype._read=function(d,g){var b=this._ctx;return b.error?b.table._trans(null,Ut.bind(null,b.error)):b.table._trans("readonly",d).then(g)},Oe.prototype._write=function(d){var g=this._ctx;return g.error?g.table._trans(null,Ut.bind(null,g.error)):g.table._trans("readwrite",d,"locked")},Oe.prototype._addAlgorithm=function(d){var g=this._ctx;g.algorithm=He(g.algorithm,d)},Oe.prototype._iterate=function(d,g){return Ar(this._ctx,d,g,this._ctx.table.core)},Oe.prototype.clone=function(d){var g=Object.create(this.constructor.prototype),b=Object.create(this._ctx);return d&&h(b,d),g._ctx=b,g},Oe.prototype.raw=function(){return this._ctx.valueMapper=null,this},Oe.prototype.each=function(d){var g=this._ctx;return this._read(function(b){return Ar(g,d,b,g.table.core)})},Oe.prototype.count=function(d){var g=this;return this._read(function(b){var x=g._ctx,M=x.table.core;if(vr(x,!0))return M.count({trans:b,query:{index:Ci(x,M.schema),range:x.range}}).then(function(_){return Math.min(_,x.limit)});var k=0;return Ar(x,function(){return++k,!1},b,M).then(function(){return k})}).then(d)},Oe.prototype.sortBy=function(d,g){var b=d.split(".").reverse(),x=b[0],M=b.length-1;function k(H,U){return U?k(H[b[U]],U-1):H[x]}var _=this._ctx.dir==="next"?1:-1;function N(H,U){return tt(k(H,M),k(U,M))*_}return this.toArray(function(H){return H.sort(N)}).then(g)},Oe.prototype.toArray=function(d){var g=this;return this._read(function(b){var x=g._ctx;if(x.dir==="next"&&vr(x,!0)&&0<x.limit){var M=x.valueMapper,k=Ci(x,x.table.core.schema);return x.table.core.query({trans:b,limit:x.limit,values:!0,query:{index:k,range:x.range}}).then(function(N){return N=N.result,M?N.map(M):N})}var _=[];return Ar(x,function(N){return _.push(N)},b,x.table.core).then(function(){return _})},d)},Oe.prototype.offset=function(d){var g=this._ctx;return d<=0||(g.offset+=d,vr(g)?wn(g,function(){var b=d;return function(x,M){return b===0||(b===1?--b:M(function(){x.advance(b),b=0}),!1)}}):wn(g,function(){var b=d;return function(){return--b<0}})),this},Oe.prototype.limit=function(d){return this._ctx.limit=Math.min(this._ctx.limit,d),wn(this._ctx,function(){var g=d;return function(b,x,M){return--g<=0&&x(M),0<=g}},!0),this},Oe.prototype.until=function(d,g){return ho(this._ctx,function(b,x,M){return!d(b.value)||(x(M),g)}),this},Oe.prototype.first=function(d){return this.limit(1).toArray(function(g){return g[0]}).then(d)},Oe.prototype.last=function(d){return this.reverse().first(d)},Oe.prototype.filter=function(d){var g;return ho(this._ctx,function(b){return d(b.value)}),(g=this._ctx).isMatch=He(g.isMatch,d),this},Oe.prototype.and=function(d){return this.filter(d)},Oe.prototype.or=function(d){return new this.db.WhereClause(this._ctx.table,d,this)},Oe.prototype.reverse=function(){return this._ctx.dir=this._ctx.dir==="prev"?"next":"prev",this._ondirectionchange&&this._ondirectionchange(this._ctx.dir),this},Oe.prototype.desc=function(){return this.reverse()},Oe.prototype.eachKey=function(d){var g=this._ctx;return g.keysOnly=!g.isMatch,this.each(function(b,x){d(x.key,x)})},Oe.prototype.eachUniqueKey=function(d){return this._ctx.unique="unique",this.eachKey(d)},Oe.prototype.eachPrimaryKey=function(d){var g=this._ctx;return g.keysOnly=!g.isMatch,this.each(function(b,x){d(x.primaryKey,x)})},Oe.prototype.keys=function(d){var g=this._ctx;g.keysOnly=!g.isMatch;var b=[];return this.each(function(x,M){b.push(M.key)}).then(function(){return b}).then(d)},Oe.prototype.primaryKeys=function(d){var g=this._ctx;if(g.dir==="next"&&vr(g,!0)&&0<g.limit)return this._read(function(x){var M=Ci(g,g.table.core.schema);return g.table.core.query({trans:x,values:!1,limit:g.limit,query:{index:M,range:g.range}})}).then(function(x){return x.result}).then(d);g.keysOnly=!g.isMatch;var b=[];return this.each(function(x,M){b.push(M.primaryKey)}).then(function(){return b}).then(d)},Oe.prototype.uniqueKeys=function(d){return this._ctx.unique="unique",this.keys(d)},Oe.prototype.firstKey=function(d){return this.limit(1).keys(function(g){return g[0]}).then(d)},Oe.prototype.lastKey=function(d){return this.reverse().firstKey(d)},Oe.prototype.distinct=function(){var d=this._ctx,d=d.index&&d.table.schema.idxByName[d.index];if(!d||!d.multi)return this;var g={};return ho(this._ctx,function(M){var x=M.primaryKey.toString(),M=S(g,x);return g[x]=!0,!M}),this},Oe.prototype.modify=function(d){var g=this,b=this._ctx;return this._write(function(x){var M,k,_;_=typeof d=="function"?d:(M=u(d),k=M.length,function(V){for(var F=!1,Z=0;Z<k;++Z){var ee=M[Z],ne=d[ee],he=Re(V,ee);ne instanceof bn?(Fe(V,ee,ne.execute(he)),F=!0):he!==ne&&(Fe(V,ee,ne),F=!0)}return F});var N=b.table.core,B=N.schema.primaryKey,H=B.outbound,U=B.extractKey,K=200,B=g.db._options.modifyChunkSize;B&&(K=typeof B=="object"?B[N.name]||B["*"]||200:B);function Y(V,ee){var Z=ee.failures,ee=ee.numFailures;I+=V-ee;for(var ne=0,he=u(Z);ne<he.length;ne++){var be=he[ne];j.push(Z[be])}}var j=[],I=0,G=[];return g.clone().primaryKeys().then(function(V){function F(ee){var ne=Math.min(K,V.length-ee);return N.getMany({trans:x,keys:V.slice(ee,ee+ne),cache:"immutable"}).then(function(he){for(var be=[],fe=[],pe=H?[]:null,Ee=[],de=0;de<ne;++de){var Be=he[de],$e={value:Ln(Be),primKey:V[ee+de]};_.call($e,$e.value,$e)!==!1&&($e.value==null?Ee.push(V[ee+de]):H||tt(U(Be),U($e.value))===0?(fe.push($e.value),H&&pe.push(V[ee+de])):(Ee.push(V[ee+de]),be.push($e.value)))}return Promise.resolve(0<be.length&&N.mutate({trans:x,type:"add",values:be}).then(function(Je){for(var ot in Je.failures)Ee.splice(parseInt(ot),1);Y(be.length,Je)})).then(function(){return(0<fe.length||Z&&typeof d=="object")&&N.mutate({trans:x,type:"put",keys:pe,values:fe,criteria:Z,changeSpec:typeof d!="function"&&d,isAdditionalChunk:0<ee}).then(function(Je){return Y(fe.length,Je)})}).then(function(){return(0<Ee.length||Z&&d===Gi)&&N.mutate({trans:x,type:"delete",keys:Ee,criteria:Z,isAdditionalChunk:0<ee}).then(function(Je){return Y(Ee.length,Je)})}).then(function(){return V.length>ee+ne&&F(ee+K)})})}var Z=vr(b)&&b.limit===1/0&&(typeof d!="function"||d===Gi)&&{index:b.index,range:b.range};return F(0).then(function(){if(0<j.length)throw new ft("Error modifying one or more objects",j,I,G);return V.length})})})},Oe.prototype.delete=function(){var d=this._ctx,g=d.range;return vr(d)&&(d.isPrimKey||g.type===3)?this._write(function(b){var x=d.table.core.schema.primaryKey,M=g;return d.table.core.count({trans:b,query:{index:x,range:M}}).then(function(k){return d.table.core.mutate({trans:b,type:"deleteRange",range:M}).then(function(_){var N=_.failures;if(_.lastResult,_.results,_=_.numFailures,_)throw new ft("Could not delete some values",Object.keys(N).map(function(H){return N[H]}),k-_);return k-_})})}):this.modify(Gi)},Oe);function Oe(){}var Gi=function(d,g){return g.value=null};function Ft(d,g){return d<g?-1:d===g?0:1}function wt(d,g){return g<d?-1:d===g?0:1}function an(d,g,b){return d=d instanceof ze?new d.Collection(d):d,d._ctx.error=new(b||TypeError)(g),d}function $n(d){return new d.Collection(d,function(){return Me("")}).limit(0)}function _r(d,g,b,x){var M,k,_,N,H,U,K,B=b.length;if(!b.every(function(I){return typeof I=="string"}))return an(d,Wo);function Y(I){M=I==="next"?function(V){return V.toUpperCase()}:function(V){return V.toLowerCase()},k=I==="next"?function(V){return V.toLowerCase()}:function(V){return V.toUpperCase()},_=I==="next"?Ft:wt;var G=b.map(function(V){return{lower:k(V),upper:M(V)}}).sort(function(V,F){return _(V.lower,F.lower)});N=G.map(function(V){return V.upper}),H=G.map(function(V){return V.lower}),K=(U=I)==="next"?"":x}Y("next"),d=new d.Collection(d,function(){return Xn(N[0],H[B-1]+x)}),d._ondirectionchange=function(I){Y(I)};var j=0;return d._addAlgorithm(function(I,G,V){var F=I.key;if(typeof F!="string")return!1;var Z=k(F);if(g(Z,H,j))return!0;for(var ee=null,ne=j;ne<B;++ne){var he=function(be,fe,pe,Ee,de,Be){for(var $e=Math.min(be.length,Ee.length),Je=-1,ot=0;ot<$e;++ot){var qn=fe[ot];if(qn!==Ee[ot])return de(be[ot],pe[ot])<0?be.substr(0,ot)+pe[ot]+pe.substr(ot+1):de(be[ot],Ee[ot])<0?be.substr(0,ot)+Ee[ot]+pe.substr(ot+1):0<=Je?be.substr(0,Je)+fe[Je]+pe.substr(Je+1):null;de(be[ot],qn)<0&&(Je=ot)}return $e<Ee.length&&Be==="next"?be+pe.substr(be.length):$e<be.length&&Be==="prev"?be.substr(0,pe.length):Je<0?null:be.substr(0,Je)+Ee[Je]+pe.substr(Je+1)}(F,Z,N[ne],H[ne],_,U);he===null&&ee===null?j=ne+1:(ee===null||0<_(ee,he))&&(ee=he)}return G(ee!==null?function(){I.continue(ee+K)}:V),!1}),d}function Xn(d,g,b,x){return{type:2,lower:d,upper:g,lowerOpen:b,upperOpen:x}}function Me(d){return{type:1,lower:d,upper:d}}var ze=(Object.defineProperty(qe.prototype,"Collection",{get:function(){return this._ctx.table.db.Collection},enumerable:!1,configurable:!0}),qe.prototype.between=function(d,g,b,x){b=b!==!1,x=x===!0;try{return 0<this._cmp(d,g)||this._cmp(d,g)===0&&(b||x)&&(!b||!x)?$n(this):new this.Collection(this,function(){return Xn(d,g,!b,!x)})}catch{return an(this,mr)}},qe.prototype.equals=function(d){return d==null?an(this,mr):new this.Collection(this,function(){return Me(d)})},qe.prototype.above=function(d){return d==null?an(this,mr):new this.Collection(this,function(){return Xn(d,void 0,!0)})},qe.prototype.aboveOrEqual=function(d){return d==null?an(this,mr):new this.Collection(this,function(){return Xn(d,void 0,!1)})},qe.prototype.below=function(d){return d==null?an(this,mr):new this.Collection(this,function(){return Xn(void 0,d,!1,!0)})},qe.prototype.belowOrEqual=function(d){return d==null?an(this,mr):new this.Collection(this,function(){return Xn(void 0,d)})},qe.prototype.startsWith=function(d){return typeof d!="string"?an(this,Wo):this.between(d,d+Or,!0,!0)},qe.prototype.startsWithIgnoreCase=function(d){return d===""?this.startsWith(d):_r(this,function(g,b){return g.indexOf(b[0])===0},[d],Or)},qe.prototype.equalsIgnoreCase=function(d){return _r(this,function(g,b){return g===b[0]},[d],"")},qe.prototype.anyOfIgnoreCase=function(){var d=L.apply(vt,arguments);return d.length===0?$n(this):_r(this,function(g,b){return b.indexOf(g)!==-1},d,"")},qe.prototype.startsWithAnyOfIgnoreCase=function(){var d=L.apply(vt,arguments);return d.length===0?$n(this):_r(this,function(g,b){return b.some(function(x){return g.indexOf(x)===0})},d,Or)},qe.prototype.anyOf=function(){var d=this,g=L.apply(vt,arguments),b=this._cmp;try{g.sort(b)}catch{return an(this,mr)}if(g.length===0)return $n(this);var x=new this.Collection(this,function(){return Xn(g[0],g[g.length-1])});x._ondirectionchange=function(k){b=k==="next"?d._ascending:d._descending,g.sort(b)};var M=0;return x._addAlgorithm(function(k,_,N){for(var H=k.key;0<b(H,g[M]);)if(++M===g.length)return _(N),!1;return b(H,g[M])===0||(_(function(){k.continue(g[M])}),!1)}),x},qe.prototype.notEqual=function(d){return this.inAnyRange([[-1/0,d],[d,this.db._maxKey]],{includeLowers:!1,includeUppers:!1})},qe.prototype.noneOf=function(){var d=L.apply(vt,arguments);if(d.length===0)return new this.Collection(this);try{d.sort(this._ascending)}catch{return an(this,mr)}var g=d.reduce(function(b,x){return b?b.concat([[b[b.length-1][1],x]]):[[-1/0,x]]},null);return g.push([d[d.length-1],this.db._maxKey]),this.inAnyRange(g,{includeLowers:!1,includeUppers:!1})},qe.prototype.inAnyRange=function(F,g){var b=this,x=this._cmp,M=this._ascending,k=this._descending,_=this._min,N=this._max;if(F.length===0)return $n(this);if(!F.every(function(Z){return Z[0]!==void 0&&Z[1]!==void 0&&M(Z[0],Z[1])<=0}))return an(this,"First argument to inAnyRange() must be an Array of two-value Arrays [lower,upper] where upper must not be lower than lower",Ve.InvalidArgument);var H=!g||g.includeLowers!==!1,U=g&&g.includeUppers===!0,K,B=M;function Y(Z,ee){return B(Z[0],ee[0])}try{(K=F.reduce(function(Z,ee){for(var ne=0,he=Z.length;ne<he;++ne){var be=Z[ne];if(x(ee[0],be[1])<0&&0<x(ee[1],be[0])){be[0]=_(be[0],ee[0]),be[1]=N(be[1],ee[1]);break}}return ne===he&&Z.push(ee),Z},[])).sort(Y)}catch{return an(this,mr)}var j=0,I=U?function(Z){return 0<M(Z,K[j][1])}:function(Z){return 0<=M(Z,K[j][1])},G=H?function(Z){return 0<k(Z,K[j][0])}:function(Z){return 0<=k(Z,K[j][0])},V=I,F=new this.Collection(this,function(){return Xn(K[0][0],K[K.length-1][1],!H,!U)});return F._ondirectionchange=function(Z){B=Z==="next"?(V=I,M):(V=G,k),K.sort(Y)},F._addAlgorithm(function(Z,ee,ne){for(var he,be=Z.key;V(be);)if(++j===K.length)return ee(ne),!1;return!I(he=be)&&!G(he)||(b._cmp(be,K[j][1])===0||b._cmp(be,K[j][0])===0||ee(function(){B===M?Z.continue(K[j][0]):Z.continue(K[j][1])}),!1)}),F},qe.prototype.startsWithAnyOf=function(){var d=L.apply(vt,arguments);return d.every(function(g){return typeof g=="string"})?d.length===0?$n(this):this.inAnyRange(d.map(function(g){return[g,g+Or]})):an(this,"startsWithAnyOf() only works with strings")},qe);function qe(){}function at(d){return ye(function(g){return It(g),d(g.target.error),!1})}function It(d){d.stopPropagation&&d.stopPropagation(),d.preventDefault&&d.preventDefault()}var Tn="storagemutated",vi="x-storagemutated-1",un=Cr(null,Tn),la=(Fn.prototype._lock=function(){return Le(!je.global),++this._reculock,this._reculock!==1||je.global||(je.lockOwnerFor=this),this},Fn.prototype._unlock=function(){if(Le(!je.global),--this._reculock==0)for(je.global||(je.lockOwnerFor=null);0<this._blockedFuncs.length&&!this._locked();){var d=this._blockedFuncs.shift();try{Kr(d[1],d[0])}catch{}}return this},Fn.prototype._locked=function(){return this._reculock&&je.lockOwnerFor!==this},Fn.prototype.create=function(d){var g=this;if(!this.mode)return this;var b=this.db.idbdb,x=this.db._state.dbOpenError;if(Le(!this.idbtrans),!d&&!b)switch(x&&x.name){case"DatabaseClosedError":throw new Ve.DatabaseClosed(x);case"MissingAPIError":throw new Ve.MissingAPI(x.message,x);default:throw new Ve.OpenFailed(x)}if(!this.active)throw new Ve.TransactionInactive;return Le(this._completion._state===null),(d=this.idbtrans=d||(this.db.core||b).transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability})).onerror=ye(function(M){It(M),g._reject(d.error)}),d.onabort=ye(function(M){It(M),g.active&&g._reject(new Ve.Abort(d.error)),g.active=!1,g.on("abort").fire(M)}),d.oncomplete=ye(function(){g.active=!1,g._resolve(),"mutatedParts"in d&&un.storagemutated.fire(d.mutatedParts)}),this},Fn.prototype._promise=function(d,g,b){var x=this;if(d==="readwrite"&&this.mode!=="readwrite")return Ut(new Ve.ReadOnly("Transaction is readonly"));if(!this.active)return Ut(new Ve.TransactionInactive);if(this._locked())return new we(function(k,_){x._blockedFuncs.push([function(){x._promise(d,g,b).then(k,_)},je])});if(b)return Gn(function(){var k=new we(function(_,N){x._lock();var H=g(_,N,x);H&&H.then&&H.then(_,N)});return k.finally(function(){return x._unlock()}),k._lib=!0,k});var M=new we(function(k,_){var N=g(k,_,x);N&&N.then&&N.then(k,_)});return M._lib=!0,M},Fn.prototype._root=function(){return this.parent?this.parent._root():this},Fn.prototype.waitFor=function(d){var g,b=this._root(),x=we.resolve(d);b._waitingFor?b._waitingFor=b._waitingFor.then(function(){return x}):(b._waitingFor=x,b._waitingQueue=[],g=b.idbtrans.objectStore(b.storeNames[0]),function k(){for(++b._spinCount;b._waitingQueue.length;)b._waitingQueue.shift()();b._waitingFor&&(g.get(-1/0).onsuccess=k)}());var M=b._waitingFor;return new we(function(k,_){x.then(function(N){return b._waitingQueue.push(ye(k.bind(null,N)))},function(N){return b._waitingQueue.push(ye(_.bind(null,N)))}).finally(function(){b._waitingFor===M&&(b._waitingFor=null)})})},Fn.prototype.abort=function(){this.active&&(this.active=!1,this.idbtrans&&this.idbtrans.abort(),this._reject(new Ve.Abort))},Fn.prototype.table=function(d){var g=this._memoizedTables||(this._memoizedTables={});if(S(g,d))return g[d];var b=this.schema[d];if(!b)throw new Ve.NotFound("Table "+d+" not part of transaction");return b=new this.db.Table(d,b,this),b.core=this.db.core.table(d),g[d]=b},Fn);function Fn(){}function $r(d,g,b,x,M,k,_){return{name:d,keyPath:g,unique:b,multi:x,auto:M,compound:k,src:(b&&!_?"&":"")+(x?"*":"")+(M?"++":"")+el(g)}}function el(d){return typeof d=="string"?d:d?"["+[].join.call(d,"+")+"]":""}function bs(d,g,b){return{name:d,primKey:g,indexes:b,mappedClass:null,idxByName:(x=function(M){return[M.name,M]},b.reduce(function(M,k,_){return _=x(k,_),_&&(M[_[0]]=_[1]),M},{}))};var x}var Ss=function(d){try{return d.only([[]]),Ss=function(){return[[]]},[[]]}catch{return Ss=function(){return Or},Or}};function xs(d){return d==null?function(){}:typeof d=="string"?(g=d).split(".").length===1?function(b){return b[g]}:function(b){return Re(b,g)}:function(b){return Re(b,d)};var g}function go(d){return[].slice.call(d)}var ku=0;function cn(d){return d==null?":id":typeof d=="string"?d:"[".concat(d.join("+"),"]")}function $i(d,g,H){function x(V){if(V.type===3)return null;if(V.type===4)throw new Error("Cannot convert never type to IDBKeyRange");var j=V.lower,I=V.upper,G=V.lowerOpen,V=V.upperOpen;return j===void 0?I===void 0?null:g.upperBound(I,!!V):I===void 0?g.lowerBound(j,!!G):g.bound(j,I,!!G,!!V)}function M(Y){var j,I=Y.name;return{name:I,schema:Y,mutate:function(G){var V=G.trans,F=G.type,Z=G.keys,ee=G.values,ne=G.range;return new Promise(function(he,be){he=ye(he);var fe=V.objectStore(I),pe=fe.keyPath==null,Ee=F==="put"||F==="add";if(!Ee&&F!=="delete"&&F!=="deleteRange")throw new Error("Invalid operation type: "+F);var de,Be=(Z||ee||{length:1}).length;if(Z&&ee&&Z.length!==ee.length)throw new Error("Given keys array must have same length as given values array.");if(Be===0)return he({numFailures:0,failures:{},results:[],lastResult:void 0});function $e(kn){++qn,It(kn)}var Je=[],ot=[],qn=0;if(F==="deleteRange"){if(ne.type===4)return he({numFailures:qn,failures:ot,results:[],lastResult:void 0});ne.type===3?Je.push(de=fe.clear()):Je.push(de=fe.delete(x(ne)))}else{var pe=Ee?pe?[ee,Z]:[ee,null]:[Z,null],nt=pe[0],en=pe[1];if(Ee)for(var fn=0;fn<Be;++fn)Je.push(de=en&&en[fn]!==void 0?fe[F](nt[fn],en[fn]):fe[F](nt[fn])),de.onerror=$e;else for(fn=0;fn<Be;++fn)Je.push(de=fe[F](nt[fn])),de.onerror=$e}function bi(kn){kn=kn.target.result,Je.forEach(function(Fr,Di){return Fr.error!=null&&(ot[Di]=Fr.error)}),he({numFailures:qn,failures:ot,results:F==="delete"?Z:Je.map(function(Fr){return Fr.result}),lastResult:kn})}de.onerror=function(kn){$e(kn),bi(kn)},de.onsuccess=bi})},getMany:function(G){var V=G.trans,F=G.keys;return new Promise(function(Z,ee){Z=ye(Z);for(var ne,he=V.objectStore(I),be=F.length,fe=new Array(be),pe=0,Ee=0,de=function(Je){Je=Je.target,fe[Je._pos]=Je.result,++Ee===pe&&Z(fe)},Be=at(ee),$e=0;$e<be;++$e)F[$e]!=null&&((ne=he.get(F[$e]))._pos=$e,ne.onsuccess=de,ne.onerror=Be,++pe);pe===0&&Z(fe)})},get:function(G){var V=G.trans,F=G.key;return new Promise(function(Z,ee){Z=ye(Z);var ne=V.objectStore(I).get(F);ne.onsuccess=function(he){return Z(he.target.result)},ne.onerror=at(ee)})},query:(j=U,function(G){return new Promise(function(V,F){V=ye(V);var Z,ee,ne,pe=G.trans,he=G.values,be=G.limit,de=G.query,fe=be===1/0?void 0:be,Ee=de.index,de=de.range,pe=pe.objectStore(I),Ee=Ee.isPrimaryKey?pe:pe.index(Ee.name),de=x(de);if(be===0)return V({result:[]});j?((fe=he?Ee.getAll(de,fe):Ee.getAllKeys(de,fe)).onsuccess=function(Be){return V({result:Be.target.result})},fe.onerror=at(F)):(Z=0,ee=!he&&"openKeyCursor"in Ee?Ee.openKeyCursor(de):Ee.openCursor(de),ne=[],ee.onsuccess=function(Be){var $e=ee.result;return $e?(ne.push(he?$e.value:$e.primaryKey),++Z===be?V({result:ne}):void $e.continue()):V({result:ne})},ee.onerror=at(F))})}),openCursor:function(G){var V=G.trans,F=G.values,Z=G.query,ee=G.reverse,ne=G.unique;return new Promise(function(he,be){he=ye(he);var Ee=Z.index,fe=Z.range,pe=V.objectStore(I),pe=Ee.isPrimaryKey?pe:pe.index(Ee.name),Ee=ee?ne?"prevunique":"prev":ne?"nextunique":"next",de=!F&&"openKeyCursor"in pe?pe.openKeyCursor(x(fe),Ee):pe.openCursor(x(fe),Ee);de.onerror=at(be),de.onsuccess=ye(function(Be){var $e,Je,ot,qn,nt=de.result;nt?(nt.___id=++ku,nt.done=!1,$e=nt.continue.bind(nt),Je=(Je=nt.continuePrimaryKey)&&Je.bind(nt),ot=nt.advance.bind(nt),qn=function(){throw new Error("Cursor not stopped")},nt.trans=V,nt.stop=nt.continue=nt.continuePrimaryKey=nt.advance=function(){throw new Error("Cursor not started")},nt.fail=ye(be),nt.next=function(){var en=this,fn=1;return this.start(function(){return fn--?en.continue():en.stop()}).then(function(){return en})},nt.start=function(en){function fn(){if(de.result)try{en()}catch(kn){nt.fail(kn)}else nt.done=!0,nt.start=function(){throw new Error("Cursor behind last entry")},nt.stop()}var bi=new Promise(function(kn,Fr){kn=ye(kn),de.onerror=at(Fr),nt.fail=Fr,nt.stop=function(Di){nt.stop=nt.continue=nt.continuePrimaryKey=nt.advance=qn,kn(Di)}});return de.onsuccess=ye(function(kn){de.onsuccess=fn,fn()}),nt.continue=$e,nt.continuePrimaryKey=Je,nt.advance=ot,fn(),bi},he(nt)):he(null)},be)})},count:function(G){var V=G.query,F=G.trans,Z=V.index,ee=V.range;return new Promise(function(ne,he){var be=F.objectStore(I),fe=Z.isPrimaryKey?be:be.index(Z.name),be=x(ee),fe=be?fe.count(be):fe.count();fe.onsuccess=ye(function(pe){return ne(pe.target.result)}),fe.onerror=at(he)})}}}var k,_,N,K=(_=H,N=go((k=d).objectStoreNames),{schema:{name:k.name,tables:N.map(function(Y){return _.objectStore(Y)}).map(function(Y){var j=Y.keyPath,V=Y.autoIncrement,I=f(j),G={},V={name:Y.name,primaryKey:{name:null,isPrimaryKey:!0,outbound:j==null,compound:I,keyPath:j,autoIncrement:V,unique:!0,extractKey:xs(j)},indexes:go(Y.indexNames).map(function(F){return Y.index(F)}).map(function(ne){var Z=ne.name,ee=ne.unique,he=ne.multiEntry,ne=ne.keyPath,he={name:Z,compound:f(ne),keyPath:ne,unique:ee,multiEntry:he,extractKey:xs(ne)};return G[cn(ne)]=he}),getIndexByKeyPath:function(F){return G[cn(F)]}};return G[":id"]=V.primaryKey,j!=null&&(G[cn(j)]=V.primaryKey),V})},hasGetAll:0<N.length&&"getAll"in _.objectStore(N[0])&&!(typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604)}),H=K.schema,U=K.hasGetAll,K=H.tables.map(M),B={};return K.forEach(function(Y){return B[Y.name]=Y}),{stack:"dbcore",transaction:d.transaction.bind(d),table:function(Y){if(!B[Y])throw new Error("Table '".concat(Y,"' not found"));return B[Y]},MIN_KEY:-1/0,MAX_KEY:Ss(g),schema:H}}function tl(d,g,b,x){var M=b.IDBKeyRange;return b.indexedDB,{dbcore:(x=$i(g,M,x),d.dbcore.reduce(function(k,_){return _=_.create,i(i({},k),_(k))},x))}}function Ai(d,x){var b=x.db,x=tl(d._middlewares,b,d._deps,x);d.core=x.dbcore,d.tables.forEach(function(M){var k=M.name;d.core.schema.tables.some(function(_){return _.name===k})&&(M.core=d.core.table(k),d[k]instanceof d.Table&&(d[k].core=M.core))})}function nl(d,g,b,x){b.forEach(function(M){var k=x[M];g.forEach(function(_){var N=function H(U,K){return R(U,K)||(U=m(U))&&H(U,K)}(_,M);(!N||"value"in N&&N.value===void 0)&&(_===d.Transaction.prototype||_ instanceof d.Transaction?T(_,M,{get:function(){return this.table(M)},set:function(H){O(this,M,{value:H,writable:!0,configurable:!0,enumerable:!0})}}):_[M]=new d.Table(M,k))})})}function yo(d,g){g.forEach(function(b){for(var x in b)b[x]instanceof d.Table&&delete b[x]})}function aa(d,g){return d._cfg.version-g._cfg.version}function vo(d,g,b,x){var M=d._dbSchema;b.objectStoreNames.contains("$meta")&&!M.$meta&&(M.$meta=bs("$meta",Au("")[0],[]),d._storeNames.push("$meta"));var k=d._createTransaction("readwrite",d._storeNames,M);k.create(b),k._completion.catch(x);var _=k._reject.bind(k),N=je.transless||je;Gn(function(){return je.trans=k,je.transless=N,g!==0?(Ai(d,b),U=g,((H=k).storeNames.includes("$meta")?H.table("$meta").get("version").then(function(K){return K??U}):we.resolve(U)).then(function(K){return Y=K,j=k,I=b,G=[],K=(B=d)._versions,V=B._dbSchema=Es(0,B.idbdb,I),(K=K.filter(function(F){return F._cfg.version>=Y})).length!==0?(K.forEach(function(F){G.push(function(){var Z=V,ee=F._cfg.dbschema;ol(B,Z,I),ol(B,ee,I),V=B._dbSchema=ee;var ne=il(Z,ee);ne.add.forEach(function(Ee){ua(I,Ee[0],Ee[1].primKey,Ee[1].indexes)}),ne.change.forEach(function(Ee){if(Ee.recreate)throw new Ve.Upgrade("Not yet support for changing primary key");var de=I.objectStore(Ee.name);Ee.add.forEach(function(Be){return sl(de,Be)}),Ee.change.forEach(function(Be){de.deleteIndex(Be.name),sl(de,Be)}),Ee.del.forEach(function(Be){return de.deleteIndex(Be)})});var he=F._cfg.contentUpgrade;if(he&&F._cfg.version>Y){Ai(B,I),j._memoizedTables={};var be=me(ee);ne.del.forEach(function(Ee){be[Ee]=Z[Ee]}),yo(B,[B.Transaction.prototype]),nl(B,[B.Transaction.prototype],u(be),be),j.schema=be;var fe,pe=le(he);return pe&&or(),ne=we.follow(function(){var Ee;(fe=he(j))&&pe&&(Ee=Hn.bind(null,null),fe.then(Ee,Ee))}),fe&&typeof fe.then=="function"?we.resolve(fe):ne.then(function(){return fe})}}),G.push(function(Z){var ee,ne,he=F._cfg.dbschema;ee=he,ne=Z,[].slice.call(ne.db.objectStoreNames).forEach(function(be){return ee[be]==null&&ne.db.deleteObjectStore(be)}),yo(B,[B.Transaction.prototype]),nl(B,[B.Transaction.prototype],B._storeNames,B._dbSchema),j.schema=B._dbSchema}),G.push(function(Z){B.idbdb.objectStoreNames.contains("$meta")&&(Math.ceil(B.idbdb.version/10)===F._cfg.version?(B.idbdb.deleteObjectStore("$meta"),delete B._dbSchema.$meta,B._storeNames=B._storeNames.filter(function(ee){return ee!=="$meta"})):Z.objectStore("$meta").put(F._cfg.version,"version"))})}),function F(){return G.length?we.resolve(G.shift()(j.idbtrans)).then(F):we.resolve()}().then(function(){Cu(V,I)})):we.resolve();var B,Y,j,I,G,V}).catch(_)):(u(M).forEach(function(K){ua(b,K,M[K].primKey,M[K].indexes)}),Ai(d,b),void we.follow(function(){return d.on.populate.fire(k)}).catch(_));var H,U})}function rl(d,g){Cu(d._dbSchema,g),g.db.version%10!=0||g.objectStoreNames.contains("$meta")||g.db.createObjectStore("$meta").add(Math.ceil(g.db.version/10-1),"version");var b=Es(0,d.idbdb,g);ol(d,d._dbSchema,g);for(var x=0,M=il(b,d._dbSchema).change;x<M.length;x++){var k=function(_){if(_.change.length||_.recreate)return console.warn("Unable to patch indexes of table ".concat(_.name," because it has changes on the type of index or primary key.")),{value:void 0};var N=g.objectStore(_.name);_.add.forEach(function(H){jn&&console.debug("Dexie upgrade patch: Creating missing index ".concat(_.name,".").concat(H.src)),sl(N,H)})}(M[x]);if(typeof k=="object")return k.value}}function il(d,g){var b,x={del:[],add:[],change:[]};for(b in d)g[b]||x.del.push(b);for(b in g){var M=d[b],k=g[b];if(M){var _={name:b,def:k,recreate:!1,del:[],add:[],change:[]};if(""+(M.primKey.keyPath||"")!=""+(k.primKey.keyPath||"")||M.primKey.auto!==k.primKey.auto)_.recreate=!0,x.change.push(_);else{var N=M.idxByName,H=k.idxByName,U=void 0;for(U in N)H[U]||_.del.push(U);for(U in H){var K=N[U],B=H[U];K?K.src!==B.src&&_.change.push(B):_.add.push(B)}(0<_.del.length||0<_.add.length||0<_.change.length)&&x.change.push(_)}}else x.add.push([b,k])}return x}function ua(d,g,b,x){var M=d.db.createObjectStore(g,b.keyPath?{keyPath:b.keyPath,autoIncrement:b.auto}:{autoIncrement:b.auto});return x.forEach(function(k){return sl(M,k)}),M}function Cu(d,g){u(d).forEach(function(b){g.db.objectStoreNames.contains(b)||(jn&&console.debug("Dexie: Creating missing table",b),ua(g,b,d[b].primKey,d[b].indexes))})}function sl(d,g){d.createIndex(g.name,g.keyPath,{unique:g.unique,multiEntry:g.multi})}function Es(d,g,b){var x={};return Te(g.objectStoreNames,0).forEach(function(M){for(var k=b.objectStore(M),_=$r(el(U=k.keyPath),U||"",!0,!1,!!k.autoIncrement,U&&typeof U!="string",!0),N=[],H=0;H<k.indexNames.length;++H){var K=k.index(k.indexNames[H]),U=K.keyPath,K=$r(K.name,U,!!K.unique,!!K.multiEntry,!1,U&&typeof U!="string",!1);N.push(K)}x[M]=bs(M,_,N)}),x}function ol(d,g,b){for(var x=b.db.objectStoreNames,M=0;M<x.length;++M){var k=x[M],_=b.objectStore(k);d._hasGetAll="getAll"in _;for(var N=0;N<_.indexNames.length;++N){var H=_.indexNames[N],U=_.index(H).keyPath,K=typeof U=="string"?U:"["+Te(U).join("+")+"]";!g[k]||(U=g[k].idxByName[K])&&(U.name=H,delete g[k].idxByName[K],g[k].idxByName[H]=U)}}typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&a.WorkerGlobalScope&&a instanceof a.WorkerGlobalScope&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604&&(d._hasGetAll=!1)}function Au(d){return d.split(",").map(function(g,b){var x=(g=g.trim()).replace(/([&*]|\+\+)/g,""),M=/^\[/.test(x)?x.match(/^\[(.*)\]$/)[1].split("+"):x;return $r(x,M||null,/\&/.test(g),/\*/.test(g),/\+\+/.test(g),f(M),b===0)})}var Cf=(ll.prototype._parseStoresSpec=function(d,g){u(d).forEach(function(b){if(d[b]!==null){var x=Au(d[b]),M=x.shift();if(M.unique=!0,M.multi)throw new Ve.Schema("Primary key cannot be multi-valued");x.forEach(function(k){if(k.auto)throw new Ve.Schema("Only primary key can be marked as autoIncrement (++)");if(!k.keyPath)throw new Ve.Schema("Index must have a name and cannot be an empty string")}),g[b]=bs(b,M,x)}})},ll.prototype.stores=function(b){var g=this.db;this._cfg.storesSource=this._cfg.storesSource?h(this._cfg.storesSource,b):b;var b=g._versions,x={},M={};return b.forEach(function(k){h(x,k._cfg.storesSource),M=k._cfg.dbschema={},k._parseStoresSpec(x,M)}),g._dbSchema=M,yo(g,[g._allTables,g,g.Transaction.prototype]),nl(g,[g._allTables,g,g.Transaction.prototype,this._cfg.tables],u(M),M),g._storeNames=u(M),this},ll.prototype.upgrade=function(d){return this._cfg.contentUpgrade=Ki(this._cfg.contentUpgrade||xt,d),this},ll);function ll(){}function ca(d,g){var b=d._dbNamesDB;return b||(b=d._dbNamesDB=new Xr(gr,{addons:[],indexedDB:d,IDBKeyRange:g})).version(1).stores({dbnames:"name"}),b.table("dbnames")}function al(d){return d&&typeof d.databases=="function"}function fa(d){return Gn(function(){return je.letThrough=!0,d()})}function da(d){return!("from"in d)}var On=function(d,g){if(!this){var b=new On;return d&&"d"in d&&h(b,d),b}h(this,arguments.length?{d:1,from:d,to:1<arguments.length?g:d}:{d:0})};function bo(d,g,b){var x=tt(g,b);if(!isNaN(x)){if(0<x)throw RangeError();if(da(d))return h(d,{from:g,to:b,d:1});var M=d.l,x=d.r;if(tt(b,d.from)<0)return M?bo(M,g,b):d.l={from:g,to:b,d:1,l:null,r:null},Nu(d);if(0<tt(g,d.to))return x?bo(x,g,b):d.r={from:g,to:b,d:1,l:null,r:null},Nu(d);tt(g,d.from)<0&&(d.from=g,d.l=null,d.d=x?x.d+1:1),0<tt(b,d.to)&&(d.to=b,d.r=null,d.d=d.l?d.l.d+1:1),b=!d.r,M&&!d.l&&Xi(d,M),x&&b&&Xi(d,x)}}function Xi(d,g){da(g)||function b(x,H){var k=H.from,_=H.to,N=H.l,H=H.r;bo(x,k,_),N&&b(x,N),H&&b(x,H)}(d,g)}function _u(d,g){var b=ul(g),x=b.next();if(x.done)return!1;for(var M=x.value,k=ul(d),_=k.next(M.from),N=_.value;!x.done&&!_.done;){if(tt(N.from,M.to)<=0&&0<=tt(N.to,M.from))return!0;tt(M.from,N.from)<0?M=(x=b.next(N.from)).value:N=(_=k.next(M.from)).value}return!1}function ul(d){var g=da(d)?null:{s:0,n:d};return{next:function(b){for(var x=0<arguments.length;g;)switch(g.s){case 0:if(g.s=1,x)for(;g.n.l&&tt(b,g.n.from)<0;)g={up:g,n:g.n.l,s:1};else for(;g.n.l;)g={up:g,n:g.n.l,s:1};case 1:if(g.s=2,!x||tt(b,g.n.to)<=0)return{value:g.n,done:!1};case 2:if(g.n.r){g.s=3,g={up:g,n:g.n.r,s:0};continue}case 3:g=g.up}return{done:!0}}}}function Nu(d){var g,b,x=(((g=d.r)===null||g===void 0?void 0:g.d)||0)-(((b=d.l)===null||b===void 0?void 0:b.d)||0),M=1<x?"r":x<-1?"l":"";M&&(g=M=="r"?"l":"r",b=i({},d),x=d[M],d.from=x.from,d.to=x.to,d[M]=x[M],b[M]=x[g],(d[g]=b).d=ha(b)),d.d=ha(d)}function ha(b){var g=b.r,b=b.l;return(g?b?Math.max(g.d,b.d):g.d:b?b.d:0)+1}function cl(d,g){return u(g).forEach(function(b){d[b]?Xi(d[b],g[b]):d[b]=function x(M){var k,_,N={};for(k in M)S(M,k)&&(_=M[k],N[k]=!_||typeof _!="object"||sn.has(_.constructor)?_:x(_));return N}(g[b])}),d}function pa(d,g){return d.all||g.all||Object.keys(d).some(function(b){return g[b]&&_u(g[b],d[b])})}w(On.prototype,((ar={add:function(d){return Xi(this,d),this},addKey:function(d){return bo(this,d,d),this},addKeys:function(d){var g=this;return d.forEach(function(b){return bo(g,b,b)}),this},hasKey:function(d){var g=ul(this).next(d).value;return g&&tt(g.from,d)<=0&&0<=tt(g.to,d)}})[te]=function(){return ul(this)},ar));var Fi={},ma={},ga=!1;function fl(d){cl(ma,d),ga||(ga=!0,setTimeout(function(){ga=!1,ya(ma,!(ma={}))},0))}function ya(d,g){g===void 0&&(g=!1);var b=new Set;if(d.all)for(var x=0,M=Object.values(Fi);x<M.length;x++)Du(_=M[x],d,b,g);else for(var k in d){var _,N=/^idb\:\/\/(.*)\/(.*)\//.exec(k);N&&(k=N[1],N=N[2],(_=Fi["idb://".concat(k,"/").concat(N)])&&Du(_,d,b,g))}b.forEach(function(H){return H()})}function Du(d,g,b,x){for(var M=[],k=0,_=Object.entries(d.queries.query);k<_.length;k++){for(var N=_[k],H=N[0],U=[],K=0,B=N[1];K<B.length;K++){var Y=B[K];pa(g,Y.obsSet)?Y.subscribers.forEach(function(V){return b.add(V)}):x&&U.push(Y)}x&&M.push([H,U])}if(x)for(var j=0,I=M;j<I.length;j++){var G=I[j],H=G[0],U=G[1];d.queries.query[H]=U}}function Af(d){var g=d._state,b=d._deps.indexedDB;if(g.isBeingOpened||d.idbdb)return g.dbReadyPromise.then(function(){return g.dbOpenError?Ut(g.dbOpenError):d});g.isBeingOpened=!0,g.dbOpenError=null,g.openComplete=!1;var x=g.openCanceller,M=Math.round(10*d.verno),k=!1;function _(){if(g.openCanceller!==x)throw new Ve.DatabaseClosed("db.open() was cancelled")}function N(){return new we(function(Y,j){if(_(),!b)throw new Ve.MissingAPI;var I=d.name,G=g.autoSchema||!M?b.open(I):b.open(I,M);if(!G)throw new Ve.MissingAPI;G.onerror=at(j),G.onblocked=ye(d._fireOnBlocked),G.onupgradeneeded=ye(function(V){var F;K=G.transaction,g.autoSchema&&!d._options.allowEmptyDB?(G.onerror=It,K.abort(),G.result.close(),(F=b.deleteDatabase(I)).onsuccess=F.onerror=ye(function(){j(new Ve.NoSuchDatabase("Database ".concat(I," doesnt exist")))})):(K.onerror=at(j),V=V.oldVersion>Math.pow(2,62)?0:V.oldVersion,B=V<1,d.idbdb=G.result,k&&rl(d,K),vo(d,V/10,K,j))},j),G.onsuccess=ye(function(){K=null;var V,F,Z,ee,ne,he=d.idbdb=G.result,be=Te(he.objectStoreNames);if(0<be.length)try{var fe=he.transaction((ee=be).length===1?ee[0]:ee,"readonly");if(g.autoSchema)F=he,Z=fe,(V=d).verno=F.version/10,Z=V._dbSchema=Es(0,F,Z),V._storeNames=Te(F.objectStoreNames,0),nl(V,[V._allTables],u(Z),Z);else if(ol(d,d._dbSchema,fe),((ne=il(Es(0,(ne=d).idbdb,fe),ne._dbSchema)).add.length||ne.change.some(function(pe){return pe.add.length||pe.change.length}))&&!k)return console.warn("Dexie SchemaDiff: Schema was extended without increasing the number passed to db.version(). Dexie will add missing parts and increment native version number to workaround this."),he.close(),M=he.version+1,k=!0,Y(N());Ai(d,fe)}catch{}kr.push(d),he.onversionchange=ye(function(pe){g.vcFired=!0,d.on("versionchange").fire(pe)}),he.onclose=ye(function(pe){d.on("close").fire(pe)}),B&&(ne=d._deps,fe=I,he=ne.indexedDB,ne=ne.IDBKeyRange,al(he)||fe===gr||ca(he,ne).put({name:fe}).catch(xt)),Y()},j)}).catch(function(Y){switch(Y==null?void 0:Y.name){case"UnknownError":if(0<g.PR1398_maxLoop)return g.PR1398_maxLoop--,console.warn("Dexie: Workaround for Chrome UnknownError on open()"),N();break;case"VersionError":if(0<M)return M=0,N()}return we.reject(Y)})}var H,U=g.dbReadyResolve,K=null,B=!1;return we.race([x,(typeof navigator>"u"?we.resolve():!navigator.userAgentData&&/Safari\//.test(navigator.userAgent)&&!/Chrom(e|ium)\//.test(navigator.userAgent)&&indexedDB.databases?new Promise(function(Y){function j(){return indexedDB.databases().finally(Y)}H=setInterval(j,100),j()}).finally(function(){return clearInterval(H)}):Promise.resolve()).then(N)]).then(function(){return _(),g.onReadyBeingFired=[],we.resolve(fa(function(){return d.on.ready.fire(d.vip)})).then(function Y(){if(0<g.onReadyBeingFired.length){var j=g.onReadyBeingFired.reduce(Ki,xt);return g.onReadyBeingFired=[],we.resolve(fa(function(){return j(d.vip)})).then(Y)}})}).finally(function(){g.openCanceller===x&&(g.onReadyBeingFired=null,g.isBeingOpened=!1)}).catch(function(Y){g.dbOpenError=Y;try{K&&K.abort()}catch{}return x===g.openCanceller&&d._close(),Ut(Y)}).finally(function(){g.openComplete=!0,U()}).then(function(){var Y;return B&&(Y={},d.tables.forEach(function(j){j.schema.indexes.forEach(function(I){I.name&&(Y["idb://".concat(d.name,"/").concat(j.name,"/").concat(I.name)]=new On(-1/0,[[[]]]))}),Y["idb://".concat(d.name,"/").concat(j.name,"/")]=Y["idb://".concat(d.name,"/").concat(j.name,"/:dels")]=new On(-1/0,[[[]]])}),un(Tn).fire(Y),ya(Y,!0)),d})}function So(d){function g(k){return d.next(k)}var b=M(g),x=M(function(k){return d.throw(k)});function M(k){return function(H){var N=k(H),H=N.value;return N.done?H:H&&typeof H.then=="function"?H.then(b,x):f(H)?Promise.all(H).then(b,x):b(H)}}return M(g)()}function _i(d,g,b){for(var x=f(d)?d.slice():[d],M=0;M<b;++M)x.push(g);return x}var _f={stack:"dbcore",name:"VirtualIndexMiddleware",level:1,create:function(d){return i(i({},d),{table:function(g){var b=d.table(g),x=b.schema,M={},k=[];function _(B,Y,j){var I=cn(B),G=M[I]=M[I]||[],V=B==null?0:typeof B=="string"?1:B.length,F=0<Y,F=i(i({},j),{name:F?"".concat(I,"(virtual-from:").concat(j.name,")"):j.name,lowLevelIndex:j,isVirtual:F,keyTail:Y,keyLength:V,extractKey:xs(B),unique:!F&&j.unique});return G.push(F),F.isPrimaryKey||k.push(F),1<V&&_(V===2?B[0]:B.slice(0,V-1),Y+1,j),G.sort(function(Z,ee){return Z.keyTail-ee.keyTail}),F}g=_(x.primaryKey.keyPath,0,x.primaryKey),M[":id"]=[g];for(var N=0,H=x.indexes;N<H.length;N++){var U=H[N];_(U.keyPath,0,U)}function K(B){var Y,j=B.query.index;return j.isVirtual?i(i({},B),{query:{index:j.lowLevelIndex,range:(Y=B.query.range,j=j.keyTail,{type:Y.type===1?2:Y.type,lower:_i(Y.lower,Y.lowerOpen?d.MAX_KEY:d.MIN_KEY,j),lowerOpen:!0,upper:_i(Y.upper,Y.upperOpen?d.MIN_KEY:d.MAX_KEY,j),upperOpen:!0})}}):B}return i(i({},b),{schema:i(i({},x),{primaryKey:g,indexes:k,getIndexByKeyPath:function(B){return(B=M[cn(B)])&&B[0]}}),count:function(B){return b.count(K(B))},query:function(B){return b.query(K(B))},openCursor:function(B){var Y=B.query.index,j=Y.keyTail,I=Y.isVirtual,G=Y.keyLength;return I?b.openCursor(K(B)).then(function(F){return F&&V(F)}):b.openCursor(B);function V(F){return Object.create(F,{continue:{value:function(Z){Z!=null?F.continue(_i(Z,B.reverse?d.MAX_KEY:d.MIN_KEY,j)):B.unique?F.continue(F.key.slice(0,G).concat(B.reverse?d.MIN_KEY:d.MAX_KEY,j)):F.continue()}},continuePrimaryKey:{value:function(Z,ee){F.continuePrimaryKey(_i(Z,d.MAX_KEY,j),ee)}},primaryKey:{get:function(){return F.primaryKey}},key:{get:function(){var Z=F.key;return G===1?Z[0]:Z.slice(0,G)}},value:{get:function(){return F.value}}})}}})}})}};function dl(d,g,b,x){return b=b||{},x=x||"",u(d).forEach(function(M){var k,_,N;S(g,M)?(k=d[M],_=g[M],typeof k=="object"&&typeof _=="object"&&k&&_?(N=Xt(k))!==Xt(_)?b[x+M]=g[M]:N==="Object"?dl(k,_,b,x+M+"."):k!==_&&(b[x+M]=g[M]):k!==_&&(b[x+M]=g[M])):b[x+M]=void 0}),u(g).forEach(function(M){S(d,M)||(b[x+M]=g[M])}),b}function hl(d,g){return g.type==="delete"?g.keys:g.keys||g.values.map(d.extractKey)}var Ru={stack:"dbcore",name:"HooksMiddleware",level:2,create:function(d){return i(i({},d),{table:function(g){var b=d.table(g),x=b.schema.primaryKey;return i(i({},b),{mutate:function(M){var k=je.trans,_=k.table(g).hook,N=_.deleting,H=_.creating,U=_.updating;switch(M.type){case"add":if(H.fire===xt)break;return k._promise("readwrite",function(){return K(M)},!0);case"put":if(H.fire===xt&&U.fire===xt)break;return k._promise("readwrite",function(){return K(M)},!0);case"delete":if(N.fire===xt)break;return k._promise("readwrite",function(){return K(M)},!0);case"deleteRange":if(N.fire===xt)break;return k._promise("readwrite",function(){return function B(Y,j,I){return b.query({trans:Y,values:!1,query:{index:x,range:j},limit:I}).then(function(G){var V=G.result;return K({type:"delete",keys:V,trans:Y}).then(function(F){return 0<F.numFailures?Promise.reject(F.failures[0]):V.length<I?{failures:[],numFailures:0,lastResult:void 0}:B(Y,i(i({},j),{lower:V[V.length-1],lowerOpen:!0}),I)})})}(M.trans,M.range,1e4)},!0)}return b.mutate(M);function K(B){var Y,j,I,G=je.trans,V=B.keys||hl(x,B);if(!V)throw new Error("Keys missing");return(B=B.type==="add"||B.type==="put"?i(i({},B),{keys:V}):i({},B)).type!=="delete"&&(B.values=o([],B.values)),B.keys&&(B.keys=o([],B.keys)),Y=b,I=V,((j=B).type==="add"?Promise.resolve([]):Y.getMany({trans:j.trans,keys:I,cache:"immutable"})).then(function(F){var Z=V.map(function(ee,ne){var he,be,fe,pe=F[ne],Ee={onerror:null,onsuccess:null};return B.type==="delete"?N.fire.call(Ee,ee,pe,G):B.type==="add"||pe===void 0?(he=H.fire.call(Ee,ee,B.values[ne],G),ee==null&&he!=null&&(B.keys[ne]=ee=he,x.outbound||Fe(B.values[ne],x.keyPath,ee))):(he=dl(pe,B.values[ne]),(be=U.fire.call(Ee,he,ee,pe,G))&&(fe=B.values[ne],Object.keys(be).forEach(function(de){S(fe,de)?fe[de]=be[de]:Fe(fe,de,be[de])}))),Ee});return b.mutate(B).then(function(ee){for(var ne=ee.failures,he=ee.results,be=ee.numFailures,ee=ee.lastResult,fe=0;fe<V.length;++fe){var pe=(he||V)[fe],Ee=Z[fe];pe==null?Ee.onerror&&Ee.onerror(ne[fe]):Ee.onsuccess&&Ee.onsuccess(B.type==="put"&&F[fe]?B.values[fe]:pe)}return{failures:ne,results:he,numFailures:be,lastResult:ee}}).catch(function(ee){return Z.forEach(function(ne){return ne.onerror&&ne.onerror(ee)}),Promise.reject(ee)})})}}})}})}};function va(d,g,b){try{if(!g||g.keys.length<d.length)return null;for(var x=[],M=0,k=0;M<g.keys.length&&k<d.length;++M)tt(g.keys[M],d[k])===0&&(x.push(b?Ln(g.values[M]):g.values[M]),++k);return x.length===d.length?x:null}catch{return null}}var Bu={stack:"dbcore",level:-1,create:function(d){return{table:function(g){var b=d.table(g);return i(i({},b),{getMany:function(x){if(!x.cache)return b.getMany(x);var M=va(x.keys,x.trans._cache,x.cache==="clone");return M?we.resolve(M):b.getMany(x).then(function(k){return x.trans._cache={keys:x.keys,values:x.cache==="clone"?Ln(k):k},k})},mutate:function(x){return x.type!=="add"&&(x.trans._cache=null),b.mutate(x)}})}}}};function Qi(d,g){return d.trans.mode==="readonly"&&!!d.subscr&&!d.trans.explicit&&d.trans.db._options.cache!=="disabled"&&!g.schema.primaryKey.outbound}function zu(d,g){switch(d){case"query":return g.values&&!g.unique;case"get":case"getMany":case"count":case"openCursor":return!1}}var Nf={stack:"dbcore",level:0,name:"Observability",create:function(d){var g=d.schema.name,b=new On(d.MIN_KEY,d.MAX_KEY);return i(i({},d),{transaction:function(x,M,k){if(je.subscr&&M!=="readonly")throw new Ve.ReadOnly("Readwrite transaction in liveQuery context. Querier source: ".concat(je.querier));return d.transaction(x,M,k)},table:function(x){var M=d.table(x),k=M.schema,_=k.primaryKey,B=k.indexes,N=_.extractKey,H=_.outbound,U=_.autoIncrement&&B.filter(function(j){return j.compound&&j.keyPath.includes(_.keyPath)}),K=i(i({},M),{mutate:function(j){function I(de){return de="idb://".concat(g,"/").concat(x,"/").concat(de),ee[de]||(ee[de]=new On)}var G,V,F,Z=j.trans,ee=j.mutatedParts||(j.mutatedParts={}),ne=I(""),he=I(":dels"),be=j.type,Ee=j.type==="deleteRange"?[j.range]:j.type==="delete"?[j.keys]:j.values.length<50?[hl(_,j).filter(function(de){return de}),j.values]:[],fe=Ee[0],pe=Ee[1],Ee=j.trans._cache;return f(fe)?(ne.addKeys(fe),(Ee=be==="delete"||fe.length===pe.length?va(fe,Ee):null)||he.addKeys(fe),(Ee||pe)&&(G=I,V=Ee,F=pe,k.indexes.forEach(function(de){var Be=G(de.name||"");function $e(ot){return ot!=null?de.extractKey(ot):null}function Je(ot){return de.multiEntry&&f(ot)?ot.forEach(function(qn){return Be.addKey(qn)}):Be.addKey(ot)}(V||F).forEach(function(ot,en){var nt=V&&$e(V[en]),en=F&&$e(F[en]);tt(nt,en)!==0&&(nt!=null&&Je(nt),en!=null&&Je(en))})}))):fe?(pe={from:(pe=fe.lower)!==null&&pe!==void 0?pe:d.MIN_KEY,to:(pe=fe.upper)!==null&&pe!==void 0?pe:d.MAX_KEY},he.add(pe),ne.add(pe)):(ne.add(b),he.add(b),k.indexes.forEach(function(de){return I(de.name).add(b)})),M.mutate(j).then(function(de){return!fe||j.type!=="add"&&j.type!=="put"||(ne.addKeys(de.results),U&&U.forEach(function(Be){for(var $e=j.values.map(function(nt){return Be.extractKey(nt)}),Je=Be.keyPath.findIndex(function(nt){return nt===_.keyPath}),ot=0,qn=de.results.length;ot<qn;++ot)$e[ot][Je]=de.results[ot];I(Be.name).addKeys($e)})),Z.mutatedParts=cl(Z.mutatedParts||{},ee),de})}}),B=function(I){var G=I.query,I=G.index,G=G.range;return[I,new On((I=G.lower)!==null&&I!==void 0?I:d.MIN_KEY,(G=G.upper)!==null&&G!==void 0?G:d.MAX_KEY)]},Y={get:function(j){return[_,new On(j.key)]},getMany:function(j){return[_,new On().addKeys(j.keys)]},count:B,query:B,openCursor:B};return u(Y).forEach(function(j){K[j]=function(I){var G=je.subscr,V=!!G,F=Qi(je,M)&&zu(j,I)?I.obsSet={}:G;if(V){var Z=function(pe){return pe="idb://".concat(g,"/").concat(x,"/").concat(pe),F[pe]||(F[pe]=new On)},ee=Z(""),ne=Z(":dels"),G=Y[j](I),V=G[0],G=G[1];if((j==="query"&&V.isPrimaryKey&&!I.values?ne:Z(V.name||"")).add(G),!V.isPrimaryKey){if(j!=="count"){var he=j==="query"&&H&&I.values&&M.query(i(i({},I),{values:!1}));return M[j].apply(this,arguments).then(function(pe){if(j==="query"){if(H&&I.values)return he.then(function($e){return $e=$e.result,ee.addKeys($e),pe});var Ee=I.values?pe.result.map(N):pe.result;(I.values?ee:ne).addKeys(Ee)}else if(j==="openCursor"){var de=pe,Be=I.values;return de&&Object.create(de,{key:{get:function(){return ne.addKey(de.primaryKey),de.key}},primaryKey:{get:function(){var $e=de.primaryKey;return ne.addKey($e),$e}},value:{get:function(){return Be&&ee.addKey(de.primaryKey),de.value}}})}return pe})}ne.add(b)}}return M[j].apply(this,arguments)}}),K}})}};function Lu(d,g,b){if(b.numFailures===0)return g;if(g.type==="deleteRange")return null;var x=g.keys?g.keys.length:"values"in g&&g.values?g.values.length:1;return b.numFailures===x?null:(g=i({},g),f(g.keys)&&(g.keys=g.keys.filter(function(M,k){return!(k in b.failures)})),"values"in g&&f(g.values)&&(g.values=g.values.filter(function(M,k){return!(k in b.failures)})),g)}function pl(d,g){return b=d,((x=g).lower===void 0||(x.lowerOpen?0<tt(b,x.lower):0<=tt(b,x.lower)))&&(d=d,(g=g).upper===void 0||(g.upperOpen?tt(d,g.upper)<0:tt(d,g.upper)<=0));var b,x}function ba(d,g,Y,x,M,k){if(!Y||Y.length===0)return d;var _=g.query.index,N=_.multiEntry,H=g.query.range,U=x.schema.primaryKey.extractKey,K=_.extractKey,B=(_.lowLevelIndex||_).extractKey,Y=Y.reduce(function(j,I){var G=j,V=[];if(I.type==="add"||I.type==="put")for(var F=new On,Z=I.values.length-1;0<=Z;--Z){var ee,ne=I.values[Z],he=U(ne);F.hasKey(he)||(ee=K(ne),(N&&f(ee)?ee.some(function(de){return pl(de,H)}):pl(ee,H))&&(F.addKey(he),V.push(ne)))}switch(I.type){case"add":var be=new On().addKeys(g.values?j.map(function(Be){return U(Be)}):j),G=j.concat(g.values?V.filter(function(Be){return Be=U(Be),!be.hasKey(Be)&&(be.addKey(Be),!0)}):V.map(function(Be){return U(Be)}).filter(function(Be){return!be.hasKey(Be)&&(be.addKey(Be),!0)}));break;case"put":var fe=new On().addKeys(I.values.map(function(Be){return U(Be)}));G=j.filter(function(Be){return!fe.hasKey(g.values?U(Be):Be)}).concat(g.values?V:V.map(function(Be){return U(Be)}));break;case"delete":var pe=new On().addKeys(I.keys);G=j.filter(function(Be){return!pe.hasKey(g.values?U(Be):Be)});break;case"deleteRange":var Ee=I.range;G=j.filter(function(Be){return!pl(U(Be),Ee)})}return G},d);return Y===d?d:(Y.sort(function(j,I){return tt(B(j),B(I))||tt(U(j),U(I))}),g.limit&&g.limit<1/0&&(Y.length>g.limit?Y.length=g.limit:d.length===g.limit&&Y.length<g.limit&&(M.dirty=!0)),k?Object.freeze(Y):Y)}function Ms(d,g){return tt(d.lower,g.lower)===0&&tt(d.upper,g.upper)===0&&!!d.lowerOpen==!!g.lowerOpen&&!!d.upperOpen==!!g.upperOpen}function xo(d,g){return function(b,x,M,k){if(b===void 0)return x!==void 0?-1:0;if(x===void 0)return 1;if((x=tt(b,x))===0){if(M&&k)return 0;if(M)return 1;if(k)return-1}return x}(d.lower,g.lower,d.lowerOpen,g.lowerOpen)<=0&&0<=function(b,x,M,k){if(b===void 0)return x!==void 0?1:0;if(x===void 0)return-1;if((x=tt(b,x))===0){if(M&&k)return 0;if(M)return-1;if(k)return 1}return x}(d.upper,g.upper,d.upperOpen,g.upperOpen)}function Df(d,g,b,x){d.subscribers.add(b),x.addEventListener("abort",function(){var M,k;d.subscribers.delete(b),d.subscribers.size===0&&(M=d,k=g,setTimeout(function(){M.subscribers.size===0&&Ke(k,M)},3e3))})}var ml={stack:"dbcore",level:0,name:"Cache",create:function(d){var g=d.schema.name;return i(i({},d),{transaction:function(b,x,M){var k,_,N=d.transaction(b,x,M);return x==="readwrite"&&(_=(k=new AbortController).signal,M=function(H){return function(){if(k.abort(),x==="readwrite"){for(var U=new Set,K=0,B=b;K<B.length;K++){var Y=B[K],j=Fi["idb://".concat(g,"/").concat(Y)];if(j){var I=d.table(Y),G=j.optimisticOps.filter(function(Be){return Be.trans===N});if(N._explicit&&H&&N.mutatedParts)for(var V=0,F=Object.values(j.queries.query);V<F.length;V++)for(var Z=0,ee=(be=F[V]).slice();Z<ee.length;Z++)pa((fe=ee[Z]).obsSet,N.mutatedParts)&&(Ke(be,fe),fe.subscribers.forEach(function(Be){return U.add(Be)}));else if(0<G.length){j.optimisticOps=j.optimisticOps.filter(function(Be){return Be.trans!==N});for(var ne=0,he=Object.values(j.queries.query);ne<he.length;ne++)for(var be,fe,pe,Ee=0,de=(be=he[ne]).slice();Ee<de.length;Ee++)(fe=de[Ee]).res!=null&&N.mutatedParts&&(H&&!fe.dirty?(pe=Object.isFrozen(fe.res),pe=ba(fe.res,fe.req,G,I,fe,pe),fe.dirty?(Ke(be,fe),fe.subscribers.forEach(function(Be){return U.add(Be)})):pe!==fe.res&&(fe.res=pe,fe.promise=we.resolve({result:pe}))):(fe.dirty&&Ke(be,fe),fe.subscribers.forEach(function(Be){return U.add(Be)})))}}}U.forEach(function(Be){return Be()})}}},N.addEventListener("abort",M(!1),{signal:_}),N.addEventListener("error",M(!1),{signal:_}),N.addEventListener("complete",M(!0),{signal:_})),N},table:function(b){var x=d.table(b),M=x.schema.primaryKey;return i(i({},x),{mutate:function(k){var _=je.trans;if(M.outbound||_.db._options.cache==="disabled"||_.explicit||_.idbtrans.mode!=="readwrite")return x.mutate(k);var N=Fi["idb://".concat(g,"/").concat(b)];return N?(_=x.mutate(k),k.type!=="add"&&k.type!=="put"||!(50<=k.values.length||hl(M,k).some(function(H){return H==null}))?(N.optimisticOps.push(k),k.mutatedParts&&fl(k.mutatedParts),_.then(function(H){0<H.numFailures&&(Ke(N.optimisticOps,k),(H=Lu(0,k,H))&&N.optimisticOps.push(H),k.mutatedParts&&fl(k.mutatedParts))}),_.catch(function(){Ke(N.optimisticOps,k),k.mutatedParts&&fl(k.mutatedParts)})):_.then(function(H){var U=Lu(0,i(i({},k),{values:k.values.map(function(K,B){var Y;return H.failures[B]?K:(K=(Y=M.keyPath)!==null&&Y!==void 0&&Y.includes(".")?Ln(K):i({},K),Fe(K,M.keyPath,H.results[B]),K)})}),H);N.optimisticOps.push(U),queueMicrotask(function(){return k.mutatedParts&&fl(k.mutatedParts)})}),_):x.mutate(k)},query:function(k){if(!Qi(je,x)||!zu("query",k))return x.query(k);var _=((U=je.trans)===null||U===void 0?void 0:U.db._options.cache)==="immutable",B=je,N=B.requery,H=B.signal,U=function(I,G,V,F){var Z=Fi["idb://".concat(I,"/").concat(G)];if(!Z)return[];if(!(G=Z.queries[V]))return[null,!1,Z,null];var ee=G[(F.query?F.query.index.name:null)||""];if(!ee)return[null,!1,Z,null];switch(V){case"query":var ne=ee.find(function(he){return he.req.limit===F.limit&&he.req.values===F.values&&Ms(he.req.query.range,F.query.range)});return ne?[ne,!0,Z,ee]:[ee.find(function(he){return("limit"in he.req?he.req.limit:1/0)>=F.limit&&(!F.values||he.req.values)&&xo(he.req.query.range,F.query.range)}),!1,Z,ee];case"count":return ne=ee.find(function(he){return Ms(he.req.query.range,F.query.range)}),[ne,!!ne,Z,ee]}}(g,b,"query",k),K=U[0],B=U[1],Y=U[2],j=U[3];return K&&B?K.obsSet=k.obsSet:(B=x.query(k).then(function(I){var G=I.result;if(K&&(K.res=G),_){for(var V=0,F=G.length;V<F;++V)Object.freeze(G[V]);Object.freeze(G)}else I.result=Ln(G);return I}).catch(function(I){return j&&K&&Ke(j,K),Promise.reject(I)}),K={obsSet:k.obsSet,promise:B,subscribers:new Set,type:"query",req:k,dirty:!1},j?j.push(K):(j=[K],(Y=Y||(Fi["idb://".concat(g,"/").concat(b)]={queries:{query:{},count:{}},objs:new Map,optimisticOps:[],unsignaledParts:{}})).queries.query[k.query.index.name||""]=j)),Df(K,j,N,H),K.promise.then(function(I){return{result:ba(I.result,k,Y==null?void 0:Y.optimisticOps,x,K,_)}})}})}})}};function Eo(d,g){return new Proxy(d,{get:function(b,x,M){return x==="db"?g:Reflect.get(b,x,M)}})}var Xr=(Yt.prototype.version=function(d){if(isNaN(d)||d<.1)throw new Ve.Type("Given version is not a positive number");if(d=Math.round(10*d)/10,this.idbdb||this._state.isBeingOpened)throw new Ve.Schema("Cannot add version when database is open");this.verno=Math.max(this.verno,d);var g=this._versions,b=g.filter(function(x){return x._cfg.version===d})[0];return b||(b=new this.Version(d),g.push(b),g.sort(aa),b.stores({}),this._state.autoSchema=!1,b)},Yt.prototype._whenReady=function(d){var g=this;return this.idbdb&&(this._state.openComplete||je.letThrough||this._vip)?d():new we(function(b,x){if(g._state.openComplete)return x(new Ve.DatabaseClosed(g._state.dbOpenError));if(!g._state.isBeingOpened){if(!g._state.autoOpen)return void x(new Ve.DatabaseClosed);g.open().catch(xt)}g._state.dbReadyPromise.then(b,x)}).then(d)},Yt.prototype.use=function(d){var g=d.stack,b=d.create,x=d.level,M=d.name;return M&&this.unuse({stack:g,name:M}),d=this._middlewares[g]||(this._middlewares[g]=[]),d.push({stack:g,create:b,level:x??10,name:M}),d.sort(function(k,_){return k.level-_.level}),this},Yt.prototype.unuse=function(d){var g=d.stack,b=d.name,x=d.create;return g&&this._middlewares[g]&&(this._middlewares[g]=this._middlewares[g].filter(function(M){return x?M.create!==x:!!b&&M.name!==b})),this},Yt.prototype.open=function(){var d=this;return Kr(Mn,function(){return Af(d)})},Yt.prototype._close=function(){var d=this._state,g=kr.indexOf(this);if(0<=g&&kr.splice(g,1),this.idbdb){try{this.idbdb.close()}catch{}this.idbdb=null}d.isBeingOpened||(d.dbReadyPromise=new we(function(b){d.dbReadyResolve=b}),d.openCanceller=new we(function(b,x){d.cancelOpen=x}))},Yt.prototype.close=function(b){var g=(b===void 0?{disableAutoOpen:!0}:b).disableAutoOpen,b=this._state;g?(b.isBeingOpened&&b.cancelOpen(new Ve.DatabaseClosed),this._close(),b.autoOpen=!1,b.dbOpenError=new Ve.DatabaseClosed):(this._close(),b.autoOpen=this._options.autoOpen||b.isBeingOpened,b.openComplete=!1,b.dbOpenError=null)},Yt.prototype.delete=function(d){var g=this;d===void 0&&(d={disableAutoOpen:!0});var b=0<arguments.length&&typeof arguments[0]!="object",x=this._state;return new we(function(M,k){function _(){g.close(d);var N=g._deps.indexedDB.deleteDatabase(g.name);N.onsuccess=ye(function(){var H,U,K;H=g._deps,U=g.name,K=H.indexedDB,H=H.IDBKeyRange,al(K)||U===gr||ca(K,H).delete(U).catch(xt),M()}),N.onerror=at(k),N.onblocked=g._fireOnBlocked}if(b)throw new Ve.InvalidArgument("Invalid closeOptions argument to db.delete()");x.isBeingOpened?x.dbReadyPromise.then(_):_()})},Yt.prototype.backendDB=function(){return this.idbdb},Yt.prototype.isOpen=function(){return this.idbdb!==null},Yt.prototype.hasBeenClosed=function(){var d=this._state.dbOpenError;return d&&d.name==="DatabaseClosed"},Yt.prototype.hasFailed=function(){return this._state.dbOpenError!==null},Yt.prototype.dynamicallyOpened=function(){return this._state.autoSchema},Object.defineProperty(Yt.prototype,"tables",{get:function(){var d=this;return u(this._allTables).map(function(g){return d._allTables[g]})},enumerable:!1,configurable:!0}),Yt.prototype.transaction=function(){var d=(function(g,b,x){var M=arguments.length;if(M<2)throw new Ve.InvalidArgument("Too few arguments");for(var k=new Array(M-1);--M;)k[M-1]=arguments[M];return x=k.pop(),[g,St(k),x]}).apply(this,arguments);return this._transaction.apply(this,d)},Yt.prototype._transaction=function(d,g,b){var x=this,M=je.trans;M&&M.db===this&&d.indexOf("!")===-1||(M=null);var k,_,N=d.indexOf("?")!==-1;d=d.replace("!","").replace("?","");try{if(_=g.map(function(U){if(U=U instanceof x.Table?U.name:U,typeof U!="string")throw new TypeError("Invalid table argument to Dexie.transaction(). Only Table or String are allowed");return U}),d=="r"||d===lr)k=lr;else{if(d!="rw"&&d!=ce)throw new Ve.InvalidArgument("Invalid transaction mode: "+d);k=ce}if(M){if(M.mode===lr&&k===ce){if(!N)throw new Ve.SubTransaction("Cannot enter a sub-transaction with READWRITE mode when parent transaction is READONLY");M=null}M&&_.forEach(function(U){if(M&&M.storeNames.indexOf(U)===-1){if(!N)throw new Ve.SubTransaction("Table "+U+" not included in parent transaction.");M=null}}),N&&M&&!M.active&&(M=null)}}catch(U){return M?M._promise(null,function(K,B){B(U)}):Ut(U)}var H=(function U(K,B,Y,j,I){return we.resolve().then(function(){var G=je.transless||je,V=K._createTransaction(B,Y,K._dbSchema,j);if(V.explicit=!0,G={trans:V,transless:G},j)V.idbtrans=j.idbtrans;else try{V.create(),V.idbtrans._explicit=!0,K._state.PR1398_maxLoop=3}catch(ee){return ee.name===gn.InvalidState&&K.isOpen()&&0<--K._state.PR1398_maxLoop?(console.warn("Dexie: Need to reopen db"),K.close({disableAutoOpen:!1}),K.open().then(function(){return U(K,B,Y,null,I)})):Ut(ee)}var F,Z=le(I);return Z&&or(),G=we.follow(function(){var ee;(F=I.call(V,V))&&(Z?(ee=Hn.bind(null,null),F.then(ee,ee)):typeof F.next=="function"&&typeof F.throw=="function"&&(F=So(F)))},G),(F&&typeof F.then=="function"?we.resolve(F).then(function(ee){return V.active?ee:Ut(new Ve.PrematureCommit("Transaction committed too early. See http://bit.ly/2kdckMn"))}):G.then(function(){return F})).then(function(ee){return j&&V._resolve(),V._completion.then(function(){return ee})}).catch(function(ee){return V._reject(ee),Ut(ee)})})}).bind(null,this,k,_,M,b);return M?M._promise(k,H,"lock"):je.trans?Kr(je.transless,function(){return x._whenReady(H)}):this._whenReady(H)},Yt.prototype.table=function(d){if(!S(this._allTables,d))throw new Ve.InvalidTable("Table ".concat(d," does not exist"));return this._allTables[d]},Yt);function Yt(d,g){var b=this;this._middlewares={},this.verno=0;var x=Yt.dependencies;this._options=g=i({addons:Yt.addons,autoOpen:!0,indexedDB:x.indexedDB,IDBKeyRange:x.IDBKeyRange,cache:"cloned"},g),this._deps={indexedDB:g.indexedDB,IDBKeyRange:g.IDBKeyRange},x=g.addons,this._dbSchema={},this._versions=[],this._storeNames=[],this._allTables={},this.idbdb=null,this._novip=this;var M,k,_,N,H,U={dbOpenError:null,isBeingOpened:!1,onReadyBeingFired:null,openComplete:!1,dbReadyResolve:xt,dbReadyPromise:null,cancelOpen:xt,openCanceller:null,autoSchema:!0,PR1398_maxLoop:3,autoOpen:g.autoOpen};U.dbReadyPromise=new we(function(B){U.dbReadyResolve=B}),U.openCanceller=new we(function(B,Y){U.cancelOpen=Y}),this._state=U,this.name=d,this.on=Cr(this,"populate","blocked","versionchange","close",{ready:[Ki,xt]}),this.on.ready.subscribe=_e(this.on.ready.subscribe,function(B){return function(Y,j){Yt.vip(function(){var I,G=b._state;G.openComplete?(G.dbOpenError||we.resolve().then(Y),j&&B(Y)):G.onReadyBeingFired?(G.onReadyBeingFired.push(Y),j&&B(Y)):(B(Y),I=b,j||B(function V(){I.on.ready.unsubscribe(Y),I.on.ready.unsubscribe(V)}))})}}),this.Collection=(M=this,yi(Gr.prototype,function(F,V){this.db=M;var j=st,I=null;if(V)try{j=V()}catch(Z){I=Z}var G=F._ctx,V=G.table,F=V.hook.reading.fire;this._ctx={table:V,index:G.index,isPrimKey:!G.index||V.schema.primKey.keyPath&&G.index===V.schema.primKey.name,range:j,keysOnly:!1,dir:"next",unique:"",algorithm:null,filter:null,replayFilter:null,justLimit:!0,isMatch:null,offset:0,limit:1/0,error:I,or:G.or,valueMapper:F!==ai?F:null}})),this.Table=(k=this,yi(vn.prototype,function(B,Y,j){this.db=k,this._tx=j,this.name=B,this.schema=Y,this.hook=k._allTables[B]?k._allTables[B].hook:Cr(null,{creating:[sa,xt],reading:[uo,ai],updating:[oa,xt],deleting:[pr,xt]})})),this.Transaction=(_=this,yi(la.prototype,function(B,Y,j,I,G){var V=this;this.db=_,this.mode=B,this.storeNames=Y,this.schema=j,this.chromeTransactionDurability=I,this.idbtrans=null,this.on=Cr(this,"complete","error","abort"),this.parent=G||null,this.active=!0,this._reculock=0,this._blockedFuncs=[],this._resolve=null,this._reject=null,this._waitingFor=null,this._waitingQueue=null,this._spinCount=0,this._completion=new we(function(F,Z){V._resolve=F,V._reject=Z}),this._completion.then(function(){V.active=!1,V.on.complete.fire()},function(F){var Z=V.active;return V.active=!1,V.on.error.fire(F),V.parent?V.parent._reject(F):Z&&V.idbtrans&&V.idbtrans.abort(),Ut(F)})})),this.Version=(N=this,yi(Cf.prototype,function(B){this.db=N,this._cfg={version:B,storesSource:null,dbschema:{},tables:{},contentUpgrade:null}})),this.WhereClause=(H=this,yi(ze.prototype,function(B,Y,j){if(this.db=H,this._ctx={table:B,index:Y===":id"?null:Y,or:j},this._cmp=this._ascending=tt,this._descending=function(I,G){return tt(G,I)},this._max=function(I,G){return 0<tt(I,G)?I:G},this._min=function(I,G){return tt(I,G)<0?I:G},this._IDBKeyRange=H._deps.IDBKeyRange,!this._IDBKeyRange)throw new Ve.MissingAPI})),this.on("versionchange",function(B){0<B.newVersion?console.warn("Another connection wants to upgrade database '".concat(b.name,"'. Closing db now to resume the upgrade.")):console.warn("Another connection wants to delete database '".concat(b.name,"'. Closing db now to resume the delete request.")),b.close({disableAutoOpen:!1})}),this.on("blocked",function(B){!B.newVersion||B.newVersion<B.oldVersion?console.warn("Dexie.delete('".concat(b.name,"') was blocked")):console.warn("Upgrade '".concat(b.name,"' blocked by other connection holding version ").concat(B.oldVersion/10))}),this._maxKey=Ss(g.IDBKeyRange),this._createTransaction=function(B,Y,j,I){return new b.Transaction(B,Y,j,b._options.chromeTransactionDurability,I)},this._fireOnBlocked=function(B){b.on("blocked").fire(B),kr.filter(function(Y){return Y.name===b.name&&Y!==b&&!Y._state.vcFired}).map(function(Y){return Y.on("versionchange").fire(B)})},this.use(Bu),this.use(ml),this.use(Nf),this.use(_f),this.use(Ru);var K=new Proxy(this,{get:function(B,Y,j){if(Y==="_vip")return!0;if(Y==="table")return function(G){return Eo(b.table(G),K)};var I=Reflect.get(B,Y,j);return I instanceof vn?Eo(I,K):Y==="tables"?I.map(function(G){return Eo(G,K)}):Y==="_createTransaction"?function(){return Eo(I.apply(this,arguments),K)}:I}});this.vip=K,x.forEach(function(B){return B(b)})}var ws,ar=typeof Symbol<"u"&&"observable"in Symbol?Symbol.observable:"@@observable",ju=(gl.prototype.subscribe=function(d,g,b){return this._subscribe(d&&typeof d!="function"?d:{next:d,error:g,complete:b})},gl.prototype[ar]=function(){return this},gl);function gl(d){this._subscribe=d}try{ws={indexedDB:a.indexedDB||a.mozIndexedDB||a.webkitIndexedDB||a.msIndexedDB,IDBKeyRange:a.IDBKeyRange||a.webkitIDBKeyRange}}catch{ws={indexedDB:null,IDBKeyRange:null}}function Hu(d){var g,b=!1,x=new ju(function(M){var k=le(d),_,N=!1,H={},U={},K={get closed(){return N},unsubscribe:function(){N||(N=!0,_&&_.abort(),B&&un.storagemutated.unsubscribe(j))}};M.start&&M.start(K);var B=!1,Y=function(){return yn(I)},j=function(G){cl(H,G),pa(U,H)&&Y()},I=function(){var G,V,F;!N&&ws.indexedDB&&(H={},G={},_&&_.abort(),_=new AbortController,F=function(Z){var ee=Ot();try{k&&or();var ne=Gn(d,Z);return ne=k?ne.finally(Hn):ne}finally{ee&&Ct()}}(V={subscr:G,signal:_.signal,requery:Y,querier:d,trans:null}),Promise.resolve(F).then(function(Z){b=!0,g=Z,N||V.signal.aborted||(H={},function(ee){for(var ne in ee)if(S(ee,ne))return;return 1}(U=G)||B||(un(Tn,j),B=!0),yn(function(){return!N&&M.next&&M.next(Z)}))},function(Z){b=!1,["DatabaseClosedError","AbortError"].includes(Z==null?void 0:Z.name)||N||yn(function(){N||M.error&&M.error(Z)})}))};return setTimeout(Y,0),K});return x.hasValue=function(){return b},x.getValue=function(){return g},x}var Ji=Xr;function Sa(d){var g=Ni;try{Ni=!0,un.storagemutated.fire(d),ya(d,!0)}finally{Ni=g}}w(Ji,i(i({},li),{delete:function(d){return new Ji(d,{addons:[]}).delete()},exists:function(d){return new Ji(d,{addons:[]}).open().then(function(g){return g.close(),!0}).catch("NoSuchDatabaseError",function(){return!1})},getDatabaseNames:function(d){try{return g=Ji.dependencies,b=g.indexedDB,g=g.IDBKeyRange,(al(b)?Promise.resolve(b.databases()).then(function(x){return x.map(function(M){return M.name}).filter(function(M){return M!==gr})}):ca(b,g).toCollection().primaryKeys()).then(d)}catch{return Ut(new Ve.MissingAPI)}var g,b},defineClass:function(){return function(d){h(this,d)}},ignoreTransaction:function(d){return je.trans?Kr(je.transless,d):d()},vip:fa,async:function(d){return function(){try{var g=So(d.apply(this,arguments));return g&&typeof g.then=="function"?g:we.resolve(g)}catch(b){return Ut(b)}}},spawn:function(d,g,b){try{var x=So(d.apply(b,g||[]));return x&&typeof x.then=="function"?x:we.resolve(x)}catch(M){return Ut(M)}},currentTransaction:{get:function(){return je.trans||null}},waitFor:function(d,g){return g=we.resolve(typeof d=="function"?Ji.ignoreTransaction(d):d).timeout(g||6e4),je.trans?je.trans.waitFor(g):g},Promise:we,debug:{get:function(){return jn},set:function(d){Zo(d)}},derive:A,extend:h,props:w,override:_e,Events:Cr,on:un,liveQuery:Hu,extendObservabilitySet:cl,getByKeyPath:Re,setByKeyPath:Fe,delByKeyPath:function(d,g){typeof g=="string"?Fe(d,g,void 0):"length"in g&&[].map.call(g,function(b){Fe(d,b,void 0)})},shallowClone:me,deepClone:Ln,getObjectDiff:dl,cmp:tt,asap:ve,minKey:-1/0,addons:[],connections:kr,errnames:gn,dependencies:ws,cache:Fi,semVer:"4.0.11",version:"4.0.11".split(".").map(function(d){return parseInt(d)}).reduce(function(d,g,b){return d+g/Math.pow(10,2*b)})})),Ji.maxKey=Ss(Ji.dependencies.IDBKeyRange),typeof dispatchEvent<"u"&&typeof addEventListener<"u"&&(un(Tn,function(d){Ni||(d=new CustomEvent(vi,{detail:d}),Ni=!0,dispatchEvent(d),Ni=!1)}),addEventListener(vi,function(d){d=d.detail,Ni||Sa(d)}));var Ts,Ni=!1,Qn=function(){};return typeof BroadcastChannel<"u"&&((Qn=function(){(Ts=new BroadcastChannel(vi)).onmessage=function(d){return d.data&&Sa(d.data)}})(),typeof Ts.unref=="function"&&Ts.unref(),un(Tn,function(d){Ni||Ts.postMessage(d)})),typeof addEventListener<"u"&&(addEventListener("pagehide",function(d){if(!Xr.disableBfCache&&d.persisted){jn&&console.debug("Dexie: handling persisted pagehide"),Ts!=null&&Ts.close();for(var g=0,b=kr;g<b.length;g++)b[g].close({disableAutoOpen:!1})}}),addEventListener("pageshow",function(d){!Xr.disableBfCache&&d.persisted&&(jn&&console.debug("Dexie: handling persisted pageshow"),Qn(),Sa({all:new On(-1/0,[[]])}))})),we.rejectionMapper=function(d,g){return!d||d instanceof xe||d instanceof TypeError||d instanceof SyntaxError||!d.name||!oi[d.name]?d:(g=new oi[d.name](g||d.message,d),"stack"in d&&T(g,"stack",{get:function(){return this.inner.stack}}),g)},Zo(jn),i(Xr,Object.freeze({__proto__:null,Dexie:Xr,liveQuery:Hu,Entity:Vt,cmp:tt,PropModification:bn,replacePrefix:function(d,g){return new bn({replacePrefix:[d,g]})},add:function(d){return new bn({add:d})},remove:function(d){return new bn({remove:d})},default:Xr,RangeSet:On,mergeRanges:Xi,rangesOverlap:_u}),{default:Xr}),Xr})}(Pc)),Pc.exports}var qS=HS();const Ph=Mu(qS),Ky=Symbol.for("Dexie"),Jc=globalThis[Ky]||(globalThis[Ky]=Ph);if(Ph.semVer!==Jc.semVer)throw new Error(`Two different versions of Dexie loaded in the same app: ${Ph.semVer} and ${Jc.semVer}`);const{liveQuery:jA,mergeRanges:HA,rangesOverlap:qA,RangeSet:UA,cmp:VA,Entity:IA,PropModification:KA,replacePrefix:PA,add:YA,remove:GA}=Jc;class US extends Jc{constructor(){super("EditorDB");ph(this,"documents");ph(this,"images");this.version(1).stores({documents:"++id, title, createdAt, updatedAt",images:"++id, documentId, uploadedAt"})}}const Pt=new US,Yc={async create(r){const e=new Date;return await Pt.documents.add({...r,createdAt:e,updatedAt:e})},async getById(r){return await Pt.documents.get(r)},async getAll(){return await Pt.documents.orderBy("updatedAt").reverse().toArray()},async update(r,e){return await Pt.documents.update(r,{...e,updatedAt:new Date})},async delete(r){await Pt.transaction("rw",[Pt.documents,Pt.images],async()=>{await Pt.documents.delete(r),await Pt.images.where("documentId").equals(r).delete()})},async searchByTitle(r){return await Pt.documents.where("title").startsWithIgnoreCase(r).toArray()},async getWithImages(r){const e=await Pt.documents.get(r),t=await Pt.images.where("documentId").equals(r).toArray();return{document:e,images:t}}},hu={async create(r){return await Pt.images.add({...r,uploadedAt:new Date})},async getById(r){return await Pt.images.get(r)},async getAll(){return await Pt.images.orderBy("uploadedAt").reverse().toArray()},async getByDocumentId(r){return(await Pt.images.where("documentId").equals(r).toArray()).sort((t,i)=>i.uploadedAt.getTime()-t.uploadedAt.getTime())},async getUnassociated(){return(await Pt.images.filter(e=>e.documentId===void 0||e.documentId===null).toArray()).sort((e,t)=>t.uploadedAt.getTime()-e.uploadedAt.getTime())},async associateWithDocument(r,e){return await Pt.images.update(r,{documentId:e})},async removeAssociation(r){return await Pt.images.update(r,{documentId:void 0})},async delete(r){await Pt.images.delete(r)},async deleteByDocumentId(r){return await Pt.images.where("documentId").equals(r).delete()},async cleanupOrphaned(){const r=await Pt.images.toArray(),e=new Set((await Pt.documents.toArray()).map(i=>i.id)),t=r.filter(i=>i.documentId!==void 0&&i.documentId!==null&&!e.has(i.documentId)||i.documentId===void 0||i.documentId===null);if(t.length>0){const i=t.map(o=>o.id);await Pt.images.bulkDelete(i)}return t.length}},VS=async()=>{try{Pt.version(1).stores({documents:"++id, title, createdAt, updatedAt",images:"++id, documentId, uploadedAt"}),await Pt.open(),console.log("Database migrations completed successfully")}catch(r){throw console.error("Migration failed:",r),r}};VS().catch(console.error);const IS=()=>{const[r,e]=Pe.useState(250),[t,i]=Pe.useState(400),o=Pe.useRef(!1),a=Pe.useRef(!1),u=Pe.useRef(null),f=Pe.useCallback(S=>{o.current=!0,S.preventDefault()},[]),h=Pe.useCallback(S=>{a.current=!0,S.preventDefault()},[]),m=Pe.useCallback(S=>{if(!u.current)return;const w=u.current.getBoundingClientRect(),O=w.width;if(o.current){const T=S.clientX-w.left,A=200,R=O-t-400;e(Math.max(A,Math.min(R,T)))}if(a.current){const T=w.right-S.clientX,A=300,R=O-r-400;i(Math.max(A,Math.min(R,T)))}},[r,t]),v=Pe.useCallback(()=>{o.current=!1,a.current=!1},[]);return Pe.useEffect(()=>(document.addEventListener("mousemove",m),document.addEventListener("mouseup",v),()=>{document.removeEventListener("mousemove",m),document.removeEventListener("mouseup",v)}),[m,v]),{leftPanelWidth:r,rightPanelWidth:t,containerRef:u,handleLeftMouseDown:f,handleRightMouseDown:h}},KS="_navigationPanel_19j7j_3",PS="_header_19j7j_21",YS="_title_19j7j_33",GS="_navigation_19j7j_3",$S="_navList_19j7j_57",XS="_navItem_19j7j_69",FS="_navLink_19j7j_77",Ei={navigationPanel:KS,header:PS,title:YS,navigation:GS,navList:$S,navItem:XS,navLink:FS},QS=({width:r})=>ue.jsxs("div",{className:Ei.navigationPanel,style:{width:`${r}px`},children:[ue.jsx("div",{className:Ei.header,children:ue.jsx("h2",{className:Ei.title,children:"Navigation"})}),ue.jsx("nav",{className:Ei.navigation,children:ue.jsxs("ul",{className:Ei.navList,children:[ue.jsx("li",{className:Ei.navItem,children:ue.jsx("a",{href:"#prologue",className:Ei.navLink,children:"Prologue"})}),ue.jsx("li",{className:Ei.navItem,children:ue.jsx("a",{href:"#chapter1",className:Ei.navLink,children:"Chapter 1"})}),ue.jsx("li",{className:Ei.navItem,children:ue.jsx("a",{href:"#chapter2",className:Ei.navLink,children:"Chapter 2"})})]})})]});function Kn(r){this.content=r}Kn.prototype={constructor:Kn,find:function(r){for(var e=0;e<this.content.length;e+=2)if(this.content[e]===r)return e;return-1},get:function(r){var e=this.find(r);return e==-1?void 0:this.content[e+1]},update:function(r,e,t){var i=t&&t!=r?this.remove(t):this,o=i.find(r),a=i.content.slice();return o==-1?a.push(t||r,e):(a[o+1]=e,t&&(a[o]=t)),new Kn(a)},remove:function(r){var e=this.find(r);if(e==-1)return this;var t=this.content.slice();return t.splice(e,2),new Kn(t)},addToStart:function(r,e){return new Kn([r,e].concat(this.remove(r).content))},addToEnd:function(r,e){var t=this.remove(r).content.slice();return t.push(r,e),new Kn(t)},addBefore:function(r,e,t){var i=this.remove(e),o=i.content.slice(),a=i.find(r);return o.splice(a==-1?o.length:a,0,e,t),new Kn(o)},forEach:function(r){for(var e=0;e<this.content.length;e+=2)r(this.content[e],this.content[e+1])},prepend:function(r){return r=Kn.from(r),r.size?new Kn(r.content.concat(this.subtract(r).content)):this},append:function(r){return r=Kn.from(r),r.size?new Kn(this.subtract(r).content.concat(r.content)):this},subtract:function(r){var e=this;r=Kn.from(r);for(var t=0;t<r.content.length;t+=2)e=e.remove(r.content[t]);return e},toObject:function(){var r={};return this.forEach(function(e,t){r[e]=t}),r},get size(){return this.content.length>>1}};Kn.from=function(r){if(r instanceof Kn)return r;var e=[];if(r)for(var t in r)e.push(t,r[t]);return new Kn(e)};function fv(r,e,t){for(let i=0;;i++){if(i==r.childCount||i==e.childCount)return r.childCount==e.childCount?null:t;let o=r.child(i),a=e.child(i);if(o==a){t+=o.nodeSize;continue}if(!o.sameMarkup(a))return t;if(o.isText&&o.text!=a.text){for(let u=0;o.text[u]==a.text[u];u++)t++;return t}if(o.content.size||a.content.size){let u=fv(o.content,a.content,t+1);if(u!=null)return u}t+=o.nodeSize}}function dv(r,e,t,i){for(let o=r.childCount,a=e.childCount;;){if(o==0||a==0)return o==a?null:{a:t,b:i};let u=r.child(--o),f=e.child(--a),h=u.nodeSize;if(u==f){t-=h,i-=h;continue}if(!u.sameMarkup(f))return{a:t,b:i};if(u.isText&&u.text!=f.text){let m=0,v=Math.min(u.text.length,f.text.length);for(;m<v&&u.text[u.text.length-m-1]==f.text[f.text.length-m-1];)m++,t--,i--;return{a:t,b:i}}if(u.content.size||f.content.size){let m=dv(u.content,f.content,t-1,i-1);if(m)return m}t-=h,i-=h}}class ae{constructor(e,t){if(this.content=e,this.size=t||0,t==null)for(let i=0;i<e.length;i++)this.size+=e[i].nodeSize}nodesBetween(e,t,i,o=0,a){for(let u=0,f=0;f<t;u++){let h=this.content[u],m=f+h.nodeSize;if(m>e&&i(h,o+f,a||null,u)!==!1&&h.content.size){let v=f+1;h.nodesBetween(Math.max(0,e-v),Math.min(h.content.size,t-v),i,o+v)}f=m}}descendants(e){this.nodesBetween(0,this.size,e)}textBetween(e,t,i,o){let a="",u=!0;return this.nodesBetween(e,t,(f,h)=>{let m=f.isText?f.text.slice(Math.max(e,h)-h,t-h):f.isLeaf?o?typeof o=="function"?o(f):o:f.type.spec.leafText?f.type.spec.leafText(f):"":"";f.isBlock&&(f.isLeaf&&m||f.isTextblock)&&i&&(u?u=!1:a+=i),a+=m},0),a}append(e){if(!e.size)return this;if(!this.size)return e;let t=this.lastChild,i=e.firstChild,o=this.content.slice(),a=0;for(t.isText&&t.sameMarkup(i)&&(o[o.length-1]=t.withText(t.text+i.text),a=1);a<e.content.length;a++)o.push(e.content[a]);return new ae(o,this.size+e.size)}cut(e,t=this.size){if(e==0&&t==this.size)return this;let i=[],o=0;if(t>e)for(let a=0,u=0;u<t;a++){let f=this.content[a],h=u+f.nodeSize;h>e&&((u<e||h>t)&&(f.isText?f=f.cut(Math.max(0,e-u),Math.min(f.text.length,t-u)):f=f.cut(Math.max(0,e-u-1),Math.min(f.content.size,t-u-1))),i.push(f),o+=f.nodeSize),u=h}return new ae(i,o)}cutByIndex(e,t){return e==t?ae.empty:e==0&&t==this.content.length?this:new ae(this.content.slice(e,t))}replaceChild(e,t){let i=this.content[e];if(i==t)return this;let o=this.content.slice(),a=this.size+t.nodeSize-i.nodeSize;return o[e]=t,new ae(o,a)}addToStart(e){return new ae([e].concat(this.content),this.size+e.nodeSize)}addToEnd(e){return new ae(this.content.concat(e),this.size+e.nodeSize)}eq(e){if(this.content.length!=e.content.length)return!1;for(let t=0;t<this.content.length;t++)if(!this.content[t].eq(e.content[t]))return!1;return!0}get firstChild(){return this.content.length?this.content[0]:null}get lastChild(){return this.content.length?this.content[this.content.length-1]:null}get childCount(){return this.content.length}child(e){let t=this.content[e];if(!t)throw new RangeError("Index "+e+" out of range for "+this);return t}maybeChild(e){return this.content[e]||null}forEach(e){for(let t=0,i=0;t<this.content.length;t++){let o=this.content[t];e(o,i,t),i+=o.nodeSize}}findDiffStart(e,t=0){return fv(this,e,t)}findDiffEnd(e,t=this.size,i=e.size){return dv(this,e,t,i)}findIndex(e,t=-1){if(e==0)return zc(0,e);if(e==this.size)return zc(this.content.length,e);if(e>this.size||e<0)throw new RangeError(`Position ${e} outside of fragment (${this})`);for(let i=0,o=0;;i++){let a=this.child(i),u=o+a.nodeSize;if(u>=e)return u==e||t>0?zc(i+1,u):zc(i,o);o=u}}toString(){return"<"+this.toStringInner()+">"}toStringInner(){return this.content.join(", ")}toJSON(){return this.content.length?this.content.map(e=>e.toJSON()):null}static fromJSON(e,t){if(!t)return ae.empty;if(!Array.isArray(t))throw new RangeError("Invalid input for Fragment.fromJSON");return new ae(t.map(e.nodeFromJSON))}static fromArray(e){if(!e.length)return ae.empty;let t,i=0;for(let o=0;o<e.length;o++){let a=e[o];i+=a.nodeSize,o&&a.isText&&e[o-1].sameMarkup(a)?(t||(t=e.slice(0,o)),t[t.length-1]=a.withText(t[t.length-1].text+a.text)):t&&t.push(a)}return new ae(t||e,i)}static from(e){if(!e)return ae.empty;if(e instanceof ae)return e;if(Array.isArray(e))return this.fromArray(e);if(e.attrs)return new ae([e],e.nodeSize);throw new RangeError("Can not convert "+e+" to a Fragment"+(e.nodesBetween?" (looks like multiple versions of prosemirror-model were loaded)":""))}}ae.empty=new ae([],0);const xh={index:0,offset:0};function zc(r,e){return xh.index=r,xh.offset=e,xh}function Zc(r,e){if(r===e)return!0;if(!(r&&typeof r=="object")||!(e&&typeof e=="object"))return!1;let t=Array.isArray(r);if(Array.isArray(e)!=t)return!1;if(t){if(r.length!=e.length)return!1;for(let i=0;i<r.length;i++)if(!Zc(r[i],e[i]))return!1}else{for(let i in r)if(!(i in e)||!Zc(r[i],e[i]))return!1;for(let i in e)if(!(i in r))return!1}return!0}let Lt=class Yh{constructor(e,t){this.type=e,this.attrs=t}addToSet(e){let t,i=!1;for(let o=0;o<e.length;o++){let a=e[o];if(this.eq(a))return e;if(this.type.excludes(a.type))t||(t=e.slice(0,o));else{if(a.type.excludes(this.type))return e;!i&&a.type.rank>this.type.rank&&(t||(t=e.slice(0,o)),t.push(this),i=!0),t&&t.push(a)}}return t||(t=e.slice()),i||t.push(this),t}removeFromSet(e){for(let t=0;t<e.length;t++)if(this.eq(e[t]))return e.slice(0,t).concat(e.slice(t+1));return e}isInSet(e){for(let t=0;t<e.length;t++)if(this.eq(e[t]))return!0;return!1}eq(e){return this==e||this.type==e.type&&Zc(this.attrs,e.attrs)}toJSON(){let e={type:this.type.name};for(let t in this.attrs){e.attrs=this.attrs;break}return e}static fromJSON(e,t){if(!t)throw new RangeError("Invalid input for Mark.fromJSON");let i=e.marks[t.type];if(!i)throw new RangeError(`There is no mark type ${t.type} in this schema`);let o=i.create(t.attrs);return i.checkAttrs(o.attrs),o}static sameSet(e,t){if(e==t)return!0;if(e.length!=t.length)return!1;for(let i=0;i<e.length;i++)if(!e[i].eq(t[i]))return!1;return!0}static setFrom(e){if(!e||Array.isArray(e)&&e.length==0)return Yh.none;if(e instanceof Yh)return[e];let t=e.slice();return t.sort((i,o)=>i.type.rank-o.type.rank),t}};Lt.none=[];class Wc extends Error{}class De{constructor(e,t,i){this.content=e,this.openStart=t,this.openEnd=i}get size(){return this.content.size-this.openStart-this.openEnd}insertAt(e,t){let i=pv(this.content,e+this.openStart,t);return i&&new De(i,this.openStart,this.openEnd)}removeBetween(e,t){return new De(hv(this.content,e+this.openStart,t+this.openStart),this.openStart,this.openEnd)}eq(e){return this.content.eq(e.content)&&this.openStart==e.openStart&&this.openEnd==e.openEnd}toString(){return this.content+"("+this.openStart+","+this.openEnd+")"}toJSON(){if(!this.content.size)return null;let e={content:this.content.toJSON()};return this.openStart>0&&(e.openStart=this.openStart),this.openEnd>0&&(e.openEnd=this.openEnd),e}static fromJSON(e,t){if(!t)return De.empty;let i=t.openStart||0,o=t.openEnd||0;if(typeof i!="number"||typeof o!="number")throw new RangeError("Invalid input for Slice.fromJSON");return new De(ae.fromJSON(e,t.content),i,o)}static maxOpen(e,t=!0){let i=0,o=0;for(let a=e.firstChild;a&&!a.isLeaf&&(t||!a.type.spec.isolating);a=a.firstChild)i++;for(let a=e.lastChild;a&&!a.isLeaf&&(t||!a.type.spec.isolating);a=a.lastChild)o++;return new De(e,i,o)}}De.empty=new De(ae.empty,0,0);function hv(r,e,t){let{index:i,offset:o}=r.findIndex(e),a=r.maybeChild(i),{index:u,offset:f}=r.findIndex(t);if(o==e||a.isText){if(f!=t&&!r.child(u).isText)throw new RangeError("Removing non-flat range");return r.cut(0,e).append(r.cut(t))}if(i!=u)throw new RangeError("Removing non-flat range");return r.replaceChild(i,a.copy(hv(a.content,e-o-1,t-o-1)))}function pv(r,e,t,i){let{index:o,offset:a}=r.findIndex(e),u=r.maybeChild(o);if(a==e||u.isText)return r.cut(0,e).append(t).append(r.cut(e));let f=pv(u.content,e-a-1,t);return f&&r.replaceChild(o,u.copy(f))}function JS(r,e,t){if(t.openStart>r.depth)throw new Wc("Inserted content deeper than insertion position");if(r.depth-t.openStart!=e.depth-t.openEnd)throw new Wc("Inconsistent open depths");return mv(r,e,t,0)}function mv(r,e,t,i){let o=r.index(i),a=r.node(i);if(o==e.index(i)&&i<r.depth-t.openStart){let u=mv(r,e,t,i+1);return a.copy(a.content.replaceChild(o,u))}else if(t.content.size)if(!t.openStart&&!t.openEnd&&r.depth==i&&e.depth==i){let u=r.parent,f=u.content;return Io(u,f.cut(0,r.parentOffset).append(t.content).append(f.cut(e.parentOffset)))}else{let{start:u,end:f}=ZS(t,r);return Io(a,yv(r,u,f,e,i))}else return Io(a,ef(r,e,i))}function gv(r,e){if(!e.type.compatibleContent(r.type))throw new Wc("Cannot join "+e.type.name+" onto "+r.type.name)}function Gh(r,e,t){let i=r.node(t);return gv(i,e.node(t)),i}function Vo(r,e){let t=e.length-1;t>=0&&r.isText&&r.sameMarkup(e[t])?e[t]=r.withText(e[t].text+r.text):e.push(r)}function cu(r,e,t,i){let o=(e||r).node(t),a=0,u=e?e.index(t):o.childCount;r&&(a=r.index(t),r.depth>t?a++:r.textOffset&&(Vo(r.nodeAfter,i),a++));for(let f=a;f<u;f++)Vo(o.child(f),i);e&&e.depth==t&&e.textOffset&&Vo(e.nodeBefore,i)}function Io(r,e){return r.type.checkContent(e),r.copy(e)}function yv(r,e,t,i,o){let a=r.depth>o&&Gh(r,e,o+1),u=i.depth>o&&Gh(t,i,o+1),f=[];return cu(null,r,o,f),a&&u&&e.index(o)==t.index(o)?(gv(a,u),Vo(Io(a,yv(r,e,t,i,o+1)),f)):(a&&Vo(Io(a,ef(r,e,o+1)),f),cu(e,t,o,f),u&&Vo(Io(u,ef(t,i,o+1)),f)),cu(i,null,o,f),new ae(f)}function ef(r,e,t){let i=[];if(cu(null,r,t,i),r.depth>t){let o=Gh(r,e,t+1);Vo(Io(o,ef(r,e,t+1)),i)}return cu(e,null,t,i),new ae(i)}function ZS(r,e){let t=e.depth-r.openStart,o=e.node(t).copy(r.content);for(let a=t-1;a>=0;a--)o=e.node(a).copy(ae.from(o));return{start:o.resolveNoCache(r.openStart+t),end:o.resolveNoCache(o.content.size-r.openEnd-t)}}class pu{constructor(e,t,i){this.pos=e,this.path=t,this.parentOffset=i,this.depth=t.length/3-1}resolveDepth(e){return e==null?this.depth:e<0?this.depth+e:e}get parent(){return this.node(this.depth)}get doc(){return this.node(0)}node(e){return this.path[this.resolveDepth(e)*3]}index(e){return this.path[this.resolveDepth(e)*3+1]}indexAfter(e){return e=this.resolveDepth(e),this.index(e)+(e==this.depth&&!this.textOffset?0:1)}start(e){return e=this.resolveDepth(e),e==0?0:this.path[e*3-1]+1}end(e){return e=this.resolveDepth(e),this.start(e)+this.node(e).content.size}before(e){if(e=this.resolveDepth(e),!e)throw new RangeError("There is no position before the top-level node");return e==this.depth+1?this.pos:this.path[e*3-1]}after(e){if(e=this.resolveDepth(e),!e)throw new RangeError("There is no position after the top-level node");return e==this.depth+1?this.pos:this.path[e*3-1]+this.path[e*3].nodeSize}get textOffset(){return this.pos-this.path[this.path.length-1]}get nodeAfter(){let e=this.parent,t=this.index(this.depth);if(t==e.childCount)return null;let i=this.pos-this.path[this.path.length-1],o=e.child(t);return i?e.child(t).cut(i):o}get nodeBefore(){let e=this.index(this.depth),t=this.pos-this.path[this.path.length-1];return t?this.parent.child(e).cut(0,t):e==0?null:this.parent.child(e-1)}posAtIndex(e,t){t=this.resolveDepth(t);let i=this.path[t*3],o=t==0?0:this.path[t*3-1]+1;for(let a=0;a<e;a++)o+=i.child(a).nodeSize;return o}marks(){let e=this.parent,t=this.index();if(e.content.size==0)return Lt.none;if(this.textOffset)return e.child(t).marks;let i=e.maybeChild(t-1),o=e.maybeChild(t);if(!i){let f=i;i=o,o=f}let a=i.marks;for(var u=0;u<a.length;u++)a[u].type.spec.inclusive===!1&&(!o||!a[u].isInSet(o.marks))&&(a=a[u--].removeFromSet(a));return a}marksAcross(e){let t=this.parent.maybeChild(this.index());if(!t||!t.isInline)return null;let i=t.marks,o=e.parent.maybeChild(e.index());for(var a=0;a<i.length;a++)i[a].type.spec.inclusive===!1&&(!o||!i[a].isInSet(o.marks))&&(i=i[a--].removeFromSet(i));return i}sharedDepth(e){for(let t=this.depth;t>0;t--)if(this.start(t)<=e&&this.end(t)>=e)return t;return 0}blockRange(e=this,t){if(e.pos<this.pos)return e.blockRange(this);for(let i=this.depth-(this.parent.inlineContent||this.pos==e.pos?1:0);i>=0;i--)if(e.pos<=this.end(i)&&(!t||t(this.node(i))))return new tf(this,e,i);return null}sameParent(e){return this.pos-this.parentOffset==e.pos-e.parentOffset}max(e){return e.pos>this.pos?e:this}min(e){return e.pos<this.pos?e:this}toString(){let e="";for(let t=1;t<=this.depth;t++)e+=(e?"/":"")+this.node(t).type.name+"_"+this.index(t-1);return e+":"+this.parentOffset}static resolve(e,t){if(!(t>=0&&t<=e.content.size))throw new RangeError("Position "+t+" out of range");let i=[],o=0,a=t;for(let u=e;;){let{index:f,offset:h}=u.content.findIndex(a),m=a-h;if(i.push(u,f,o+h),!m||(u=u.child(f),u.isText))break;a=m-1,o+=h+1}return new pu(t,i,a)}static resolveCached(e,t){let i=Py.get(e);if(i)for(let a=0;a<i.elts.length;a++){let u=i.elts[a];if(u.pos==t)return u}else Py.set(e,i=new WS);let o=i.elts[i.i]=pu.resolve(e,t);return i.i=(i.i+1)%ex,o}}class WS{constructor(){this.elts=[],this.i=0}}const ex=12,Py=new WeakMap;class tf{constructor(e,t,i){this.$from=e,this.$to=t,this.depth=i}get start(){return this.$from.before(this.depth+1)}get end(){return this.$to.after(this.depth+1)}get parent(){return this.$from.node(this.depth)}get startIndex(){return this.$from.index(this.depth)}get endIndex(){return this.$to.indexAfter(this.depth)}}const tx=Object.create(null);let eo=class $h{constructor(e,t,i,o=Lt.none){this.type=e,this.attrs=t,this.marks=o,this.content=i||ae.empty}get children(){return this.content.content}get nodeSize(){return this.isLeaf?1:2+this.content.size}get childCount(){return this.content.childCount}child(e){return this.content.child(e)}maybeChild(e){return this.content.maybeChild(e)}forEach(e){this.content.forEach(e)}nodesBetween(e,t,i,o=0){this.content.nodesBetween(e,t,i,o,this)}descendants(e){this.nodesBetween(0,this.content.size,e)}get textContent(){return this.isLeaf&&this.type.spec.leafText?this.type.spec.leafText(this):this.textBetween(0,this.content.size,"")}textBetween(e,t,i,o){return this.content.textBetween(e,t,i,o)}get firstChild(){return this.content.firstChild}get lastChild(){return this.content.lastChild}eq(e){return this==e||this.sameMarkup(e)&&this.content.eq(e.content)}sameMarkup(e){return this.hasMarkup(e.type,e.attrs,e.marks)}hasMarkup(e,t,i){return this.type==e&&Zc(this.attrs,t||e.defaultAttrs||tx)&&Lt.sameSet(this.marks,i||Lt.none)}copy(e=null){return e==this.content?this:new $h(this.type,this.attrs,e,this.marks)}mark(e){return e==this.marks?this:new $h(this.type,this.attrs,this.content,e)}cut(e,t=this.content.size){return e==0&&t==this.content.size?this:this.copy(this.content.cut(e,t))}slice(e,t=this.content.size,i=!1){if(e==t)return De.empty;let o=this.resolve(e),a=this.resolve(t),u=i?0:o.sharedDepth(t),f=o.start(u),m=o.node(u).content.cut(o.pos-f,a.pos-f);return new De(m,o.depth-u,a.depth-u)}replace(e,t,i){return JS(this.resolve(e),this.resolve(t),i)}nodeAt(e){for(let t=this;;){let{index:i,offset:o}=t.content.findIndex(e);if(t=t.maybeChild(i),!t)return null;if(o==e||t.isText)return t;e-=o+1}}childAfter(e){let{index:t,offset:i}=this.content.findIndex(e);return{node:this.content.maybeChild(t),index:t,offset:i}}childBefore(e){if(e==0)return{node:null,index:0,offset:0};let{index:t,offset:i}=this.content.findIndex(e);if(i<e)return{node:this.content.child(t),index:t,offset:i};let o=this.content.child(t-1);return{node:o,index:t-1,offset:i-o.nodeSize}}resolve(e){return pu.resolveCached(this,e)}resolveNoCache(e){return pu.resolve(this,e)}rangeHasMark(e,t,i){let o=!1;return t>e&&this.nodesBetween(e,t,a=>(i.isInSet(a.marks)&&(o=!0),!o)),o}get isBlock(){return this.type.isBlock}get isTextblock(){return this.type.isTextblock}get inlineContent(){return this.type.inlineContent}get isInline(){return this.type.isInline}get isText(){return this.type.isText}get isLeaf(){return this.type.isLeaf}get isAtom(){return this.type.isAtom}toString(){if(this.type.spec.toDebugString)return this.type.spec.toDebugString(this);let e=this.type.name;return this.content.size&&(e+="("+this.content.toStringInner()+")"),vv(this.marks,e)}contentMatchAt(e){let t=this.type.contentMatch.matchFragment(this.content,0,e);if(!t)throw new Error("Called contentMatchAt on a node with invalid content");return t}canReplace(e,t,i=ae.empty,o=0,a=i.childCount){let u=this.contentMatchAt(e).matchFragment(i,o,a),f=u&&u.matchFragment(this.content,t);if(!f||!f.validEnd)return!1;for(let h=o;h<a;h++)if(!this.type.allowsMarks(i.child(h).marks))return!1;return!0}canReplaceWith(e,t,i,o){if(o&&!this.type.allowsMarks(o))return!1;let a=this.contentMatchAt(e).matchType(i),u=a&&a.matchFragment(this.content,t);return u?u.validEnd:!1}canAppend(e){return e.content.size?this.canReplace(this.childCount,this.childCount,e.content):this.type.compatibleContent(e.type)}check(){this.type.checkContent(this.content),this.type.checkAttrs(this.attrs);let e=Lt.none;for(let t=0;t<this.marks.length;t++){let i=this.marks[t];i.type.checkAttrs(i.attrs),e=i.addToSet(e)}if(!Lt.sameSet(e,this.marks))throw new RangeError(`Invalid collection of marks for node ${this.type.name}: ${this.marks.map(t=>t.type.name)}`);this.content.forEach(t=>t.check())}toJSON(){let e={type:this.type.name};for(let t in this.attrs){e.attrs=this.attrs;break}return this.content.size&&(e.content=this.content.toJSON()),this.marks.length&&(e.marks=this.marks.map(t=>t.toJSON())),e}static fromJSON(e,t){if(!t)throw new RangeError("Invalid input for Node.fromJSON");let i;if(t.marks){if(!Array.isArray(t.marks))throw new RangeError("Invalid mark data for Node.fromJSON");i=t.marks.map(e.markFromJSON)}if(t.type=="text"){if(typeof t.text!="string")throw new RangeError("Invalid text node in JSON");return e.text(t.text,i)}let o=ae.fromJSON(e,t.content),a=e.nodeType(t.type).create(t.attrs,o,i);return a.type.checkAttrs(a.attrs),a}};eo.prototype.text=void 0;class nf extends eo{constructor(e,t,i,o){if(super(e,t,null,o),!i)throw new RangeError("Empty text nodes are not allowed");this.text=i}toString(){return this.type.spec.toDebugString?this.type.spec.toDebugString(this):vv(this.marks,JSON.stringify(this.text))}get textContent(){return this.text}textBetween(e,t){return this.text.slice(e,t)}get nodeSize(){return this.text.length}mark(e){return e==this.marks?this:new nf(this.type,this.attrs,this.text,e)}withText(e){return e==this.text?this:new nf(this.type,this.attrs,e,this.marks)}cut(e=0,t=this.text.length){return e==0&&t==this.text.length?this:this.withText(this.text.slice(e,t))}eq(e){return this.sameMarkup(e)&&this.text==e.text}toJSON(){let e=super.toJSON();return e.text=this.text,e}}function vv(r,e){for(let t=r.length-1;t>=0;t--)e=r[t].type.name+"("+e+")";return e}class Go{constructor(e){this.validEnd=e,this.next=[],this.wrapCache=[]}static parse(e,t){let i=new nx(e,t);if(i.next==null)return Go.empty;let o=bv(i);i.next&&i.err("Unexpected trailing text");let a=ux(ax(o));return cx(a,i),a}matchType(e){for(let t=0;t<this.next.length;t++)if(this.next[t].type==e)return this.next[t].next;return null}matchFragment(e,t=0,i=e.childCount){let o=this;for(let a=t;o&&a<i;a++)o=o.matchType(e.child(a).type);return o}get inlineContent(){return this.next.length!=0&&this.next[0].type.isInline}get defaultType(){for(let e=0;e<this.next.length;e++){let{type:t}=this.next[e];if(!(t.isText||t.hasRequiredAttrs()))return t}return null}compatible(e){for(let t=0;t<this.next.length;t++)for(let i=0;i<e.next.length;i++)if(this.next[t].type==e.next[i].type)return!0;return!1}fillBefore(e,t=!1,i=0){let o=[this];function a(u,f){let h=u.matchFragment(e,i);if(h&&(!t||h.validEnd))return ae.from(f.map(m=>m.createAndFill()));for(let m=0;m<u.next.length;m++){let{type:v,next:S}=u.next[m];if(!(v.isText||v.hasRequiredAttrs())&&o.indexOf(S)==-1){o.push(S);let w=a(S,f.concat(v));if(w)return w}}return null}return a(this,[])}findWrapping(e){for(let i=0;i<this.wrapCache.length;i+=2)if(this.wrapCache[i]==e)return this.wrapCache[i+1];let t=this.computeWrapping(e);return this.wrapCache.push(e,t),t}computeWrapping(e){let t=Object.create(null),i=[{match:this,type:null,via:null}];for(;i.length;){let o=i.shift(),a=o.match;if(a.matchType(e)){let u=[];for(let f=o;f.type;f=f.via)u.push(f.type);return u.reverse()}for(let u=0;u<a.next.length;u++){let{type:f,next:h}=a.next[u];!f.isLeaf&&!f.hasRequiredAttrs()&&!(f.name in t)&&(!o.type||h.validEnd)&&(i.push({match:f.contentMatch,type:f,via:o}),t[f.name]=!0)}}return null}get edgeCount(){return this.next.length}edge(e){if(e>=this.next.length)throw new RangeError(`There's no ${e}th edge in this content match`);return this.next[e]}toString(){let e=[];function t(i){e.push(i);for(let o=0;o<i.next.length;o++)e.indexOf(i.next[o].next)==-1&&t(i.next[o].next)}return t(this),e.map((i,o)=>{let a=o+(i.validEnd?"*":" ")+" ";for(let u=0;u<i.next.length;u++)a+=(u?", ":"")+i.next[u].type.name+"->"+e.indexOf(i.next[u].next);return a}).join(`
`)}}Go.empty=new Go(!0);class nx{constructor(e,t){this.string=e,this.nodeTypes=t,this.inline=null,this.pos=0,this.tokens=e.split(/\s*(?=\b|\W|$)/),this.tokens[this.tokens.length-1]==""&&this.tokens.pop(),this.tokens[0]==""&&this.tokens.shift()}get next(){return this.tokens[this.pos]}eat(e){return this.next==e&&(this.pos++||!0)}err(e){throw new SyntaxError(e+" (in content expression '"+this.string+"')")}}function bv(r){let e=[];do e.push(rx(r));while(r.eat("|"));return e.length==1?e[0]:{type:"choice",exprs:e}}function rx(r){let e=[];do e.push(ix(r));while(r.next&&r.next!=")"&&r.next!="|");return e.length==1?e[0]:{type:"seq",exprs:e}}function ix(r){let e=lx(r);for(;;)if(r.eat("+"))e={type:"plus",expr:e};else if(r.eat("*"))e={type:"star",expr:e};else if(r.eat("?"))e={type:"opt",expr:e};else if(r.eat("{"))e=sx(r,e);else break;return e}function Yy(r){/\D/.test(r.next)&&r.err("Expected number, got '"+r.next+"'");let e=Number(r.next);return r.pos++,e}function sx(r,e){let t=Yy(r),i=t;return r.eat(",")&&(r.next!="}"?i=Yy(r):i=-1),r.eat("}")||r.err("Unclosed braced range"),{type:"range",min:t,max:i,expr:e}}function ox(r,e){let t=r.nodeTypes,i=t[e];if(i)return[i];let o=[];for(let a in t){let u=t[a];u.isInGroup(e)&&o.push(u)}return o.length==0&&r.err("No node type or group '"+e+"' found"),o}function lx(r){if(r.eat("(")){let e=bv(r);return r.eat(")")||r.err("Missing closing paren"),e}else if(/\W/.test(r.next))r.err("Unexpected token '"+r.next+"'");else{let e=ox(r,r.next).map(t=>(r.inline==null?r.inline=t.isInline:r.inline!=t.isInline&&r.err("Mixing inline and block content"),{type:"name",value:t}));return r.pos++,e.length==1?e[0]:{type:"choice",exprs:e}}}function ax(r){let e=[[]];return o(a(r,0),t()),e;function t(){return e.push([])-1}function i(u,f,h){let m={term:h,to:f};return e[u].push(m),m}function o(u,f){u.forEach(h=>h.to=f)}function a(u,f){if(u.type=="choice")return u.exprs.reduce((h,m)=>h.concat(a(m,f)),[]);if(u.type=="seq")for(let h=0;;h++){let m=a(u.exprs[h],f);if(h==u.exprs.length-1)return m;o(m,f=t())}else if(u.type=="star"){let h=t();return i(f,h),o(a(u.expr,h),h),[i(h)]}else if(u.type=="plus"){let h=t();return o(a(u.expr,f),h),o(a(u.expr,h),h),[i(h)]}else{if(u.type=="opt")return[i(f)].concat(a(u.expr,f));if(u.type=="range"){let h=f;for(let m=0;m<u.min;m++){let v=t();o(a(u.expr,h),v),h=v}if(u.max==-1)o(a(u.expr,h),h);else for(let m=u.min;m<u.max;m++){let v=t();i(h,v),o(a(u.expr,h),v),h=v}return[i(h)]}else{if(u.type=="name")return[i(f,void 0,u.value)];throw new Error("Unknown expr type")}}}}function Sv(r,e){return e-r}function Gy(r,e){let t=[];return i(e),t.sort(Sv);function i(o){let a=r[o];if(a.length==1&&!a[0].term)return i(a[0].to);t.push(o);for(let u=0;u<a.length;u++){let{term:f,to:h}=a[u];!f&&t.indexOf(h)==-1&&i(h)}}}function ux(r){let e=Object.create(null);return t(Gy(r,0));function t(i){let o=[];i.forEach(u=>{r[u].forEach(({term:f,to:h})=>{if(!f)return;let m;for(let v=0;v<o.length;v++)o[v][0]==f&&(m=o[v][1]);Gy(r,h).forEach(v=>{m||o.push([f,m=[]]),m.indexOf(v)==-1&&m.push(v)})})});let a=e[i.join(",")]=new Go(i.indexOf(r.length-1)>-1);for(let u=0;u<o.length;u++){let f=o[u][1].sort(Sv);a.next.push({type:o[u][0],next:e[f.join(",")]||t(f)})}return a}}function cx(r,e){for(let t=0,i=[r];t<i.length;t++){let o=i[t],a=!o.validEnd,u=[];for(let f=0;f<o.next.length;f++){let{type:h,next:m}=o.next[f];u.push(h.name),a&&!(h.isText||h.hasRequiredAttrs())&&(a=!1),i.indexOf(m)==-1&&i.push(m)}a&&e.err("Only non-generatable nodes ("+u.join(", ")+") in a required position (see https://prosemirror.net/docs/guide/#generatable)")}}function xv(r){let e=Object.create(null);for(let t in r){let i=r[t];if(!i.hasDefault)return null;e[t]=i.default}return e}function Ev(r,e){let t=Object.create(null);for(let i in r){let o=e&&e[i];if(o===void 0){let a=r[i];if(a.hasDefault)o=a.default;else throw new RangeError("No value supplied for attribute "+i)}t[i]=o}return t}function Mv(r,e,t,i){for(let o in e)if(!(o in r))throw new RangeError(`Unsupported attribute ${o} for ${t} of type ${o}`);for(let o in r){let a=r[o];a.validate&&a.validate(e[o])}}function wv(r,e){let t=Object.create(null);if(e)for(let i in e)t[i]=new dx(r,i,e[i]);return t}let $y=class Tv{constructor(e,t,i){this.name=e,this.schema=t,this.spec=i,this.markSet=null,this.groups=i.group?i.group.split(" "):[],this.attrs=wv(e,i.attrs),this.defaultAttrs=xv(this.attrs),this.contentMatch=null,this.inlineContent=null,this.isBlock=!(i.inline||e=="text"),this.isText=e=="text"}get isInline(){return!this.isBlock}get isTextblock(){return this.isBlock&&this.inlineContent}get isLeaf(){return this.contentMatch==Go.empty}get isAtom(){return this.isLeaf||!!this.spec.atom}isInGroup(e){return this.groups.indexOf(e)>-1}get whitespace(){return this.spec.whitespace||(this.spec.code?"pre":"normal")}hasRequiredAttrs(){for(let e in this.attrs)if(this.attrs[e].isRequired)return!0;return!1}compatibleContent(e){return this==e||this.contentMatch.compatible(e.contentMatch)}computeAttrs(e){return!e&&this.defaultAttrs?this.defaultAttrs:Ev(this.attrs,e)}create(e=null,t,i){if(this.isText)throw new Error("NodeType.create can't construct text nodes");return new eo(this,this.computeAttrs(e),ae.from(t),Lt.setFrom(i))}createChecked(e=null,t,i){return t=ae.from(t),this.checkContent(t),new eo(this,this.computeAttrs(e),t,Lt.setFrom(i))}createAndFill(e=null,t,i){if(e=this.computeAttrs(e),t=ae.from(t),t.size){let u=this.contentMatch.fillBefore(t);if(!u)return null;t=u.append(t)}let o=this.contentMatch.matchFragment(t),a=o&&o.fillBefore(ae.empty,!0);return a?new eo(this,e,t.append(a),Lt.setFrom(i)):null}validContent(e){let t=this.contentMatch.matchFragment(e);if(!t||!t.validEnd)return!1;for(let i=0;i<e.childCount;i++)if(!this.allowsMarks(e.child(i).marks))return!1;return!0}checkContent(e){if(!this.validContent(e))throw new RangeError(`Invalid content for node ${this.name}: ${e.toString().slice(0,50)}`)}checkAttrs(e){Mv(this.attrs,e,"node",this.name)}allowsMarkType(e){return this.markSet==null||this.markSet.indexOf(e)>-1}allowsMarks(e){if(this.markSet==null)return!0;for(let t=0;t<e.length;t++)if(!this.allowsMarkType(e[t].type))return!1;return!0}allowedMarks(e){if(this.markSet==null)return e;let t;for(let i=0;i<e.length;i++)this.allowsMarkType(e[i].type)?t&&t.push(e[i]):t||(t=e.slice(0,i));return t?t.length?t:Lt.none:e}static compile(e,t){let i=Object.create(null);e.forEach((a,u)=>i[a]=new Tv(a,t,u));let o=t.spec.topNode||"doc";if(!i[o])throw new RangeError("Schema is missing its top node type ('"+o+"')");if(!i.text)throw new RangeError("Every schema needs a 'text' type");for(let a in i.text.attrs)throw new RangeError("The text node type should not have attributes");return i}};function fx(r,e,t){let i=t.split("|");return o=>{let a=o===null?"null":typeof o;if(i.indexOf(a)<0)throw new RangeError(`Expected value of type ${i} for attribute ${e} on type ${r}, got ${a}`)}}class dx{constructor(e,t,i){this.hasDefault=Object.prototype.hasOwnProperty.call(i,"default"),this.default=i.default,this.validate=typeof i.validate=="string"?fx(e,t,i.validate):i.validate}get isRequired(){return!this.hasDefault}}class pf{constructor(e,t,i,o){this.name=e,this.rank=t,this.schema=i,this.spec=o,this.attrs=wv(e,o.attrs),this.excluded=null;let a=xv(this.attrs);this.instance=a?new Lt(this,a):null}create(e=null){return!e&&this.instance?this.instance:new Lt(this,Ev(this.attrs,e))}static compile(e,t){let i=Object.create(null),o=0;return e.forEach((a,u)=>i[a]=new pf(a,o++,t,u)),i}removeFromSet(e){for(var t=0;t<e.length;t++)e[t].type==this&&(e=e.slice(0,t).concat(e.slice(t+1)),t--);return e}isInSet(e){for(let t=0;t<e.length;t++)if(e[t].type==this)return e[t]}checkAttrs(e){Mv(this.attrs,e,"mark",this.name)}excludes(e){return this.excluded.indexOf(e)>-1}}class Ov{constructor(e){this.linebreakReplacement=null,this.cached=Object.create(null);let t=this.spec={};for(let o in e)t[o]=e[o];t.nodes=Kn.from(e.nodes),t.marks=Kn.from(e.marks||{}),this.nodes=$y.compile(this.spec.nodes,this),this.marks=pf.compile(this.spec.marks,this);let i=Object.create(null);for(let o in this.nodes){if(o in this.marks)throw new RangeError(o+" can not be both a node and a mark");let a=this.nodes[o],u=a.spec.content||"",f=a.spec.marks;if(a.contentMatch=i[u]||(i[u]=Go.parse(u,this.nodes)),a.inlineContent=a.contentMatch.inlineContent,a.spec.linebreakReplacement){if(this.linebreakReplacement)throw new RangeError("Multiple linebreak nodes defined");if(!a.isInline||!a.isLeaf)throw new RangeError("Linebreak replacement nodes must be inline leaf nodes");this.linebreakReplacement=a}a.markSet=f=="_"?null:f?Xy(this,f.split(" ")):f==""||!a.inlineContent?[]:null}for(let o in this.marks){let a=this.marks[o],u=a.spec.excludes;a.excluded=u==null?[a]:u==""?[]:Xy(this,u.split(" "))}this.nodeFromJSON=this.nodeFromJSON.bind(this),this.markFromJSON=this.markFromJSON.bind(this),this.topNodeType=this.nodes[this.spec.topNode||"doc"],this.cached.wrappings=Object.create(null)}node(e,t=null,i,o){if(typeof e=="string")e=this.nodeType(e);else if(e instanceof $y){if(e.schema!=this)throw new RangeError("Node type from different schema used ("+e.name+")")}else throw new RangeError("Invalid node type: "+e);return e.createChecked(t,i,o)}text(e,t){let i=this.nodes.text;return new nf(i,i.defaultAttrs,e,Lt.setFrom(t))}mark(e,t){return typeof e=="string"&&(e=this.marks[e]),e.create(t)}nodeFromJSON(e){return eo.fromJSON(this,e)}markFromJSON(e){return Lt.fromJSON(this,e)}nodeType(e){let t=this.nodes[e];if(!t)throw new RangeError("Unknown node type: "+e);return t}}function Xy(r,e){let t=[];for(let i=0;i<e.length;i++){let o=e[i],a=r.marks[o],u=a;if(a)t.push(a);else for(let f in r.marks){let h=r.marks[f];(o=="_"||h.spec.group&&h.spec.group.split(" ").indexOf(o)>-1)&&t.push(u=h)}if(!u)throw new SyntaxError("Unknown mark type: '"+e[i]+"'")}return t}function hx(r){return r.tag!=null}function px(r){return r.style!=null}class to{constructor(e,t){this.schema=e,this.rules=t,this.tags=[],this.styles=[];let i=this.matchedStyles=[];t.forEach(o=>{if(hx(o))this.tags.push(o);else if(px(o)){let a=/[^=]*/.exec(o.style)[0];i.indexOf(a)<0&&i.push(a),this.styles.push(o)}}),this.normalizeLists=!this.tags.some(o=>{if(!/^(ul|ol)\b/.test(o.tag)||!o.node)return!1;let a=e.nodes[o.node];return a.contentMatch.matchType(a)})}parse(e,t={}){let i=new Qy(this,t,!1);return i.addAll(e,Lt.none,t.from,t.to),i.finish()}parseSlice(e,t={}){let i=new Qy(this,t,!0);return i.addAll(e,Lt.none,t.from,t.to),De.maxOpen(i.finish())}matchTag(e,t,i){for(let o=i?this.tags.indexOf(i)+1:0;o<this.tags.length;o++){let a=this.tags[o];if(yx(e,a.tag)&&(a.namespace===void 0||e.namespaceURI==a.namespace)&&(!a.context||t.matchesContext(a.context))){if(a.getAttrs){let u=a.getAttrs(e);if(u===!1)continue;a.attrs=u||void 0}return a}}}matchStyle(e,t,i,o){for(let a=o?this.styles.indexOf(o)+1:0;a<this.styles.length;a++){let u=this.styles[a],f=u.style;if(!(f.indexOf(e)!=0||u.context&&!i.matchesContext(u.context)||f.length>e.length&&(f.charCodeAt(e.length)!=61||f.slice(e.length+1)!=t))){if(u.getAttrs){let h=u.getAttrs(t);if(h===!1)continue;u.attrs=h||void 0}return u}}}static schemaRules(e){let t=[];function i(o){let a=o.priority==null?50:o.priority,u=0;for(;u<t.length;u++){let f=t[u];if((f.priority==null?50:f.priority)<a)break}t.splice(u,0,o)}for(let o in e.marks){let a=e.marks[o].spec.parseDOM;a&&a.forEach(u=>{i(u=Jy(u)),u.mark||u.ignore||u.clearMark||(u.mark=o)})}for(let o in e.nodes){let a=e.nodes[o].spec.parseDOM;a&&a.forEach(u=>{i(u=Jy(u)),u.node||u.ignore||u.mark||(u.node=o)})}return t}static fromSchema(e){return e.cached.domParser||(e.cached.domParser=new to(e,to.schemaRules(e)))}}const kv={address:!0,article:!0,aside:!0,blockquote:!0,canvas:!0,dd:!0,div:!0,dl:!0,fieldset:!0,figcaption:!0,figure:!0,footer:!0,form:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,header:!0,hgroup:!0,hr:!0,li:!0,noscript:!0,ol:!0,output:!0,p:!0,pre:!0,section:!0,table:!0,tfoot:!0,ul:!0},mx={head:!0,noscript:!0,object:!0,script:!0,style:!0,title:!0},Cv={ol:!0,ul:!0},mu=1,Xh=2,Gc=4;function Fy(r,e,t){return e!=null?(e?mu:0)|(e==="full"?Xh:0):r&&r.whitespace=="pre"?mu|Xh:t&-5}class Lc{constructor(e,t,i,o,a,u){this.type=e,this.attrs=t,this.marks=i,this.solid=o,this.options=u,this.content=[],this.activeMarks=Lt.none,this.match=a||(u&Gc?null:e.contentMatch)}findWrapping(e){if(!this.match){if(!this.type)return[];let t=this.type.contentMatch.fillBefore(ae.from(e));if(t)this.match=this.type.contentMatch.matchFragment(t);else{let i=this.type.contentMatch,o;return(o=i.findWrapping(e.type))?(this.match=i,o):null}}return this.match.findWrapping(e.type)}finish(e){if(!(this.options&mu)){let i=this.content[this.content.length-1],o;if(i&&i.isText&&(o=/[ \t\r\n\u000c]+$/.exec(i.text))){let a=i;i.text.length==o[0].length?this.content.pop():this.content[this.content.length-1]=a.withText(a.text.slice(0,a.text.length-o[0].length))}}let t=ae.from(this.content);return!e&&this.match&&(t=t.append(this.match.fillBefore(ae.empty,!0))),this.type?this.type.create(this.attrs,t,this.marks):t}inlineContext(e){return this.type?this.type.inlineContent:this.content.length?this.content[0].isInline:e.parentNode&&!kv.hasOwnProperty(e.parentNode.nodeName.toLowerCase())}}class Qy{constructor(e,t,i){this.parser=e,this.options=t,this.isOpen=i,this.open=0,this.localPreserveWS=!1;let o=t.topNode,a,u=Fy(null,t.preserveWhitespace,0)|(i?Gc:0);o?a=new Lc(o.type,o.attrs,Lt.none,!0,t.topMatch||o.type.contentMatch,u):i?a=new Lc(null,null,Lt.none,!0,null,u):a=new Lc(e.schema.topNodeType,null,Lt.none,!0,null,u),this.nodes=[a],this.find=t.findPositions,this.needsBlock=!1}get top(){return this.nodes[this.open]}addDOM(e,t){e.nodeType==3?this.addTextNode(e,t):e.nodeType==1&&this.addElement(e,t)}addTextNode(e,t){let i=e.nodeValue,o=this.top,a=o.options&Xh?"full":this.localPreserveWS||(o.options&mu)>0;if(a==="full"||o.inlineContext(e)||/[^ \t\r\n\u000c]/.test(i)){if(a)a!=="full"?i=i.replace(/\r?\n|\r/g," "):i=i.replace(/\r\n?/g,`
`);else if(i=i.replace(/[ \t\r\n\u000c]+/g," "),/^[ \t\r\n\u000c]/.test(i)&&this.open==this.nodes.length-1){let u=o.content[o.content.length-1],f=e.previousSibling;(!u||f&&f.nodeName=="BR"||u.isText&&/[ \t\r\n\u000c]$/.test(u.text))&&(i=i.slice(1))}i&&this.insertNode(this.parser.schema.text(i),t,!/\S/.test(i)),this.findInText(e)}else this.findInside(e)}addElement(e,t,i){let o=this.localPreserveWS,a=this.top;(e.tagName=="PRE"||/pre/.test(e.style&&e.style.whiteSpace))&&(this.localPreserveWS=!0);let u=e.nodeName.toLowerCase(),f;Cv.hasOwnProperty(u)&&this.parser.normalizeLists&&gx(e);let h=this.options.ruleFromNode&&this.options.ruleFromNode(e)||(f=this.parser.matchTag(e,this,i));e:if(h?h.ignore:mx.hasOwnProperty(u))this.findInside(e),this.ignoreFallback(e,t);else if(!h||h.skip||h.closeParent){h&&h.closeParent?this.open=Math.max(0,this.open-1):h&&h.skip.nodeType&&(e=h.skip);let m,v=this.needsBlock;if(kv.hasOwnProperty(u))a.content.length&&a.content[0].isInline&&this.open&&(this.open--,a=this.top),m=!0,a.type||(this.needsBlock=!0);else if(!e.firstChild){this.leafFallback(e,t);break e}let S=h&&h.skip?t:this.readStyles(e,t);S&&this.addAll(e,S),m&&this.sync(a),this.needsBlock=v}else{let m=this.readStyles(e,t);m&&this.addElementByRule(e,h,m,h.consuming===!1?f:void 0)}this.localPreserveWS=o}leafFallback(e,t){e.nodeName=="BR"&&this.top.type&&this.top.type.inlineContent&&this.addTextNode(e.ownerDocument.createTextNode(`
`),t)}ignoreFallback(e,t){e.nodeName=="BR"&&(!this.top.type||!this.top.type.inlineContent)&&this.findPlace(this.parser.schema.text("-"),t,!0)}readStyles(e,t){let i=e.style;if(i&&i.length)for(let o=0;o<this.parser.matchedStyles.length;o++){let a=this.parser.matchedStyles[o],u=i.getPropertyValue(a);if(u)for(let f=void 0;;){let h=this.parser.matchStyle(a,u,this,f);if(!h)break;if(h.ignore)return null;if(h.clearMark?t=t.filter(m=>!h.clearMark(m)):t=t.concat(this.parser.schema.marks[h.mark].create(h.attrs)),h.consuming===!1)f=h;else break}}return t}addElementByRule(e,t,i,o){let a,u;if(t.node)if(u=this.parser.schema.nodes[t.node],u.isLeaf)this.insertNode(u.create(t.attrs),i,e.nodeName=="BR")||this.leafFallback(e,i);else{let h=this.enter(u,t.attrs||null,i,t.preserveWhitespace);h&&(a=!0,i=h)}else{let h=this.parser.schema.marks[t.mark];i=i.concat(h.create(t.attrs))}let f=this.top;if(u&&u.isLeaf)this.findInside(e);else if(o)this.addElement(e,i,o);else if(t.getContent)this.findInside(e),t.getContent(e,this.parser.schema).forEach(h=>this.insertNode(h,i,!1));else{let h=e;typeof t.contentElement=="string"?h=e.querySelector(t.contentElement):typeof t.contentElement=="function"?h=t.contentElement(e):t.contentElement&&(h=t.contentElement),this.findAround(e,h,!0),this.addAll(h,i),this.findAround(e,h,!1)}a&&this.sync(f)&&this.open--}addAll(e,t,i,o){let a=i||0;for(let u=i?e.childNodes[i]:e.firstChild,f=o==null?null:e.childNodes[o];u!=f;u=u.nextSibling,++a)this.findAtPoint(e,a),this.addDOM(u,t);this.findAtPoint(e,a)}findPlace(e,t,i){let o,a;for(let u=this.open,f=0;u>=0;u--){let h=this.nodes[u],m=h.findWrapping(e);if(m&&(!o||o.length>m.length+f)&&(o=m,a=h,!m.length))break;if(h.solid){if(i)break;f+=2}}if(!o)return null;this.sync(a);for(let u=0;u<o.length;u++)t=this.enterInner(o[u],null,t,!1);return t}insertNode(e,t,i){if(e.isInline&&this.needsBlock&&!this.top.type){let a=this.textblockFromContext();a&&(t=this.enterInner(a,null,t))}let o=this.findPlace(e,t,i);if(o){this.closeExtra();let a=this.top;a.match&&(a.match=a.match.matchType(e.type));let u=Lt.none;for(let f of o.concat(e.marks))(a.type?a.type.allowsMarkType(f.type):Zy(f.type,e.type))&&(u=f.addToSet(u));return a.content.push(e.mark(u)),!0}return!1}enter(e,t,i,o){let a=this.findPlace(e.create(t),i,!1);return a&&(a=this.enterInner(e,t,i,!0,o)),a}enterInner(e,t,i,o=!1,a){this.closeExtra();let u=this.top;u.match=u.match&&u.match.matchType(e);let f=Fy(e,a,u.options);u.options&Gc&&u.content.length==0&&(f|=Gc);let h=Lt.none;return i=i.filter(m=>(u.type?u.type.allowsMarkType(m.type):Zy(m.type,e))?(h=m.addToSet(h),!1):!0),this.nodes.push(new Lc(e,t,h,o,null,f)),this.open++,i}closeExtra(e=!1){let t=this.nodes.length-1;if(t>this.open){for(;t>this.open;t--)this.nodes[t-1].content.push(this.nodes[t].finish(e));this.nodes.length=this.open+1}}finish(){return this.open=0,this.closeExtra(this.isOpen),this.nodes[0].finish(!!(this.isOpen||this.options.topOpen))}sync(e){for(let t=this.open;t>=0;t--){if(this.nodes[t]==e)return this.open=t,!0;this.localPreserveWS&&(this.nodes[t].options|=mu)}return!1}get currentPos(){this.closeExtra();let e=0;for(let t=this.open;t>=0;t--){let i=this.nodes[t].content;for(let o=i.length-1;o>=0;o--)e+=i[o].nodeSize;t&&e++}return e}findAtPoint(e,t){if(this.find)for(let i=0;i<this.find.length;i++)this.find[i].node==e&&this.find[i].offset==t&&(this.find[i].pos=this.currentPos)}findInside(e){if(this.find)for(let t=0;t<this.find.length;t++)this.find[t].pos==null&&e.nodeType==1&&e.contains(this.find[t].node)&&(this.find[t].pos=this.currentPos)}findAround(e,t,i){if(e!=t&&this.find)for(let o=0;o<this.find.length;o++)this.find[o].pos==null&&e.nodeType==1&&e.contains(this.find[o].node)&&t.compareDocumentPosition(this.find[o].node)&(i?2:4)&&(this.find[o].pos=this.currentPos)}findInText(e){if(this.find)for(let t=0;t<this.find.length;t++)this.find[t].node==e&&(this.find[t].pos=this.currentPos-(e.nodeValue.length-this.find[t].offset))}matchesContext(e){if(e.indexOf("|")>-1)return e.split(/\s*\|\s*/).some(this.matchesContext,this);let t=e.split("/"),i=this.options.context,o=!this.isOpen&&(!i||i.parent.type==this.nodes[0].type),a=-(i?i.depth+1:0)+(o?0:1),u=(f,h)=>{for(;f>=0;f--){let m=t[f];if(m==""){if(f==t.length-1||f==0)continue;for(;h>=a;h--)if(u(f-1,h))return!0;return!1}else{let v=h>0||h==0&&o?this.nodes[h].type:i&&h>=a?i.node(h-a).type:null;if(!v||v.name!=m&&!v.isInGroup(m))return!1;h--}}return!0};return u(t.length-1,this.open)}textblockFromContext(){let e=this.options.context;if(e)for(let t=e.depth;t>=0;t--){let i=e.node(t).contentMatchAt(e.indexAfter(t)).defaultType;if(i&&i.isTextblock&&i.defaultAttrs)return i}for(let t in this.parser.schema.nodes){let i=this.parser.schema.nodes[t];if(i.isTextblock&&i.defaultAttrs)return i}}}function gx(r){for(let e=r.firstChild,t=null;e;e=e.nextSibling){let i=e.nodeType==1?e.nodeName.toLowerCase():null;i&&Cv.hasOwnProperty(i)&&t?(t.appendChild(e),e=t):i=="li"?t=e:i&&(t=null)}}function yx(r,e){return(r.matches||r.msMatchesSelector||r.webkitMatchesSelector||r.mozMatchesSelector).call(r,e)}function Jy(r){let e={};for(let t in r)e[t]=r[t];return e}function Zy(r,e){let t=e.schema.nodes;for(let i in t){let o=t[i];if(!o.allowsMarkType(r))continue;let a=[],u=f=>{a.push(f);for(let h=0;h<f.edgeCount;h++){let{type:m,next:v}=f.edge(h);if(m==e||a.indexOf(v)<0&&u(v))return!0}};if(u(o.contentMatch))return!0}}class Qo{constructor(e,t){this.nodes=e,this.marks=t}serializeFragment(e,t={},i){i||(i=Eh(t).createDocumentFragment());let o=i,a=[];return e.forEach(u=>{if(a.length||u.marks.length){let f=0,h=0;for(;f<a.length&&h<u.marks.length;){let m=u.marks[h];if(!this.marks[m.type.name]){h++;continue}if(!m.eq(a[f][0])||m.type.spec.spanning===!1)break;f++,h++}for(;f<a.length;)o=a.pop()[1];for(;h<u.marks.length;){let m=u.marks[h++],v=this.serializeMark(m,u.isInline,t);v&&(a.push([m,o]),o.appendChild(v.dom),o=v.contentDOM||v.dom)}}o.appendChild(this.serializeNodeInner(u,t))}),i}serializeNodeInner(e,t){let{dom:i,contentDOM:o}=$c(Eh(t),this.nodes[e.type.name](e),null,e.attrs);if(o){if(e.isLeaf)throw new RangeError("Content hole not allowed in a leaf node spec");this.serializeFragment(e.content,t,o)}return i}serializeNode(e,t={}){let i=this.serializeNodeInner(e,t);for(let o=e.marks.length-1;o>=0;o--){let a=this.serializeMark(e.marks[o],e.isInline,t);a&&((a.contentDOM||a.dom).appendChild(i),i=a.dom)}return i}serializeMark(e,t,i={}){let o=this.marks[e.type.name];return o&&$c(Eh(i),o(e,t),null,e.attrs)}static renderSpec(e,t,i=null,o){return $c(e,t,i,o)}static fromSchema(e){return e.cached.domSerializer||(e.cached.domSerializer=new Qo(this.nodesFromSchema(e),this.marksFromSchema(e)))}static nodesFromSchema(e){let t=Wy(e.nodes);return t.text||(t.text=i=>i.text),t}static marksFromSchema(e){return Wy(e.marks)}}function Wy(r){let e={};for(let t in r){let i=r[t].spec.toDOM;i&&(e[t]=i)}return e}function Eh(r){return r.document||window.document}const e0=new WeakMap;function vx(r){let e=e0.get(r);return e===void 0&&e0.set(r,e=bx(r)),e}function bx(r){let e=null;function t(i){if(i&&typeof i=="object")if(Array.isArray(i))if(typeof i[0]=="string")e||(e=[]),e.push(i);else for(let o=0;o<i.length;o++)t(i[o]);else for(let o in i)t(i[o])}return t(r),e}function $c(r,e,t,i){if(typeof e=="string")return{dom:r.createTextNode(e)};if(e.nodeType!=null)return{dom:e};if(e.dom&&e.dom.nodeType!=null)return e;let o=e[0],a;if(typeof o!="string")throw new RangeError("Invalid array passed to renderSpec");if(i&&(a=vx(i))&&a.indexOf(e)>-1)throw new RangeError("Using an array from an attribute object as a DOM spec. This may be an attempted cross site scripting attack.");let u=o.indexOf(" ");u>0&&(t=o.slice(0,u),o=o.slice(u+1));let f,h=t?r.createElementNS(t,o):r.createElement(o),m=e[1],v=1;if(m&&typeof m=="object"&&m.nodeType==null&&!Array.isArray(m)){v=2;for(let S in m)if(m[S]!=null){let w=S.indexOf(" ");w>0?h.setAttributeNS(S.slice(0,w),S.slice(w+1),m[S]):h.setAttribute(S,m[S])}}for(let S=v;S<e.length;S++){let w=e[S];if(w===0){if(S<e.length-1||S>v)throw new RangeError("Content hole must be the only child of its parent node");return{dom:h,contentDOM:h}}else{let{dom:O,contentDOM:T}=$c(r,w,t,i);if(h.appendChild(O),T){if(f)throw new RangeError("Multiple content holes");f=T}}}return{dom:h,contentDOM:f}}const Av=65535,_v=Math.pow(2,16);function Sx(r,e){return r+e*_v}function t0(r){return r&Av}function xx(r){return(r-(r&Av))/_v}const Nv=1,Dv=2,Xc=4,Rv=8;class Fh{constructor(e,t,i){this.pos=e,this.delInfo=t,this.recover=i}get deleted(){return(this.delInfo&Rv)>0}get deletedBefore(){return(this.delInfo&(Nv|Xc))>0}get deletedAfter(){return(this.delInfo&(Dv|Xc))>0}get deletedAcross(){return(this.delInfo&Xc)>0}}class jr{constructor(e,t=!1){if(this.ranges=e,this.inverted=t,!e.length&&jr.empty)return jr.empty}recover(e){let t=0,i=t0(e);if(!this.inverted)for(let o=0;o<i;o++)t+=this.ranges[o*3+2]-this.ranges[o*3+1];return this.ranges[i*3]+t+xx(e)}mapResult(e,t=1){return this._map(e,t,!1)}map(e,t=1){return this._map(e,t,!0)}_map(e,t,i){let o=0,a=this.inverted?2:1,u=this.inverted?1:2;for(let f=0;f<this.ranges.length;f+=3){let h=this.ranges[f]-(this.inverted?o:0);if(h>e)break;let m=this.ranges[f+a],v=this.ranges[f+u],S=h+m;if(e<=S){let w=m?e==h?-1:e==S?1:t:t,O=h+o+(w<0?0:v);if(i)return O;let T=e==(t<0?h:S)?null:Sx(f/3,e-h),A=e==h?Dv:e==S?Nv:Xc;return(t<0?e!=h:e!=S)&&(A|=Rv),new Fh(O,A,T)}o+=v-m}return i?e+o:new Fh(e+o,0,null)}touches(e,t){let i=0,o=t0(t),a=this.inverted?2:1,u=this.inverted?1:2;for(let f=0;f<this.ranges.length;f+=3){let h=this.ranges[f]-(this.inverted?i:0);if(h>e)break;let m=this.ranges[f+a],v=h+m;if(e<=v&&f==o*3)return!0;i+=this.ranges[f+u]-m}return!1}forEach(e){let t=this.inverted?2:1,i=this.inverted?1:2;for(let o=0,a=0;o<this.ranges.length;o+=3){let u=this.ranges[o],f=u-(this.inverted?a:0),h=u+(this.inverted?0:a),m=this.ranges[o+t],v=this.ranges[o+i];e(f,f+m,h,h+v),a+=v-m}}invert(){return new jr(this.ranges,!this.inverted)}toString(){return(this.inverted?"-":"")+JSON.stringify(this.ranges)}static offset(e){return e==0?jr.empty:new jr(e<0?[0,-e,0]:[0,0,e])}}jr.empty=new jr([]);class gu{constructor(e,t,i=0,o=e?e.length:0){this.mirror=t,this.from=i,this.to=o,this._maps=e||[],this.ownData=!(e||t)}get maps(){return this._maps}slice(e=0,t=this.maps.length){return new gu(this._maps,this.mirror,e,t)}appendMap(e,t){this.ownData||(this._maps=this._maps.slice(),this.mirror=this.mirror&&this.mirror.slice(),this.ownData=!0),this.to=this._maps.push(e),t!=null&&this.setMirror(this._maps.length-1,t)}appendMapping(e){for(let t=0,i=this._maps.length;t<e._maps.length;t++){let o=e.getMirror(t);this.appendMap(e._maps[t],o!=null&&o<t?i+o:void 0)}}getMirror(e){if(this.mirror){for(let t=0;t<this.mirror.length;t++)if(this.mirror[t]==e)return this.mirror[t+(t%2?-1:1)]}}setMirror(e,t){this.mirror||(this.mirror=[]),this.mirror.push(e,t)}appendMappingInverted(e){for(let t=e.maps.length-1,i=this._maps.length+e._maps.length;t>=0;t--){let o=e.getMirror(t);this.appendMap(e._maps[t].invert(),o!=null&&o>t?i-o-1:void 0)}}invert(){let e=new gu;return e.appendMappingInverted(this),e}map(e,t=1){if(this.mirror)return this._map(e,t,!0);for(let i=this.from;i<this.to;i++)e=this._maps[i].map(e,t);return e}mapResult(e,t=1){return this._map(e,t,!1)}_map(e,t,i){let o=0;for(let a=this.from;a<this.to;a++){let u=this._maps[a],f=u.mapResult(e,t);if(f.recover!=null){let h=this.getMirror(a);if(h!=null&&h>a&&h<this.to){a=h,e=this._maps[h].recover(f.recover);continue}}o|=f.delInfo,e=f.pos}return i?e:new Fh(e,o,null)}}const Mh=Object.create(null);class rr{getMap(){return jr.empty}merge(e){return null}static fromJSON(e,t){if(!t||!t.stepType)throw new RangeError("Invalid input for Step.fromJSON");let i=Mh[t.stepType];if(!i)throw new RangeError(`No step type ${t.stepType} defined`);return i.fromJSON(e,t)}static jsonID(e,t){if(e in Mh)throw new RangeError("Duplicate use of step JSON ID "+e);return Mh[e]=t,t.prototype.jsonID=e,t}}class pn{constructor(e,t){this.doc=e,this.failed=t}static ok(e){return new pn(e,null)}static fail(e){return new pn(null,e)}static fromReplace(e,t,i,o){try{return pn.ok(e.replace(t,i,o))}catch(a){if(a instanceof Wc)return pn.fail(a.message);throw a}}}function hp(r,e,t){let i=[];for(let o=0;o<r.childCount;o++){let a=r.child(o);a.content.size&&(a=a.copy(hp(a.content,e,a))),a.isInline&&(a=e(a,t,o)),i.push(a)}return ae.fromArray(i)}class Js extends rr{constructor(e,t,i){super(),this.from=e,this.to=t,this.mark=i}apply(e){let t=e.slice(this.from,this.to),i=e.resolve(this.from),o=i.node(i.sharedDepth(this.to)),a=new De(hp(t.content,(u,f)=>!u.isAtom||!f.type.allowsMarkType(this.mark.type)?u:u.mark(this.mark.addToSet(u.marks)),o),t.openStart,t.openEnd);return pn.fromReplace(e,this.from,this.to,a)}invert(){return new qi(this.from,this.to,this.mark)}map(e){let t=e.mapResult(this.from,1),i=e.mapResult(this.to,-1);return t.deleted&&i.deleted||t.pos>=i.pos?null:new Js(t.pos,i.pos,this.mark)}merge(e){return e instanceof Js&&e.mark.eq(this.mark)&&this.from<=e.to&&this.to>=e.from?new Js(Math.min(this.from,e.from),Math.max(this.to,e.to),this.mark):null}toJSON(){return{stepType:"addMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(e,t){if(typeof t.from!="number"||typeof t.to!="number")throw new RangeError("Invalid input for AddMarkStep.fromJSON");return new Js(t.from,t.to,e.markFromJSON(t.mark))}}rr.jsonID("addMark",Js);class qi extends rr{constructor(e,t,i){super(),this.from=e,this.to=t,this.mark=i}apply(e){let t=e.slice(this.from,this.to),i=new De(hp(t.content,o=>o.mark(this.mark.removeFromSet(o.marks)),e),t.openStart,t.openEnd);return pn.fromReplace(e,this.from,this.to,i)}invert(){return new Js(this.from,this.to,this.mark)}map(e){let t=e.mapResult(this.from,1),i=e.mapResult(this.to,-1);return t.deleted&&i.deleted||t.pos>=i.pos?null:new qi(t.pos,i.pos,this.mark)}merge(e){return e instanceof qi&&e.mark.eq(this.mark)&&this.from<=e.to&&this.to>=e.from?new qi(Math.min(this.from,e.from),Math.max(this.to,e.to),this.mark):null}toJSON(){return{stepType:"removeMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(e,t){if(typeof t.from!="number"||typeof t.to!="number")throw new RangeError("Invalid input for RemoveMarkStep.fromJSON");return new qi(t.from,t.to,e.markFromJSON(t.mark))}}rr.jsonID("removeMark",qi);class Zs extends rr{constructor(e,t){super(),this.pos=e,this.mark=t}apply(e){let t=e.nodeAt(this.pos);if(!t)return pn.fail("No node at mark step's position");let i=t.type.create(t.attrs,null,this.mark.addToSet(t.marks));return pn.fromReplace(e,this.pos,this.pos+1,new De(ae.from(i),0,t.isLeaf?0:1))}invert(e){let t=e.nodeAt(this.pos);if(t){let i=this.mark.addToSet(t.marks);if(i.length==t.marks.length){for(let o=0;o<t.marks.length;o++)if(!t.marks[o].isInSet(i))return new Zs(this.pos,t.marks[o]);return new Zs(this.pos,this.mark)}}return new $o(this.pos,this.mark)}map(e){let t=e.mapResult(this.pos,1);return t.deletedAfter?null:new Zs(t.pos,this.mark)}toJSON(){return{stepType:"addNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(e,t){if(typeof t.pos!="number")throw new RangeError("Invalid input for AddNodeMarkStep.fromJSON");return new Zs(t.pos,e.markFromJSON(t.mark))}}rr.jsonID("addNodeMark",Zs);class $o extends rr{constructor(e,t){super(),this.pos=e,this.mark=t}apply(e){let t=e.nodeAt(this.pos);if(!t)return pn.fail("No node at mark step's position");let i=t.type.create(t.attrs,null,this.mark.removeFromSet(t.marks));return pn.fromReplace(e,this.pos,this.pos+1,new De(ae.from(i),0,t.isLeaf?0:1))}invert(e){let t=e.nodeAt(this.pos);return!t||!this.mark.isInSet(t.marks)?this:new Zs(this.pos,this.mark)}map(e){let t=e.mapResult(this.pos,1);return t.deletedAfter?null:new $o(t.pos,this.mark)}toJSON(){return{stepType:"removeNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(e,t){if(typeof t.pos!="number")throw new RangeError("Invalid input for RemoveNodeMarkStep.fromJSON");return new $o(t.pos,e.markFromJSON(t.mark))}}rr.jsonID("removeNodeMark",$o);class Nn extends rr{constructor(e,t,i,o=!1){super(),this.from=e,this.to=t,this.slice=i,this.structure=o}apply(e){return this.structure&&Qh(e,this.from,this.to)?pn.fail("Structure replace would overwrite content"):pn.fromReplace(e,this.from,this.to,this.slice)}getMap(){return new jr([this.from,this.to-this.from,this.slice.size])}invert(e){return new Nn(this.from,this.from+this.slice.size,e.slice(this.from,this.to))}map(e){let t=e.mapResult(this.from,1),i=e.mapResult(this.to,-1);return t.deletedAcross&&i.deletedAcross?null:new Nn(t.pos,Math.max(t.pos,i.pos),this.slice,this.structure)}merge(e){if(!(e instanceof Nn)||e.structure||this.structure)return null;if(this.from+this.slice.size==e.from&&!this.slice.openEnd&&!e.slice.openStart){let t=this.slice.size+e.slice.size==0?De.empty:new De(this.slice.content.append(e.slice.content),this.slice.openStart,e.slice.openEnd);return new Nn(this.from,this.to+(e.to-e.from),t,this.structure)}else if(e.to==this.from&&!this.slice.openStart&&!e.slice.openEnd){let t=this.slice.size+e.slice.size==0?De.empty:new De(e.slice.content.append(this.slice.content),e.slice.openStart,this.slice.openEnd);return new Nn(e.from,this.to,t,this.structure)}else return null}toJSON(){let e={stepType:"replace",from:this.from,to:this.to};return this.slice.size&&(e.slice=this.slice.toJSON()),this.structure&&(e.structure=!0),e}static fromJSON(e,t){if(typeof t.from!="number"||typeof t.to!="number")throw new RangeError("Invalid input for ReplaceStep.fromJSON");return new Nn(t.from,t.to,De.fromJSON(e,t.slice),!!t.structure)}}rr.jsonID("replace",Nn);class Dn extends rr{constructor(e,t,i,o,a,u,f=!1){super(),this.from=e,this.to=t,this.gapFrom=i,this.gapTo=o,this.slice=a,this.insert=u,this.structure=f}apply(e){if(this.structure&&(Qh(e,this.from,this.gapFrom)||Qh(e,this.gapTo,this.to)))return pn.fail("Structure gap-replace would overwrite content");let t=e.slice(this.gapFrom,this.gapTo);if(t.openStart||t.openEnd)return pn.fail("Gap is not a flat range");let i=this.slice.insertAt(this.insert,t.content);return i?pn.fromReplace(e,this.from,this.to,i):pn.fail("Content does not fit in gap")}getMap(){return new jr([this.from,this.gapFrom-this.from,this.insert,this.gapTo,this.to-this.gapTo,this.slice.size-this.insert])}invert(e){let t=this.gapTo-this.gapFrom;return new Dn(this.from,this.from+this.slice.size+t,this.from+this.insert,this.from+this.insert+t,e.slice(this.from,this.to).removeBetween(this.gapFrom-this.from,this.gapTo-this.from),this.gapFrom-this.from,this.structure)}map(e){let t=e.mapResult(this.from,1),i=e.mapResult(this.to,-1),o=this.from==this.gapFrom?t.pos:e.map(this.gapFrom,-1),a=this.to==this.gapTo?i.pos:e.map(this.gapTo,1);return t.deletedAcross&&i.deletedAcross||o<t.pos||a>i.pos?null:new Dn(t.pos,i.pos,o,a,this.slice,this.insert,this.structure)}toJSON(){let e={stepType:"replaceAround",from:this.from,to:this.to,gapFrom:this.gapFrom,gapTo:this.gapTo,insert:this.insert};return this.slice.size&&(e.slice=this.slice.toJSON()),this.structure&&(e.structure=!0),e}static fromJSON(e,t){if(typeof t.from!="number"||typeof t.to!="number"||typeof t.gapFrom!="number"||typeof t.gapTo!="number"||typeof t.insert!="number")throw new RangeError("Invalid input for ReplaceAroundStep.fromJSON");return new Dn(t.from,t.to,t.gapFrom,t.gapTo,De.fromJSON(e,t.slice),t.insert,!!t.structure)}}rr.jsonID("replaceAround",Dn);function Qh(r,e,t){let i=r.resolve(e),o=t-e,a=i.depth;for(;o>0&&a>0&&i.indexAfter(a)==i.node(a).childCount;)a--,o--;if(o>0){let u=i.node(a).maybeChild(i.indexAfter(a));for(;o>0;){if(!u||u.isLeaf)return!0;u=u.firstChild,o--}}return!1}function Ex(r,e,t,i){let o=[],a=[],u,f;r.doc.nodesBetween(e,t,(h,m,v)=>{if(!h.isInline)return;let S=h.marks;if(!i.isInSet(S)&&v.type.allowsMarkType(i.type)){let w=Math.max(m,e),O=Math.min(m+h.nodeSize,t),T=i.addToSet(S);for(let A=0;A<S.length;A++)S[A].isInSet(T)||(u&&u.to==w&&u.mark.eq(S[A])?u.to=O:o.push(u=new qi(w,O,S[A])));f&&f.to==w?f.to=O:a.push(f=new Js(w,O,i))}}),o.forEach(h=>r.step(h)),a.forEach(h=>r.step(h))}function Mx(r,e,t,i){let o=[],a=0;r.doc.nodesBetween(e,t,(u,f)=>{if(!u.isInline)return;a++;let h=null;if(i instanceof pf){let m=u.marks,v;for(;v=i.isInSet(m);)(h||(h=[])).push(v),m=v.removeFromSet(m)}else i?i.isInSet(u.marks)&&(h=[i]):h=u.marks;if(h&&h.length){let m=Math.min(f+u.nodeSize,t);for(let v=0;v<h.length;v++){let S=h[v],w;for(let O=0;O<o.length;O++){let T=o[O];T.step==a-1&&S.eq(o[O].style)&&(w=T)}w?(w.to=m,w.step=a):o.push({style:S,from:Math.max(f,e),to:m,step:a})}}}),o.forEach(u=>r.step(new qi(u.from,u.to,u.style)))}function pp(r,e,t,i=t.contentMatch,o=!0){let a=r.doc.nodeAt(e),u=[],f=e+1;for(let h=0;h<a.childCount;h++){let m=a.child(h),v=f+m.nodeSize,S=i.matchType(m.type);if(!S)u.push(new Nn(f,v,De.empty));else{i=S;for(let w=0;w<m.marks.length;w++)t.allowsMarkType(m.marks[w].type)||r.step(new qi(f,v,m.marks[w]));if(o&&m.isText&&t.whitespace!="pre"){let w,O=/\r?\n|\r/g,T;for(;w=O.exec(m.text);)T||(T=new De(ae.from(t.schema.text(" ",t.allowedMarks(m.marks))),0,0)),u.push(new Nn(f+w.index,f+w.index+w[0].length,T))}}f=v}if(!i.validEnd){let h=i.fillBefore(ae.empty,!0);r.replace(f,f,new De(h,0,0))}for(let h=u.length-1;h>=0;h--)r.step(u[h])}function wx(r,e,t){return(e==0||r.canReplace(e,r.childCount))&&(t==r.childCount||r.canReplace(0,t))}function ia(r){let t=r.parent.content.cutByIndex(r.startIndex,r.endIndex);for(let i=r.depth;;--i){let o=r.$from.node(i),a=r.$from.index(i),u=r.$to.indexAfter(i);if(i<r.depth&&o.canReplace(a,u,t))return i;if(i==0||o.type.spec.isolating||!wx(o,a,u))break}return null}function Tx(r,e,t){let{$from:i,$to:o,depth:a}=e,u=i.before(a+1),f=o.after(a+1),h=u,m=f,v=ae.empty,S=0;for(let T=a,A=!1;T>t;T--)A||i.index(T)>0?(A=!0,v=ae.from(i.node(T).copy(v)),S++):h--;let w=ae.empty,O=0;for(let T=a,A=!1;T>t;T--)A||o.after(T+1)<o.end(T)?(A=!0,w=ae.from(o.node(T).copy(w)),O++):m++;r.step(new Dn(h,m,u,f,new De(v.append(w),S,O),v.size-S,!0))}function mp(r,e,t=null,i=r){let o=Ox(r,e),a=o&&kx(i,e);return a?o.map(n0).concat({type:e,attrs:t}).concat(a.map(n0)):null}function n0(r){return{type:r,attrs:null}}function Ox(r,e){let{parent:t,startIndex:i,endIndex:o}=r,a=t.contentMatchAt(i).findWrapping(e);if(!a)return null;let u=a.length?a[0]:e;return t.canReplaceWith(i,o,u)?a:null}function kx(r,e){let{parent:t,startIndex:i,endIndex:o}=r,a=t.child(i),u=e.contentMatch.findWrapping(a.type);if(!u)return null;let h=(u.length?u[u.length-1]:e).contentMatch;for(let m=i;h&&m<o;m++)h=h.matchType(t.child(m).type);return!h||!h.validEnd?null:u}function Cx(r,e,t){let i=ae.empty;for(let u=t.length-1;u>=0;u--){if(i.size){let f=t[u].type.contentMatch.matchFragment(i);if(!f||!f.validEnd)throw new RangeError("Wrapper type given to Transform.wrap does not form valid content of its parent wrapper")}i=ae.from(t[u].type.create(t[u].attrs,i))}let o=e.start,a=e.end;r.step(new Dn(o,a,o,a,new De(i,0,0),t.length,!0))}function Ax(r,e,t,i,o){if(!i.isTextblock)throw new RangeError("Type given to setBlockType should be a textblock");let a=r.steps.length;r.doc.nodesBetween(e,t,(u,f)=>{let h=typeof o=="function"?o(u):o;if(u.isTextblock&&!u.hasMarkup(i,h)&&_x(r.doc,r.mapping.slice(a).map(f),i)){let m=null;if(i.schema.linebreakReplacement){let O=i.whitespace=="pre",T=!!i.contentMatch.matchType(i.schema.linebreakReplacement);O&&!T?m=!1:!O&&T&&(m=!0)}m===!1&&zv(r,u,f,a),pp(r,r.mapping.slice(a).map(f,1),i,void 0,m===null);let v=r.mapping.slice(a),S=v.map(f,1),w=v.map(f+u.nodeSize,1);return r.step(new Dn(S,w,S+1,w-1,new De(ae.from(i.create(h,null,u.marks)),0,0),1,!0)),m===!0&&Bv(r,u,f,a),!1}})}function Bv(r,e,t,i){e.forEach((o,a)=>{if(o.isText){let u,f=/\r?\n|\r/g;for(;u=f.exec(o.text);){let h=r.mapping.slice(i).map(t+1+a+u.index);r.replaceWith(h,h+1,e.type.schema.linebreakReplacement.create())}}})}function zv(r,e,t,i){e.forEach((o,a)=>{if(o.type==o.type.schema.linebreakReplacement){let u=r.mapping.slice(i).map(t+1+a);r.replaceWith(u,u+1,e.type.schema.text(`
`))}})}function _x(r,e,t){let i=r.resolve(e),o=i.index();return i.parent.canReplaceWith(o,o+1,t)}function Nx(r,e,t,i,o){let a=r.doc.nodeAt(e);if(!a)throw new RangeError("No node at given position");t||(t=a.type);let u=t.create(i,null,o||a.marks);if(a.isLeaf)return r.replaceWith(e,e+a.nodeSize,u);if(!t.validContent(a.content))throw new RangeError("Invalid content for node type "+t.name);r.step(new Dn(e,e+a.nodeSize,e+1,e+a.nodeSize-1,new De(ae.from(u),0,0),1,!0))}function ms(r,e,t=1,i){let o=r.resolve(e),a=o.depth-t,u=i&&i[i.length-1]||o.parent;if(a<0||o.parent.type.spec.isolating||!o.parent.canReplace(o.index(),o.parent.childCount)||!u.type.validContent(o.parent.content.cutByIndex(o.index(),o.parent.childCount)))return!1;for(let m=o.depth-1,v=t-2;m>a;m--,v--){let S=o.node(m),w=o.index(m);if(S.type.spec.isolating)return!1;let O=S.content.cutByIndex(w,S.childCount),T=i&&i[v+1];T&&(O=O.replaceChild(0,T.type.create(T.attrs)));let A=i&&i[v]||S;if(!S.canReplace(w+1,S.childCount)||!A.type.validContent(O))return!1}let f=o.indexAfter(a),h=i&&i[0];return o.node(a).canReplaceWith(f,f,h?h.type:o.node(a+1).type)}function Dx(r,e,t=1,i){let o=r.doc.resolve(e),a=ae.empty,u=ae.empty;for(let f=o.depth,h=o.depth-t,m=t-1;f>h;f--,m--){a=ae.from(o.node(f).copy(a));let v=i&&i[m];u=ae.from(v?v.type.create(v.attrs,u):o.node(f).copy(u))}r.step(new Nn(e,e,new De(a.append(u),t,t),!0))}function oo(r,e){let t=r.resolve(e),i=t.index();return Lv(t.nodeBefore,t.nodeAfter)&&t.parent.canReplace(i,i+1)}function Rx(r,e){e.content.size||r.type.compatibleContent(e.type);let t=r.contentMatchAt(r.childCount),{linebreakReplacement:i}=r.type.schema;for(let o=0;o<e.childCount;o++){let a=e.child(o),u=a.type==i?r.type.schema.nodes.text:a.type;if(t=t.matchType(u),!t||!r.type.allowsMarks(a.marks))return!1}return t.validEnd}function Lv(r,e){return!!(r&&e&&!r.isLeaf&&Rx(r,e))}function mf(r,e,t=-1){let i=r.resolve(e);for(let o=i.depth;;o--){let a,u,f=i.index(o);if(o==i.depth?(a=i.nodeBefore,u=i.nodeAfter):t>0?(a=i.node(o+1),f++,u=i.node(o).maybeChild(f)):(a=i.node(o).maybeChild(f-1),u=i.node(o+1)),a&&!a.isTextblock&&Lv(a,u)&&i.node(o).canReplace(f,f+1))return e;if(o==0)break;e=t<0?i.before(o):i.after(o)}}function Bx(r,e,t){let i=null,{linebreakReplacement:o}=r.doc.type.schema,a=r.doc.resolve(e-t),u=a.node().type;if(o&&u.inlineContent){let v=u.whitespace=="pre",S=!!u.contentMatch.matchType(o);v&&!S?i=!1:!v&&S&&(i=!0)}let f=r.steps.length;if(i===!1){let v=r.doc.resolve(e+t);zv(r,v.node(),v.before(),f)}u.inlineContent&&pp(r,e+t-1,u,a.node().contentMatchAt(a.index()),i==null);let h=r.mapping.slice(f),m=h.map(e-t);if(r.step(new Nn(m,h.map(e+t,-1),De.empty,!0)),i===!0){let v=r.doc.resolve(m);Bv(r,v.node(),v.before(),r.steps.length)}return r}function zx(r,e,t){let i=r.resolve(e);if(i.parent.canReplaceWith(i.index(),i.index(),t))return e;if(i.parentOffset==0)for(let o=i.depth-1;o>=0;o--){let a=i.index(o);if(i.node(o).canReplaceWith(a,a,t))return i.before(o+1);if(a>0)return null}if(i.parentOffset==i.parent.content.size)for(let o=i.depth-1;o>=0;o--){let a=i.indexAfter(o);if(i.node(o).canReplaceWith(a,a,t))return i.after(o+1);if(a<i.node(o).childCount)return null}return null}function jv(r,e,t){let i=r.resolve(e);if(!t.content.size)return e;let o=t.content;for(let a=0;a<t.openStart;a++)o=o.firstChild.content;for(let a=1;a<=(t.openStart==0&&t.size?2:1);a++)for(let u=i.depth;u>=0;u--){let f=u==i.depth?0:i.pos<=(i.start(u+1)+i.end(u+1))/2?-1:1,h=i.index(u)+(f>0?1:0),m=i.node(u),v=!1;if(a==1)v=m.canReplace(h,h,o);else{let S=m.contentMatchAt(h).findWrapping(o.firstChild.type);v=S&&m.canReplaceWith(h,h,S[0])}if(v)return f==0?i.pos:f<0?i.before(u+1):i.after(u+1)}return null}function gf(r,e,t=e,i=De.empty){if(e==t&&!i.size)return null;let o=r.resolve(e),a=r.resolve(t);return Hv(o,a,i)?new Nn(e,t,i):new Lx(o,a,i).fit()}function Hv(r,e,t){return!t.openStart&&!t.openEnd&&r.start()==e.start()&&r.parent.canReplace(r.index(),e.index(),t.content)}class Lx{constructor(e,t,i){this.$from=e,this.$to=t,this.unplaced=i,this.frontier=[],this.placed=ae.empty;for(let o=0;o<=e.depth;o++){let a=e.node(o);this.frontier.push({type:a.type,match:a.contentMatchAt(e.indexAfter(o))})}for(let o=e.depth;o>0;o--)this.placed=ae.from(e.node(o).copy(this.placed))}get depth(){return this.frontier.length-1}fit(){for(;this.unplaced.size;){let m=this.findFittable();m?this.placeNodes(m):this.openMore()||this.dropNode()}let e=this.mustMoveInline(),t=this.placed.size-this.depth-this.$from.depth,i=this.$from,o=this.close(e<0?this.$to:i.doc.resolve(e));if(!o)return null;let a=this.placed,u=i.depth,f=o.depth;for(;u&&f&&a.childCount==1;)a=a.firstChild.content,u--,f--;let h=new De(a,u,f);return e>-1?new Dn(i.pos,e,this.$to.pos,this.$to.end(),h,t):h.size||i.pos!=this.$to.pos?new Nn(i.pos,o.pos,h):null}findFittable(){let e=this.unplaced.openStart;for(let t=this.unplaced.content,i=0,o=this.unplaced.openEnd;i<e;i++){let a=t.firstChild;if(t.childCount>1&&(o=0),a.type.spec.isolating&&o<=i){e=i;break}t=a.content}for(let t=1;t<=2;t++)for(let i=t==1?e:this.unplaced.openStart;i>=0;i--){let o,a=null;i?(a=wh(this.unplaced.content,i-1).firstChild,o=a.content):o=this.unplaced.content;let u=o.firstChild;for(let f=this.depth;f>=0;f--){let{type:h,match:m}=this.frontier[f],v,S=null;if(t==1&&(u?m.matchType(u.type)||(S=m.fillBefore(ae.from(u),!1)):a&&h.compatibleContent(a.type)))return{sliceDepth:i,frontierDepth:f,parent:a,inject:S};if(t==2&&u&&(v=m.findWrapping(u.type)))return{sliceDepth:i,frontierDepth:f,parent:a,wrap:v};if(a&&m.matchType(a.type))break}}}openMore(){let{content:e,openStart:t,openEnd:i}=this.unplaced,o=wh(e,t);return!o.childCount||o.firstChild.isLeaf?!1:(this.unplaced=new De(e,t+1,Math.max(i,o.size+t>=e.size-i?t+1:0)),!0)}dropNode(){let{content:e,openStart:t,openEnd:i}=this.unplaced,o=wh(e,t);if(o.childCount<=1&&t>0){let a=e.size-t<=t+o.size;this.unplaced=new De(lu(e,t-1,1),t-1,a?t-1:i)}else this.unplaced=new De(lu(e,t,1),t,i)}placeNodes({sliceDepth:e,frontierDepth:t,parent:i,inject:o,wrap:a}){for(;this.depth>t;)this.closeFrontierNode();if(a)for(let A=0;A<a.length;A++)this.openFrontierNode(a[A]);let u=this.unplaced,f=i?i.content:u.content,h=u.openStart-e,m=0,v=[],{match:S,type:w}=this.frontier[t];if(o){for(let A=0;A<o.childCount;A++)v.push(o.child(A));S=S.matchFragment(o)}let O=f.size+e-(u.content.size-u.openEnd);for(;m<f.childCount;){let A=f.child(m),R=S.matchType(A.type);if(!R)break;m++,(m>1||h==0||A.content.size)&&(S=R,v.push(qv(A.mark(w.allowedMarks(A.marks)),m==1?h:0,m==f.childCount?O:-1)))}let T=m==f.childCount;T||(O=-1),this.placed=au(this.placed,t,ae.from(v)),this.frontier[t].match=S,T&&O<0&&i&&i.type==this.frontier[this.depth].type&&this.frontier.length>1&&this.closeFrontierNode();for(let A=0,R=f;A<O;A++){let W=R.lastChild;this.frontier.push({type:W.type,match:W.contentMatchAt(W.childCount)}),R=W.content}this.unplaced=T?e==0?De.empty:new De(lu(u.content,e-1,1),e-1,O<0?u.openEnd:e-1):new De(lu(u.content,e,m),u.openStart,u.openEnd)}mustMoveInline(){if(!this.$to.parent.isTextblock)return-1;let e=this.frontier[this.depth],t;if(!e.type.isTextblock||!Th(this.$to,this.$to.depth,e.type,e.match,!1)||this.$to.depth==this.depth&&(t=this.findCloseLevel(this.$to))&&t.depth==this.depth)return-1;let{depth:i}=this.$to,o=this.$to.after(i);for(;i>1&&o==this.$to.end(--i);)++o;return o}findCloseLevel(e){e:for(let t=Math.min(this.depth,e.depth);t>=0;t--){let{match:i,type:o}=this.frontier[t],a=t<e.depth&&e.end(t+1)==e.pos+(e.depth-(t+1)),u=Th(e,t,o,i,a);if(u){for(let f=t-1;f>=0;f--){let{match:h,type:m}=this.frontier[f],v=Th(e,f,m,h,!0);if(!v||v.childCount)continue e}return{depth:t,fit:u,move:a?e.doc.resolve(e.after(t+1)):e}}}}close(e){let t=this.findCloseLevel(e);if(!t)return null;for(;this.depth>t.depth;)this.closeFrontierNode();t.fit.childCount&&(this.placed=au(this.placed,t.depth,t.fit)),e=t.move;for(let i=t.depth+1;i<=e.depth;i++){let o=e.node(i),a=o.type.contentMatch.fillBefore(o.content,!0,e.index(i));this.openFrontierNode(o.type,o.attrs,a)}return e}openFrontierNode(e,t=null,i){let o=this.frontier[this.depth];o.match=o.match.matchType(e),this.placed=au(this.placed,this.depth,ae.from(e.create(t,i))),this.frontier.push({type:e,match:e.contentMatch})}closeFrontierNode(){let t=this.frontier.pop().match.fillBefore(ae.empty,!0);t.childCount&&(this.placed=au(this.placed,this.frontier.length,t))}}function lu(r,e,t){return e==0?r.cutByIndex(t,r.childCount):r.replaceChild(0,r.firstChild.copy(lu(r.firstChild.content,e-1,t)))}function au(r,e,t){return e==0?r.append(t):r.replaceChild(r.childCount-1,r.lastChild.copy(au(r.lastChild.content,e-1,t)))}function wh(r,e){for(let t=0;t<e;t++)r=r.firstChild.content;return r}function qv(r,e,t){if(e<=0)return r;let i=r.content;return e>1&&(i=i.replaceChild(0,qv(i.firstChild,e-1,i.childCount==1?t-1:0))),e>0&&(i=r.type.contentMatch.fillBefore(i).append(i),t<=0&&(i=i.append(r.type.contentMatch.matchFragment(i).fillBefore(ae.empty,!0)))),r.copy(i)}function Th(r,e,t,i,o){let a=r.node(e),u=o?r.indexAfter(e):r.index(e);if(u==a.childCount&&!t.compatibleContent(a.type))return null;let f=i.fillBefore(a.content,!0,u);return f&&!jx(t,a.content,u)?f:null}function jx(r,e,t){for(let i=t;i<e.childCount;i++)if(!r.allowsMarks(e.child(i).marks))return!0;return!1}function Hx(r){return r.spec.defining||r.spec.definingForContent}function qx(r,e,t,i){if(!i.size)return r.deleteRange(e,t);let o=r.doc.resolve(e),a=r.doc.resolve(t);if(Hv(o,a,i))return r.step(new Nn(e,t,i));let u=Vv(o,r.doc.resolve(t));u[u.length-1]==0&&u.pop();let f=-(o.depth+1);u.unshift(f);for(let w=o.depth,O=o.pos-1;w>0;w--,O--){let T=o.node(w).type.spec;if(T.defining||T.definingAsContext||T.isolating)break;u.indexOf(w)>-1?f=w:o.before(w)==O&&u.splice(1,0,-w)}let h=u.indexOf(f),m=[],v=i.openStart;for(let w=i.content,O=0;;O++){let T=w.firstChild;if(m.push(T),O==i.openStart)break;w=T.content}for(let w=v-1;w>=0;w--){let O=m[w],T=Hx(O.type);if(T&&!O.sameMarkup(o.node(Math.abs(f)-1)))v=w;else if(T||!O.type.isTextblock)break}for(let w=i.openStart;w>=0;w--){let O=(w+v+1)%(i.openStart+1),T=m[O];if(T)for(let A=0;A<u.length;A++){let R=u[(A+h)%u.length],W=!0;R<0&&(W=!1,R=-R);let Te=o.node(R-1),_e=o.index(R-1);if(Te.canReplaceWith(_e,_e,T.type,T.marks))return r.replace(o.before(R),W?a.after(R):t,new De(Uv(i.content,0,i.openStart,O),O,i.openEnd))}}let S=r.steps.length;for(let w=u.length-1;w>=0&&(r.replace(e,t,i),!(r.steps.length>S));w--){let O=u[w];O<0||(e=o.before(O),t=a.after(O))}}function Uv(r,e,t,i,o){if(e<t){let a=r.firstChild;r=r.replaceChild(0,a.copy(Uv(a.content,e+1,t,i,a)))}if(e>i){let a=o.contentMatchAt(0),u=a.fillBefore(r).append(r);r=u.append(a.matchFragment(u).fillBefore(ae.empty,!0))}return r}function Ux(r,e,t,i){if(!i.isInline&&e==t&&r.doc.resolve(e).parent.content.size){let o=zx(r.doc,e,i.type);o!=null&&(e=t=o)}r.replaceRange(e,t,new De(ae.from(i),0,0))}function Vx(r,e,t){let i=r.doc.resolve(e),o=r.doc.resolve(t),a=Vv(i,o);for(let u=0;u<a.length;u++){let f=a[u],h=u==a.length-1;if(h&&f==0||i.node(f).type.contentMatch.validEnd)return r.delete(i.start(f),o.end(f));if(f>0&&(h||i.node(f-1).canReplace(i.index(f-1),o.indexAfter(f-1))))return r.delete(i.before(f),o.after(f))}for(let u=1;u<=i.depth&&u<=o.depth;u++)if(e-i.start(u)==i.depth-u&&t>i.end(u)&&o.end(u)-t!=o.depth-u&&i.start(u-1)==o.start(u-1)&&i.node(u-1).canReplace(i.index(u-1),o.index(u-1)))return r.delete(i.before(u),t);r.delete(e,t)}function Vv(r,e){let t=[],i=Math.min(r.depth,e.depth);for(let o=i;o>=0;o--){let a=r.start(o);if(a<r.pos-(r.depth-o)||e.end(o)>e.pos+(e.depth-o)||r.node(o).type.spec.isolating||e.node(o).type.spec.isolating)break;(a==e.start(o)||o==r.depth&&o==e.depth&&r.parent.inlineContent&&e.parent.inlineContent&&o&&e.start(o-1)==a-1)&&t.push(o)}return t}class Ql extends rr{constructor(e,t,i){super(),this.pos=e,this.attr=t,this.value=i}apply(e){let t=e.nodeAt(this.pos);if(!t)return pn.fail("No node at attribute step's position");let i=Object.create(null);for(let a in t.attrs)i[a]=t.attrs[a];i[this.attr]=this.value;let o=t.type.create(i,null,t.marks);return pn.fromReplace(e,this.pos,this.pos+1,new De(ae.from(o),0,t.isLeaf?0:1))}getMap(){return jr.empty}invert(e){return new Ql(this.pos,this.attr,e.nodeAt(this.pos).attrs[this.attr])}map(e){let t=e.mapResult(this.pos,1);return t.deletedAfter?null:new Ql(t.pos,this.attr,this.value)}toJSON(){return{stepType:"attr",pos:this.pos,attr:this.attr,value:this.value}}static fromJSON(e,t){if(typeof t.pos!="number"||typeof t.attr!="string")throw new RangeError("Invalid input for AttrStep.fromJSON");return new Ql(t.pos,t.attr,t.value)}}rr.jsonID("attr",Ql);class yu extends rr{constructor(e,t){super(),this.attr=e,this.value=t}apply(e){let t=Object.create(null);for(let o in e.attrs)t[o]=e.attrs[o];t[this.attr]=this.value;let i=e.type.create(t,e.content,e.marks);return pn.ok(i)}getMap(){return jr.empty}invert(e){return new yu(this.attr,e.attrs[this.attr])}map(e){return this}toJSON(){return{stepType:"docAttr",attr:this.attr,value:this.value}}static fromJSON(e,t){if(typeof t.attr!="string")throw new RangeError("Invalid input for DocAttrStep.fromJSON");return new yu(t.attr,t.value)}}rr.jsonID("docAttr",yu);let Zl=class extends Error{};Zl=function r(e){let t=Error.call(this,e);return t.__proto__=r.prototype,t};Zl.prototype=Object.create(Error.prototype);Zl.prototype.constructor=Zl;Zl.prototype.name="TransformError";class Ix{constructor(e){this.doc=e,this.steps=[],this.docs=[],this.mapping=new gu}get before(){return this.docs.length?this.docs[0]:this.doc}step(e){let t=this.maybeStep(e);if(t.failed)throw new Zl(t.failed);return this}maybeStep(e){let t=e.apply(this.doc);return t.failed||this.addStep(e,t.doc),t}get docChanged(){return this.steps.length>0}addStep(e,t){this.docs.push(this.doc),this.steps.push(e),this.mapping.appendMap(e.getMap()),this.doc=t}replace(e,t=e,i=De.empty){let o=gf(this.doc,e,t,i);return o&&this.step(o),this}replaceWith(e,t,i){return this.replace(e,t,new De(ae.from(i),0,0))}delete(e,t){return this.replace(e,t,De.empty)}insert(e,t){return this.replaceWith(e,e,t)}replaceRange(e,t,i){return qx(this,e,t,i),this}replaceRangeWith(e,t,i){return Ux(this,e,t,i),this}deleteRange(e,t){return Vx(this,e,t),this}lift(e,t){return Tx(this,e,t),this}join(e,t=1){return Bx(this,e,t),this}wrap(e,t){return Cx(this,e,t),this}setBlockType(e,t=e,i,o=null){return Ax(this,e,t,i,o),this}setNodeMarkup(e,t,i=null,o){return Nx(this,e,t,i,o),this}setNodeAttribute(e,t,i){return this.step(new Ql(e,t,i)),this}setDocAttribute(e,t){return this.step(new yu(e,t)),this}addNodeMark(e,t){return this.step(new Zs(e,t)),this}removeNodeMark(e,t){let i=this.doc.nodeAt(e);if(!i)throw new RangeError("No node at position "+e);if(t instanceof Lt)t.isInSet(i.marks)&&this.step(new $o(e,t));else{let o=i.marks,a,u=[];for(;a=t.isInSet(o);)u.push(new $o(e,a)),o=a.removeFromSet(o);for(let f=u.length-1;f>=0;f--)this.step(u[f])}return this}split(e,t=1,i){return Dx(this,e,t,i),this}addMark(e,t,i){return Ex(this,e,t,i),this}removeMark(e,t,i){return Mx(this,e,t,i),this}clearIncompatible(e,t,i){return pp(this,e,t,i),this}}const Oh=Object.create(null);class ct{constructor(e,t,i){this.$anchor=e,this.$head=t,this.ranges=i||[new Kx(e.min(t),e.max(t))]}get anchor(){return this.$anchor.pos}get head(){return this.$head.pos}get from(){return this.$from.pos}get to(){return this.$to.pos}get $from(){return this.ranges[0].$from}get $to(){return this.ranges[0].$to}get empty(){let e=this.ranges;for(let t=0;t<e.length;t++)if(e[t].$from.pos!=e[t].$to.pos)return!1;return!0}content(){return this.$from.doc.slice(this.from,this.to,!0)}replace(e,t=De.empty){let i=t.content.lastChild,o=null;for(let f=0;f<t.openEnd;f++)o=i,i=i.lastChild;let a=e.steps.length,u=this.ranges;for(let f=0;f<u.length;f++){let{$from:h,$to:m}=u[f],v=e.mapping.slice(a);e.replaceRange(v.map(h.pos),v.map(m.pos),f?De.empty:t),f==0&&s0(e,a,(i?i.isInline:o&&o.isTextblock)?-1:1)}}replaceWith(e,t){let i=e.steps.length,o=this.ranges;for(let a=0;a<o.length;a++){let{$from:u,$to:f}=o[a],h=e.mapping.slice(i),m=h.map(u.pos),v=h.map(f.pos);a?e.deleteRange(m,v):(e.replaceRangeWith(m,v,t),s0(e,i,t.isInline?-1:1))}}static findFrom(e,t,i=!1){let o=e.parent.inlineContent?new it(e):Gl(e.node(0),e.parent,e.pos,e.index(),t,i);if(o)return o;for(let a=e.depth-1;a>=0;a--){let u=t<0?Gl(e.node(0),e.node(a),e.before(a+1),e.index(a),t,i):Gl(e.node(0),e.node(a),e.after(a+1),e.index(a)+1,t,i);if(u)return u}return null}static near(e,t=1){return this.findFrom(e,t)||this.findFrom(e,-t)||new Hr(e.node(0))}static atStart(e){return Gl(e,e,0,0,1)||new Hr(e)}static atEnd(e){return Gl(e,e,e.content.size,e.childCount,-1)||new Hr(e)}static fromJSON(e,t){if(!t||!t.type)throw new RangeError("Invalid input for Selection.fromJSON");let i=Oh[t.type];if(!i)throw new RangeError(`No selection type ${t.type} defined`);return i.fromJSON(e,t)}static jsonID(e,t){if(e in Oh)throw new RangeError("Duplicate use of selection JSON ID "+e);return Oh[e]=t,t.prototype.jsonID=e,t}getBookmark(){return it.between(this.$anchor,this.$head).getBookmark()}}ct.prototype.visible=!0;class Kx{constructor(e,t){this.$from=e,this.$to=t}}let r0=!1;function i0(r){!r0&&!r.parent.inlineContent&&(r0=!0,console.warn("TextSelection endpoint not pointing into a node with inline content ("+r.parent.type.name+")"))}class it extends ct{constructor(e,t=e){i0(e),i0(t),super(e,t)}get $cursor(){return this.$anchor.pos==this.$head.pos?this.$head:null}map(e,t){let i=e.resolve(t.map(this.head));if(!i.parent.inlineContent)return ct.near(i);let o=e.resolve(t.map(this.anchor));return new it(o.parent.inlineContent?o:i,i)}replace(e,t=De.empty){if(super.replace(e,t),t==De.empty){let i=this.$from.marksAcross(this.$to);i&&e.ensureMarks(i)}}eq(e){return e instanceof it&&e.anchor==this.anchor&&e.head==this.head}getBookmark(){return new yf(this.anchor,this.head)}toJSON(){return{type:"text",anchor:this.anchor,head:this.head}}static fromJSON(e,t){if(typeof t.anchor!="number"||typeof t.head!="number")throw new RangeError("Invalid input for TextSelection.fromJSON");return new it(e.resolve(t.anchor),e.resolve(t.head))}static create(e,t,i=t){let o=e.resolve(t);return new this(o,i==t?o:e.resolve(i))}static between(e,t,i){let o=e.pos-t.pos;if((!i||o)&&(i=o>=0?1:-1),!t.parent.inlineContent){let a=ct.findFrom(t,i,!0)||ct.findFrom(t,-i,!0);if(a)t=a.$head;else return ct.near(t,i)}return e.parent.inlineContent||(o==0?e=t:(e=(ct.findFrom(e,-i,!0)||ct.findFrom(e,i,!0)).$anchor,e.pos<t.pos!=o<0&&(e=t))),new it(e,t)}}ct.jsonID("text",it);class yf{constructor(e,t){this.anchor=e,this.head=t}map(e){return new yf(e.map(this.anchor),e.map(this.head))}resolve(e){return it.between(e.resolve(this.anchor),e.resolve(this.head))}}class Xe extends ct{constructor(e){let t=e.nodeAfter,i=e.node(0).resolve(e.pos+t.nodeSize);super(e,i),this.node=t}map(e,t){let{deleted:i,pos:o}=t.mapResult(this.anchor),a=e.resolve(o);return i?ct.near(a):new Xe(a)}content(){return new De(ae.from(this.node),0,0)}eq(e){return e instanceof Xe&&e.anchor==this.anchor}toJSON(){return{type:"node",anchor:this.anchor}}getBookmark(){return new gp(this.anchor)}static fromJSON(e,t){if(typeof t.anchor!="number")throw new RangeError("Invalid input for NodeSelection.fromJSON");return new Xe(e.resolve(t.anchor))}static create(e,t){return new Xe(e.resolve(t))}static isSelectable(e){return!e.isText&&e.type.spec.selectable!==!1}}Xe.prototype.visible=!1;ct.jsonID("node",Xe);class gp{constructor(e){this.anchor=e}map(e){let{deleted:t,pos:i}=e.mapResult(this.anchor);return t?new yf(i,i):new gp(i)}resolve(e){let t=e.resolve(this.anchor),i=t.nodeAfter;return i&&Xe.isSelectable(i)?new Xe(t):ct.near(t)}}class Hr extends ct{constructor(e){super(e.resolve(0),e.resolve(e.content.size))}replace(e,t=De.empty){if(t==De.empty){e.delete(0,e.doc.content.size);let i=ct.atStart(e.doc);i.eq(e.selection)||e.setSelection(i)}else super.replace(e,t)}toJSON(){return{type:"all"}}static fromJSON(e){return new Hr(e)}map(e){return new Hr(e)}eq(e){return e instanceof Hr}getBookmark(){return Px}}ct.jsonID("all",Hr);const Px={map(){return this},resolve(r){return new Hr(r)}};function Gl(r,e,t,i,o,a=!1){if(e.inlineContent)return it.create(r,t);for(let u=i-(o>0?0:1);o>0?u<e.childCount:u>=0;u+=o){let f=e.child(u);if(f.isAtom){if(!a&&Xe.isSelectable(f))return Xe.create(r,t-(o<0?f.nodeSize:0))}else{let h=Gl(r,f,t+o,o<0?f.childCount:0,o,a);if(h)return h}t+=f.nodeSize*o}return null}function s0(r,e,t){let i=r.steps.length-1;if(i<e)return;let o=r.steps[i];if(!(o instanceof Nn||o instanceof Dn))return;let a=r.mapping.maps[i],u;a.forEach((f,h,m,v)=>{u==null&&(u=v)}),r.setSelection(ct.near(r.doc.resolve(u),t))}const o0=1,l0=2,a0=4;class Yx extends Ix{constructor(e){super(e.doc),this.curSelectionFor=0,this.updated=0,this.meta=Object.create(null),this.time=Date.now(),this.curSelection=e.selection,this.storedMarks=e.storedMarks}get selection(){return this.curSelectionFor<this.steps.length&&(this.curSelection=this.curSelection.map(this.doc,this.mapping.slice(this.curSelectionFor)),this.curSelectionFor=this.steps.length),this.curSelection}setSelection(e){if(e.$from.doc!=this.doc)throw new RangeError("Selection passed to setSelection must point at the current document");return this.curSelection=e,this.curSelectionFor=this.steps.length,this.updated=(this.updated|o0)&-3,this.storedMarks=null,this}get selectionSet(){return(this.updated&o0)>0}setStoredMarks(e){return this.storedMarks=e,this.updated|=l0,this}ensureMarks(e){return Lt.sameSet(this.storedMarks||this.selection.$from.marks(),e)||this.setStoredMarks(e),this}addStoredMark(e){return this.ensureMarks(e.addToSet(this.storedMarks||this.selection.$head.marks()))}removeStoredMark(e){return this.ensureMarks(e.removeFromSet(this.storedMarks||this.selection.$head.marks()))}get storedMarksSet(){return(this.updated&l0)>0}addStep(e,t){super.addStep(e,t),this.updated=this.updated&-3,this.storedMarks=null}setTime(e){return this.time=e,this}replaceSelection(e){return this.selection.replace(this,e),this}replaceSelectionWith(e,t=!0){let i=this.selection;return t&&(e=e.mark(this.storedMarks||(i.empty?i.$from.marks():i.$from.marksAcross(i.$to)||Lt.none))),i.replaceWith(this,e),this}deleteSelection(){return this.selection.replace(this),this}insertText(e,t,i){let o=this.doc.type.schema;if(t==null)return e?this.replaceSelectionWith(o.text(e),!0):this.deleteSelection();{if(i==null&&(i=t),i=i??t,!e)return this.deleteRange(t,i);let a=this.storedMarks;if(!a){let u=this.doc.resolve(t);a=i==t?u.marks():u.marksAcross(this.doc.resolve(i))}return this.replaceRangeWith(t,i,o.text(e,a)),this.selection.empty||this.setSelection(ct.near(this.selection.$to)),this}}setMeta(e,t){return this.meta[typeof e=="string"?e:e.key]=t,this}getMeta(e){return this.meta[typeof e=="string"?e:e.key]}get isGeneric(){for(let e in this.meta)return!1;return!0}scrollIntoView(){return this.updated|=a0,this}get scrolledIntoView(){return(this.updated&a0)>0}}function u0(r,e){return!e||!r?r:r.bind(e)}class uu{constructor(e,t,i){this.name=e,this.init=u0(t.init,i),this.apply=u0(t.apply,i)}}const Gx=[new uu("doc",{init(r){return r.doc||r.schema.topNodeType.createAndFill()},apply(r){return r.doc}}),new uu("selection",{init(r,e){return r.selection||ct.atStart(e.doc)},apply(r){return r.selection}}),new uu("storedMarks",{init(r){return r.storedMarks||null},apply(r,e,t,i){return i.selection.$cursor?r.storedMarks:null}}),new uu("scrollToSelection",{init(){return 0},apply(r,e){return r.scrolledIntoView?e+1:e}})];class kh{constructor(e,t){this.schema=e,this.plugins=[],this.pluginsByKey=Object.create(null),this.fields=Gx.slice(),t&&t.forEach(i=>{if(this.pluginsByKey[i.key])throw new RangeError("Adding different instances of a keyed plugin ("+i.key+")");this.plugins.push(i),this.pluginsByKey[i.key]=i,i.spec.state&&this.fields.push(new uu(i.key,i.spec.state,i))})}}class Xl{constructor(e){this.config=e}get schema(){return this.config.schema}get plugins(){return this.config.plugins}apply(e){return this.applyTransaction(e).state}filterTransaction(e,t=-1){for(let i=0;i<this.config.plugins.length;i++)if(i!=t){let o=this.config.plugins[i];if(o.spec.filterTransaction&&!o.spec.filterTransaction.call(o,e,this))return!1}return!0}applyTransaction(e){if(!this.filterTransaction(e))return{state:this,transactions:[]};let t=[e],i=this.applyInner(e),o=null;for(;;){let a=!1;for(let u=0;u<this.config.plugins.length;u++){let f=this.config.plugins[u];if(f.spec.appendTransaction){let h=o?o[u].n:0,m=o?o[u].state:this,v=h<t.length&&f.spec.appendTransaction.call(f,h?t.slice(h):t,m,i);if(v&&i.filterTransaction(v,u)){if(v.setMeta("appendedTransaction",e),!o){o=[];for(let S=0;S<this.config.plugins.length;S++)o.push(S<u?{state:i,n:t.length}:{state:this,n:0})}t.push(v),i=i.applyInner(v),a=!0}o&&(o[u]={state:i,n:t.length})}}if(!a)return{state:i,transactions:t}}}applyInner(e){if(!e.before.eq(this.doc))throw new RangeError("Applying a mismatched transaction");let t=new Xl(this.config),i=this.config.fields;for(let o=0;o<i.length;o++){let a=i[o];t[a.name]=a.apply(e,this[a.name],this,t)}return t}get tr(){return new Yx(this)}static create(e){let t=new kh(e.doc?e.doc.type.schema:e.schema,e.plugins),i=new Xl(t);for(let o=0;o<t.fields.length;o++)i[t.fields[o].name]=t.fields[o].init(e,i);return i}reconfigure(e){let t=new kh(this.schema,e.plugins),i=t.fields,o=new Xl(t);for(let a=0;a<i.length;a++){let u=i[a].name;o[u]=this.hasOwnProperty(u)?this[u]:i[a].init(e,o)}return o}toJSON(e){let t={doc:this.doc.toJSON(),selection:this.selection.toJSON()};if(this.storedMarks&&(t.storedMarks=this.storedMarks.map(i=>i.toJSON())),e&&typeof e=="object")for(let i in e){if(i=="doc"||i=="selection")throw new RangeError("The JSON fields `doc` and `selection` are reserved");let o=e[i],a=o.spec.state;a&&a.toJSON&&(t[i]=a.toJSON.call(o,this[o.key]))}return t}static fromJSON(e,t,i){if(!t)throw new RangeError("Invalid input for EditorState.fromJSON");if(!e.schema)throw new RangeError("Required config field 'schema' missing");let o=new kh(e.schema,e.plugins),a=new Xl(o);return o.fields.forEach(u=>{if(u.name=="doc")a.doc=eo.fromJSON(e.schema,t.doc);else if(u.name=="selection")a.selection=ct.fromJSON(a.doc,t.selection);else if(u.name=="storedMarks")t.storedMarks&&(a.storedMarks=t.storedMarks.map(e.schema.markFromJSON));else{if(i)for(let f in i){let h=i[f],m=h.spec.state;if(h.key==u.name&&m&&m.fromJSON&&Object.prototype.hasOwnProperty.call(t,f)){a[u.name]=m.fromJSON.call(h,e,t[f],a);return}}a[u.name]=u.init(e,a)}}),a}}function Iv(r,e,t){for(let i in r){let o=r[i];o instanceof Function?o=o.bind(e):i=="handleDOMEvents"&&(o=Iv(o,e,{})),t[i]=o}return t}class Mr{constructor(e){this.spec=e,this.props={},e.props&&Iv(e.props,this,this.props),this.key=e.key?e.key.key:Kv("plugin")}getState(e){return e[this.key]}}const Ch=Object.create(null);function Kv(r){return r in Ch?r+"$"+ ++Ch[r]:(Ch[r]=0,r+"$")}class Ii{constructor(e="key"){this.key=Kv(e)}get(e){return e.config.pluginsByKey[this.key]}getState(e){return e[this.key]}}const Pn=function(r){for(var e=0;;e++)if(r=r.previousSibling,!r)return e},Wl=function(r){let e=r.assignedSlot||r.parentNode;return e&&e.nodeType==11?e.host:e};let Jh=null;const hs=function(r,e,t){let i=Jh||(Jh=document.createRange());return i.setEnd(r,t??r.nodeValue.length),i.setStart(r,e||0),i},$x=function(){Jh=null},Xo=function(r,e,t,i){return t&&(c0(r,e,t,i,-1)||c0(r,e,t,i,1))},Xx=/^(img|br|input|textarea|hr)$/i;function c0(r,e,t,i,o){for(;;){if(r==t&&e==i)return!0;if(e==(o<0?0:ri(r))){let a=r.parentNode;if(!a||a.nodeType!=1||wu(r)||Xx.test(r.nodeName)||r.contentEditable=="false")return!1;e=Pn(r)+(o<0?0:1),r=a}else if(r.nodeType==1){if(r=r.childNodes[e+(o<0?-1:0)],r.contentEditable=="false")return!1;e=o<0?ri(r):0}else return!1}}function ri(r){return r.nodeType==3?r.nodeValue.length:r.childNodes.length}function Fx(r,e){for(;;){if(r.nodeType==3&&e)return r;if(r.nodeType==1&&e>0){if(r.contentEditable=="false")return null;r=r.childNodes[e-1],e=ri(r)}else if(r.parentNode&&!wu(r))e=Pn(r),r=r.parentNode;else return null}}function Qx(r,e){for(;;){if(r.nodeType==3&&e<r.nodeValue.length)return r;if(r.nodeType==1&&e<r.childNodes.length){if(r.contentEditable=="false")return null;r=r.childNodes[e],e=0}else if(r.parentNode&&!wu(r))e=Pn(r)+1,r=r.parentNode;else return null}}function Jx(r,e,t){for(let i=e==0,o=e==ri(r);i||o;){if(r==t)return!0;let a=Pn(r);if(r=r.parentNode,!r)return!1;i=i&&a==0,o=o&&a==ri(r)}}function wu(r){let e;for(let t=r;t&&!(e=t.pmViewDesc);t=t.parentNode);return e&&e.node&&e.node.isBlock&&(e.dom==r||e.contentDOM==r)}const vf=function(r){return r.focusNode&&Xo(r.focusNode,r.focusOffset,r.anchorNode,r.anchorOffset)};function Lo(r,e){let t=document.createEvent("Event");return t.initEvent("keydown",!0,!0),t.keyCode=r,t.key=t.code=e,t}function Zx(r){let e=r.activeElement;for(;e&&e.shadowRoot;)e=e.shadowRoot.activeElement;return e}function Wx(r,e,t){if(r.caretPositionFromPoint)try{let i=r.caretPositionFromPoint(e,t);if(i)return{node:i.offsetNode,offset:Math.min(ri(i.offsetNode),i.offset)}}catch{}if(r.caretRangeFromPoint){let i=r.caretRangeFromPoint(e,t);if(i)return{node:i.startContainer,offset:Math.min(ri(i.startContainer),i.startOffset)}}}const Ui=typeof navigator<"u"?navigator:null,f0=typeof document<"u"?document:null,lo=Ui&&Ui.userAgent||"",Zh=/Edge\/(\d+)/.exec(lo),Pv=/MSIE \d/.exec(lo),Wh=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(lo),Er=!!(Pv||Wh||Zh),no=Pv?document.documentMode:Wh?+Wh[1]:Zh?+Zh[1]:0,wi=!Er&&/gecko\/(\d+)/i.test(lo);wi&&+(/Firefox\/(\d+)/.exec(lo)||[0,0])[1];const ep=!Er&&/Chrome\/(\d+)/.exec(lo),tr=!!ep,Yv=ep?+ep[1]:0,cr=!Er&&!!Ui&&/Apple Computer/.test(Ui.vendor),ea=cr&&(/Mobile\/\w+/.test(lo)||!!Ui&&Ui.maxTouchPoints>2),ni=ea||(Ui?/Mac/.test(Ui.platform):!1),eE=Ui?/Win/.test(Ui.platform):!1,ps=/Android \d/.test(lo),Tu=!!f0&&"webkitFontSmoothing"in f0.documentElement.style,tE=Tu?+(/\bAppleWebKit\/(\d+)/.exec(navigator.userAgent)||[0,0])[1]:0;function nE(r){let e=r.defaultView&&r.defaultView.visualViewport;return e?{left:0,right:e.width,top:0,bottom:e.height}:{left:0,right:r.documentElement.clientWidth,top:0,bottom:r.documentElement.clientHeight}}function ds(r,e){return typeof r=="number"?r:r[e]}function rE(r){let e=r.getBoundingClientRect(),t=e.width/r.offsetWidth||1,i=e.height/r.offsetHeight||1;return{left:e.left,right:e.left+r.clientWidth*t,top:e.top,bottom:e.top+r.clientHeight*i}}function d0(r,e,t){let i=r.someProp("scrollThreshold")||0,o=r.someProp("scrollMargin")||5,a=r.dom.ownerDocument;for(let u=t||r.dom;u;){if(u.nodeType!=1){u=Wl(u);continue}let f=u,h=f==a.body,m=h?nE(a):rE(f),v=0,S=0;if(e.top<m.top+ds(i,"top")?S=-(m.top-e.top+ds(o,"top")):e.bottom>m.bottom-ds(i,"bottom")&&(S=e.bottom-e.top>m.bottom-m.top?e.top+ds(o,"top")-m.top:e.bottom-m.bottom+ds(o,"bottom")),e.left<m.left+ds(i,"left")?v=-(m.left-e.left+ds(o,"left")):e.right>m.right-ds(i,"right")&&(v=e.right-m.right+ds(o,"right")),v||S)if(h)a.defaultView.scrollBy(v,S);else{let O=f.scrollLeft,T=f.scrollTop;S&&(f.scrollTop+=S),v&&(f.scrollLeft+=v);let A=f.scrollLeft-O,R=f.scrollTop-T;e={left:e.left-A,top:e.top-R,right:e.right-A,bottom:e.bottom-R}}let w=h?"fixed":getComputedStyle(u).position;if(/^(fixed|sticky)$/.test(w))break;u=w=="absolute"?u.offsetParent:Wl(u)}}function iE(r){let e=r.dom.getBoundingClientRect(),t=Math.max(0,e.top),i,o;for(let a=(e.left+e.right)/2,u=t+1;u<Math.min(innerHeight,e.bottom);u+=5){let f=r.root.elementFromPoint(a,u);if(!f||f==r.dom||!r.dom.contains(f))continue;let h=f.getBoundingClientRect();if(h.top>=t-20){i=f,o=h.top;break}}return{refDOM:i,refTop:o,stack:Gv(r.dom)}}function Gv(r){let e=[],t=r.ownerDocument;for(let i=r;i&&(e.push({dom:i,top:i.scrollTop,left:i.scrollLeft}),r!=t);i=Wl(i));return e}function sE({refDOM:r,refTop:e,stack:t}){let i=r?r.getBoundingClientRect().top:0;$v(t,i==0?0:i-e)}function $v(r,e){for(let t=0;t<r.length;t++){let{dom:i,top:o,left:a}=r[t];i.scrollTop!=o+e&&(i.scrollTop=o+e),i.scrollLeft!=a&&(i.scrollLeft=a)}}let Ul=null;function oE(r){if(r.setActive)return r.setActive();if(Ul)return r.focus(Ul);let e=Gv(r);r.focus(Ul==null?{get preventScroll(){return Ul={preventScroll:!0},!0}}:void 0),Ul||(Ul=!1,$v(e,0))}function Xv(r,e){let t,i=2e8,o,a=0,u=e.top,f=e.top,h,m;for(let v=r.firstChild,S=0;v;v=v.nextSibling,S++){let w;if(v.nodeType==1)w=v.getClientRects();else if(v.nodeType==3)w=hs(v).getClientRects();else continue;for(let O=0;O<w.length;O++){let T=w[O];if(T.top<=u&&T.bottom>=f){u=Math.max(T.bottom,u),f=Math.min(T.top,f);let A=T.left>e.left?T.left-e.left:T.right<e.left?e.left-T.right:0;if(A<i){t=v,i=A,o=A&&t.nodeType==3?{left:T.right<e.left?T.right:T.left,top:e.top}:e,v.nodeType==1&&A&&(a=S+(e.left>=(T.left+T.right)/2?1:0));continue}}else T.top>e.top&&!h&&T.left<=e.left&&T.right>=e.left&&(h=v,m={left:Math.max(T.left,Math.min(T.right,e.left)),top:T.top});!t&&(e.left>=T.right&&e.top>=T.top||e.left>=T.left&&e.top>=T.bottom)&&(a=S+1)}}return!t&&h&&(t=h,o=m,i=0),t&&t.nodeType==3?lE(t,o):!t||i&&t.nodeType==1?{node:r,offset:a}:Xv(t,o)}function lE(r,e){let t=r.nodeValue.length,i=document.createRange();for(let o=0;o<t;o++){i.setEnd(r,o+1),i.setStart(r,o);let a=$s(i,1);if(a.top!=a.bottom&&yp(e,a))return{node:r,offset:o+(e.left>=(a.left+a.right)/2?1:0)}}return{node:r,offset:0}}function yp(r,e){return r.left>=e.left-1&&r.left<=e.right+1&&r.top>=e.top-1&&r.top<=e.bottom+1}function aE(r,e){let t=r.parentNode;return t&&/^li$/i.test(t.nodeName)&&e.left<r.getBoundingClientRect().left?t:r}function uE(r,e,t){let{node:i,offset:o}=Xv(e,t),a=-1;if(i.nodeType==1&&!i.firstChild){let u=i.getBoundingClientRect();a=u.left!=u.right&&t.left>(u.left+u.right)/2?1:-1}return r.docView.posFromDOM(i,o,a)}function cE(r,e,t,i){let o=-1;for(let a=e,u=!1;a!=r.dom;){let f=r.docView.nearestDesc(a,!0),h;if(!f)return null;if(f.dom.nodeType==1&&(f.node.isBlock&&f.parent||!f.contentDOM)&&((h=f.dom.getBoundingClientRect()).width||h.height)&&(f.node.isBlock&&f.parent&&(!u&&h.left>i.left||h.top>i.top?o=f.posBefore:(!u&&h.right<i.left||h.bottom<i.top)&&(o=f.posAfter),u=!0),!f.contentDOM&&o<0&&!f.node.isText))return(f.node.isBlock?i.top<(h.top+h.bottom)/2:i.left<(h.left+h.right)/2)?f.posBefore:f.posAfter;a=f.dom.parentNode}return o>-1?o:r.docView.posFromDOM(e,t,-1)}function Fv(r,e,t){let i=r.childNodes.length;if(i&&t.top<t.bottom)for(let o=Math.max(0,Math.min(i-1,Math.floor(i*(e.top-t.top)/(t.bottom-t.top))-2)),a=o;;){let u=r.childNodes[a];if(u.nodeType==1){let f=u.getClientRects();for(let h=0;h<f.length;h++){let m=f[h];if(yp(e,m))return Fv(u,e,m)}}if((a=(a+1)%i)==o)break}return r}function fE(r,e){let t=r.dom.ownerDocument,i,o=0,a=Wx(t,e.left,e.top);a&&({node:i,offset:o}=a);let u=(r.root.elementFromPoint?r.root:t).elementFromPoint(e.left,e.top),f;if(!u||!r.dom.contains(u.nodeType!=1?u.parentNode:u)){let m=r.dom.getBoundingClientRect();if(!yp(e,m)||(u=Fv(r.dom,e,m),!u))return null}if(cr)for(let m=u;i&&m;m=Wl(m))m.draggable&&(i=void 0);if(u=aE(u,e),i){if(wi&&i.nodeType==1&&(o=Math.min(o,i.childNodes.length),o<i.childNodes.length)){let v=i.childNodes[o],S;v.nodeName=="IMG"&&(S=v.getBoundingClientRect()).right<=e.left&&S.bottom>e.top&&o++}let m;Tu&&o&&i.nodeType==1&&(m=i.childNodes[o-1]).nodeType==1&&m.contentEditable=="false"&&m.getBoundingClientRect().top>=e.top&&o--,i==r.dom&&o==i.childNodes.length-1&&i.lastChild.nodeType==1&&e.top>i.lastChild.getBoundingClientRect().bottom?f=r.state.doc.content.size:(o==0||i.nodeType!=1||i.childNodes[o-1].nodeName!="BR")&&(f=cE(r,i,o,e))}f==null&&(f=uE(r,u,e));let h=r.docView.nearestDesc(u,!0);return{pos:f,inside:h?h.posAtStart-h.border:-1}}function h0(r){return r.top<r.bottom||r.left<r.right}function $s(r,e){let t=r.getClientRects();if(t.length){let i=t[e<0?0:t.length-1];if(h0(i))return i}return Array.prototype.find.call(t,h0)||r.getBoundingClientRect()}const dE=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/;function Qv(r,e,t){let{node:i,offset:o,atom:a}=r.docView.domFromPos(e,t<0?-1:1),u=Tu||wi;if(i.nodeType==3)if(u&&(dE.test(i.nodeValue)||(t<0?!o:o==i.nodeValue.length))){let h=$s(hs(i,o,o),t);if(wi&&o&&/\s/.test(i.nodeValue[o-1])&&o<i.nodeValue.length){let m=$s(hs(i,o-1,o-1),-1);if(m.top==h.top){let v=$s(hs(i,o,o+1),-1);if(v.top!=h.top)return ou(v,v.left<m.left)}}return h}else{let h=o,m=o,v=t<0?1:-1;return t<0&&!o?(m++,v=-1):t>=0&&o==i.nodeValue.length?(h--,v=1):t<0?h--:m++,ou($s(hs(i,h,m),v),v<0)}if(!r.state.doc.resolve(e-(a||0)).parent.inlineContent){if(a==null&&o&&(t<0||o==ri(i))){let h=i.childNodes[o-1];if(h.nodeType==1)return Ah(h.getBoundingClientRect(),!1)}if(a==null&&o<ri(i)){let h=i.childNodes[o];if(h.nodeType==1)return Ah(h.getBoundingClientRect(),!0)}return Ah(i.getBoundingClientRect(),t>=0)}if(a==null&&o&&(t<0||o==ri(i))){let h=i.childNodes[o-1],m=h.nodeType==3?hs(h,ri(h)-(u?0:1)):h.nodeType==1&&(h.nodeName!="BR"||!h.nextSibling)?h:null;if(m)return ou($s(m,1),!1)}if(a==null&&o<ri(i)){let h=i.childNodes[o];for(;h.pmViewDesc&&h.pmViewDesc.ignoreForCoords;)h=h.nextSibling;let m=h?h.nodeType==3?hs(h,0,u?0:1):h.nodeType==1?h:null:null;if(m)return ou($s(m,-1),!0)}return ou($s(i.nodeType==3?hs(i):i,-t),t>=0)}function ou(r,e){if(r.width==0)return r;let t=e?r.left:r.right;return{top:r.top,bottom:r.bottom,left:t,right:t}}function Ah(r,e){if(r.height==0)return r;let t=e?r.top:r.bottom;return{top:t,bottom:t,left:r.left,right:r.right}}function Jv(r,e,t){let i=r.state,o=r.root.activeElement;i!=e&&r.updateState(e),o!=r.dom&&r.focus();try{return t()}finally{i!=e&&r.updateState(i),o!=r.dom&&o&&o.focus()}}function hE(r,e,t){let i=e.selection,o=t=="up"?i.$from:i.$to;return Jv(r,e,()=>{let{node:a}=r.docView.domFromPos(o.pos,t=="up"?-1:1);for(;;){let f=r.docView.nearestDesc(a,!0);if(!f)break;if(f.node.isBlock){a=f.contentDOM||f.dom;break}a=f.dom.parentNode}let u=Qv(r,o.pos,1);for(let f=a.firstChild;f;f=f.nextSibling){let h;if(f.nodeType==1)h=f.getClientRects();else if(f.nodeType==3)h=hs(f,0,f.nodeValue.length).getClientRects();else continue;for(let m=0;m<h.length;m++){let v=h[m];if(v.bottom>v.top+1&&(t=="up"?u.top-v.top>(v.bottom-u.top)*2:v.bottom-u.bottom>(u.bottom-v.top)*2))return!1}}return!0})}const pE=/[\u0590-\u08ac]/;function mE(r,e,t){let{$head:i}=e.selection;if(!i.parent.isTextblock)return!1;let o=i.parentOffset,a=!o,u=o==i.parent.content.size,f=r.domSelection();return f?!pE.test(i.parent.textContent)||!f.modify?t=="left"||t=="backward"?a:u:Jv(r,e,()=>{let{focusNode:h,focusOffset:m,anchorNode:v,anchorOffset:S}=r.domSelectionRange(),w=f.caretBidiLevel;f.modify("move",t,"character");let O=i.depth?r.docView.domAfterPos(i.before()):r.dom,{focusNode:T,focusOffset:A}=r.domSelectionRange(),R=T&&!O.contains(T.nodeType==1?T:T.parentNode)||h==T&&m==A;try{f.collapse(v,S),h&&(h!=v||m!=S)&&f.extend&&f.extend(h,m)}catch{}return w!=null&&(f.caretBidiLevel=w),R}):i.pos==i.start()||i.pos==i.end()}let p0=null,m0=null,g0=!1;function gE(r,e,t){return p0==e&&m0==t?g0:(p0=e,m0=t,g0=t=="up"||t=="down"?hE(r,e,t):mE(r,e,t))}const si=0,y0=1,Ho=2,Vi=3;class Ou{constructor(e,t,i,o){this.parent=e,this.children=t,this.dom=i,this.contentDOM=o,this.dirty=si,i.pmViewDesc=this}matchesWidget(e){return!1}matchesMark(e){return!1}matchesNode(e,t,i){return!1}matchesHack(e){return!1}parseRule(){return null}stopEvent(e){return!1}get size(){let e=0;for(let t=0;t<this.children.length;t++)e+=this.children[t].size;return e}get border(){return 0}destroy(){this.parent=void 0,this.dom.pmViewDesc==this&&(this.dom.pmViewDesc=void 0);for(let e=0;e<this.children.length;e++)this.children[e].destroy()}posBeforeChild(e){for(let t=0,i=this.posAtStart;;t++){let o=this.children[t];if(o==e)return i;i+=o.size}}get posBefore(){return this.parent.posBeforeChild(this)}get posAtStart(){return this.parent?this.parent.posBeforeChild(this)+this.border:0}get posAfter(){return this.posBefore+this.size}get posAtEnd(){return this.posAtStart+this.size-2*this.border}localPosFromDOM(e,t,i){if(this.contentDOM&&this.contentDOM.contains(e.nodeType==1?e:e.parentNode))if(i<0){let a,u;if(e==this.contentDOM)a=e.childNodes[t-1];else{for(;e.parentNode!=this.contentDOM;)e=e.parentNode;a=e.previousSibling}for(;a&&!((u=a.pmViewDesc)&&u.parent==this);)a=a.previousSibling;return a?this.posBeforeChild(u)+u.size:this.posAtStart}else{let a,u;if(e==this.contentDOM)a=e.childNodes[t];else{for(;e.parentNode!=this.contentDOM;)e=e.parentNode;a=e.nextSibling}for(;a&&!((u=a.pmViewDesc)&&u.parent==this);)a=a.nextSibling;return a?this.posBeforeChild(u):this.posAtEnd}let o;if(e==this.dom&&this.contentDOM)o=t>Pn(this.contentDOM);else if(this.contentDOM&&this.contentDOM!=this.dom&&this.dom.contains(this.contentDOM))o=e.compareDocumentPosition(this.contentDOM)&2;else if(this.dom.firstChild){if(t==0)for(let a=e;;a=a.parentNode){if(a==this.dom){o=!1;break}if(a.previousSibling)break}if(o==null&&t==e.childNodes.length)for(let a=e;;a=a.parentNode){if(a==this.dom){o=!0;break}if(a.nextSibling)break}}return o??i>0?this.posAtEnd:this.posAtStart}nearestDesc(e,t=!1){for(let i=!0,o=e;o;o=o.parentNode){let a=this.getDesc(o),u;if(a&&(!t||a.node))if(i&&(u=a.nodeDOM)&&!(u.nodeType==1?u.contains(e.nodeType==1?e:e.parentNode):u==e))i=!1;else return a}}getDesc(e){let t=e.pmViewDesc;for(let i=t;i;i=i.parent)if(i==this)return t}posFromDOM(e,t,i){for(let o=e;o;o=o.parentNode){let a=this.getDesc(o);if(a)return a.localPosFromDOM(e,t,i)}return-1}descAt(e){for(let t=0,i=0;t<this.children.length;t++){let o=this.children[t],a=i+o.size;if(i==e&&a!=i){for(;!o.border&&o.children.length;)for(let u=0;u<o.children.length;u++){let f=o.children[u];if(f.size){o=f;break}}return o}if(e<a)return o.descAt(e-i-o.border);i=a}}domFromPos(e,t){if(!this.contentDOM)return{node:this.dom,offset:0,atom:e+1};let i=0,o=0;for(let a=0;i<this.children.length;i++){let u=this.children[i],f=a+u.size;if(f>e||u instanceof Wv){o=e-a;break}a=f}if(o)return this.children[i].domFromPos(o-this.children[i].border,t);for(let a;i&&!(a=this.children[i-1]).size&&a instanceof Zv&&a.side>=0;i--);if(t<=0){let a,u=!0;for(;a=i?this.children[i-1]:null,!(!a||a.dom.parentNode==this.contentDOM);i--,u=!1);return a&&t&&u&&!a.border&&!a.domAtom?a.domFromPos(a.size,t):{node:this.contentDOM,offset:a?Pn(a.dom)+1:0}}else{let a,u=!0;for(;a=i<this.children.length?this.children[i]:null,!(!a||a.dom.parentNode==this.contentDOM);i++,u=!1);return a&&u&&!a.border&&!a.domAtom?a.domFromPos(0,t):{node:this.contentDOM,offset:a?Pn(a.dom):this.contentDOM.childNodes.length}}}parseRange(e,t,i=0){if(this.children.length==0)return{node:this.contentDOM,from:e,to:t,fromOffset:0,toOffset:this.contentDOM.childNodes.length};let o=-1,a=-1;for(let u=i,f=0;;f++){let h=this.children[f],m=u+h.size;if(o==-1&&e<=m){let v=u+h.border;if(e>=v&&t<=m-h.border&&h.node&&h.contentDOM&&this.contentDOM.contains(h.contentDOM))return h.parseRange(e,t,v);e=u;for(let S=f;S>0;S--){let w=this.children[S-1];if(w.size&&w.dom.parentNode==this.contentDOM&&!w.emptyChildAt(1)){o=Pn(w.dom)+1;break}e-=w.size}o==-1&&(o=0)}if(o>-1&&(m>t||f==this.children.length-1)){t=m;for(let v=f+1;v<this.children.length;v++){let S=this.children[v];if(S.size&&S.dom.parentNode==this.contentDOM&&!S.emptyChildAt(-1)){a=Pn(S.dom);break}t+=S.size}a==-1&&(a=this.contentDOM.childNodes.length);break}u=m}return{node:this.contentDOM,from:e,to:t,fromOffset:o,toOffset:a}}emptyChildAt(e){if(this.border||!this.contentDOM||!this.children.length)return!1;let t=this.children[e<0?0:this.children.length-1];return t.size==0||t.emptyChildAt(e)}domAfterPos(e){let{node:t,offset:i}=this.domFromPos(e,0);if(t.nodeType!=1||i==t.childNodes.length)throw new RangeError("No node after pos "+e);return t.childNodes[i]}setSelection(e,t,i,o=!1){let a=Math.min(e,t),u=Math.max(e,t);for(let O=0,T=0;O<this.children.length;O++){let A=this.children[O],R=T+A.size;if(a>T&&u<R)return A.setSelection(e-T-A.border,t-T-A.border,i,o);T=R}let f=this.domFromPos(e,e?-1:1),h=t==e?f:this.domFromPos(t,t?-1:1),m=i.root.getSelection(),v=i.domSelectionRange(),S=!1;if((wi||cr)&&e==t){let{node:O,offset:T}=f;if(O.nodeType==3){if(S=!!(T&&O.nodeValue[T-1]==`
`),S&&T==O.nodeValue.length)for(let A=O,R;A;A=A.parentNode){if(R=A.nextSibling){R.nodeName=="BR"&&(f=h={node:R.parentNode,offset:Pn(R)+1});break}let W=A.pmViewDesc;if(W&&W.node&&W.node.isBlock)break}}else{let A=O.childNodes[T-1];S=A&&(A.nodeName=="BR"||A.contentEditable=="false")}}if(wi&&v.focusNode&&v.focusNode!=h.node&&v.focusNode.nodeType==1){let O=v.focusNode.childNodes[v.focusOffset];O&&O.contentEditable=="false"&&(o=!0)}if(!(o||S&&cr)&&Xo(f.node,f.offset,v.anchorNode,v.anchorOffset)&&Xo(h.node,h.offset,v.focusNode,v.focusOffset))return;let w=!1;if((m.extend||e==t)&&!S){m.collapse(f.node,f.offset);try{e!=t&&m.extend(h.node,h.offset),w=!0}catch{}}if(!w){if(e>t){let T=f;f=h,h=T}let O=document.createRange();O.setEnd(h.node,h.offset),O.setStart(f.node,f.offset),m.removeAllRanges(),m.addRange(O)}}ignoreMutation(e){return!this.contentDOM&&e.type!="selection"}get contentLost(){return this.contentDOM&&this.contentDOM!=this.dom&&!this.dom.contains(this.contentDOM)}markDirty(e,t){for(let i=0,o=0;o<this.children.length;o++){let a=this.children[o],u=i+a.size;if(i==u?e<=u&&t>=i:e<u&&t>i){let f=i+a.border,h=u-a.border;if(e>=f&&t<=h){this.dirty=e==i||t==u?Ho:y0,e==f&&t==h&&(a.contentLost||a.dom.parentNode!=this.contentDOM)?a.dirty=Vi:a.markDirty(e-f,t-f);return}else a.dirty=a.dom==a.contentDOM&&a.dom.parentNode==this.contentDOM&&!a.children.length?Ho:Vi}i=u}this.dirty=Ho}markParentsDirty(){let e=1;for(let t=this.parent;t;t=t.parent,e++){let i=e==1?Ho:y0;t.dirty<i&&(t.dirty=i)}}get domAtom(){return!1}get ignoreForCoords(){return!1}isText(e){return!1}}class Zv extends Ou{constructor(e,t,i,o){let a,u=t.type.toDOM;if(typeof u=="function"&&(u=u(i,()=>{if(!a)return o;if(a.parent)return a.parent.posBeforeChild(a)})),!t.type.spec.raw){if(u.nodeType!=1){let f=document.createElement("span");f.appendChild(u),u=f}u.contentEditable="false",u.classList.add("ProseMirror-widget")}super(e,[],u,null),this.widget=t,this.widget=t,a=this}matchesWidget(e){return this.dirty==si&&e.type.eq(this.widget.type)}parseRule(){return{ignore:!0}}stopEvent(e){let t=this.widget.spec.stopEvent;return t?t(e):!1}ignoreMutation(e){return e.type!="selection"||this.widget.spec.ignoreSelection}destroy(){this.widget.type.destroy(this.dom),super.destroy()}get domAtom(){return!0}get side(){return this.widget.type.side}}class yE extends Ou{constructor(e,t,i,o){super(e,[],t,null),this.textDOM=i,this.text=o}get size(){return this.text.length}localPosFromDOM(e,t){return e!=this.textDOM?this.posAtStart+(t?this.size:0):this.posAtStart+t}domFromPos(e){return{node:this.textDOM,offset:e}}ignoreMutation(e){return e.type==="characterData"&&e.target.nodeValue==e.oldValue}}class Fo extends Ou{constructor(e,t,i,o,a){super(e,[],i,o),this.mark=t,this.spec=a}static create(e,t,i,o){let a=o.nodeViews[t.type.name],u=a&&a(t,o,i);return(!u||!u.dom)&&(u=Qo.renderSpec(document,t.type.spec.toDOM(t,i),null,t.attrs)),new Fo(e,t,u.dom,u.contentDOM||u.dom,u)}parseRule(){return this.dirty&Vi||this.mark.type.spec.reparseInView?null:{mark:this.mark.type.name,attrs:this.mark.attrs,contentElement:this.contentDOM}}matchesMark(e){return this.dirty!=Vi&&this.mark.eq(e)}markDirty(e,t){if(super.markDirty(e,t),this.dirty!=si){let i=this.parent;for(;!i.node;)i=i.parent;i.dirty<this.dirty&&(i.dirty=this.dirty),this.dirty=si}}slice(e,t,i){let o=Fo.create(this.parent,this.mark,!0,i),a=this.children,u=this.size;t<u&&(a=np(a,t,u,i)),e>0&&(a=np(a,0,e,i));for(let f=0;f<a.length;f++)a[f].parent=o;return o.children=a,o}ignoreMutation(e){return this.spec.ignoreMutation?this.spec.ignoreMutation(e):super.ignoreMutation(e)}destroy(){this.spec.destroy&&this.spec.destroy(),super.destroy()}}class ro extends Ou{constructor(e,t,i,o,a,u,f,h,m){super(e,[],a,u),this.node=t,this.outerDeco=i,this.innerDeco=o,this.nodeDOM=f}static create(e,t,i,o,a,u){let f=a.nodeViews[t.type.name],h,m=f&&f(t,a,()=>{if(!h)return u;if(h.parent)return h.parent.posBeforeChild(h)},i,o),v=m&&m.dom,S=m&&m.contentDOM;if(t.isText){if(!v)v=document.createTextNode(t.text);else if(v.nodeType!=3)throw new RangeError("Text must be rendered as a DOM text node")}else v||({dom:v,contentDOM:S}=Qo.renderSpec(document,t.type.spec.toDOM(t),null,t.attrs));!S&&!t.isText&&v.nodeName!="BR"&&(v.hasAttribute("contenteditable")||(v.contentEditable="false"),t.type.spec.draggable&&(v.draggable=!0));let w=v;return v=nb(v,i,t),m?h=new vE(e,t,i,o,v,S||null,w,m,a,u+1):t.isText?new bf(e,t,i,o,v,w,a):new ro(e,t,i,o,v,S||null,w,a,u+1)}parseRule(){if(this.node.type.spec.reparseInView)return null;let e={node:this.node.type.name,attrs:this.node.attrs};if(this.node.type.whitespace=="pre"&&(e.preserveWhitespace="full"),!this.contentDOM)e.getContent=()=>this.node.content;else if(!this.contentLost)e.contentElement=this.contentDOM;else{for(let t=this.children.length-1;t>=0;t--){let i=this.children[t];if(this.dom.contains(i.dom.parentNode)){e.contentElement=i.dom.parentNode;break}}e.contentElement||(e.getContent=()=>ae.empty)}return e}matchesNode(e,t,i){return this.dirty==si&&e.eq(this.node)&&rf(t,this.outerDeco)&&i.eq(this.innerDeco)}get size(){return this.node.nodeSize}get border(){return this.node.isLeaf?0:1}updateChildren(e,t){let i=this.node.inlineContent,o=t,a=e.composing?this.localCompositionInfo(e,t):null,u=a&&a.pos>-1?a:null,f=a&&a.pos<0,h=new SE(this,u&&u.node,e);ME(this.node,this.innerDeco,(m,v,S)=>{m.spec.marks?h.syncToMarks(m.spec.marks,i,e):m.type.side>=0&&!S&&h.syncToMarks(v==this.node.childCount?Lt.none:this.node.child(v).marks,i,e),h.placeWidget(m,e,o)},(m,v,S,w)=>{h.syncToMarks(m.marks,i,e);let O;h.findNodeMatch(m,v,S,w)||f&&e.state.selection.from>o&&e.state.selection.to<o+m.nodeSize&&(O=h.findIndexWithChild(a.node))>-1&&h.updateNodeAt(m,v,S,O,e)||h.updateNextNode(m,v,S,e,w,o)||h.addNode(m,v,S,e,o),o+=m.nodeSize}),h.syncToMarks([],i,e),this.node.isTextblock&&h.addTextblockHacks(),h.destroyRest(),(h.changed||this.dirty==Ho)&&(u&&this.protectLocalComposition(e,u),eb(this.contentDOM,this.children,e),ea&&wE(this.dom))}localCompositionInfo(e,t){let{from:i,to:o}=e.state.selection;if(!(e.state.selection instanceof it)||i<t||o>t+this.node.content.size)return null;let a=e.input.compositionNode;if(!a||!this.dom.contains(a.parentNode))return null;if(this.node.inlineContent){let u=a.nodeValue,f=TE(this.node.content,u,i-t,o-t);return f<0?null:{node:a,pos:f,text:u}}else return{node:a,pos:-1,text:""}}protectLocalComposition(e,{node:t,pos:i,text:o}){if(this.getDesc(t))return;let a=t;for(;a.parentNode!=this.contentDOM;a=a.parentNode){for(;a.previousSibling;)a.parentNode.removeChild(a.previousSibling);for(;a.nextSibling;)a.parentNode.removeChild(a.nextSibling);a.pmViewDesc&&(a.pmViewDesc=void 0)}let u=new yE(this,a,t,o);e.input.compositionNodes.push(u),this.children=np(this.children,i,i+o.length,e,u)}update(e,t,i,o){return this.dirty==Vi||!e.sameMarkup(this.node)?!1:(this.updateInner(e,t,i,o),!0)}updateInner(e,t,i,o){this.updateOuterDeco(t),this.node=e,this.innerDeco=i,this.contentDOM&&this.updateChildren(o,this.posAtStart),this.dirty=si}updateOuterDeco(e){if(rf(e,this.outerDeco))return;let t=this.nodeDOM.nodeType!=1,i=this.dom;this.dom=tb(this.dom,this.nodeDOM,tp(this.outerDeco,this.node,t),tp(e,this.node,t)),this.dom!=i&&(i.pmViewDesc=void 0,this.dom.pmViewDesc=this),this.outerDeco=e}selectNode(){this.nodeDOM.nodeType==1&&this.nodeDOM.classList.add("ProseMirror-selectednode"),(this.contentDOM||!this.node.type.spec.draggable)&&(this.dom.draggable=!0)}deselectNode(){this.nodeDOM.nodeType==1&&(this.nodeDOM.classList.remove("ProseMirror-selectednode"),(this.contentDOM||!this.node.type.spec.draggable)&&this.dom.removeAttribute("draggable"))}get domAtom(){return this.node.isAtom}}function v0(r,e,t,i,o){nb(i,e,r);let a=new ro(void 0,r,e,t,i,i,i,o,0);return a.contentDOM&&a.updateChildren(o,0),a}class bf extends ro{constructor(e,t,i,o,a,u,f){super(e,t,i,o,a,null,u,f,0)}parseRule(){let e=this.nodeDOM.parentNode;for(;e&&e!=this.dom&&!e.pmIsDeco;)e=e.parentNode;return{skip:e||!0}}update(e,t,i,o){return this.dirty==Vi||this.dirty!=si&&!this.inParent()||!e.sameMarkup(this.node)?!1:(this.updateOuterDeco(t),(this.dirty!=si||e.text!=this.node.text)&&e.text!=this.nodeDOM.nodeValue&&(this.nodeDOM.nodeValue=e.text,o.trackWrites==this.nodeDOM&&(o.trackWrites=null)),this.node=e,this.dirty=si,!0)}inParent(){let e=this.parent.contentDOM;for(let t=this.nodeDOM;t;t=t.parentNode)if(t==e)return!0;return!1}domFromPos(e){return{node:this.nodeDOM,offset:e}}localPosFromDOM(e,t,i){return e==this.nodeDOM?this.posAtStart+Math.min(t,this.node.text.length):super.localPosFromDOM(e,t,i)}ignoreMutation(e){return e.type!="characterData"&&e.type!="selection"}slice(e,t,i){let o=this.node.cut(e,t),a=document.createTextNode(o.text);return new bf(this.parent,o,this.outerDeco,this.innerDeco,a,a,i)}markDirty(e,t){super.markDirty(e,t),this.dom!=this.nodeDOM&&(e==0||t==this.nodeDOM.nodeValue.length)&&(this.dirty=Vi)}get domAtom(){return!1}isText(e){return this.node.text==e}}class Wv extends Ou{parseRule(){return{ignore:!0}}matchesHack(e){return this.dirty==si&&this.dom.nodeName==e}get domAtom(){return!0}get ignoreForCoords(){return this.dom.nodeName=="IMG"}}class vE extends ro{constructor(e,t,i,o,a,u,f,h,m,v){super(e,t,i,o,a,u,f,m,v),this.spec=h}update(e,t,i,o){if(this.dirty==Vi)return!1;if(this.spec.update&&(this.node.type==e.type||this.spec.multiType)){let a=this.spec.update(e,t,i);return a&&this.updateInner(e,t,i,o),a}else return!this.contentDOM&&!e.isLeaf?!1:super.update(e,t,i,o)}selectNode(){this.spec.selectNode?this.spec.selectNode():super.selectNode()}deselectNode(){this.spec.deselectNode?this.spec.deselectNode():super.deselectNode()}setSelection(e,t,i,o){this.spec.setSelection?this.spec.setSelection(e,t,i.root):super.setSelection(e,t,i,o)}destroy(){this.spec.destroy&&this.spec.destroy(),super.destroy()}stopEvent(e){return this.spec.stopEvent?this.spec.stopEvent(e):!1}ignoreMutation(e){return this.spec.ignoreMutation?this.spec.ignoreMutation(e):super.ignoreMutation(e)}}function eb(r,e,t){let i=r.firstChild,o=!1;for(let a=0;a<e.length;a++){let u=e[a],f=u.dom;if(f.parentNode==r){for(;f!=i;)i=b0(i),o=!0;i=i.nextSibling}else o=!0,r.insertBefore(f,i);if(u instanceof Fo){let h=i?i.previousSibling:r.lastChild;eb(u.contentDOM,u.children,t),i=h?h.nextSibling:r.firstChild}}for(;i;)i=b0(i),o=!0;o&&t.trackWrites==r&&(t.trackWrites=null)}const fu=function(r){r&&(this.nodeName=r)};fu.prototype=Object.create(null);const qo=[new fu];function tp(r,e,t){if(r.length==0)return qo;let i=t?qo[0]:new fu,o=[i];for(let a=0;a<r.length;a++){let u=r[a].type.attrs;if(u){u.nodeName&&o.push(i=new fu(u.nodeName));for(let f in u){let h=u[f];h!=null&&(t&&o.length==1&&o.push(i=new fu(e.isInline?"span":"div")),f=="class"?i.class=(i.class?i.class+" ":"")+h:f=="style"?i.style=(i.style?i.style+";":"")+h:f!="nodeName"&&(i[f]=h))}}}return o}function tb(r,e,t,i){if(t==qo&&i==qo)return e;let o=e;for(let a=0;a<i.length;a++){let u=i[a],f=t[a];if(a){let h;f&&f.nodeName==u.nodeName&&o!=r&&(h=o.parentNode)&&h.nodeName.toLowerCase()==u.nodeName||(h=document.createElement(u.nodeName),h.pmIsDeco=!0,h.appendChild(o),f=qo[0]),o=h}bE(o,f||qo[0],u)}return o}function bE(r,e,t){for(let i in e)i!="class"&&i!="style"&&i!="nodeName"&&!(i in t)&&r.removeAttribute(i);for(let i in t)i!="class"&&i!="style"&&i!="nodeName"&&t[i]!=e[i]&&r.setAttribute(i,t[i]);if(e.class!=t.class){let i=e.class?e.class.split(" ").filter(Boolean):[],o=t.class?t.class.split(" ").filter(Boolean):[];for(let a=0;a<i.length;a++)o.indexOf(i[a])==-1&&r.classList.remove(i[a]);for(let a=0;a<o.length;a++)i.indexOf(o[a])==-1&&r.classList.add(o[a]);r.classList.length==0&&r.removeAttribute("class")}if(e.style!=t.style){if(e.style){let i=/\s*([\w\-\xa1-\uffff]+)\s*:(?:"(?:\\.|[^"])*"|'(?:\\.|[^'])*'|\(.*?\)|[^;])*/g,o;for(;o=i.exec(e.style);)r.style.removeProperty(o[1])}t.style&&(r.style.cssText+=t.style)}}function nb(r,e,t){return tb(r,r,qo,tp(e,t,r.nodeType!=1))}function rf(r,e){if(r.length!=e.length)return!1;for(let t=0;t<r.length;t++)if(!r[t].type.eq(e[t].type))return!1;return!0}function b0(r){let e=r.nextSibling;return r.parentNode.removeChild(r),e}class SE{constructor(e,t,i){this.lock=t,this.view=i,this.index=0,this.stack=[],this.changed=!1,this.top=e,this.preMatch=xE(e.node.content,e)}destroyBetween(e,t){if(e!=t){for(let i=e;i<t;i++)this.top.children[i].destroy();this.top.children.splice(e,t-e),this.changed=!0}}destroyRest(){this.destroyBetween(this.index,this.top.children.length)}syncToMarks(e,t,i){let o=0,a=this.stack.length>>1,u=Math.min(a,e.length);for(;o<u&&(o==a-1?this.top:this.stack[o+1<<1]).matchesMark(e[o])&&e[o].type.spec.spanning!==!1;)o++;for(;o<a;)this.destroyRest(),this.top.dirty=si,this.index=this.stack.pop(),this.top=this.stack.pop(),a--;for(;a<e.length;){this.stack.push(this.top,this.index+1);let f=-1;for(let h=this.index;h<Math.min(this.index+3,this.top.children.length);h++){let m=this.top.children[h];if(m.matchesMark(e[a])&&!this.isLocked(m.dom)){f=h;break}}if(f>-1)f>this.index&&(this.changed=!0,this.destroyBetween(this.index,f)),this.top=this.top.children[this.index];else{let h=Fo.create(this.top,e[a],t,i);this.top.children.splice(this.index,0,h),this.top=h,this.changed=!0}this.index=0,a++}}findNodeMatch(e,t,i,o){let a=-1,u;if(o>=this.preMatch.index&&(u=this.preMatch.matches[o-this.preMatch.index]).parent==this.top&&u.matchesNode(e,t,i))a=this.top.children.indexOf(u,this.index);else for(let f=this.index,h=Math.min(this.top.children.length,f+5);f<h;f++){let m=this.top.children[f];if(m.matchesNode(e,t,i)&&!this.preMatch.matched.has(m)){a=f;break}}return a<0?!1:(this.destroyBetween(this.index,a),this.index++,!0)}updateNodeAt(e,t,i,o,a){let u=this.top.children[o];return u.dirty==Vi&&u.dom==u.contentDOM&&(u.dirty=Ho),u.update(e,t,i,a)?(this.destroyBetween(this.index,o),this.index++,!0):!1}findIndexWithChild(e){for(;;){let t=e.parentNode;if(!t)return-1;if(t==this.top.contentDOM){let i=e.pmViewDesc;if(i){for(let o=this.index;o<this.top.children.length;o++)if(this.top.children[o]==i)return o}return-1}e=t}}updateNextNode(e,t,i,o,a,u){for(let f=this.index;f<this.top.children.length;f++){let h=this.top.children[f];if(h instanceof ro){let m=this.preMatch.matched.get(h);if(m!=null&&m!=a)return!1;let v=h.dom,S,w=this.isLocked(v)&&!(e.isText&&h.node&&h.node.isText&&h.nodeDOM.nodeValue==e.text&&h.dirty!=Vi&&rf(t,h.outerDeco));if(!w&&h.update(e,t,i,o))return this.destroyBetween(this.index,f),h.dom!=v&&(this.changed=!0),this.index++,!0;if(!w&&(S=this.recreateWrapper(h,e,t,i,o,u)))return this.destroyBetween(this.index,f),this.top.children[this.index]=S,S.contentDOM&&(S.dirty=Ho,S.updateChildren(o,u+1),S.dirty=si),this.changed=!0,this.index++,!0;break}}return!1}recreateWrapper(e,t,i,o,a,u){if(e.dirty||t.isAtom||!e.children.length||!e.node.content.eq(t.content)||!rf(i,e.outerDeco)||!o.eq(e.innerDeco))return null;let f=ro.create(this.top,t,i,o,a,u);if(f.contentDOM){f.children=e.children,e.children=[];for(let h of f.children)h.parent=f}return e.destroy(),f}addNode(e,t,i,o,a){let u=ro.create(this.top,e,t,i,o,a);u.contentDOM&&u.updateChildren(o,a+1),this.top.children.splice(this.index++,0,u),this.changed=!0}placeWidget(e,t,i){let o=this.index<this.top.children.length?this.top.children[this.index]:null;if(o&&o.matchesWidget(e)&&(e==o.widget||!o.widget.type.toDOM.parentNode))this.index++;else{let a=new Zv(this.top,e,t,i);this.top.children.splice(this.index++,0,a),this.changed=!0}}addTextblockHacks(){let e=this.top.children[this.index-1],t=this.top;for(;e instanceof Fo;)t=e,e=t.children[t.children.length-1];(!e||!(e instanceof bf)||/\n$/.test(e.node.text)||this.view.requiresGeckoHackNode&&/\s$/.test(e.node.text))&&((cr||tr)&&e&&e.dom.contentEditable=="false"&&this.addHackNode("IMG",t),this.addHackNode("BR",this.top))}addHackNode(e,t){if(t==this.top&&this.index<t.children.length&&t.children[this.index].matchesHack(e))this.index++;else{let i=document.createElement(e);e=="IMG"&&(i.className="ProseMirror-separator",i.alt=""),e=="BR"&&(i.className="ProseMirror-trailingBreak");let o=new Wv(this.top,[],i,null);t!=this.top?t.children.push(o):t.children.splice(this.index++,0,o),this.changed=!0}}isLocked(e){return this.lock&&(e==this.lock||e.nodeType==1&&e.contains(this.lock.parentNode))}}function xE(r,e){let t=e,i=t.children.length,o=r.childCount,a=new Map,u=[];e:for(;o>0;){let f;for(;;)if(i){let m=t.children[i-1];if(m instanceof Fo)t=m,i=m.children.length;else{f=m,i--;break}}else{if(t==e)break e;i=t.parent.children.indexOf(t),t=t.parent}let h=f.node;if(h){if(h!=r.child(o-1))break;--o,a.set(f,o),u.push(f)}}return{index:o,matched:a,matches:u.reverse()}}function EE(r,e){return r.type.side-e.type.side}function ME(r,e,t,i){let o=e.locals(r),a=0;if(o.length==0){for(let m=0;m<r.childCount;m++){let v=r.child(m);i(v,o,e.forChild(a,v),m),a+=v.nodeSize}return}let u=0,f=[],h=null;for(let m=0;;){let v,S;for(;u<o.length&&o[u].to==a;){let R=o[u++];R.widget&&(v?(S||(S=[v])).push(R):v=R)}if(v)if(S){S.sort(EE);for(let R=0;R<S.length;R++)t(S[R],m,!!h)}else t(v,m,!!h);let w,O;if(h)O=-1,w=h,h=null;else if(m<r.childCount)O=m,w=r.child(m++);else break;for(let R=0;R<f.length;R++)f[R].to<=a&&f.splice(R--,1);for(;u<o.length&&o[u].from<=a&&o[u].to>a;)f.push(o[u++]);let T=a+w.nodeSize;if(w.isText){let R=T;u<o.length&&o[u].from<R&&(R=o[u].from);for(let W=0;W<f.length;W++)f[W].to<R&&(R=f[W].to);R<T&&(h=w.cut(R-a),w=w.cut(0,R-a),T=R,O=-1)}else for(;u<o.length&&o[u].to<T;)u++;let A=w.isInline&&!w.isLeaf?f.filter(R=>!R.inline):f.slice();i(w,A,e.forChild(a,w),O),a=T}}function wE(r){if(r.nodeName=="UL"||r.nodeName=="OL"){let e=r.style.cssText;r.style.cssText=e+"; list-style: square !important",window.getComputedStyle(r).listStyle,r.style.cssText=e}}function TE(r,e,t,i){for(let o=0,a=0;o<r.childCount&&a<=i;){let u=r.child(o++),f=a;if(a+=u.nodeSize,!u.isText)continue;let h=u.text;for(;o<r.childCount;){let m=r.child(o++);if(a+=m.nodeSize,!m.isText)break;h+=m.text}if(a>=t){if(a>=i&&h.slice(i-e.length-f,i-f)==e)return i-e.length;let m=f<i?h.lastIndexOf(e,i-f-1):-1;if(m>=0&&m+e.length+f>=t)return f+m;if(t==i&&h.length>=i+e.length-f&&h.slice(i-f,i-f+e.length)==e)return i}}return-1}function np(r,e,t,i,o){let a=[];for(let u=0,f=0;u<r.length;u++){let h=r[u],m=f,v=f+=h.size;m>=t||v<=e?a.push(h):(m<e&&a.push(h.slice(0,e-m,i)),o&&(a.push(o),o=void 0),v>t&&a.push(h.slice(t-m,h.size,i)))}return a}function vp(r,e=null){let t=r.domSelectionRange(),i=r.state.doc;if(!t.focusNode)return null;let o=r.docView.nearestDesc(t.focusNode),a=o&&o.size==0,u=r.docView.posFromDOM(t.focusNode,t.focusOffset,1);if(u<0)return null;let f=i.resolve(u),h,m;if(vf(t)){for(h=u;o&&!o.node;)o=o.parent;let S=o.node;if(o&&S.isAtom&&Xe.isSelectable(S)&&o.parent&&!(S.isInline&&Jx(t.focusNode,t.focusOffset,o.dom))){let w=o.posBefore;m=new Xe(u==w?f:i.resolve(w))}}else{if(t instanceof r.dom.ownerDocument.defaultView.Selection&&t.rangeCount>1){let S=u,w=u;for(let O=0;O<t.rangeCount;O++){let T=t.getRangeAt(O);S=Math.min(S,r.docView.posFromDOM(T.startContainer,T.startOffset,1)),w=Math.max(w,r.docView.posFromDOM(T.endContainer,T.endOffset,-1))}if(S<0)return null;[h,u]=w==r.state.selection.anchor?[w,S]:[S,w],f=i.resolve(u)}else h=r.docView.posFromDOM(t.anchorNode,t.anchorOffset,1);if(h<0)return null}let v=i.resolve(h);if(!m){let S=e=="pointer"||r.state.selection.head<f.pos&&!a?1:-1;m=bp(r,v,f,S)}return m}function rb(r){return r.editable?r.hasFocus():sb(r)&&document.activeElement&&document.activeElement.contains(r.dom)}function gs(r,e=!1){let t=r.state.selection;if(ib(r,t),!!rb(r)){if(!e&&r.input.mouseDown&&r.input.mouseDown.allowDefault&&tr){let i=r.domSelectionRange(),o=r.domObserver.currentSelection;if(i.anchorNode&&o.anchorNode&&Xo(i.anchorNode,i.anchorOffset,o.anchorNode,o.anchorOffset)){r.input.mouseDown.delayedSelectionSync=!0,r.domObserver.setCurSelection();return}}if(r.domObserver.disconnectSelection(),r.cursorWrapper)kE(r);else{let{anchor:i,head:o}=t,a,u;S0&&!(t instanceof it)&&(t.$from.parent.inlineContent||(a=x0(r,t.from)),!t.empty&&!t.$from.parent.inlineContent&&(u=x0(r,t.to))),r.docView.setSelection(i,o,r,e),S0&&(a&&E0(a),u&&E0(u)),t.visible?r.dom.classList.remove("ProseMirror-hideselection"):(r.dom.classList.add("ProseMirror-hideselection"),"onselectionchange"in document&&OE(r))}r.domObserver.setCurSelection(),r.domObserver.connectSelection()}}const S0=cr||tr&&Yv<63;function x0(r,e){let{node:t,offset:i}=r.docView.domFromPos(e,0),o=i<t.childNodes.length?t.childNodes[i]:null,a=i?t.childNodes[i-1]:null;if(cr&&o&&o.contentEditable=="false")return _h(o);if((!o||o.contentEditable=="false")&&(!a||a.contentEditable=="false")){if(o)return _h(o);if(a)return _h(a)}}function _h(r){return r.contentEditable="true",cr&&r.draggable&&(r.draggable=!1,r.wasDraggable=!0),r}function E0(r){r.contentEditable="false",r.wasDraggable&&(r.draggable=!0,r.wasDraggable=null)}function OE(r){let e=r.dom.ownerDocument;e.removeEventListener("selectionchange",r.input.hideSelectionGuard);let t=r.domSelectionRange(),i=t.anchorNode,o=t.anchorOffset;e.addEventListener("selectionchange",r.input.hideSelectionGuard=()=>{(t.anchorNode!=i||t.anchorOffset!=o)&&(e.removeEventListener("selectionchange",r.input.hideSelectionGuard),setTimeout(()=>{(!rb(r)||r.state.selection.visible)&&r.dom.classList.remove("ProseMirror-hideselection")},20))})}function kE(r){let e=r.domSelection(),t=document.createRange();if(!e)return;let i=r.cursorWrapper.dom,o=i.nodeName=="IMG";o?t.setStart(i.parentNode,Pn(i)+1):t.setStart(i,0),t.collapse(!0),e.removeAllRanges(),e.addRange(t),!o&&!r.state.selection.visible&&Er&&no<=11&&(i.disabled=!0,i.disabled=!1)}function ib(r,e){if(e instanceof Xe){let t=r.docView.descAt(e.from);t!=r.lastSelectedViewDesc&&(M0(r),t&&t.selectNode(),r.lastSelectedViewDesc=t)}else M0(r)}function M0(r){r.lastSelectedViewDesc&&(r.lastSelectedViewDesc.parent&&r.lastSelectedViewDesc.deselectNode(),r.lastSelectedViewDesc=void 0)}function bp(r,e,t,i){return r.someProp("createSelectionBetween",o=>o(r,e,t))||it.between(e,t,i)}function w0(r){return r.editable&&!r.hasFocus()?!1:sb(r)}function sb(r){let e=r.domSelectionRange();if(!e.anchorNode)return!1;try{return r.dom.contains(e.anchorNode.nodeType==3?e.anchorNode.parentNode:e.anchorNode)&&(r.editable||r.dom.contains(e.focusNode.nodeType==3?e.focusNode.parentNode:e.focusNode))}catch{return!1}}function CE(r){let e=r.docView.domFromPos(r.state.selection.anchor,0),t=r.domSelectionRange();return Xo(e.node,e.offset,t.anchorNode,t.anchorOffset)}function rp(r,e){let{$anchor:t,$head:i}=r.selection,o=e>0?t.max(i):t.min(i),a=o.parent.inlineContent?o.depth?r.doc.resolve(e>0?o.after():o.before()):null:o;return a&&ct.findFrom(a,e)}function Xs(r,e){return r.dispatch(r.state.tr.setSelection(e).scrollIntoView()),!0}function T0(r,e,t){let i=r.state.selection;if(i instanceof it)if(t.indexOf("s")>-1){let{$head:o}=i,a=o.textOffset?null:e<0?o.nodeBefore:o.nodeAfter;if(!a||a.isText||!a.isLeaf)return!1;let u=r.state.doc.resolve(o.pos+a.nodeSize*(e<0?-1:1));return Xs(r,new it(i.$anchor,u))}else if(i.empty){if(r.endOfTextblock(e>0?"forward":"backward")){let o=rp(r.state,e);return o&&o instanceof Xe?Xs(r,o):!1}else if(!(ni&&t.indexOf("m")>-1)){let o=i.$head,a=o.textOffset?null:e<0?o.nodeBefore:o.nodeAfter,u;if(!a||a.isText)return!1;let f=e<0?o.pos-a.nodeSize:o.pos;return a.isAtom||(u=r.docView.descAt(f))&&!u.contentDOM?Xe.isSelectable(a)?Xs(r,new Xe(e<0?r.state.doc.resolve(o.pos-a.nodeSize):o)):Tu?Xs(r,new it(r.state.doc.resolve(e<0?f:f+a.nodeSize))):!1:!1}}else return!1;else{if(i instanceof Xe&&i.node.isInline)return Xs(r,new it(e>0?i.$to:i.$from));{let o=rp(r.state,e);return o?Xs(r,o):!1}}}function sf(r){return r.nodeType==3?r.nodeValue.length:r.childNodes.length}function du(r,e){let t=r.pmViewDesc;return t&&t.size==0&&(e<0||r.nextSibling||r.nodeName!="BR")}function Vl(r,e){return e<0?AE(r):_E(r)}function AE(r){let e=r.domSelectionRange(),t=e.focusNode,i=e.focusOffset;if(!t)return;let o,a,u=!1;for(wi&&t.nodeType==1&&i<sf(t)&&du(t.childNodes[i],-1)&&(u=!0);;)if(i>0){if(t.nodeType!=1)break;{let f=t.childNodes[i-1];if(du(f,-1))o=t,a=--i;else if(f.nodeType==3)t=f,i=t.nodeValue.length;else break}}else{if(ob(t))break;{let f=t.previousSibling;for(;f&&du(f,-1);)o=t.parentNode,a=Pn(f),f=f.previousSibling;if(f)t=f,i=sf(t);else{if(t=t.parentNode,t==r.dom)break;i=0}}}u?ip(r,t,i):o&&ip(r,o,a)}function _E(r){let e=r.domSelectionRange(),t=e.focusNode,i=e.focusOffset;if(!t)return;let o=sf(t),a,u;for(;;)if(i<o){if(t.nodeType!=1)break;let f=t.childNodes[i];if(du(f,1))a=t,u=++i;else break}else{if(ob(t))break;{let f=t.nextSibling;for(;f&&du(f,1);)a=f.parentNode,u=Pn(f)+1,f=f.nextSibling;if(f)t=f,i=0,o=sf(t);else{if(t=t.parentNode,t==r.dom)break;i=o=0}}}a&&ip(r,a,u)}function ob(r){let e=r.pmViewDesc;return e&&e.node&&e.node.isBlock}function NE(r,e){for(;r&&e==r.childNodes.length&&!wu(r);)e=Pn(r)+1,r=r.parentNode;for(;r&&e<r.childNodes.length;){let t=r.childNodes[e];if(t.nodeType==3)return t;if(t.nodeType==1&&t.contentEditable=="false")break;r=t,e=0}}function DE(r,e){for(;r&&!e&&!wu(r);)e=Pn(r),r=r.parentNode;for(;r&&e;){let t=r.childNodes[e-1];if(t.nodeType==3)return t;if(t.nodeType==1&&t.contentEditable=="false")break;r=t,e=r.childNodes.length}}function ip(r,e,t){if(e.nodeType!=3){let a,u;(u=NE(e,t))?(e=u,t=0):(a=DE(e,t))&&(e=a,t=a.nodeValue.length)}let i=r.domSelection();if(!i)return;if(vf(i)){let a=document.createRange();a.setEnd(e,t),a.setStart(e,t),i.removeAllRanges(),i.addRange(a)}else i.extend&&i.extend(e,t);r.domObserver.setCurSelection();let{state:o}=r;setTimeout(()=>{r.state==o&&gs(r)},50)}function O0(r,e){let t=r.state.doc.resolve(e);if(!(tr||eE)&&t.parent.inlineContent){let o=r.coordsAtPos(e);if(e>t.start()){let a=r.coordsAtPos(e-1),u=(a.top+a.bottom)/2;if(u>o.top&&u<o.bottom&&Math.abs(a.left-o.left)>1)return a.left<o.left?"ltr":"rtl"}if(e<t.end()){let a=r.coordsAtPos(e+1),u=(a.top+a.bottom)/2;if(u>o.top&&u<o.bottom&&Math.abs(a.left-o.left)>1)return a.left>o.left?"ltr":"rtl"}}return getComputedStyle(r.dom).direction=="rtl"?"rtl":"ltr"}function k0(r,e,t){let i=r.state.selection;if(i instanceof it&&!i.empty||t.indexOf("s")>-1||ni&&t.indexOf("m")>-1)return!1;let{$from:o,$to:a}=i;if(!o.parent.inlineContent||r.endOfTextblock(e<0?"up":"down")){let u=rp(r.state,e);if(u&&u instanceof Xe)return Xs(r,u)}if(!o.parent.inlineContent){let u=e<0?o:a,f=i instanceof Hr?ct.near(u,e):ct.findFrom(u,e);return f?Xs(r,f):!1}return!1}function C0(r,e){if(!(r.state.selection instanceof it))return!0;let{$head:t,$anchor:i,empty:o}=r.state.selection;if(!t.sameParent(i))return!0;if(!o)return!1;if(r.endOfTextblock(e>0?"forward":"backward"))return!0;let a=!t.textOffset&&(e<0?t.nodeBefore:t.nodeAfter);if(a&&!a.isText){let u=r.state.tr;return e<0?u.delete(t.pos-a.nodeSize,t.pos):u.delete(t.pos,t.pos+a.nodeSize),r.dispatch(u),!0}return!1}function A0(r,e,t){r.domObserver.stop(),e.contentEditable=t,r.domObserver.start()}function RE(r){if(!cr||r.state.selection.$head.parentOffset>0)return!1;let{focusNode:e,focusOffset:t}=r.domSelectionRange();if(e&&e.nodeType==1&&t==0&&e.firstChild&&e.firstChild.contentEditable=="false"){let i=e.firstChild;A0(r,i,"true"),setTimeout(()=>A0(r,i,"false"),20)}return!1}function BE(r){let e="";return r.ctrlKey&&(e+="c"),r.metaKey&&(e+="m"),r.altKey&&(e+="a"),r.shiftKey&&(e+="s"),e}function zE(r,e){let t=e.keyCode,i=BE(e);if(t==8||ni&&t==72&&i=="c")return C0(r,-1)||Vl(r,-1);if(t==46&&!e.shiftKey||ni&&t==68&&i=="c")return C0(r,1)||Vl(r,1);if(t==13||t==27)return!0;if(t==37||ni&&t==66&&i=="c"){let o=t==37?O0(r,r.state.selection.from)=="ltr"?-1:1:-1;return T0(r,o,i)||Vl(r,o)}else if(t==39||ni&&t==70&&i=="c"){let o=t==39?O0(r,r.state.selection.from)=="ltr"?1:-1:1;return T0(r,o,i)||Vl(r,o)}else{if(t==38||ni&&t==80&&i=="c")return k0(r,-1,i)||Vl(r,-1);if(t==40||ni&&t==78&&i=="c")return RE(r)||k0(r,1,i)||Vl(r,1);if(i==(ni?"m":"c")&&(t==66||t==73||t==89||t==90))return!0}return!1}function Sp(r,e){r.someProp("transformCopied",O=>{e=O(e,r)});let t=[],{content:i,openStart:o,openEnd:a}=e;for(;o>1&&a>1&&i.childCount==1&&i.firstChild.childCount==1;){o--,a--;let O=i.firstChild;t.push(O.type.name,O.attrs!=O.type.defaultAttrs?O.attrs:null),i=O.content}let u=r.someProp("clipboardSerializer")||Qo.fromSchema(r.state.schema),f=db(),h=f.createElement("div");h.appendChild(u.serializeFragment(i,{document:f}));let m=h.firstChild,v,S=0;for(;m&&m.nodeType==1&&(v=fb[m.nodeName.toLowerCase()]);){for(let O=v.length-1;O>=0;O--){let T=f.createElement(v[O]);for(;h.firstChild;)T.appendChild(h.firstChild);h.appendChild(T),S++}m=h.firstChild}m&&m.nodeType==1&&m.setAttribute("data-pm-slice",`${o} ${a}${S?` -${S}`:""} ${JSON.stringify(t)}`);let w=r.someProp("clipboardTextSerializer",O=>O(e,r))||e.content.textBetween(0,e.content.size,`

`);return{dom:h,text:w,slice:e}}function lb(r,e,t,i,o){let a=o.parent.type.spec.code,u,f;if(!t&&!e)return null;let h=e&&(i||a||!t);if(h){if(r.someProp("transformPastedText",w=>{e=w(e,a||i,r)}),a)return e?new De(ae.from(r.state.schema.text(e.replace(/\r\n?/g,`
`))),0,0):De.empty;let S=r.someProp("clipboardTextParser",w=>w(e,o,i,r));if(S)f=S;else{let w=o.marks(),{schema:O}=r.state,T=Qo.fromSchema(O);u=document.createElement("div"),e.split(/(?:\r\n?|\n)+/).forEach(A=>{let R=u.appendChild(document.createElement("p"));A&&R.appendChild(T.serializeNode(O.text(A,w)))})}}else r.someProp("transformPastedHTML",S=>{t=S(t,r)}),u=qE(t),Tu&&UE(u);let m=u&&u.querySelector("[data-pm-slice]"),v=m&&/^(\d+) (\d+)(?: -(\d+))? (.*)/.exec(m.getAttribute("data-pm-slice")||"");if(v&&v[3])for(let S=+v[3];S>0;S--){let w=u.firstChild;for(;w&&w.nodeType!=1;)w=w.nextSibling;if(!w)break;u=w}if(f||(f=(r.someProp("clipboardParser")||r.someProp("domParser")||to.fromSchema(r.state.schema)).parseSlice(u,{preserveWhitespace:!!(h||v),context:o,ruleFromNode(w){return w.nodeName=="BR"&&!w.nextSibling&&w.parentNode&&!LE.test(w.parentNode.nodeName)?{ignore:!0}:null}})),v)f=VE(_0(f,+v[1],+v[2]),v[4]);else if(f=De.maxOpen(jE(f.content,o),!0),f.openStart||f.openEnd){let S=0,w=0;for(let O=f.content.firstChild;S<f.openStart&&!O.type.spec.isolating;S++,O=O.firstChild);for(let O=f.content.lastChild;w<f.openEnd&&!O.type.spec.isolating;w++,O=O.lastChild);f=_0(f,S,w)}return r.someProp("transformPasted",S=>{f=S(f,r)}),f}const LE=/^(a|abbr|acronym|b|cite|code|del|em|i|ins|kbd|label|output|q|ruby|s|samp|span|strong|sub|sup|time|u|tt|var)$/i;function jE(r,e){if(r.childCount<2)return r;for(let t=e.depth;t>=0;t--){let o=e.node(t).contentMatchAt(e.index(t)),a,u=[];if(r.forEach(f=>{if(!u)return;let h=o.findWrapping(f.type),m;if(!h)return u=null;if(m=u.length&&a.length&&ub(h,a,f,u[u.length-1],0))u[u.length-1]=m;else{u.length&&(u[u.length-1]=cb(u[u.length-1],a.length));let v=ab(f,h);u.push(v),o=o.matchType(v.type),a=h}}),u)return ae.from(u)}return r}function ab(r,e,t=0){for(let i=e.length-1;i>=t;i--)r=e[i].create(null,ae.from(r));return r}function ub(r,e,t,i,o){if(o<r.length&&o<e.length&&r[o]==e[o]){let a=ub(r,e,t,i.lastChild,o+1);if(a)return i.copy(i.content.replaceChild(i.childCount-1,a));if(i.contentMatchAt(i.childCount).matchType(o==r.length-1?t.type:r[o+1]))return i.copy(i.content.append(ae.from(ab(t,r,o+1))))}}function cb(r,e){if(e==0)return r;let t=r.content.replaceChild(r.childCount-1,cb(r.lastChild,e-1)),i=r.contentMatchAt(r.childCount).fillBefore(ae.empty,!0);return r.copy(t.append(i))}function sp(r,e,t,i,o,a){let u=e<0?r.firstChild:r.lastChild,f=u.content;return r.childCount>1&&(a=0),o<i-1&&(f=sp(f,e,t,i,o+1,a)),o>=t&&(f=e<0?u.contentMatchAt(0).fillBefore(f,a<=o).append(f):f.append(u.contentMatchAt(u.childCount).fillBefore(ae.empty,!0))),r.replaceChild(e<0?0:r.childCount-1,u.copy(f))}function _0(r,e,t){return e<r.openStart&&(r=new De(sp(r.content,-1,e,r.openStart,0,r.openEnd),e,r.openEnd)),t<r.openEnd&&(r=new De(sp(r.content,1,t,r.openEnd,0,0),r.openStart,t)),r}const fb={thead:["table"],tbody:["table"],tfoot:["table"],caption:["table"],colgroup:["table"],col:["table","colgroup"],tr:["table","tbody"],td:["table","tbody","tr"],th:["table","tbody","tr"]};let N0=null;function db(){return N0||(N0=document.implementation.createHTMLDocument("title"))}let Nh=null;function HE(r){let e=window.trustedTypes;return e?(Nh||(Nh=e.defaultPolicy||e.createPolicy("ProseMirrorClipboard",{createHTML:t=>t})),Nh.createHTML(r)):r}function qE(r){let e=/^(\s*<meta [^>]*>)*/.exec(r);e&&(r=r.slice(e[0].length));let t=db().createElement("div"),i=/<([a-z][^>\s]+)/i.exec(r),o;if((o=i&&fb[i[1].toLowerCase()])&&(r=o.map(a=>"<"+a+">").join("")+r+o.map(a=>"</"+a+">").reverse().join("")),t.innerHTML=HE(r),o)for(let a=0;a<o.length;a++)t=t.querySelector(o[a])||t;return t}function UE(r){let e=r.querySelectorAll(tr?"span:not([class]):not([style])":"span.Apple-converted-space");for(let t=0;t<e.length;t++){let i=e[t];i.childNodes.length==1&&i.textContent==""&&i.parentNode&&i.parentNode.replaceChild(r.ownerDocument.createTextNode(" "),i)}}function VE(r,e){if(!r.size)return r;let t=r.content.firstChild.type.schema,i;try{i=JSON.parse(e)}catch{return r}let{content:o,openStart:a,openEnd:u}=r;for(let f=i.length-2;f>=0;f-=2){let h=t.nodes[i[f]];if(!h||h.hasRequiredAttrs())break;o=ae.from(h.create(i[f+1],o)),a++,u++}return new De(o,a,u)}const fr={},dr={},IE={touchstart:!0,touchmove:!0};class KE{constructor(){this.shiftKey=!1,this.mouseDown=null,this.lastKeyCode=null,this.lastKeyCodeTime=0,this.lastClick={time:0,x:0,y:0,type:"",button:0},this.lastSelectionOrigin=null,this.lastSelectionTime=0,this.lastIOSEnter=0,this.lastIOSEnterFallbackTimeout=-1,this.lastFocus=0,this.lastTouch=0,this.lastChromeDelete=0,this.composing=!1,this.compositionNode=null,this.composingTimeout=-1,this.compositionNodes=[],this.compositionEndedAt=-2e8,this.compositionID=1,this.compositionPendingChanges=0,this.domChangeCount=0,this.eventHandlers=Object.create(null),this.hideSelectionGuard=null}}function PE(r){for(let e in fr){let t=fr[e];r.dom.addEventListener(e,r.input.eventHandlers[e]=i=>{GE(r,i)&&!xp(r,i)&&(r.editable||!(i.type in dr))&&t(r,i)},IE[e]?{passive:!0}:void 0)}cr&&r.dom.addEventListener("input",()=>null),op(r)}function Ws(r,e){r.input.lastSelectionOrigin=e,r.input.lastSelectionTime=Date.now()}function YE(r){r.domObserver.stop();for(let e in r.input.eventHandlers)r.dom.removeEventListener(e,r.input.eventHandlers[e]);clearTimeout(r.input.composingTimeout),clearTimeout(r.input.lastIOSEnterFallbackTimeout)}function op(r){r.someProp("handleDOMEvents",e=>{for(let t in e)r.input.eventHandlers[t]||r.dom.addEventListener(t,r.input.eventHandlers[t]=i=>xp(r,i))})}function xp(r,e){return r.someProp("handleDOMEvents",t=>{let i=t[e.type];return i?i(r,e)||e.defaultPrevented:!1})}function GE(r,e){if(!e.bubbles)return!0;if(e.defaultPrevented)return!1;for(let t=e.target;t!=r.dom;t=t.parentNode)if(!t||t.nodeType==11||t.pmViewDesc&&t.pmViewDesc.stopEvent(e))return!1;return!0}function $E(r,e){!xp(r,e)&&fr[e.type]&&(r.editable||!(e.type in dr))&&fr[e.type](r,e)}dr.keydown=(r,e)=>{let t=e;if(r.input.shiftKey=t.keyCode==16||t.shiftKey,!pb(r,t)&&(r.input.lastKeyCode=t.keyCode,r.input.lastKeyCodeTime=Date.now(),!(ps&&tr&&t.keyCode==13)))if(t.keyCode!=229&&r.domObserver.forceFlush(),ea&&t.keyCode==13&&!t.ctrlKey&&!t.altKey&&!t.metaKey){let i=Date.now();r.input.lastIOSEnter=i,r.input.lastIOSEnterFallbackTimeout=setTimeout(()=>{r.input.lastIOSEnter==i&&(r.someProp("handleKeyDown",o=>o(r,Lo(13,"Enter"))),r.input.lastIOSEnter=0)},200)}else r.someProp("handleKeyDown",i=>i(r,t))||zE(r,t)?t.preventDefault():Ws(r,"key")};dr.keyup=(r,e)=>{e.keyCode==16&&(r.input.shiftKey=!1)};dr.keypress=(r,e)=>{let t=e;if(pb(r,t)||!t.charCode||t.ctrlKey&&!t.altKey||ni&&t.metaKey)return;if(r.someProp("handleKeyPress",o=>o(r,t))){t.preventDefault();return}let i=r.state.selection;if(!(i instanceof it)||!i.$from.sameParent(i.$to)){let o=String.fromCharCode(t.charCode);!/[\r\n]/.test(o)&&!r.someProp("handleTextInput",a=>a(r,i.$from.pos,i.$to.pos,o))&&r.dispatch(r.state.tr.insertText(o).scrollIntoView()),t.preventDefault()}};function Sf(r){return{left:r.clientX,top:r.clientY}}function XE(r,e){let t=e.x-r.clientX,i=e.y-r.clientY;return t*t+i*i<100}function Ep(r,e,t,i,o){if(i==-1)return!1;let a=r.state.doc.resolve(i);for(let u=a.depth+1;u>0;u--)if(r.someProp(e,f=>u>a.depth?f(r,t,a.nodeAfter,a.before(u),o,!0):f(r,t,a.node(u),a.before(u),o,!1)))return!0;return!1}function Jl(r,e,t){if(r.focused||r.focus(),r.state.selection.eq(e))return;let i=r.state.tr.setSelection(e);i.setMeta("pointer",!0),r.dispatch(i)}function FE(r,e){if(e==-1)return!1;let t=r.state.doc.resolve(e),i=t.nodeAfter;return i&&i.isAtom&&Xe.isSelectable(i)?(Jl(r,new Xe(t)),!0):!1}function QE(r,e){if(e==-1)return!1;let t=r.state.selection,i,o;t instanceof Xe&&(i=t.node);let a=r.state.doc.resolve(e);for(let u=a.depth+1;u>0;u--){let f=u>a.depth?a.nodeAfter:a.node(u);if(Xe.isSelectable(f)){i&&t.$from.depth>0&&u>=t.$from.depth&&a.before(t.$from.depth+1)==t.$from.pos?o=a.before(t.$from.depth):o=a.before(u);break}}return o!=null?(Jl(r,Xe.create(r.state.doc,o)),!0):!1}function JE(r,e,t,i,o){return Ep(r,"handleClickOn",e,t,i)||r.someProp("handleClick",a=>a(r,e,i))||(o?QE(r,t):FE(r,t))}function ZE(r,e,t,i){return Ep(r,"handleDoubleClickOn",e,t,i)||r.someProp("handleDoubleClick",o=>o(r,e,i))}function WE(r,e,t,i){return Ep(r,"handleTripleClickOn",e,t,i)||r.someProp("handleTripleClick",o=>o(r,e,i))||eM(r,t,i)}function eM(r,e,t){if(t.button!=0)return!1;let i=r.state.doc;if(e==-1)return i.inlineContent?(Jl(r,it.create(i,0,i.content.size)),!0):!1;let o=i.resolve(e);for(let a=o.depth+1;a>0;a--){let u=a>o.depth?o.nodeAfter:o.node(a),f=o.before(a);if(u.inlineContent)Jl(r,it.create(i,f+1,f+1+u.content.size));else if(Xe.isSelectable(u))Jl(r,Xe.create(i,f));else continue;return!0}}function Mp(r){return of(r)}const hb=ni?"metaKey":"ctrlKey";fr.mousedown=(r,e)=>{let t=e;r.input.shiftKey=t.shiftKey;let i=Mp(r),o=Date.now(),a="singleClick";o-r.input.lastClick.time<500&&XE(t,r.input.lastClick)&&!t[hb]&&r.input.lastClick.button==t.button&&(r.input.lastClick.type=="singleClick"?a="doubleClick":r.input.lastClick.type=="doubleClick"&&(a="tripleClick")),r.input.lastClick={time:o,x:t.clientX,y:t.clientY,type:a,button:t.button};let u=r.posAtCoords(Sf(t));u&&(a=="singleClick"?(r.input.mouseDown&&r.input.mouseDown.done(),r.input.mouseDown=new tM(r,u,t,!!i)):(a=="doubleClick"?ZE:WE)(r,u.pos,u.inside,t)?t.preventDefault():Ws(r,"pointer"))};class tM{constructor(e,t,i,o){this.view=e,this.pos=t,this.event=i,this.flushed=o,this.delayedSelectionSync=!1,this.mightDrag=null,this.startDoc=e.state.doc,this.selectNode=!!i[hb],this.allowDefault=i.shiftKey;let a,u;if(t.inside>-1)a=e.state.doc.nodeAt(t.inside),u=t.inside;else{let v=e.state.doc.resolve(t.pos);a=v.parent,u=v.depth?v.before():0}const f=o?null:i.target,h=f?e.docView.nearestDesc(f,!0):null;this.target=h&&h.dom.nodeType==1?h.dom:null;let{selection:m}=e.state;(i.button==0&&a.type.spec.draggable&&a.type.spec.selectable!==!1||m instanceof Xe&&m.from<=u&&m.to>u)&&(this.mightDrag={node:a,pos:u,addAttr:!!(this.target&&!this.target.draggable),setUneditable:!!(this.target&&wi&&!this.target.hasAttribute("contentEditable"))}),this.target&&this.mightDrag&&(this.mightDrag.addAttr||this.mightDrag.setUneditable)&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&(this.target.draggable=!0),this.mightDrag.setUneditable&&setTimeout(()=>{this.view.input.mouseDown==this&&this.target.setAttribute("contentEditable","false")},20),this.view.domObserver.start()),e.root.addEventListener("mouseup",this.up=this.up.bind(this)),e.root.addEventListener("mousemove",this.move=this.move.bind(this)),Ws(e,"pointer")}done(){this.view.root.removeEventListener("mouseup",this.up),this.view.root.removeEventListener("mousemove",this.move),this.mightDrag&&this.target&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&this.target.removeAttribute("draggable"),this.mightDrag.setUneditable&&this.target.removeAttribute("contentEditable"),this.view.domObserver.start()),this.delayedSelectionSync&&setTimeout(()=>gs(this.view)),this.view.input.mouseDown=null}up(e){if(this.done(),!this.view.dom.contains(e.target))return;let t=this.pos;this.view.state.doc!=this.startDoc&&(t=this.view.posAtCoords(Sf(e))),this.updateAllowDefault(e),this.allowDefault||!t?Ws(this.view,"pointer"):JE(this.view,t.pos,t.inside,e,this.selectNode)?e.preventDefault():e.button==0&&(this.flushed||cr&&this.mightDrag&&!this.mightDrag.node.isAtom||tr&&!this.view.state.selection.visible&&Math.min(Math.abs(t.pos-this.view.state.selection.from),Math.abs(t.pos-this.view.state.selection.to))<=2)?(Jl(this.view,ct.near(this.view.state.doc.resolve(t.pos))),e.preventDefault()):Ws(this.view,"pointer")}move(e){this.updateAllowDefault(e),Ws(this.view,"pointer"),e.buttons==0&&this.done()}updateAllowDefault(e){!this.allowDefault&&(Math.abs(this.event.x-e.clientX)>4||Math.abs(this.event.y-e.clientY)>4)&&(this.allowDefault=!0)}}fr.touchstart=r=>{r.input.lastTouch=Date.now(),Mp(r),Ws(r,"pointer")};fr.touchmove=r=>{r.input.lastTouch=Date.now(),Ws(r,"pointer")};fr.contextmenu=r=>Mp(r);function pb(r,e){return r.composing?!0:cr&&Math.abs(e.timeStamp-r.input.compositionEndedAt)<500?(r.input.compositionEndedAt=-2e8,!0):!1}const nM=ps?5e3:-1;dr.compositionstart=dr.compositionupdate=r=>{if(!r.composing){r.domObserver.flush();let{state:e}=r,t=e.selection.$to;if(e.selection instanceof it&&(e.storedMarks||!t.textOffset&&t.parentOffset&&t.nodeBefore.marks.some(i=>i.type.spec.inclusive===!1)))r.markCursor=r.state.storedMarks||t.marks(),of(r,!0),r.markCursor=null;else if(of(r,!e.selection.empty),wi&&e.selection.empty&&t.parentOffset&&!t.textOffset&&t.nodeBefore.marks.length){let i=r.domSelectionRange();for(let o=i.focusNode,a=i.focusOffset;o&&o.nodeType==1&&a!=0;){let u=a<0?o.lastChild:o.childNodes[a-1];if(!u)break;if(u.nodeType==3){let f=r.domSelection();f&&f.collapse(u,u.nodeValue.length);break}else o=u,a=-1}}r.input.composing=!0}mb(r,nM)};dr.compositionend=(r,e)=>{r.composing&&(r.input.composing=!1,r.input.compositionEndedAt=e.timeStamp,r.input.compositionPendingChanges=r.domObserver.pendingRecords().length?r.input.compositionID:0,r.input.compositionNode=null,r.input.compositionPendingChanges&&Promise.resolve().then(()=>r.domObserver.flush()),r.input.compositionID++,mb(r,20))};function mb(r,e){clearTimeout(r.input.composingTimeout),e>-1&&(r.input.composingTimeout=setTimeout(()=>of(r),e))}function gb(r){for(r.composing&&(r.input.composing=!1,r.input.compositionEndedAt=iM());r.input.compositionNodes.length>0;)r.input.compositionNodes.pop().markParentsDirty()}function rM(r){let e=r.domSelectionRange();if(!e.focusNode)return null;let t=Fx(e.focusNode,e.focusOffset),i=Qx(e.focusNode,e.focusOffset);if(t&&i&&t!=i){let o=i.pmViewDesc,a=r.domObserver.lastChangedTextNode;if(t==a||i==a)return a;if(!o||!o.isText(i.nodeValue))return i;if(r.input.compositionNode==i){let u=t.pmViewDesc;if(!(!u||!u.isText(t.nodeValue)))return i}}return t||i}function iM(){let r=document.createEvent("Event");return r.initEvent("event",!0,!0),r.timeStamp}function of(r,e=!1){if(!(ps&&r.domObserver.flushingSoon>=0)){if(r.domObserver.forceFlush(),gb(r),e||r.docView&&r.docView.dirty){let t=vp(r),i=r.state.selection;return t&&!t.eq(i)?r.dispatch(r.state.tr.setSelection(t)):(r.markCursor||e)&&!i.$from.node(i.$from.sharedDepth(i.to)).inlineContent?r.dispatch(r.state.tr.deleteSelection()):r.updateState(r.state),!0}return!1}}function sM(r,e){if(!r.dom.parentNode)return;let t=r.dom.parentNode.appendChild(document.createElement("div"));t.appendChild(e),t.style.cssText="position: fixed; left: -10000px; top: 10px";let i=getSelection(),o=document.createRange();o.selectNodeContents(e),r.dom.blur(),i.removeAllRanges(),i.addRange(o),setTimeout(()=>{t.parentNode&&t.parentNode.removeChild(t),r.focus()},50)}const vu=Er&&no<15||ea&&tE<604;fr.copy=dr.cut=(r,e)=>{let t=e,i=r.state.selection,o=t.type=="cut";if(i.empty)return;let a=vu?null:t.clipboardData,u=i.content(),{dom:f,text:h}=Sp(r,u);a?(t.preventDefault(),a.clearData(),a.setData("text/html",f.innerHTML),a.setData("text/plain",h)):sM(r,f),o&&r.dispatch(r.state.tr.deleteSelection().scrollIntoView().setMeta("uiEvent","cut"))};function oM(r){return r.openStart==0&&r.openEnd==0&&r.content.childCount==1?r.content.firstChild:null}function lM(r,e){if(!r.dom.parentNode)return;let t=r.input.shiftKey||r.state.selection.$from.parent.type.spec.code,i=r.dom.parentNode.appendChild(document.createElement(t?"textarea":"div"));t||(i.contentEditable="true"),i.style.cssText="position: fixed; left: -10000px; top: 10px",i.focus();let o=r.input.shiftKey&&r.input.lastKeyCode!=45;setTimeout(()=>{r.focus(),i.parentNode&&i.parentNode.removeChild(i),t?bu(r,i.value,null,o,e):bu(r,i.textContent,i.innerHTML,o,e)},50)}function bu(r,e,t,i,o){let a=lb(r,e,t,i,r.state.selection.$from);if(r.someProp("handlePaste",h=>h(r,o,a||De.empty)))return!0;if(!a)return!1;let u=oM(a),f=u?r.state.tr.replaceSelectionWith(u,i):r.state.tr.replaceSelection(a);return r.dispatch(f.scrollIntoView().setMeta("paste",!0).setMeta("uiEvent","paste")),!0}function yb(r){let e=r.getData("text/plain")||r.getData("Text");if(e)return e;let t=r.getData("text/uri-list");return t?t.replace(/\r?\n/g," "):""}dr.paste=(r,e)=>{let t=e;if(r.composing&&!ps)return;let i=vu?null:t.clipboardData,o=r.input.shiftKey&&r.input.lastKeyCode!=45;i&&bu(r,yb(i),i.getData("text/html"),o,t)?t.preventDefault():lM(r,t)};class vb{constructor(e,t,i){this.slice=e,this.move=t,this.node=i}}const aM=ni?"altKey":"ctrlKey";function bb(r,e){let t=r.someProp("dragCopies",i=>!i(e));return t??!e[aM]}fr.dragstart=(r,e)=>{let t=e,i=r.input.mouseDown;if(i&&i.done(),!t.dataTransfer)return;let o=r.state.selection,a=o.empty?null:r.posAtCoords(Sf(t)),u;if(!(a&&a.pos>=o.from&&a.pos<=(o instanceof Xe?o.to-1:o.to))){if(i&&i.mightDrag)u=Xe.create(r.state.doc,i.mightDrag.pos);else if(t.target&&t.target.nodeType==1){let S=r.docView.nearestDesc(t.target,!0);S&&S.node.type.spec.draggable&&S!=r.docView&&(u=Xe.create(r.state.doc,S.posBefore))}}let f=(u||r.state.selection).content(),{dom:h,text:m,slice:v}=Sp(r,f);(!t.dataTransfer.files.length||!tr||Yv>120)&&t.dataTransfer.clearData(),t.dataTransfer.setData(vu?"Text":"text/html",h.innerHTML),t.dataTransfer.effectAllowed="copyMove",vu||t.dataTransfer.setData("text/plain",m),r.dragging=new vb(v,bb(r,t),u)};fr.dragend=r=>{let e=r.dragging;window.setTimeout(()=>{r.dragging==e&&(r.dragging=null)},50)};dr.dragover=dr.dragenter=(r,e)=>e.preventDefault();dr.drop=(r,e)=>{let t=e,i=r.dragging;if(r.dragging=null,!t.dataTransfer)return;let o=r.posAtCoords(Sf(t));if(!o)return;let a=r.state.doc.resolve(o.pos),u=i&&i.slice;u?r.someProp("transformPasted",T=>{u=T(u,r)}):u=lb(r,yb(t.dataTransfer),vu?null:t.dataTransfer.getData("text/html"),!1,a);let f=!!(i&&bb(r,t));if(r.someProp("handleDrop",T=>T(r,t,u||De.empty,f))){t.preventDefault();return}if(!u)return;t.preventDefault();let h=u?jv(r.state.doc,a.pos,u):a.pos;h==null&&(h=a.pos);let m=r.state.tr;if(f){let{node:T}=i;T?T.replace(m):m.deleteSelection()}let v=m.mapping.map(h),S=u.openStart==0&&u.openEnd==0&&u.content.childCount==1,w=m.doc;if(S?m.replaceRangeWith(v,v,u.content.firstChild):m.replaceRange(v,v,u),m.doc.eq(w))return;let O=m.doc.resolve(v);if(S&&Xe.isSelectable(u.content.firstChild)&&O.nodeAfter&&O.nodeAfter.sameMarkup(u.content.firstChild))m.setSelection(new Xe(O));else{let T=m.mapping.map(h);m.mapping.maps[m.mapping.maps.length-1].forEach((A,R,W,Te)=>T=Te),m.setSelection(bp(r,O,m.doc.resolve(T)))}r.focus(),r.dispatch(m.setMeta("uiEvent","drop"))};fr.focus=r=>{r.input.lastFocus=Date.now(),r.focused||(r.domObserver.stop(),r.dom.classList.add("ProseMirror-focused"),r.domObserver.start(),r.focused=!0,setTimeout(()=>{r.docView&&r.hasFocus()&&!r.domObserver.currentSelection.eq(r.domSelectionRange())&&gs(r)},20))};fr.blur=(r,e)=>{let t=e;r.focused&&(r.domObserver.stop(),r.dom.classList.remove("ProseMirror-focused"),r.domObserver.start(),t.relatedTarget&&r.dom.contains(t.relatedTarget)&&r.domObserver.currentSelection.clear(),r.focused=!1)};fr.beforeinput=(r,e)=>{if(tr&&ps&&e.inputType=="deleteContentBackward"){r.domObserver.flushSoon();let{domChangeCount:i}=r.input;setTimeout(()=>{if(r.input.domChangeCount!=i||(r.dom.blur(),r.focus(),r.someProp("handleKeyDown",a=>a(r,Lo(8,"Backspace")))))return;let{$cursor:o}=r.state.selection;o&&o.pos>0&&r.dispatch(r.state.tr.delete(o.pos-1,o.pos).scrollIntoView())},50)}};for(let r in dr)fr[r]=dr[r];function Su(r,e){if(r==e)return!0;for(let t in r)if(r[t]!==e[t])return!1;for(let t in e)if(!(t in r))return!1;return!0}class lf{constructor(e,t){this.toDOM=e,this.spec=t||Ko,this.side=this.spec.side||0}map(e,t,i,o){let{pos:a,deleted:u}=e.mapResult(t.from+o,this.side<0?-1:1);return u?null:new ii(a-i,a-i,this)}valid(){return!0}eq(e){return this==e||e instanceof lf&&(this.spec.key&&this.spec.key==e.spec.key||this.toDOM==e.toDOM&&Su(this.spec,e.spec))}destroy(e){this.spec.destroy&&this.spec.destroy(e)}}class io{constructor(e,t){this.attrs=e,this.spec=t||Ko}map(e,t,i,o){let a=e.map(t.from+o,this.spec.inclusiveStart?-1:1)-i,u=e.map(t.to+o,this.spec.inclusiveEnd?1:-1)-i;return a>=u?null:new ii(a,u,this)}valid(e,t){return t.from<t.to}eq(e){return this==e||e instanceof io&&Su(this.attrs,e.attrs)&&Su(this.spec,e.spec)}static is(e){return e.type instanceof io}destroy(){}}class wp{constructor(e,t){this.attrs=e,this.spec=t||Ko}map(e,t,i,o){let a=e.mapResult(t.from+o,1);if(a.deleted)return null;let u=e.mapResult(t.to+o,-1);return u.deleted||u.pos<=a.pos?null:new ii(a.pos-i,u.pos-i,this)}valid(e,t){let{index:i,offset:o}=e.content.findIndex(t.from),a;return o==t.from&&!(a=e.child(i)).isText&&o+a.nodeSize==t.to}eq(e){return this==e||e instanceof wp&&Su(this.attrs,e.attrs)&&Su(this.spec,e.spec)}destroy(){}}class ii{constructor(e,t,i){this.from=e,this.to=t,this.type=i}copy(e,t){return new ii(e,t,this.type)}eq(e,t=0){return this.type.eq(e.type)&&this.from+t==e.from&&this.to+t==e.to}map(e,t,i){return this.type.map(e,this,t,i)}static widget(e,t,i){return new ii(e,e,new lf(t,i))}static inline(e,t,i,o){return new ii(e,t,new io(i,o))}static node(e,t,i,o){return new ii(e,t,new wp(i,o))}get spec(){return this.type.spec}get inline(){return this.type instanceof io}get widget(){return this.type instanceof lf}}const $l=[],Ko={};class En{constructor(e,t){this.local=e.length?e:$l,this.children=t.length?t:$l}static create(e,t){return t.length?af(t,e,0,Ko):er}find(e,t,i){let o=[];return this.findInner(e??0,t??1e9,o,0,i),o}findInner(e,t,i,o,a){for(let u=0;u<this.local.length;u++){let f=this.local[u];f.from<=t&&f.to>=e&&(!a||a(f.spec))&&i.push(f.copy(f.from+o,f.to+o))}for(let u=0;u<this.children.length;u+=3)if(this.children[u]<t&&this.children[u+1]>e){let f=this.children[u]+1;this.children[u+2].findInner(e-f,t-f,i,o+f,a)}}map(e,t,i){return this==er||e.maps.length==0?this:this.mapInner(e,t,0,0,i||Ko)}mapInner(e,t,i,o,a){let u;for(let f=0;f<this.local.length;f++){let h=this.local[f].map(e,i,o);h&&h.type.valid(t,h)?(u||(u=[])).push(h):a.onRemove&&a.onRemove(this.local[f].spec)}return this.children.length?uM(this.children,u||[],e,t,i,o,a):u?new En(u.sort(Po),$l):er}add(e,t){return t.length?this==er?En.create(e,t):this.addInner(e,t,0):this}addInner(e,t,i){let o,a=0;e.forEach((f,h)=>{let m=h+i,v;if(v=xb(t,f,m)){for(o||(o=this.children.slice());a<o.length&&o[a]<h;)a+=3;o[a]==h?o[a+2]=o[a+2].addInner(f,v,m+1):o.splice(a,0,h,h+f.nodeSize,af(v,f,m+1,Ko)),a+=3}});let u=Sb(a?Eb(t):t,-i);for(let f=0;f<u.length;f++)u[f].type.valid(e,u[f])||u.splice(f--,1);return new En(u.length?this.local.concat(u).sort(Po):this.local,o||this.children)}remove(e){return e.length==0||this==er?this:this.removeInner(e,0)}removeInner(e,t){let i=this.children,o=this.local;for(let a=0;a<i.length;a+=3){let u,f=i[a]+t,h=i[a+1]+t;for(let v=0,S;v<e.length;v++)(S=e[v])&&S.from>f&&S.to<h&&(e[v]=null,(u||(u=[])).push(S));if(!u)continue;i==this.children&&(i=this.children.slice());let m=i[a+2].removeInner(u,f+1);m!=er?i[a+2]=m:(i.splice(a,3),a-=3)}if(o.length){for(let a=0,u;a<e.length;a++)if(u=e[a])for(let f=0;f<o.length;f++)o[f].eq(u,t)&&(o==this.local&&(o=this.local.slice()),o.splice(f--,1))}return i==this.children&&o==this.local?this:o.length||i.length?new En(o,i):er}forChild(e,t){if(this==er)return this;if(t.isLeaf)return En.empty;let i,o;for(let f=0;f<this.children.length;f+=3)if(this.children[f]>=e){this.children[f]==e&&(i=this.children[f+2]);break}let a=e+1,u=a+t.content.size;for(let f=0;f<this.local.length;f++){let h=this.local[f];if(h.from<u&&h.to>a&&h.type instanceof io){let m=Math.max(a,h.from)-a,v=Math.min(u,h.to)-a;m<v&&(o||(o=[])).push(h.copy(m,v))}}if(o){let f=new En(o.sort(Po),$l);return i?new Qs([f,i]):f}return i||er}eq(e){if(this==e)return!0;if(!(e instanceof En)||this.local.length!=e.local.length||this.children.length!=e.children.length)return!1;for(let t=0;t<this.local.length;t++)if(!this.local[t].eq(e.local[t]))return!1;for(let t=0;t<this.children.length;t+=3)if(this.children[t]!=e.children[t]||this.children[t+1]!=e.children[t+1]||!this.children[t+2].eq(e.children[t+2]))return!1;return!0}locals(e){return Tp(this.localsInner(e))}localsInner(e){if(this==er)return $l;if(e.inlineContent||!this.local.some(io.is))return this.local;let t=[];for(let i=0;i<this.local.length;i++)this.local[i].type instanceof io||t.push(this.local[i]);return t}forEachSet(e){e(this)}}En.empty=new En([],[]);En.removeOverlap=Tp;const er=En.empty;class Qs{constructor(e){this.members=e}map(e,t){const i=this.members.map(o=>o.map(e,t,Ko));return Qs.from(i)}forChild(e,t){if(t.isLeaf)return En.empty;let i=[];for(let o=0;o<this.members.length;o++){let a=this.members[o].forChild(e,t);a!=er&&(a instanceof Qs?i=i.concat(a.members):i.push(a))}return Qs.from(i)}eq(e){if(!(e instanceof Qs)||e.members.length!=this.members.length)return!1;for(let t=0;t<this.members.length;t++)if(!this.members[t].eq(e.members[t]))return!1;return!0}locals(e){let t,i=!0;for(let o=0;o<this.members.length;o++){let a=this.members[o].localsInner(e);if(a.length)if(!t)t=a;else{i&&(t=t.slice(),i=!1);for(let u=0;u<a.length;u++)t.push(a[u])}}return t?Tp(i?t:t.sort(Po)):$l}static from(e){switch(e.length){case 0:return er;case 1:return e[0];default:return new Qs(e.every(t=>t instanceof En)?e:e.reduce((t,i)=>t.concat(i instanceof En?i:i.members),[]))}}forEachSet(e){for(let t=0;t<this.members.length;t++)this.members[t].forEachSet(e)}}function uM(r,e,t,i,o,a,u){let f=r.slice();for(let m=0,v=a;m<t.maps.length;m++){let S=0;t.maps[m].forEach((w,O,T,A)=>{let R=A-T-(O-w);for(let W=0;W<f.length;W+=3){let Te=f[W+1];if(Te<0||w>Te+v-S)continue;let _e=f[W]+v-S;O>=_e?f[W+1]=w<=_e?-2:-1:w>=v&&R&&(f[W]+=R,f[W+1]+=R)}S+=R}),v=t.maps[m].map(v,-1)}let h=!1;for(let m=0;m<f.length;m+=3)if(f[m+1]<0){if(f[m+1]==-2){h=!0,f[m+1]=-1;continue}let v=t.map(r[m]+a),S=v-o;if(S<0||S>=i.content.size){h=!0;continue}let w=t.map(r[m+1]+a,-1),O=w-o,{index:T,offset:A}=i.content.findIndex(S),R=i.maybeChild(T);if(R&&A==S&&A+R.nodeSize==O){let W=f[m+2].mapInner(t,R,v+1,r[m]+a+1,u);W!=er?(f[m]=S,f[m+1]=O,f[m+2]=W):(f[m+1]=-2,h=!0)}else h=!0}if(h){let m=cM(f,r,e,t,o,a,u),v=af(m,i,0,u);e=v.local;for(let S=0;S<f.length;S+=3)f[S+1]<0&&(f.splice(S,3),S-=3);for(let S=0,w=0;S<v.children.length;S+=3){let O=v.children[S];for(;w<f.length&&f[w]<O;)w+=3;f.splice(w,0,v.children[S],v.children[S+1],v.children[S+2])}}return new En(e.sort(Po),f)}function Sb(r,e){if(!e||!r.length)return r;let t=[];for(let i=0;i<r.length;i++){let o=r[i];t.push(new ii(o.from+e,o.to+e,o.type))}return t}function cM(r,e,t,i,o,a,u){function f(h,m){for(let v=0;v<h.local.length;v++){let S=h.local[v].map(i,o,m);S?t.push(S):u.onRemove&&u.onRemove(h.local[v].spec)}for(let v=0;v<h.children.length;v+=3)f(h.children[v+2],h.children[v]+m+1)}for(let h=0;h<r.length;h+=3)r[h+1]==-1&&f(r[h+2],e[h]+a+1);return t}function xb(r,e,t){if(e.isLeaf)return null;let i=t+e.nodeSize,o=null;for(let a=0,u;a<r.length;a++)(u=r[a])&&u.from>t&&u.to<i&&((o||(o=[])).push(u),r[a]=null);return o}function Eb(r){let e=[];for(let t=0;t<r.length;t++)r[t]!=null&&e.push(r[t]);return e}function af(r,e,t,i){let o=[],a=!1;e.forEach((f,h)=>{let m=xb(r,f,h+t);if(m){a=!0;let v=af(m,f,t+h+1,i);v!=er&&o.push(h,h+f.nodeSize,v)}});let u=Sb(a?Eb(r):r,-t).sort(Po);for(let f=0;f<u.length;f++)u[f].type.valid(e,u[f])||(i.onRemove&&i.onRemove(u[f].spec),u.splice(f--,1));return u.length||o.length?new En(u,o):er}function Po(r,e){return r.from-e.from||r.to-e.to}function Tp(r){let e=r;for(let t=0;t<e.length-1;t++){let i=e[t];if(i.from!=i.to)for(let o=t+1;o<e.length;o++){let a=e[o];if(a.from==i.from){a.to!=i.to&&(e==r&&(e=r.slice()),e[o]=a.copy(a.from,i.to),D0(e,o+1,a.copy(i.to,a.to)));continue}else{a.from<i.to&&(e==r&&(e=r.slice()),e[t]=i.copy(i.from,a.from),D0(e,o,i.copy(a.from,i.to)));break}}}return e}function D0(r,e,t){for(;e<r.length&&Po(t,r[e])>0;)e++;r.splice(e,0,t)}function Dh(r){let e=[];return r.someProp("decorations",t=>{let i=t(r.state);i&&i!=er&&e.push(i)}),r.cursorWrapper&&e.push(En.create(r.state.doc,[r.cursorWrapper.deco])),Qs.from(e)}const fM={childList:!0,characterData:!0,characterDataOldValue:!0,attributes:!0,attributeOldValue:!0,subtree:!0},dM=Er&&no<=11;class hM{constructor(){this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0}set(e){this.anchorNode=e.anchorNode,this.anchorOffset=e.anchorOffset,this.focusNode=e.focusNode,this.focusOffset=e.focusOffset}clear(){this.anchorNode=this.focusNode=null}eq(e){return e.anchorNode==this.anchorNode&&e.anchorOffset==this.anchorOffset&&e.focusNode==this.focusNode&&e.focusOffset==this.focusOffset}}class pM{constructor(e,t){this.view=e,this.handleDOMChange=t,this.queue=[],this.flushingSoon=-1,this.observer=null,this.currentSelection=new hM,this.onCharData=null,this.suppressingSelectionUpdates=!1,this.lastChangedTextNode=null,this.observer=window.MutationObserver&&new window.MutationObserver(i=>{for(let o=0;o<i.length;o++)this.queue.push(i[o]);Er&&no<=11&&i.some(o=>o.type=="childList"&&o.removedNodes.length||o.type=="characterData"&&o.oldValue.length>o.target.nodeValue.length)?this.flushSoon():this.flush()}),dM&&(this.onCharData=i=>{this.queue.push({target:i.target,type:"characterData",oldValue:i.prevValue}),this.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this)}flushSoon(){this.flushingSoon<0&&(this.flushingSoon=window.setTimeout(()=>{this.flushingSoon=-1,this.flush()},20))}forceFlush(){this.flushingSoon>-1&&(window.clearTimeout(this.flushingSoon),this.flushingSoon=-1,this.flush())}start(){this.observer&&(this.observer.takeRecords(),this.observer.observe(this.view.dom,fM)),this.onCharData&&this.view.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.connectSelection()}stop(){if(this.observer){let e=this.observer.takeRecords();if(e.length){for(let t=0;t<e.length;t++)this.queue.push(e[t]);window.setTimeout(()=>this.flush(),20)}this.observer.disconnect()}this.onCharData&&this.view.dom.removeEventListener("DOMCharacterDataModified",this.onCharData),this.disconnectSelection()}connectSelection(){this.view.dom.ownerDocument.addEventListener("selectionchange",this.onSelectionChange)}disconnectSelection(){this.view.dom.ownerDocument.removeEventListener("selectionchange",this.onSelectionChange)}suppressSelectionUpdates(){this.suppressingSelectionUpdates=!0,setTimeout(()=>this.suppressingSelectionUpdates=!1,50)}onSelectionChange(){if(w0(this.view)){if(this.suppressingSelectionUpdates)return gs(this.view);if(Er&&no<=11&&!this.view.state.selection.empty){let e=this.view.domSelectionRange();if(e.focusNode&&Xo(e.focusNode,e.focusOffset,e.anchorNode,e.anchorOffset))return this.flushSoon()}this.flush()}}setCurSelection(){this.currentSelection.set(this.view.domSelectionRange())}ignoreSelectionChange(e){if(!e.focusNode)return!0;let t=new Set,i;for(let a=e.focusNode;a;a=Wl(a))t.add(a);for(let a=e.anchorNode;a;a=Wl(a))if(t.has(a)){i=a;break}let o=i&&this.view.docView.nearestDesc(i);if(o&&o.ignoreMutation({type:"selection",target:i.nodeType==3?i.parentNode:i}))return this.setCurSelection(),!0}pendingRecords(){if(this.observer)for(let e of this.observer.takeRecords())this.queue.push(e);return this.queue}flush(){let{view:e}=this;if(!e.docView||this.flushingSoon>-1)return;let t=this.pendingRecords();t.length&&(this.queue=[]);let i=e.domSelectionRange(),o=!this.suppressingSelectionUpdates&&!this.currentSelection.eq(i)&&w0(e)&&!this.ignoreSelectionChange(i),a=-1,u=-1,f=!1,h=[];if(e.editable)for(let v=0;v<t.length;v++){let S=this.registerMutation(t[v],h);S&&(a=a<0?S.from:Math.min(S.from,a),u=u<0?S.to:Math.max(S.to,u),S.typeOver&&(f=!0))}if(wi&&h.length){let v=h.filter(S=>S.nodeName=="BR");if(v.length==2){let[S,w]=v;S.parentNode&&S.parentNode.parentNode==w.parentNode?w.remove():S.remove()}else{let{focusNode:S}=this.currentSelection;for(let w of v){let O=w.parentNode;O&&O.nodeName=="LI"&&(!S||yM(e,S)!=O)&&w.remove()}}}let m=null;a<0&&o&&e.input.lastFocus>Date.now()-200&&Math.max(e.input.lastTouch,e.input.lastClick.time)<Date.now()-300&&vf(i)&&(m=vp(e))&&m.eq(ct.near(e.state.doc.resolve(0),1))?(e.input.lastFocus=0,gs(e),this.currentSelection.set(i),e.scrollToSelection()):(a>-1||o)&&(a>-1&&(e.docView.markDirty(a,u),mM(e)),this.handleDOMChange(a,u,f,h),e.docView&&e.docView.dirty?e.updateState(e.state):this.currentSelection.eq(i)||gs(e),this.currentSelection.set(i))}registerMutation(e,t){if(t.indexOf(e.target)>-1)return null;let i=this.view.docView.nearestDesc(e.target);if(e.type=="attributes"&&(i==this.view.docView||e.attributeName=="contenteditable"||e.attributeName=="style"&&!e.oldValue&&!e.target.getAttribute("style"))||!i||i.ignoreMutation(e))return null;if(e.type=="childList"){for(let v=0;v<e.addedNodes.length;v++){let S=e.addedNodes[v];t.push(S),S.nodeType==3&&(this.lastChangedTextNode=S)}if(i.contentDOM&&i.contentDOM!=i.dom&&!i.contentDOM.contains(e.target))return{from:i.posBefore,to:i.posAfter};let o=e.previousSibling,a=e.nextSibling;if(Er&&no<=11&&e.addedNodes.length)for(let v=0;v<e.addedNodes.length;v++){let{previousSibling:S,nextSibling:w}=e.addedNodes[v];(!S||Array.prototype.indexOf.call(e.addedNodes,S)<0)&&(o=S),(!w||Array.prototype.indexOf.call(e.addedNodes,w)<0)&&(a=w)}let u=o&&o.parentNode==e.target?Pn(o)+1:0,f=i.localPosFromDOM(e.target,u,-1),h=a&&a.parentNode==e.target?Pn(a):e.target.childNodes.length,m=i.localPosFromDOM(e.target,h,1);return{from:f,to:m}}else return e.type=="attributes"?{from:i.posAtStart-i.border,to:i.posAtEnd+i.border}:(this.lastChangedTextNode=e.target,{from:i.posAtStart,to:i.posAtEnd,typeOver:e.target.nodeValue==e.oldValue})}}let R0=new WeakMap,B0=!1;function mM(r){if(!R0.has(r)&&(R0.set(r,null),["normal","nowrap","pre-line"].indexOf(getComputedStyle(r.dom).whiteSpace)!==-1)){if(r.requiresGeckoHackNode=wi,B0)return;console.warn("ProseMirror expects the CSS white-space property to be set, preferably to 'pre-wrap'. It is recommended to load style/prosemirror.css from the prosemirror-view package."),B0=!0}}function z0(r,e){let t=e.startContainer,i=e.startOffset,o=e.endContainer,a=e.endOffset,u=r.domAtPos(r.state.selection.anchor);return Xo(u.node,u.offset,o,a)&&([t,i,o,a]=[o,a,t,i]),{anchorNode:t,anchorOffset:i,focusNode:o,focusOffset:a}}function gM(r,e){if(e.getComposedRanges){let o=e.getComposedRanges(r.root)[0];if(o)return z0(r,o)}let t;function i(o){o.preventDefault(),o.stopImmediatePropagation(),t=o.getTargetRanges()[0]}return r.dom.addEventListener("beforeinput",i,!0),document.execCommand("indent"),r.dom.removeEventListener("beforeinput",i,!0),t?z0(r,t):null}function yM(r,e){for(let t=e.parentNode;t&&t!=r.dom;t=t.parentNode){let i=r.docView.nearestDesc(t,!0);if(i&&i.node.isBlock)return t}return null}function vM(r,e,t){let{node:i,fromOffset:o,toOffset:a,from:u,to:f}=r.docView.parseRange(e,t),h=r.domSelectionRange(),m,v=h.anchorNode;if(v&&r.dom.contains(v.nodeType==1?v:v.parentNode)&&(m=[{node:v,offset:h.anchorOffset}],vf(h)||m.push({node:h.focusNode,offset:h.focusOffset})),tr&&r.input.lastKeyCode===8)for(let R=a;R>o;R--){let W=i.childNodes[R-1],Te=W.pmViewDesc;if(W.nodeName=="BR"&&!Te){a=R;break}if(!Te||Te.size)break}let S=r.state.doc,w=r.someProp("domParser")||to.fromSchema(r.state.schema),O=S.resolve(u),T=null,A=w.parse(i,{topNode:O.parent,topMatch:O.parent.contentMatchAt(O.index()),topOpen:!0,from:o,to:a,preserveWhitespace:O.parent.type.whitespace=="pre"?"full":!0,findPositions:m,ruleFromNode:bM,context:O});if(m&&m[0].pos!=null){let R=m[0].pos,W=m[1]&&m[1].pos;W==null&&(W=R),T={anchor:R+u,head:W+u}}return{doc:A,sel:T,from:u,to:f}}function bM(r){let e=r.pmViewDesc;if(e)return e.parseRule();if(r.nodeName=="BR"&&r.parentNode){if(cr&&/^(ul|ol)$/i.test(r.parentNode.nodeName)){let t=document.createElement("div");return t.appendChild(document.createElement("li")),{skip:t}}else if(r.parentNode.lastChild==r||cr&&/^(tr|table)$/i.test(r.parentNode.nodeName))return{ignore:!0}}else if(r.nodeName=="IMG"&&r.getAttribute("mark-placeholder"))return{ignore:!0};return null}const SM=/^(a|abbr|acronym|b|bd[io]|big|br|button|cite|code|data(list)?|del|dfn|em|i|ins|kbd|label|map|mark|meter|output|q|ruby|s|samp|small|span|strong|su[bp]|time|u|tt|var)$/i;function xM(r,e,t,i,o){let a=r.input.compositionPendingChanges||(r.composing?r.input.compositionID:0);if(r.input.compositionPendingChanges=0,e<0){let Ce=r.input.lastSelectionTime>Date.now()-50?r.input.lastSelectionOrigin:null,St=vp(r,Ce);if(St&&!r.state.selection.eq(St)){if(tr&&ps&&r.input.lastKeyCode===13&&Date.now()-100<r.input.lastKeyCodeTime&&r.someProp("handleKeyDown",jt=>jt(r,Lo(13,"Enter"))))return;let sn=r.state.tr.setSelection(St);Ce=="pointer"?sn.setMeta("pointer",!0):Ce=="key"&&sn.scrollIntoView(),a&&sn.setMeta("composition",a),r.dispatch(sn)}return}let u=r.state.doc.resolve(e),f=u.sharedDepth(t);e=u.before(f+1),t=r.state.doc.resolve(t).after(f+1);let h=r.state.selection,m=vM(r,e,t),v=r.state.doc,S=v.slice(m.from,m.to),w,O;r.input.lastKeyCode===8&&Date.now()-100<r.input.lastKeyCodeTime?(w=r.state.selection.to,O="end"):(w=r.state.selection.from,O="start"),r.input.lastKeyCode=null;let T=wM(S.content,m.doc.content,m.from,w,O);if(T&&r.input.domChangeCount++,(ea&&r.input.lastIOSEnter>Date.now()-225||ps)&&o.some(Ce=>Ce.nodeType==1&&!SM.test(Ce.nodeName))&&(!T||T.endA>=T.endB)&&r.someProp("handleKeyDown",Ce=>Ce(r,Lo(13,"Enter")))){r.input.lastIOSEnter=0;return}if(!T)if(i&&h instanceof it&&!h.empty&&h.$head.sameParent(h.$anchor)&&!r.composing&&!(m.sel&&m.sel.anchor!=m.sel.head))T={start:h.from,endA:h.to,endB:h.to};else{if(m.sel){let Ce=L0(r,r.state.doc,m.sel);if(Ce&&!Ce.eq(r.state.selection)){let St=r.state.tr.setSelection(Ce);a&&St.setMeta("composition",a),r.dispatch(St)}}return}r.state.selection.from<r.state.selection.to&&T.start==T.endB&&r.state.selection instanceof it&&(T.start>r.state.selection.from&&T.start<=r.state.selection.from+2&&r.state.selection.from>=m.from?T.start=r.state.selection.from:T.endA<r.state.selection.to&&T.endA>=r.state.selection.to-2&&r.state.selection.to<=m.to&&(T.endB+=r.state.selection.to-T.endA,T.endA=r.state.selection.to)),Er&&no<=11&&T.endB==T.start+1&&T.endA==T.start&&T.start>m.from&&m.doc.textBetween(T.start-m.from-1,T.start-m.from+1)==" "&&(T.start--,T.endA--,T.endB--);let A=m.doc.resolveNoCache(T.start-m.from),R=m.doc.resolveNoCache(T.endB-m.from),W=v.resolve(T.start),Te=A.sameParent(R)&&A.parent.inlineContent&&W.end()>=T.endA,_e;if((ea&&r.input.lastIOSEnter>Date.now()-225&&(!Te||o.some(Ce=>Ce.nodeName=="DIV"||Ce.nodeName=="P"))||!Te&&A.pos<m.doc.content.size&&(!A.sameParent(R)||!A.parent.inlineContent)&&!/\S/.test(m.doc.textBetween(A.pos,R.pos,"",""))&&(_e=ct.findFrom(m.doc.resolve(A.pos+1),1,!0))&&_e.head>A.pos)&&r.someProp("handleKeyDown",Ce=>Ce(r,Lo(13,"Enter")))){r.input.lastIOSEnter=0;return}if(r.state.selection.anchor>T.start&&MM(v,T.start,T.endA,A,R)&&r.someProp("handleKeyDown",Ce=>Ce(r,Lo(8,"Backspace")))){ps&&tr&&r.domObserver.suppressSelectionUpdates();return}tr&&T.endB==T.start&&(r.input.lastChromeDelete=Date.now()),ps&&!Te&&A.start()!=R.start()&&R.parentOffset==0&&A.depth==R.depth&&m.sel&&m.sel.anchor==m.sel.head&&m.sel.head==T.endA&&(T.endB-=2,R=m.doc.resolveNoCache(T.endB-m.from),setTimeout(()=>{r.someProp("handleKeyDown",function(Ce){return Ce(r,Lo(13,"Enter"))})},20));let Le=T.start,ve=T.endA,Re,Fe,me;if(Te){if(A.pos==R.pos)Er&&no<=11&&A.parentOffset==0&&(r.domObserver.suppressSelectionUpdates(),setTimeout(()=>gs(r),20)),Re=r.state.tr.delete(Le,ve),Fe=v.resolve(T.start).marksAcross(v.resolve(T.endA));else if(T.endA==T.endB&&(me=EM(A.parent.content.cut(A.parentOffset,R.parentOffset),W.parent.content.cut(W.parentOffset,T.endA-W.start()))))Re=r.state.tr,me.type=="add"?Re.addMark(Le,ve,me.mark):Re.removeMark(Le,ve,me.mark);else if(A.parent.child(A.index()).isText&&A.index()==R.index()-(R.textOffset?0:1)){let Ce=A.parent.textBetween(A.parentOffset,R.parentOffset);if(r.someProp("handleTextInput",St=>St(r,Le,ve,Ce)))return;Re=r.state.tr.insertText(Ce,Le,ve)}}if(Re||(Re=r.state.tr.replace(Le,ve,m.doc.slice(T.start-m.from,T.endB-m.from))),m.sel){let Ce=L0(r,Re.doc,m.sel);Ce&&!(tr&&r.composing&&Ce.empty&&(T.start!=T.endB||r.input.lastChromeDelete<Date.now()-100)&&(Ce.head==Le||Ce.head==Re.mapping.map(ve)-1)||Er&&Ce.empty&&Ce.head==Le)&&Re.setSelection(Ce)}Fe&&Re.ensureMarks(Fe),a&&Re.setMeta("composition",a),r.dispatch(Re.scrollIntoView())}function L0(r,e,t){return Math.max(t.anchor,t.head)>e.content.size?null:bp(r,e.resolve(t.anchor),e.resolve(t.head))}function EM(r,e){let t=r.firstChild.marks,i=e.firstChild.marks,o=t,a=i,u,f,h;for(let v=0;v<i.length;v++)o=i[v].removeFromSet(o);for(let v=0;v<t.length;v++)a=t[v].removeFromSet(a);if(o.length==1&&a.length==0)f=o[0],u="add",h=v=>v.mark(f.addToSet(v.marks));else if(o.length==0&&a.length==1)f=a[0],u="remove",h=v=>v.mark(f.removeFromSet(v.marks));else return null;let m=[];for(let v=0;v<e.childCount;v++)m.push(h(e.child(v)));if(ae.from(m).eq(r))return{mark:f,type:u}}function MM(r,e,t,i,o){if(t-e<=o.pos-i.pos||Rh(i,!0,!1)<o.pos)return!1;let a=r.resolve(e);if(!i.parent.isTextblock){let f=a.nodeAfter;return f!=null&&t==e+f.nodeSize}if(a.parentOffset<a.parent.content.size||!a.parent.isTextblock)return!1;let u=r.resolve(Rh(a,!0,!0));return!u.parent.isTextblock||u.pos>t||Rh(u,!0,!1)<t?!1:i.parent.content.cut(i.parentOffset).eq(u.parent.content)}function Rh(r,e,t){let i=r.depth,o=e?r.end():r.pos;for(;i>0&&(e||r.indexAfter(i)==r.node(i).childCount);)i--,o++,e=!1;if(t){let a=r.node(i).maybeChild(r.indexAfter(i));for(;a&&!a.isLeaf;)a=a.firstChild,o++}return o}function wM(r,e,t,i,o){let a=r.findDiffStart(e,t);if(a==null)return null;let{a:u,b:f}=r.findDiffEnd(e,t+r.size,t+e.size);if(o=="end"){let h=Math.max(0,a-Math.min(u,f));i-=u+h-a}if(u<a&&r.size<e.size){let h=i<=a&&i>=u?a-i:0;a-=h,a&&a<e.size&&j0(e.textBetween(a-1,a+1))&&(a+=h?1:-1),f=a+(f-u),u=a}else if(f<a){let h=i<=a&&i>=f?a-i:0;a-=h,a&&a<r.size&&j0(r.textBetween(a-1,a+1))&&(a+=h?1:-1),u=a+(u-f),f=a}return{start:a,endA:u,endB:f}}function j0(r){if(r.length!=2)return!1;let e=r.charCodeAt(0),t=r.charCodeAt(1);return e>=56320&&e<=57343&&t>=55296&&t<=56319}class TM{constructor(e,t){this._root=null,this.focused=!1,this.trackWrites=null,this.mounted=!1,this.markCursor=null,this.cursorWrapper=null,this.lastSelectedViewDesc=void 0,this.input=new KE,this.prevDirectPlugins=[],this.pluginViews=[],this.requiresGeckoHackNode=!1,this.dragging=null,this._props=t,this.state=t.state,this.directPlugins=t.plugins||[],this.directPlugins.forEach(I0),this.dispatch=this.dispatch.bind(this),this.dom=e&&e.mount||document.createElement("div"),e&&(e.appendChild?e.appendChild(this.dom):typeof e=="function"?e(this.dom):e.mount&&(this.mounted=!0)),this.editable=U0(this),q0(this),this.nodeViews=V0(this),this.docView=v0(this.state.doc,H0(this),Dh(this),this.dom,this),this.domObserver=new pM(this,(i,o,a,u)=>xM(this,i,o,a,u)),this.domObserver.start(),PE(this),this.updatePluginViews()}get composing(){return this.input.composing}get props(){if(this._props.state!=this.state){let e=this._props;this._props={};for(let t in e)this._props[t]=e[t];this._props.state=this.state}return this._props}update(e){e.handleDOMEvents!=this._props.handleDOMEvents&&op(this);let t=this._props;this._props=e,e.plugins&&(e.plugins.forEach(I0),this.directPlugins=e.plugins),this.updateStateInner(e.state,t)}setProps(e){let t={};for(let i in this._props)t[i]=this._props[i];t.state=this.state;for(let i in e)t[i]=e[i];this.update(t)}updateState(e){this.updateStateInner(e,this._props)}updateStateInner(e,t){var i;let o=this.state,a=!1,u=!1;e.storedMarks&&this.composing&&(gb(this),u=!0),this.state=e;let f=o.plugins!=e.plugins||this._props.plugins!=t.plugins;if(f||this._props.plugins!=t.plugins||this._props.nodeViews!=t.nodeViews){let O=V0(this);kM(O,this.nodeViews)&&(this.nodeViews=O,a=!0)}(f||t.handleDOMEvents!=this._props.handleDOMEvents)&&op(this),this.editable=U0(this),q0(this);let h=Dh(this),m=H0(this),v=o.plugins!=e.plugins&&!o.doc.eq(e.doc)?"reset":e.scrollToSelection>o.scrollToSelection?"to selection":"preserve",S=a||!this.docView.matchesNode(e.doc,m,h);(S||!e.selection.eq(o.selection))&&(u=!0);let w=v=="preserve"&&u&&this.dom.style.overflowAnchor==null&&iE(this);if(u){this.domObserver.stop();let O=S&&(Er||tr)&&!this.composing&&!o.selection.empty&&!e.selection.empty&&OM(o.selection,e.selection);if(S){let T=tr?this.trackWrites=this.domSelectionRange().focusNode:null;this.composing&&(this.input.compositionNode=rM(this)),(a||!this.docView.update(e.doc,m,h,this))&&(this.docView.updateOuterDeco(m),this.docView.destroy(),this.docView=v0(e.doc,m,h,this.dom,this)),T&&!this.trackWrites&&(O=!0)}O||!(this.input.mouseDown&&this.domObserver.currentSelection.eq(this.domSelectionRange())&&CE(this))?gs(this,O):(ib(this,e.selection),this.domObserver.setCurSelection()),this.domObserver.start()}this.updatePluginViews(o),!((i=this.dragging)===null||i===void 0)&&i.node&&!o.doc.eq(e.doc)&&this.updateDraggedNode(this.dragging,o),v=="reset"?this.dom.scrollTop=0:v=="to selection"?this.scrollToSelection():w&&sE(w)}scrollToSelection(){let e=this.domSelectionRange().focusNode;if(!(!e||!this.dom.contains(e.nodeType==1?e:e.parentNode))){if(!this.someProp("handleScrollToSelection",t=>t(this)))if(this.state.selection instanceof Xe){let t=this.docView.domAfterPos(this.state.selection.from);t.nodeType==1&&d0(this,t.getBoundingClientRect(),e)}else d0(this,this.coordsAtPos(this.state.selection.head,1),e)}}destroyPluginViews(){let e;for(;e=this.pluginViews.pop();)e.destroy&&e.destroy()}updatePluginViews(e){if(!e||e.plugins!=this.state.plugins||this.directPlugins!=this.prevDirectPlugins){this.prevDirectPlugins=this.directPlugins,this.destroyPluginViews();for(let t=0;t<this.directPlugins.length;t++){let i=this.directPlugins[t];i.spec.view&&this.pluginViews.push(i.spec.view(this))}for(let t=0;t<this.state.plugins.length;t++){let i=this.state.plugins[t];i.spec.view&&this.pluginViews.push(i.spec.view(this))}}else for(let t=0;t<this.pluginViews.length;t++){let i=this.pluginViews[t];i.update&&i.update(this,e)}}updateDraggedNode(e,t){let i=e.node,o=-1;if(this.state.doc.nodeAt(i.from)==i.node)o=i.from;else{let a=i.from+(this.state.doc.content.size-t.doc.content.size);(a>0&&this.state.doc.nodeAt(a))==i.node&&(o=a)}this.dragging=new vb(e.slice,e.move,o<0?void 0:Xe.create(this.state.doc,o))}someProp(e,t){let i=this._props&&this._props[e],o;if(i!=null&&(o=t?t(i):i))return o;for(let u=0;u<this.directPlugins.length;u++){let f=this.directPlugins[u].props[e];if(f!=null&&(o=t?t(f):f))return o}let a=this.state.plugins;if(a)for(let u=0;u<a.length;u++){let f=a[u].props[e];if(f!=null&&(o=t?t(f):f))return o}}hasFocus(){if(Er){let e=this.root.activeElement;if(e==this.dom)return!0;if(!e||!this.dom.contains(e))return!1;for(;e&&this.dom!=e&&this.dom.contains(e);){if(e.contentEditable=="false")return!1;e=e.parentElement}return!0}return this.root.activeElement==this.dom}focus(){this.domObserver.stop(),this.editable&&oE(this.dom),gs(this),this.domObserver.start()}get root(){let e=this._root;if(e==null){for(let t=this.dom.parentNode;t;t=t.parentNode)if(t.nodeType==9||t.nodeType==11&&t.host)return t.getSelection||(Object.getPrototypeOf(t).getSelection=()=>t.ownerDocument.getSelection()),this._root=t}return e||document}updateRoot(){this._root=null}posAtCoords(e){return fE(this,e)}coordsAtPos(e,t=1){return Qv(this,e,t)}domAtPos(e,t=0){return this.docView.domFromPos(e,t)}nodeDOM(e){let t=this.docView.descAt(e);return t?t.nodeDOM:null}posAtDOM(e,t,i=-1){let o=this.docView.posFromDOM(e,t,i);if(o==null)throw new RangeError("DOM position not inside the editor");return o}endOfTextblock(e,t){return gE(this,t||this.state,e)}pasteHTML(e,t){return bu(this,"",e,!1,t||new ClipboardEvent("paste"))}pasteText(e,t){return bu(this,e,null,!0,t||new ClipboardEvent("paste"))}serializeForClipboard(e){return Sp(this,e)}destroy(){this.docView&&(YE(this),this.destroyPluginViews(),this.mounted?(this.docView.update(this.state.doc,[],Dh(this),this),this.dom.textContent=""):this.dom.parentNode&&this.dom.parentNode.removeChild(this.dom),this.docView.destroy(),this.docView=null,$x())}get isDestroyed(){return this.docView==null}dispatchEvent(e){return $E(this,e)}dispatch(e){let t=this._props.dispatchTransaction;t?t.call(this,e):this.updateState(this.state.apply(e))}domSelectionRange(){let e=this.domSelection();return e?cr&&this.root.nodeType===11&&Zx(this.dom.ownerDocument)==this.dom&&gM(this,e)||e:{focusNode:null,focusOffset:0,anchorNode:null,anchorOffset:0}}domSelection(){return this.root.getSelection()}}function H0(r){let e=Object.create(null);return e.class="ProseMirror",e.contenteditable=String(r.editable),r.someProp("attributes",t=>{if(typeof t=="function"&&(t=t(r.state)),t)for(let i in t)i=="class"?e.class+=" "+t[i]:i=="style"?e.style=(e.style?e.style+";":"")+t[i]:!e[i]&&i!="contenteditable"&&i!="nodeName"&&(e[i]=String(t[i]))}),e.translate||(e.translate="no"),[ii.node(0,r.state.doc.content.size,e)]}function q0(r){if(r.markCursor){let e=document.createElement("img");e.className="ProseMirror-separator",e.setAttribute("mark-placeholder","true"),e.setAttribute("alt",""),r.cursorWrapper={dom:e,deco:ii.widget(r.state.selection.from,e,{raw:!0,marks:r.markCursor})}}else r.cursorWrapper=null}function U0(r){return!r.someProp("editable",e=>e(r.state)===!1)}function OM(r,e){let t=Math.min(r.$anchor.sharedDepth(r.head),e.$anchor.sharedDepth(e.head));return r.$anchor.start(t)!=e.$anchor.start(t)}function V0(r){let e=Object.create(null);function t(i){for(let o in i)Object.prototype.hasOwnProperty.call(e,o)||(e[o]=i[o])}return r.someProp("nodeViews",t),r.someProp("markViews",t),e}function kM(r,e){let t=0,i=0;for(let o in r){if(r[o]!=e[o])return!0;t++}for(let o in e)i++;return t!=i}function I0(r){if(r.spec.state||r.spec.filterTransaction||r.spec.appendTransaction)throw new RangeError("Plugins passed directly to the view must not have a state component")}var so={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},uf={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"'},CM=typeof navigator<"u"&&/Mac/.test(navigator.platform),AM=typeof navigator<"u"&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent);for(var Yn=0;Yn<10;Yn++)so[48+Yn]=so[96+Yn]=String(Yn);for(var Yn=1;Yn<=24;Yn++)so[Yn+111]="F"+Yn;for(var Yn=65;Yn<=90;Yn++)so[Yn]=String.fromCharCode(Yn+32),uf[Yn]=String.fromCharCode(Yn);for(var Bh in so)uf.hasOwnProperty(Bh)||(uf[Bh]=so[Bh]);function _M(r){var e=CM&&r.metaKey&&r.shiftKey&&!r.ctrlKey&&!r.altKey||AM&&r.shiftKey&&r.key&&r.key.length==1||r.key=="Unidentified",t=!e&&r.key||(r.shiftKey?uf:so)[r.keyCode]||r.key||"Unidentified";return t=="Esc"&&(t="Escape"),t=="Del"&&(t="Delete"),t=="Left"&&(t="ArrowLeft"),t=="Up"&&(t="ArrowUp"),t=="Right"&&(t="ArrowRight"),t=="Down"&&(t="ArrowDown"),t}const NM=typeof navigator<"u"&&/Mac|iP(hone|[oa]d)/.test(navigator.platform),DM=typeof navigator<"u"&&/Win/.test(navigator.platform);function RM(r){let e=r.split(/-(?!$)/),t=e[e.length-1];t=="Space"&&(t=" ");let i,o,a,u;for(let f=0;f<e.length-1;f++){let h=e[f];if(/^(cmd|meta|m)$/i.test(h))u=!0;else if(/^a(lt)?$/i.test(h))i=!0;else if(/^(c|ctrl|control)$/i.test(h))o=!0;else if(/^s(hift)?$/i.test(h))a=!0;else if(/^mod$/i.test(h))NM?u=!0:o=!0;else throw new Error("Unrecognized modifier name: "+h)}return i&&(t="Alt-"+t),o&&(t="Ctrl-"+t),u&&(t="Meta-"+t),a&&(t="Shift-"+t),t}function BM(r){let e=Object.create(null);for(let t in r)e[RM(t)]=r[t];return e}function zh(r,e,t=!0){return e.altKey&&(r="Alt-"+r),e.ctrlKey&&(r="Ctrl-"+r),e.metaKey&&(r="Meta-"+r),t&&e.shiftKey&&(r="Shift-"+r),r}function zM(r){return new Mr({props:{handleKeyDown:Mb(r)}})}function Mb(r){let e=BM(r);return function(t,i){let o=_M(i),a,u=e[zh(o,i)];if(u&&u(t.state,t.dispatch,t))return!0;if(o.length==1&&o!=" "){if(i.shiftKey){let f=e[zh(o,i,!1)];if(f&&f(t.state,t.dispatch,t))return!0}if((i.altKey||i.metaKey||i.ctrlKey)&&!(DM&&i.ctrlKey&&i.altKey)&&(a=so[i.keyCode])&&a!=o){let f=e[zh(a,i)];if(f&&f(t.state,t.dispatch,t))return!0}}return!1}}const Op=(r,e)=>r.selection.empty?!1:(e&&e(r.tr.deleteSelection().scrollIntoView()),!0);function wb(r,e){let{$cursor:t}=r.selection;return!t||(e?!e.endOfTextblock("backward",r):t.parentOffset>0)?null:t}const Tb=(r,e,t)=>{let i=wb(r,t);if(!i)return!1;let o=kp(i);if(!o){let u=i.blockRange(),f=u&&ia(u);return f==null?!1:(e&&e(r.tr.lift(u,f).scrollIntoView()),!0)}let a=o.nodeBefore;if(Bb(r,o,e,-1))return!0;if(i.parent.content.size==0&&(ta(a,"end")||Xe.isSelectable(a)))for(let u=i.depth;;u--){let f=gf(r.doc,i.before(u),i.after(u),De.empty);if(f&&f.slice.size<f.to-f.from){if(e){let h=r.tr.step(f);h.setSelection(ta(a,"end")?ct.findFrom(h.doc.resolve(h.mapping.map(o.pos,-1)),-1):Xe.create(h.doc,o.pos-a.nodeSize)),e(h.scrollIntoView())}return!0}if(u==1||i.node(u-1).childCount>1)break}return a.isAtom&&o.depth==i.depth-1?(e&&e(r.tr.delete(o.pos-a.nodeSize,o.pos).scrollIntoView()),!0):!1},LM=(r,e,t)=>{let i=wb(r,t);if(!i)return!1;let o=kp(i);return o?Ob(r,o,e):!1},jM=(r,e,t)=>{let i=Cb(r,t);if(!i)return!1;let o=Cp(i);return o?Ob(r,o,e):!1};function Ob(r,e,t){let i=e.nodeBefore,o=i,a=e.pos-1;for(;!o.isTextblock;a--){if(o.type.spec.isolating)return!1;let v=o.lastChild;if(!v)return!1;o=v}let u=e.nodeAfter,f=u,h=e.pos+1;for(;!f.isTextblock;h++){if(f.type.spec.isolating)return!1;let v=f.firstChild;if(!v)return!1;f=v}let m=gf(r.doc,a,h,De.empty);if(!m||m.from!=a||m instanceof Nn&&m.slice.size>=h-a)return!1;if(t){let v=r.tr.step(m);v.setSelection(it.create(v.doc,a)),t(v.scrollIntoView())}return!0}function ta(r,e,t=!1){for(let i=r;i;i=e=="start"?i.firstChild:i.lastChild){if(i.isTextblock)return!0;if(t&&i.childCount!=1)return!1}return!1}const kb=(r,e,t)=>{let{$head:i,empty:o}=r.selection,a=i;if(!o)return!1;if(i.parent.isTextblock){if(t?!t.endOfTextblock("backward",r):i.parentOffset>0)return!1;a=kp(i)}let u=a&&a.nodeBefore;return!u||!Xe.isSelectable(u)?!1:(e&&e(r.tr.setSelection(Xe.create(r.doc,a.pos-u.nodeSize)).scrollIntoView()),!0)};function kp(r){if(!r.parent.type.spec.isolating)for(let e=r.depth-1;e>=0;e--){if(r.index(e)>0)return r.doc.resolve(r.before(e+1));if(r.node(e).type.spec.isolating)break}return null}function Cb(r,e){let{$cursor:t}=r.selection;return!t||(e?!e.endOfTextblock("forward",r):t.parentOffset<t.parent.content.size)?null:t}const Ab=(r,e,t)=>{let i=Cb(r,t);if(!i)return!1;let o=Cp(i);if(!o)return!1;let a=o.nodeAfter;if(Bb(r,o,e,1))return!0;if(i.parent.content.size==0&&(ta(a,"start")||Xe.isSelectable(a))){let u=gf(r.doc,i.before(),i.after(),De.empty);if(u&&u.slice.size<u.to-u.from){if(e){let f=r.tr.step(u);f.setSelection(ta(a,"start")?ct.findFrom(f.doc.resolve(f.mapping.map(o.pos)),1):Xe.create(f.doc,f.mapping.map(o.pos))),e(f.scrollIntoView())}return!0}}return a.isAtom&&o.depth==i.depth-1?(e&&e(r.tr.delete(o.pos,o.pos+a.nodeSize).scrollIntoView()),!0):!1},_b=(r,e,t)=>{let{$head:i,empty:o}=r.selection,a=i;if(!o)return!1;if(i.parent.isTextblock){if(t?!t.endOfTextblock("forward",r):i.parentOffset<i.parent.content.size)return!1;a=Cp(i)}let u=a&&a.nodeAfter;return!u||!Xe.isSelectable(u)?!1:(e&&e(r.tr.setSelection(Xe.create(r.doc,a.pos)).scrollIntoView()),!0)};function Cp(r){if(!r.parent.type.spec.isolating)for(let e=r.depth-1;e>=0;e--){let t=r.node(e);if(r.index(e)+1<t.childCount)return r.doc.resolve(r.after(e+1));if(t.type.spec.isolating)break}return null}const HM=(r,e)=>{let t=r.selection,i=t instanceof Xe,o;if(i){if(t.node.isTextblock||!oo(r.doc,t.from))return!1;o=t.from}else if(o=mf(r.doc,t.from,-1),o==null)return!1;if(e){let a=r.tr.join(o);i&&a.setSelection(Xe.create(a.doc,o-r.doc.resolve(o).nodeBefore.nodeSize)),e(a.scrollIntoView())}return!0},qM=(r,e)=>{let t=r.selection,i;if(t instanceof Xe){if(t.node.isTextblock||!oo(r.doc,t.to))return!1;i=t.to}else if(i=mf(r.doc,t.to,1),i==null)return!1;return e&&e(r.tr.join(i).scrollIntoView()),!0},UM=(r,e)=>{let{$from:t,$to:i}=r.selection,o=t.blockRange(i),a=o&&ia(o);return a==null?!1:(e&&e(r.tr.lift(o,a).scrollIntoView()),!0)},Nb=(r,e)=>{let{$head:t,$anchor:i}=r.selection;return!t.parent.type.spec.code||!t.sameParent(i)?!1:(e&&e(r.tr.insertText(`
`).scrollIntoView()),!0)};function Ap(r){for(let e=0;e<r.edgeCount;e++){let{type:t}=r.edge(e);if(t.isTextblock&&!t.hasRequiredAttrs())return t}return null}const VM=(r,e)=>{let{$head:t,$anchor:i}=r.selection;if(!t.parent.type.spec.code||!t.sameParent(i))return!1;let o=t.node(-1),a=t.indexAfter(-1),u=Ap(o.contentMatchAt(a));if(!u||!o.canReplaceWith(a,a,u))return!1;if(e){let f=t.after(),h=r.tr.replaceWith(f,f,u.createAndFill());h.setSelection(ct.near(h.doc.resolve(f),1)),e(h.scrollIntoView())}return!0},Db=(r,e)=>{let t=r.selection,{$from:i,$to:o}=t;if(t instanceof Hr||i.parent.inlineContent||o.parent.inlineContent)return!1;let a=Ap(o.parent.contentMatchAt(o.indexAfter()));if(!a||!a.isTextblock)return!1;if(e){let u=(!i.parentOffset&&o.index()<o.parent.childCount?i:o).pos,f=r.tr.insert(u,a.createAndFill());f.setSelection(it.create(f.doc,u+1)),e(f.scrollIntoView())}return!0},Rb=(r,e)=>{let{$cursor:t}=r.selection;if(!t||t.parent.content.size)return!1;if(t.depth>1&&t.after()!=t.end(-1)){let a=t.before();if(ms(r.doc,a))return e&&e(r.tr.split(a).scrollIntoView()),!0}let i=t.blockRange(),o=i&&ia(i);return o==null?!1:(e&&e(r.tr.lift(i,o).scrollIntoView()),!0)};function IM(r){return(e,t)=>{let{$from:i,$to:o}=e.selection;if(e.selection instanceof Xe&&e.selection.node.isBlock)return!i.parentOffset||!ms(e.doc,i.pos)?!1:(t&&t(e.tr.split(i.pos).scrollIntoView()),!0);if(!i.depth)return!1;let a=[],u,f,h=!1,m=!1;for(let O=i.depth;;O--)if(i.node(O).isBlock){h=i.end(O)==i.pos+(i.depth-O),m=i.start(O)==i.pos-(i.depth-O),f=Ap(i.node(O-1).contentMatchAt(i.indexAfter(O-1))),a.unshift(h&&f?{type:f}:null),u=O;break}else{if(O==1)return!1;a.unshift(null)}let v=e.tr;(e.selection instanceof it||e.selection instanceof Hr)&&v.deleteSelection();let S=v.mapping.map(i.pos),w=ms(v.doc,S,a.length,a);if(w||(a[0]=f?{type:f}:null,w=ms(v.doc,S,a.length,a)),!w)return!1;if(v.split(S,a.length,a),!h&&m&&i.node(u).type!=f){let O=v.mapping.map(i.before(u)),T=v.doc.resolve(O);f&&i.node(u-1).canReplaceWith(T.index(),T.index()+1,f)&&v.setNodeMarkup(v.mapping.map(i.before(u)),f)}return t&&t(v.scrollIntoView()),!0}}const KM=IM(),PM=(r,e)=>{let{$from:t,to:i}=r.selection,o,a=t.sharedDepth(i);return a==0?!1:(o=t.before(a),e&&e(r.tr.setSelection(Xe.create(r.doc,o))),!0)};function YM(r,e,t){let i=e.nodeBefore,o=e.nodeAfter,a=e.index();return!i||!o||!i.type.compatibleContent(o.type)?!1:!i.content.size&&e.parent.canReplace(a-1,a)?(t&&t(r.tr.delete(e.pos-i.nodeSize,e.pos).scrollIntoView()),!0):!e.parent.canReplace(a,a+1)||!(o.isTextblock||oo(r.doc,e.pos))?!1:(t&&t(r.tr.join(e.pos).scrollIntoView()),!0)}function Bb(r,e,t,i){let o=e.nodeBefore,a=e.nodeAfter,u,f,h=o.type.spec.isolating||a.type.spec.isolating;if(!h&&YM(r,e,t))return!0;let m=!h&&e.parent.canReplace(e.index(),e.index()+1);if(m&&(u=(f=o.contentMatchAt(o.childCount)).findWrapping(a.type))&&f.matchType(u[0]||a.type).validEnd){if(t){let O=e.pos+a.nodeSize,T=ae.empty;for(let W=u.length-1;W>=0;W--)T=ae.from(u[W].create(null,T));T=ae.from(o.copy(T));let A=r.tr.step(new Dn(e.pos-1,O,e.pos,O,new De(T,1,0),u.length,!0)),R=A.doc.resolve(O+2*u.length);R.nodeAfter&&R.nodeAfter.type==o.type&&oo(A.doc,R.pos)&&A.join(R.pos),t(A.scrollIntoView())}return!0}let v=a.type.spec.isolating||i>0&&h?null:ct.findFrom(e,1),S=v&&v.$from.blockRange(v.$to),w=S&&ia(S);if(w!=null&&w>=e.depth)return t&&t(r.tr.lift(S,w).scrollIntoView()),!0;if(m&&ta(a,"start",!0)&&ta(o,"end")){let O=o,T=[];for(;T.push(O),!O.isTextblock;)O=O.lastChild;let A=a,R=1;for(;!A.isTextblock;A=A.firstChild)R++;if(O.canReplace(O.childCount,O.childCount,A.content)){if(t){let W=ae.empty;for(let _e=T.length-1;_e>=0;_e--)W=ae.from(T[_e].copy(W));let Te=r.tr.step(new Dn(e.pos-T.length,e.pos+a.nodeSize,e.pos+R,e.pos+a.nodeSize-R,new De(W,T.length,0),0,!0));t(Te.scrollIntoView())}return!0}}return!1}function zb(r){return function(e,t){let i=e.selection,o=r<0?i.$from:i.$to,a=o.depth;for(;o.node(a).isInline;){if(!a)return!1;a--}return o.node(a).isTextblock?(t&&t(e.tr.setSelection(it.create(e.doc,r<0?o.start(a):o.end(a)))),!0):!1}}const GM=zb(-1),$M=zb(1);function XM(r,e=null){return function(t,i){let{$from:o,$to:a}=t.selection,u=o.blockRange(a),f=u&&mp(u,r,e);return f?(i&&i(t.tr.wrap(u,f).scrollIntoView()),!0):!1}}function K0(r,e=null){return function(t,i){let o=!1;for(let a=0;a<t.selection.ranges.length&&!o;a++){let{$from:{pos:u},$to:{pos:f}}=t.selection.ranges[a];t.doc.nodesBetween(u,f,(h,m)=>{if(o)return!1;if(!(!h.isTextblock||h.hasMarkup(r,e)))if(h.type==r)o=!0;else{let v=t.doc.resolve(m),S=v.index();o=v.parent.canReplaceWith(S,S+1,r)}})}if(!o)return!1;if(i){let a=t.tr;for(let u=0;u<t.selection.ranges.length;u++){let{$from:{pos:f},$to:{pos:h}}=t.selection.ranges[u];a.setBlockType(f,h,r,e)}i(a.scrollIntoView())}return!0}}function _p(...r){return function(e,t,i){for(let o=0;o<r.length;o++)if(r[o](e,t,i))return!0;return!1}}_p(Op,Tb,kb);_p(Op,Ab,_b);_p(Nb,Db,Rb,KM);typeof navigator<"u"?/Mac|iP(hone|[oa]d)/.test(navigator.platform):typeof os<"u"&&os.platform&&os.platform()=="darwin";function FM(r,e=null){return function(t,i){let{$from:o,$to:a}=t.selection,u=o.blockRange(a);if(!u)return!1;let f=i?t.tr:null;return QM(f,u,r,e)?(i&&i(f.scrollIntoView()),!0):!1}}function QM(r,e,t,i=null){let o=!1,a=e,u=e.$from.doc;if(e.depth>=2&&e.$from.node(e.depth-1).type.compatibleContent(t)&&e.startIndex==0){if(e.$from.index(e.depth-1)==0)return!1;let h=u.resolve(e.start-2);a=new tf(h,h,e.depth),e.endIndex<e.parent.childCount&&(e=new tf(e.$from,u.resolve(e.$to.end(e.depth)),e.depth)),o=!0}let f=mp(a,t,i,e);return f?(r&&JM(r,e,f,o,t),!0):!1}function JM(r,e,t,i,o){let a=ae.empty;for(let v=t.length-1;v>=0;v--)a=ae.from(t[v].type.create(t[v].attrs,a));r.step(new Dn(e.start-(i?2:0),e.end,e.start,e.end,new De(a,0,0),t.length,!0));let u=0;for(let v=0;v<t.length;v++)t[v].type==o&&(u=v+1);let f=t.length-u,h=e.start+t.length-(i?2:0),m=e.parent;for(let v=e.startIndex,S=e.endIndex,w=!0;v<S;v++,w=!1)!w&&ms(r.doc,h,f)&&(r.split(h,f),h+=2*f),h+=m.child(v).nodeSize;return r}function ZM(r){return function(e,t){let{$from:i,$to:o}=e.selection,a=i.blockRange(o,u=>u.childCount>0&&u.firstChild.type==r);return a?t?i.node(a.depth-1).type==r?WM(e,t,r,a):ew(e,t,a):!0:!1}}function WM(r,e,t,i){let o=r.tr,a=i.end,u=i.$to.end(i.depth);a<u&&(o.step(new Dn(a-1,u,a,u,new De(ae.from(t.create(null,i.parent.copy())),1,0),1,!0)),i=new tf(o.doc.resolve(i.$from.pos),o.doc.resolve(u),i.depth));const f=ia(i);if(f==null)return!1;o.lift(i,f);let h=o.doc.resolve(o.mapping.map(a,-1)-1);return oo(o.doc,h.pos)&&h.nodeBefore.type==h.nodeAfter.type&&o.join(h.pos),e(o.scrollIntoView()),!0}function ew(r,e,t){let i=r.tr,o=t.parent;for(let O=t.end,T=t.endIndex-1,A=t.startIndex;T>A;T--)O-=o.child(T).nodeSize,i.delete(O-1,O+1);let a=i.doc.resolve(t.start),u=a.nodeAfter;if(i.mapping.map(t.end)!=t.start+a.nodeAfter.nodeSize)return!1;let f=t.startIndex==0,h=t.endIndex==o.childCount,m=a.node(-1),v=a.index(-1);if(!m.canReplace(v+(f?0:1),v+1,u.content.append(h?ae.empty:ae.from(o))))return!1;let S=a.pos,w=S+u.nodeSize;return i.step(new Dn(S-(f?1:0),w+(h?1:0),S+1,w-1,new De((f?ae.empty:ae.from(o.copy(ae.empty))).append(h?ae.empty:ae.from(o.copy(ae.empty))),f?0:1,h?0:1),f?0:1)),e(i.scrollIntoView()),!0}function tw(r){return function(e,t){let{$from:i,$to:o}=e.selection,a=i.blockRange(o,m=>m.childCount>0&&m.firstChild.type==r);if(!a)return!1;let u=a.startIndex;if(u==0)return!1;let f=a.parent,h=f.child(u-1);if(h.type!=r)return!1;if(t){let m=h.lastChild&&h.lastChild.type==f.type,v=ae.from(m?r.create():null),S=new De(ae.from(r.create(null,ae.from(f.type.create(null,v)))),m?3:1,0),w=a.start,O=a.end;t(e.tr.step(new Dn(w-(m?3:1),O,w,O,S,1,!0)).scrollIntoView())}return!0}}function xf(r){const{state:e,transaction:t}=r;let{selection:i}=t,{doc:o}=t,{storedMarks:a}=t;return{...e,apply:e.apply.bind(e),applyTransaction:e.applyTransaction.bind(e),plugins:e.plugins,schema:e.schema,reconfigure:e.reconfigure.bind(e),toJSON:e.toJSON.bind(e),get storedMarks(){return a},get selection(){return i},get doc(){return o},get tr(){return i=t.selection,o=t.doc,a=t.storedMarks,t}}}class Ef{constructor(e){this.editor=e.editor,this.rawCommands=this.editor.extensionManager.commands,this.customState=e.state}get hasCustomState(){return!!this.customState}get state(){return this.customState||this.editor.state}get commands(){const{rawCommands:e,editor:t,state:i}=this,{view:o}=t,{tr:a}=i,u=this.buildProps(a);return Object.fromEntries(Object.entries(e).map(([f,h])=>[f,(...v)=>{const S=h(...v)(u);return!a.getMeta("preventDispatch")&&!this.hasCustomState&&o.dispatch(a),S}]))}get chain(){return()=>this.createChain()}get can(){return()=>this.createCan()}createChain(e,t=!0){const{rawCommands:i,editor:o,state:a}=this,{view:u}=o,f=[],h=!!e,m=e||a.tr,v=()=>(!h&&t&&!m.getMeta("preventDispatch")&&!this.hasCustomState&&u.dispatch(m),f.every(w=>w===!0)),S={...Object.fromEntries(Object.entries(i).map(([w,O])=>[w,(...A)=>{const R=this.buildProps(m,t),W=O(...A)(R);return f.push(W),S}])),run:v};return S}createCan(e){const{rawCommands:t,state:i}=this,o=!1,a=e||i.tr,u=this.buildProps(a,o);return{...Object.fromEntries(Object.entries(t).map(([h,m])=>[h,(...v)=>m(...v)({...u,dispatch:void 0})])),chain:()=>this.createChain(a,o)}}buildProps(e,t=!0){const{rawCommands:i,editor:o,state:a}=this,{view:u}=o,f={tr:e,editor:o,view:u,state:xf({state:a,transaction:e}),dispatch:t?()=>{}:void 0,chain:()=>this.createChain(e,t),can:()=>this.createCan(e),get commands(){return Object.fromEntries(Object.entries(i).map(([h,m])=>[h,(...v)=>m(...v)(f)]))}};return f}}class nw{constructor(){this.callbacks={}}on(e,t){return this.callbacks[e]||(this.callbacks[e]=[]),this.callbacks[e].push(t),this}emit(e,...t){const i=this.callbacks[e];return i&&i.forEach(o=>o.apply(this,t)),this}off(e,t){const i=this.callbacks[e];return i&&(t?this.callbacks[e]=i.filter(o=>o!==t):delete this.callbacks[e]),this}once(e,t){const i=(...o)=>{this.off(e,i),t.apply(this,o)};return this.on(e,i)}removeAllListeners(){this.callbacks={}}}function Ie(r,e,t){return r.config[e]===void 0&&r.parent?Ie(r.parent,e,t):typeof r.config[e]=="function"?r.config[e].bind({...t,parent:r.parent?Ie(r.parent,e,t):null}):r.config[e]}function Mf(r){const e=r.filter(o=>o.type==="extension"),t=r.filter(o=>o.type==="node"),i=r.filter(o=>o.type==="mark");return{baseExtensions:e,nodeExtensions:t,markExtensions:i}}function Lb(r){const e=[],{nodeExtensions:t,markExtensions:i}=Mf(r),o=[...t,...i],a={default:null,rendered:!0,renderHTML:null,parseHTML:null,keepOnSplit:!0,isRequired:!1};return r.forEach(u=>{const f={name:u.name,options:u.options,storage:u.storage,extensions:o},h=Ie(u,"addGlobalAttributes",f);if(!h)return;h().forEach(v=>{v.types.forEach(S=>{Object.entries(v.attributes).forEach(([w,O])=>{e.push({type:S,name:w,attribute:{...a,...O}})})})})}),o.forEach(u=>{const f={name:u.name,options:u.options,storage:u.storage},h=Ie(u,"addAttributes",f);if(!h)return;const m=h();Object.entries(m).forEach(([v,S])=>{const w={...a,...S};typeof(w==null?void 0:w.default)=="function"&&(w.default=w.default()),w!=null&&w.isRequired&&(w==null?void 0:w.default)===void 0&&delete w.default,e.push({type:u.name,name:v,attribute:w})})}),e}function Bn(r,e){if(typeof r=="string"){if(!e.nodes[r])throw Error(`There is no node type named '${r}'. Maybe you forgot to add the extension?`);return e.nodes[r]}return r}function zn(...r){return r.filter(e=>!!e).reduce((e,t)=>{const i={...e};return Object.entries(t).forEach(([o,a])=>{if(!i[o]){i[o]=a;return}if(o==="class"){const f=a?String(a).split(" "):[],h=i[o]?i[o].split(" "):[],m=f.filter(v=>!h.includes(v));i[o]=[...h,...m].join(" ")}else if(o==="style"){const f=a?a.split(";").map(v=>v.trim()).filter(Boolean):[],h=i[o]?i[o].split(";").map(v=>v.trim()).filter(Boolean):[],m=new Map;h.forEach(v=>{const[S,w]=v.split(":").map(O=>O.trim());m.set(S,w)}),f.forEach(v=>{const[S,w]=v.split(":").map(O=>O.trim());m.set(S,w)}),i[o]=Array.from(m.entries()).map(([v,S])=>`${v}: ${S}`).join("; ")}else i[o]=a}),i},{})}function cf(r,e){return e.filter(t=>t.type===r.type.name).filter(t=>t.attribute.rendered).map(t=>t.attribute.renderHTML?t.attribute.renderHTML(r.attrs)||{}:{[t.name]:r.attrs[t.name]}).reduce((t,i)=>zn(t,i),{})}function jb(r){return typeof r=="function"}function ht(r,e=void 0,...t){return jb(r)?e?r.bind(e)(...t):r(...t):r}function rw(r={}){return Object.keys(r).length===0&&r.constructor===Object}function iw(r){return typeof r!="string"?r:r.match(/^[+-]?(?:\d*\.)?\d+$/)?Number(r):r==="true"?!0:r==="false"?!1:r}function P0(r,e){return"style"in r?r:{...r,getAttrs:t=>{const i=r.getAttrs?r.getAttrs(t):r.attrs;if(i===!1)return!1;const o=e.reduce((a,u)=>{const f=u.attribute.parseHTML?u.attribute.parseHTML(t):iw(t.getAttribute(u.name));return f==null?a:{...a,[u.name]:f}},{});return{...i,...o}}}}function Y0(r){return Object.fromEntries(Object.entries(r).filter(([e,t])=>e==="attrs"&&rw(t)?!1:t!=null))}function sw(r,e){var t;const i=Lb(r),{nodeExtensions:o,markExtensions:a}=Mf(r),u=(t=o.find(m=>Ie(m,"topNode")))===null||t===void 0?void 0:t.name,f=Object.fromEntries(o.map(m=>{const v=i.filter(W=>W.type===m.name),S={name:m.name,options:m.options,storage:m.storage,editor:e},w=r.reduce((W,Te)=>{const _e=Ie(Te,"extendNodeSchema",S);return{...W,..._e?_e(m):{}}},{}),O=Y0({...w,content:ht(Ie(m,"content",S)),marks:ht(Ie(m,"marks",S)),group:ht(Ie(m,"group",S)),inline:ht(Ie(m,"inline",S)),atom:ht(Ie(m,"atom",S)),selectable:ht(Ie(m,"selectable",S)),draggable:ht(Ie(m,"draggable",S)),code:ht(Ie(m,"code",S)),whitespace:ht(Ie(m,"whitespace",S)),linebreakReplacement:ht(Ie(m,"linebreakReplacement",S)),defining:ht(Ie(m,"defining",S)),isolating:ht(Ie(m,"isolating",S)),attrs:Object.fromEntries(v.map(W=>{var Te;return[W.name,{default:(Te=W==null?void 0:W.attribute)===null||Te===void 0?void 0:Te.default}]}))}),T=ht(Ie(m,"parseHTML",S));T&&(O.parseDOM=T.map(W=>P0(W,v)));const A=Ie(m,"renderHTML",S);A&&(O.toDOM=W=>A({node:W,HTMLAttributes:cf(W,v)}));const R=Ie(m,"renderText",S);return R&&(O.toText=R),[m.name,O]})),h=Object.fromEntries(a.map(m=>{const v=i.filter(R=>R.type===m.name),S={name:m.name,options:m.options,storage:m.storage,editor:e},w=r.reduce((R,W)=>{const Te=Ie(W,"extendMarkSchema",S);return{...R,...Te?Te(m):{}}},{}),O=Y0({...w,inclusive:ht(Ie(m,"inclusive",S)),excludes:ht(Ie(m,"excludes",S)),group:ht(Ie(m,"group",S)),spanning:ht(Ie(m,"spanning",S)),code:ht(Ie(m,"code",S)),attrs:Object.fromEntries(v.map(R=>{var W;return[R.name,{default:(W=R==null?void 0:R.attribute)===null||W===void 0?void 0:W.default}]}))}),T=ht(Ie(m,"parseHTML",S));T&&(O.parseDOM=T.map(R=>P0(R,v)));const A=Ie(m,"renderHTML",S);return A&&(O.toDOM=R=>A({mark:R,HTMLAttributes:cf(R,v)})),[m.name,O]}));return new Ov({topNode:u,nodes:f,marks:h})}function Lh(r,e){return e.nodes[r]||e.marks[r]||null}function G0(r,e){return Array.isArray(e)?e.some(t=>(typeof t=="string"?t:t.name)===r.name):e}function Np(r,e){const t=Qo.fromSchema(e).serializeFragment(r),o=document.implementation.createHTMLDocument().createElement("div");return o.appendChild(t),o.innerHTML}const ow=(r,e=500)=>{let t="";const i=r.parentOffset;return r.parent.nodesBetween(Math.max(0,i-e),i,(o,a,u,f)=>{var h,m;const v=((m=(h=o.type.spec).toText)===null||m===void 0?void 0:m.call(h,{node:o,pos:a,parent:u,index:f}))||o.textContent||"%leaf%";t+=o.isAtom&&!o.isText?v:v.slice(0,Math.max(0,i-a))}),t};function Dp(r){return Object.prototype.toString.call(r)==="[object RegExp]"}class wf{constructor(e){this.find=e.find,this.handler=e.handler}}const lw=(r,e)=>{if(Dp(e))return e.exec(r);const t=e(r);if(!t)return null;const i=[t.text];return i.index=t.index,i.input=r,i.data=t.data,t.replaceWith&&(t.text.includes(t.replaceWith)||console.warn('[tiptap warn]: "inputRuleMatch.replaceWith" must be part of "inputRuleMatch.text".'),i.push(t.replaceWith)),i};function jc(r){var e;const{editor:t,from:i,to:o,text:a,rules:u,plugin:f}=r,{view:h}=t;if(h.composing)return!1;const m=h.state.doc.resolve(i);if(m.parent.type.spec.code||!((e=m.nodeBefore||m.nodeAfter)===null||e===void 0)&&e.marks.find(w=>w.type.spec.code))return!1;let v=!1;const S=ow(m)+a;return u.forEach(w=>{if(v)return;const O=lw(S,w.find);if(!O)return;const T=h.state.tr,A=xf({state:h.state,transaction:T}),R={from:i-(O[0].length-a.length),to:o},{commands:W,chain:Te,can:_e}=new Ef({editor:t,state:A});w.handler({state:A,range:R,match:O,commands:W,chain:Te,can:_e})===null||!T.steps.length||(T.setMeta(f,{transform:T,from:i,to:o,text:a}),h.dispatch(T),v=!0)}),v}function aw(r){const{editor:e,rules:t}=r,i=new Mr({state:{init(){return null},apply(o,a,u){const f=o.getMeta(i);if(f)return f;const h=o.getMeta("applyInputRules");return!!h&&setTimeout(()=>{let{text:v}=h;typeof v=="string"?v=v:v=Np(ae.from(v),u.schema);const{from:S}=h,w=S+v.length;jc({editor:e,from:S,to:w,text:v,rules:t,plugin:i})}),o.selectionSet||o.docChanged?null:a}},props:{handleTextInput(o,a,u,f){return jc({editor:e,from:a,to:u,text:f,rules:t,plugin:i})},handleDOMEvents:{compositionend:o=>(setTimeout(()=>{const{$cursor:a}=o.state.selection;a&&jc({editor:e,from:a.pos,to:a.pos,text:"",rules:t,plugin:i})}),!1)},handleKeyDown(o,a){if(a.key!=="Enter")return!1;const{$cursor:u}=o.state.selection;return u?jc({editor:e,from:u.pos,to:u.pos,text:`
`,rules:t,plugin:i}):!1}},isInputRules:!0});return i}function uw(r){return Object.prototype.toString.call(r).slice(8,-1)}function Hc(r){return uw(r)!=="Object"?!1:r.constructor===Object&&Object.getPrototypeOf(r)===Object.prototype}function Tf(r,e){const t={...r};return Hc(r)&&Hc(e)&&Object.keys(e).forEach(i=>{Hc(e[i])&&Hc(r[i])?t[i]=Tf(r[i],e[i]):t[i]=e[i]}),t}class ys{constructor(e={}){this.type="mark",this.name="mark",this.parent=null,this.child=null,this.config={name:this.name,defaultOptions:{}},this.config={...this.config,...e},this.name=this.config.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${this.name}".`),this.options=this.config.defaultOptions,this.config.addOptions&&(this.options=ht(Ie(this,"addOptions",{name:this.name}))),this.storage=ht(Ie(this,"addStorage",{name:this.name,options:this.options}))||{}}static create(e={}){return new ys(e)}configure(e={}){const t=this.extend({...this.config,addOptions:()=>Tf(this.options,e)});return t.name=this.name,t.parent=this.parent,t}extend(e={}){const t=new ys(e);return t.parent=this,this.child=t,t.name=e.name?e.name:t.parent.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${t.name}".`),t.options=ht(Ie(t,"addOptions",{name:t.name})),t.storage=ht(Ie(t,"addStorage",{name:t.name,options:t.options})),t}static handleExit({editor:e,mark:t}){const{tr:i}=e.state,o=e.state.selection.$from;if(o.pos===o.end()){const u=o.marks();if(!!!u.find(m=>(m==null?void 0:m.type.name)===t.name))return!1;const h=u.find(m=>(m==null?void 0:m.type.name)===t.name);return h&&i.removeStoredMark(h),i.insertText(" ",o.pos),e.view.dispatch(i),!0}return!1}}function cw(r){return typeof r=="number"}class fw{constructor(e){this.find=e.find,this.handler=e.handler}}const dw=(r,e,t)=>{if(Dp(e))return[...r.matchAll(e)];const i=e(r,t);return i?i.map(o=>{const a=[o.text];return a.index=o.index,a.input=r,a.data=o.data,o.replaceWith&&(o.text.includes(o.replaceWith)||console.warn('[tiptap warn]: "pasteRuleMatch.replaceWith" must be part of "pasteRuleMatch.text".'),a.push(o.replaceWith)),a}):[]};function hw(r){const{editor:e,state:t,from:i,to:o,rule:a,pasteEvent:u,dropEvent:f}=r,{commands:h,chain:m,can:v}=new Ef({editor:e,state:t}),S=[];return t.doc.nodesBetween(i,o,(O,T)=>{if(!O.isTextblock||O.type.spec.code)return;const A=Math.max(i,T),R=Math.min(o,T+O.content.size),W=O.textBetween(A-T,R-T,void 0,"");dw(W,a.find,u).forEach(_e=>{if(_e.index===void 0)return;const Le=A+_e.index+1,ve=Le+_e[0].length,Re={from:t.tr.mapping.map(Le),to:t.tr.mapping.map(ve)},Fe=a.handler({state:t,range:Re,match:_e,commands:h,chain:m,can:v,pasteEvent:u,dropEvent:f});S.push(Fe)})}),S.every(O=>O!==null)}let qc=null;const pw=r=>{var e;const t=new ClipboardEvent("paste",{clipboardData:new DataTransfer});return(e=t.clipboardData)===null||e===void 0||e.setData("text/html",r),t};function mw(r){const{editor:e,rules:t}=r;let i=null,o=!1,a=!1,u=typeof ClipboardEvent<"u"?new ClipboardEvent("paste"):null,f;try{f=typeof DragEvent<"u"?new DragEvent("drop"):null}catch{f=null}const h=({state:v,from:S,to:w,rule:O,pasteEvt:T})=>{const A=v.tr,R=xf({state:v,transaction:A});if(!(!hw({editor:e,state:R,from:Math.max(S-1,0),to:w.b-1,rule:O,pasteEvent:T,dropEvent:f})||!A.steps.length)){try{f=typeof DragEvent<"u"?new DragEvent("drop"):null}catch{f=null}return u=typeof ClipboardEvent<"u"?new ClipboardEvent("paste"):null,A}};return t.map(v=>new Mr({view(S){const w=T=>{var A;i=!((A=S.dom.parentElement)===null||A===void 0)&&A.contains(T.target)?S.dom.parentElement:null,i&&(qc=e)},O=()=>{qc&&(qc=null)};return window.addEventListener("dragstart",w),window.addEventListener("dragend",O),{destroy(){window.removeEventListener("dragstart",w),window.removeEventListener("dragend",O)}}},props:{handleDOMEvents:{drop:(S,w)=>{if(a=i===S.dom.parentElement,f=w,!a){const O=qc;O&&setTimeout(()=>{const T=O.state.selection;T&&O.commands.deleteRange({from:T.from,to:T.to})},10)}return!1},paste:(S,w)=>{var O;const T=(O=w.clipboardData)===null||O===void 0?void 0:O.getData("text/html");return u=w,o=!!(T!=null&&T.includes("data-pm-slice")),!1}}},appendTransaction:(S,w,O)=>{const T=S[0],A=T.getMeta("uiEvent")==="paste"&&!o,R=T.getMeta("uiEvent")==="drop"&&!a,W=T.getMeta("applyPasteRules"),Te=!!W;if(!A&&!R&&!Te)return;if(Te){let{text:ve}=W;typeof ve=="string"?ve=ve:ve=Np(ae.from(ve),O.schema);const{from:Re}=W,Fe=Re+ve.length,me=pw(ve);return h({rule:v,state:O,from:Re,to:{b:Fe},pasteEvt:me})}const _e=w.doc.content.findDiffStart(O.doc.content),Le=w.doc.content.findDiffEnd(O.doc.content);if(!(!cw(_e)||!Le||_e===Le.b))return h({rule:v,state:O,from:_e,to:Le,pasteEvt:u})}}))}function gw(r){const e=r.filter((t,i)=>r.indexOf(t)!==i);return Array.from(new Set(e))}class Fl{constructor(e,t){this.splittableMarks=[],this.editor=t,this.extensions=Fl.resolve(e),this.schema=sw(this.extensions,t),this.setupExtensions()}static resolve(e){const t=Fl.sort(Fl.flatten(e)),i=gw(t.map(o=>o.name));return i.length&&console.warn(`[tiptap warn]: Duplicate extension names found: [${i.map(o=>`'${o}'`).join(", ")}]. This can lead to issues.`),t}static flatten(e){return e.map(t=>{const i={name:t.name,options:t.options,storage:t.storage},o=Ie(t,"addExtensions",i);return o?[t,...this.flatten(o())]:t}).flat(10)}static sort(e){return e.sort((i,o)=>{const a=Ie(i,"priority")||100,u=Ie(o,"priority")||100;return a>u?-1:a<u?1:0})}get commands(){return this.extensions.reduce((e,t)=>{const i={name:t.name,options:t.options,storage:t.storage,editor:this.editor,type:Lh(t.name,this.schema)},o=Ie(t,"addCommands",i);return o?{...e,...o()}:e},{})}get plugins(){const{editor:e}=this,t=Fl.sort([...this.extensions].reverse()),i=[],o=[],a=t.map(u=>{const f={name:u.name,options:u.options,storage:u.storage,editor:e,type:Lh(u.name,this.schema)},h=[],m=Ie(u,"addKeyboardShortcuts",f);let v={};if(u.type==="mark"&&Ie(u,"exitable",f)&&(v.ArrowRight=()=>ys.handleExit({editor:e,mark:u})),m){const A=Object.fromEntries(Object.entries(m()).map(([R,W])=>[R,()=>W({editor:e})]));v={...v,...A}}const S=zM(v);h.push(S);const w=Ie(u,"addInputRules",f);G0(u,e.options.enableInputRules)&&w&&i.push(...w());const O=Ie(u,"addPasteRules",f);G0(u,e.options.enablePasteRules)&&O&&o.push(...O());const T=Ie(u,"addProseMirrorPlugins",f);if(T){const A=T();h.push(...A)}return h}).flat();return[aw({editor:e,rules:i}),...mw({editor:e,rules:o}),...a]}get attributes(){return Lb(this.extensions)}get nodeViews(){const{editor:e}=this,{nodeExtensions:t}=Mf(this.extensions);return Object.fromEntries(t.filter(i=>!!Ie(i,"addNodeView")).map(i=>{const o=this.attributes.filter(h=>h.type===i.name),a={name:i.name,options:i.options,storage:i.storage,editor:e,type:Bn(i.name,this.schema)},u=Ie(i,"addNodeView",a);if(!u)return[];const f=(h,m,v,S,w)=>{const O=cf(h,o);return u()({node:h,view:m,getPos:v,decorations:S,innerDecorations:w,editor:e,extension:i,HTMLAttributes:O})};return[i.name,f]}))}setupExtensions(){this.extensions.forEach(e=>{var t;this.editor.extensionStorage[e.name]=e.storage;const i={name:e.name,options:e.options,storage:e.storage,editor:this.editor,type:Lh(e.name,this.schema)};e.type==="mark"&&(!((t=ht(Ie(e,"keepOnSplit",i)))!==null&&t!==void 0)||t)&&this.splittableMarks.push(e.name);const o=Ie(e,"onBeforeCreate",i),a=Ie(e,"onCreate",i),u=Ie(e,"onUpdate",i),f=Ie(e,"onSelectionUpdate",i),h=Ie(e,"onTransaction",i),m=Ie(e,"onFocus",i),v=Ie(e,"onBlur",i),S=Ie(e,"onDestroy",i);o&&this.editor.on("beforeCreate",o),a&&this.editor.on("create",a),u&&this.editor.on("update",u),f&&this.editor.on("selectionUpdate",f),h&&this.editor.on("transaction",h),m&&this.editor.on("focus",m),v&&this.editor.on("blur",v),S&&this.editor.on("destroy",S)})}}class hr{constructor(e={}){this.type="extension",this.name="extension",this.parent=null,this.child=null,this.config={name:this.name,defaultOptions:{}},this.config={...this.config,...e},this.name=this.config.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${this.name}".`),this.options=this.config.defaultOptions,this.config.addOptions&&(this.options=ht(Ie(this,"addOptions",{name:this.name}))),this.storage=ht(Ie(this,"addStorage",{name:this.name,options:this.options}))||{}}static create(e={}){return new hr(e)}configure(e={}){const t=this.extend({...this.config,addOptions:()=>Tf(this.options,e)});return t.name=this.name,t.parent=this.parent,t}extend(e={}){const t=new hr({...this.config,...e});return t.parent=this,this.child=t,t.name=e.name?e.name:t.parent.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${t.name}".`),t.options=ht(Ie(t,"addOptions",{name:t.name})),t.storage=ht(Ie(t,"addStorage",{name:t.name,options:t.options})),t}}function Hb(r,e,t){const{from:i,to:o}=e,{blockSeparator:a=`

`,textSerializers:u={}}=t||{};let f="";return r.nodesBetween(i,o,(h,m,v,S)=>{var w;h.isBlock&&m>i&&(f+=a);const O=u==null?void 0:u[h.type.name];if(O)return v&&(f+=O({node:h,pos:m,parent:v,index:S,range:e})),!1;h.isText&&(f+=(w=h==null?void 0:h.text)===null||w===void 0?void 0:w.slice(Math.max(i,m)-m,o-m))}),f}function qb(r){return Object.fromEntries(Object.entries(r.nodes).filter(([,e])=>e.spec.toText).map(([e,t])=>[e,t.spec.toText]))}const yw=hr.create({name:"clipboardTextSerializer",addOptions(){return{blockSeparator:void 0}},addProseMirrorPlugins(){return[new Mr({key:new Ii("clipboardTextSerializer"),props:{clipboardTextSerializer:()=>{const{editor:r}=this,{state:e,schema:t}=r,{doc:i,selection:o}=e,{ranges:a}=o,u=Math.min(...a.map(v=>v.$from.pos)),f=Math.max(...a.map(v=>v.$to.pos)),h=qb(t);return Hb(i,{from:u,to:f},{...this.options.blockSeparator!==void 0?{blockSeparator:this.options.blockSeparator}:{},textSerializers:h})}}})]}}),vw=()=>({editor:r,view:e})=>(requestAnimationFrame(()=>{var t;r.isDestroyed||(e.dom.blur(),(t=window==null?void 0:window.getSelection())===null||t===void 0||t.removeAllRanges())}),!0),bw=(r=!1)=>({commands:e})=>e.setContent("",r),Sw=()=>({state:r,tr:e,dispatch:t})=>{const{selection:i}=e,{ranges:o}=i;return t&&o.forEach(({$from:a,$to:u})=>{r.doc.nodesBetween(a.pos,u.pos,(f,h)=>{if(f.type.isText)return;const{doc:m,mapping:v}=e,S=m.resolve(v.map(h)),w=m.resolve(v.map(h+f.nodeSize)),O=S.blockRange(w);if(!O)return;const T=ia(O);if(f.type.isTextblock){const{defaultType:A}=S.parent.contentMatchAt(S.index());e.setNodeMarkup(O.start,A)}(T||T===0)&&e.lift(O,T)})}),!0},xw=r=>e=>r(e),Ew=()=>({state:r,dispatch:e})=>Db(r,e),Mw=(r,e)=>({editor:t,tr:i})=>{const{state:o}=t,a=o.doc.slice(r.from,r.to);i.deleteRange(r.from,r.to);const u=i.mapping.map(e);return i.insert(u,a.content),i.setSelection(new it(i.doc.resolve(u-1))),!0},ww=()=>({tr:r,dispatch:e})=>{const{selection:t}=r,i=t.$anchor.node();if(i.content.size>0)return!1;const o=r.selection.$anchor;for(let a=o.depth;a>0;a-=1)if(o.node(a).type===i.type){if(e){const f=o.before(a),h=o.after(a);r.delete(f,h).scrollIntoView()}return!0}return!1},Tw=r=>({tr:e,state:t,dispatch:i})=>{const o=Bn(r,t.schema),a=e.selection.$anchor;for(let u=a.depth;u>0;u-=1)if(a.node(u).type===o){if(i){const h=a.before(u),m=a.after(u);e.delete(h,m).scrollIntoView()}return!0}return!1},Ow=r=>({tr:e,dispatch:t})=>{const{from:i,to:o}=r;return t&&e.delete(i,o),!0},kw=()=>({state:r,dispatch:e})=>Op(r,e),Cw=()=>({commands:r})=>r.keyboardShortcut("Enter"),Aw=()=>({state:r,dispatch:e})=>VM(r,e);function ff(r,e,t={strict:!0}){const i=Object.keys(e);return i.length?i.every(o=>t.strict?e[o]===r[o]:Dp(e[o])?e[o].test(r[o]):e[o]===r[o]):!0}function Ub(r,e,t={}){return r.find(i=>i.type===e&&ff(Object.fromEntries(Object.keys(t).map(o=>[o,i.attrs[o]])),t))}function $0(r,e,t={}){return!!Ub(r,e,t)}function Rp(r,e,t){var i;if(!r||!e)return;let o=r.parent.childAfter(r.parentOffset);if((!o.node||!o.node.marks.some(v=>v.type===e))&&(o=r.parent.childBefore(r.parentOffset)),!o.node||!o.node.marks.some(v=>v.type===e)||(t=t||((i=o.node.marks[0])===null||i===void 0?void 0:i.attrs),!Ub([...o.node.marks],e,t)))return;let u=o.index,f=r.start()+o.offset,h=u+1,m=f+o.node.nodeSize;for(;u>0&&$0([...r.parent.child(u-1).marks],e,t);)u-=1,f-=r.parent.child(u).nodeSize;for(;h<r.parent.childCount&&$0([...r.parent.child(h).marks],e,t);)m+=r.parent.child(h).nodeSize,h+=1;return{from:f,to:m}}function ao(r,e){if(typeof r=="string"){if(!e.marks[r])throw Error(`There is no mark type named '${r}'. Maybe you forgot to add the extension?`);return e.marks[r]}return r}const _w=(r,e={})=>({tr:t,state:i,dispatch:o})=>{const a=ao(r,i.schema),{doc:u,selection:f}=t,{$from:h,from:m,to:v}=f;if(o){const S=Rp(h,a,e);if(S&&S.from<=m&&S.to>=v){const w=it.create(u,S.from,S.to);t.setSelection(w)}}return!0},Nw=r=>e=>{const t=typeof r=="function"?r(e):r;for(let i=0;i<t.length;i+=1)if(t[i](e))return!0;return!1};function Vb(r){return r instanceof it}function Uo(r=0,e=0,t=0){return Math.min(Math.max(r,e),t)}function Ib(r,e=null){if(!e)return null;const t=ct.atStart(r),i=ct.atEnd(r);if(e==="start"||e===!0)return t;if(e==="end")return i;const o=t.from,a=i.to;return e==="all"?it.create(r,Uo(0,o,a),Uo(r.content.size,o,a)):it.create(r,Uo(e,o,a),Uo(e,o,a))}function Kb(){return navigator.platform==="Android"||/android/i.test(navigator.userAgent)}function Of(){return["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"].includes(navigator.platform)||navigator.userAgent.includes("Mac")&&"ontouchend"in document}const Dw=(r=null,e={})=>({editor:t,view:i,tr:o,dispatch:a})=>{e={scrollIntoView:!0,...e};const u=()=>{(Of()||Kb())&&i.dom.focus(),requestAnimationFrame(()=>{t.isDestroyed||(i.focus(),e!=null&&e.scrollIntoView&&t.commands.scrollIntoView())})};if(i.hasFocus()&&r===null||r===!1)return!0;if(a&&r===null&&!Vb(t.state.selection))return u(),!0;const f=Ib(o.doc,r)||t.state.selection,h=t.state.selection.eq(f);return a&&(h||o.setSelection(f),h&&o.storedMarks&&o.setStoredMarks(o.storedMarks),u()),!0},Rw=(r,e)=>t=>r.every((i,o)=>e(i,{...t,index:o})),Bw=(r,e)=>({tr:t,commands:i})=>i.insertContentAt({from:t.selection.from,to:t.selection.to},r,e),Pb=r=>{const e=r.childNodes;for(let t=e.length-1;t>=0;t-=1){const i=e[t];i.nodeType===3&&i.nodeValue&&/^(\n\s\s|\n)$/.test(i.nodeValue)?r.removeChild(i):i.nodeType===1&&Pb(i)}return r};function Uc(r){const e=`<body>${r}</body>`,t=new window.DOMParser().parseFromString(e,"text/html").body;return Pb(t)}function df(r,e,t){if(r instanceof eo||r instanceof ae)return r;t={slice:!0,parseOptions:{},...t};const i=typeof r=="object"&&r!==null,o=typeof r=="string";if(i)try{if(Array.isArray(r)&&r.length>0)return ae.fromArray(r.map(f=>e.nodeFromJSON(f)));const u=e.nodeFromJSON(r);return t.errorOnInvalidContent&&u.check(),u}catch(a){if(t.errorOnInvalidContent)throw new Error("[tiptap error]: Invalid JSON content",{cause:a});return console.warn("[tiptap warn]: Invalid content.","Passed value:",r,"Error:",a),df("",e,t)}if(o){if(t.errorOnInvalidContent){let u=!1,f="";const h=new Ov({topNode:e.spec.topNode,marks:e.spec.marks,nodes:e.spec.nodes.append({__tiptap__private__unknown__catch__all__node:{content:"inline*",group:"block",parseDOM:[{tag:"*",getAttrs:m=>(u=!0,f=typeof m=="string"?m:m.outerHTML,null)}]}})});if(t.slice?to.fromSchema(h).parseSlice(Uc(r),t.parseOptions):to.fromSchema(h).parse(Uc(r),t.parseOptions),t.errorOnInvalidContent&&u)throw new Error("[tiptap error]: Invalid HTML content",{cause:new Error(`Invalid element found: ${f}`)})}const a=to.fromSchema(e);return t.slice?a.parseSlice(Uc(r),t.parseOptions).content:a.parse(Uc(r),t.parseOptions)}return df("",e,t)}function zw(r,e,t){const i=r.steps.length-1;if(i<e)return;const o=r.steps[i];if(!(o instanceof Nn||o instanceof Dn))return;const a=r.mapping.maps[i];let u=0;a.forEach((f,h,m,v)=>{u===0&&(u=v)}),r.setSelection(ct.near(r.doc.resolve(u),t))}const Lw=r=>!("type"in r),jw=(r,e,t)=>({tr:i,dispatch:o,editor:a})=>{var u;if(o){t={parseOptions:a.options.parseOptions,updateSelection:!0,applyInputRules:!1,applyPasteRules:!1,...t};let f;try{f=df(e,a.schema,{parseOptions:{preserveWhitespace:"full",...t.parseOptions},errorOnInvalidContent:(u=t.errorOnInvalidContent)!==null&&u!==void 0?u:a.options.enableContentCheck})}catch(T){return a.emit("contentError",{editor:a,error:T,disableCollaboration:()=>{a.storage.collaboration&&(a.storage.collaboration.isDisabled=!0)}}),!1}let{from:h,to:m}=typeof r=="number"?{from:r,to:r}:{from:r.from,to:r.to},v=!0,S=!0;if((Lw(f)?f:[f]).forEach(T=>{T.check(),v=v?T.isText&&T.marks.length===0:!1,S=S?T.isBlock:!1}),h===m&&S){const{parent:T}=i.doc.resolve(h);T.isTextblock&&!T.type.spec.code&&!T.childCount&&(h-=1,m+=1)}let O;if(v){if(Array.isArray(e))O=e.map(T=>T.text||"").join("");else if(e instanceof ae){let T="";e.forEach(A=>{A.text&&(T+=A.text)}),O=T}else typeof e=="object"&&e&&e.text?O=e.text:O=e;i.insertText(O,h,m)}else O=f,i.replaceWith(h,m,O);t.updateSelection&&zw(i,i.steps.length-1,-1),t.applyInputRules&&i.setMeta("applyInputRules",{from:h,text:O}),t.applyPasteRules&&i.setMeta("applyPasteRules",{from:h,text:O})}return!0},Hw=()=>({state:r,dispatch:e})=>HM(r,e),qw=()=>({state:r,dispatch:e})=>qM(r,e),Uw=()=>({state:r,dispatch:e})=>Tb(r,e),Vw=()=>({state:r,dispatch:e})=>Ab(r,e),Iw=()=>({state:r,dispatch:e,tr:t})=>{try{const i=mf(r.doc,r.selection.$from.pos,-1);return i==null?!1:(t.join(i,2),e&&e(t),!0)}catch{return!1}},Kw=()=>({state:r,dispatch:e,tr:t})=>{try{const i=mf(r.doc,r.selection.$from.pos,1);return i==null?!1:(t.join(i,2),e&&e(t),!0)}catch{return!1}},Pw=()=>({state:r,dispatch:e})=>LM(r,e),Yw=()=>({state:r,dispatch:e})=>jM(r,e);function Yb(){return typeof navigator<"u"?/Mac/.test(navigator.platform):!1}function Gw(r){const e=r.split(/-(?!$)/);let t=e[e.length-1];t==="Space"&&(t=" ");let i,o,a,u;for(let f=0;f<e.length-1;f+=1){const h=e[f];if(/^(cmd|meta|m)$/i.test(h))u=!0;else if(/^a(lt)?$/i.test(h))i=!0;else if(/^(c|ctrl|control)$/i.test(h))o=!0;else if(/^s(hift)?$/i.test(h))a=!0;else if(/^mod$/i.test(h))Of()||Yb()?u=!0:o=!0;else throw new Error(`Unrecognized modifier name: ${h}`)}return i&&(t=`Alt-${t}`),o&&(t=`Ctrl-${t}`),u&&(t=`Meta-${t}`),a&&(t=`Shift-${t}`),t}const $w=r=>({editor:e,view:t,tr:i,dispatch:o})=>{const a=Gw(r).split(/-(?!$)/),u=a.find(m=>!["Alt","Ctrl","Meta","Shift"].includes(m)),f=new KeyboardEvent("keydown",{key:u==="Space"?" ":u,altKey:a.includes("Alt"),ctrlKey:a.includes("Ctrl"),metaKey:a.includes("Meta"),shiftKey:a.includes("Shift"),bubbles:!0,cancelable:!0}),h=e.captureTransaction(()=>{t.someProp("handleKeyDown",m=>m(t,f))});return h==null||h.steps.forEach(m=>{const v=m.map(i.mapping);v&&o&&i.maybeStep(v)}),!0};function xu(r,e,t={}){const{from:i,to:o,empty:a}=r.selection,u=e?Bn(e,r.schema):null,f=[];r.doc.nodesBetween(i,o,(S,w)=>{if(S.isText)return;const O=Math.max(i,w),T=Math.min(o,w+S.nodeSize);f.push({node:S,from:O,to:T})});const h=o-i,m=f.filter(S=>u?u.name===S.node.type.name:!0).filter(S=>ff(S.node.attrs,t,{strict:!1}));return a?!!m.length:m.reduce((S,w)=>S+w.to-w.from,0)>=h}const Xw=(r,e={})=>({state:t,dispatch:i})=>{const o=Bn(r,t.schema);return xu(t,o,e)?UM(t,i):!1},Fw=()=>({state:r,dispatch:e})=>Rb(r,e),Qw=r=>({state:e,dispatch:t})=>{const i=Bn(r,e.schema);return ZM(i)(e,t)},Jw=()=>({state:r,dispatch:e})=>Nb(r,e);function kf(r,e){return e.nodes[r]?"node":e.marks[r]?"mark":null}function X0(r,e){const t=typeof e=="string"?[e]:e;return Object.keys(r).reduce((i,o)=>(t.includes(o)||(i[o]=r[o]),i),{})}const Zw=(r,e)=>({tr:t,state:i,dispatch:o})=>{let a=null,u=null;const f=kf(typeof r=="string"?r:r.name,i.schema);return f?(f==="node"&&(a=Bn(r,i.schema)),f==="mark"&&(u=ao(r,i.schema)),o&&t.selection.ranges.forEach(h=>{i.doc.nodesBetween(h.$from.pos,h.$to.pos,(m,v)=>{a&&a===m.type&&t.setNodeMarkup(v,void 0,X0(m.attrs,e)),u&&m.marks.length&&m.marks.forEach(S=>{u===S.type&&t.addMark(v,v+m.nodeSize,u.create(X0(S.attrs,e)))})})}),!0):!1},Ww=()=>({tr:r,dispatch:e})=>(e&&r.scrollIntoView(),!0),eT=()=>({tr:r,dispatch:e})=>{if(e){const t=new Hr(r.doc);r.setSelection(t)}return!0},tT=()=>({state:r,dispatch:e})=>kb(r,e),nT=()=>({state:r,dispatch:e})=>_b(r,e),rT=()=>({state:r,dispatch:e})=>PM(r,e),iT=()=>({state:r,dispatch:e})=>$M(r,e),sT=()=>({state:r,dispatch:e})=>GM(r,e);function lp(r,e,t={},i={}){return df(r,e,{slice:!1,parseOptions:t,errorOnInvalidContent:i.errorOnInvalidContent})}const oT=(r,e=!1,t={},i={})=>({editor:o,tr:a,dispatch:u,commands:f})=>{var h,m;const{doc:v}=a;if(t.preserveWhitespace!=="full"){const S=lp(r,o.schema,t,{errorOnInvalidContent:(h=i.errorOnInvalidContent)!==null&&h!==void 0?h:o.options.enableContentCheck});return u&&a.replaceWith(0,v.content.size,S).setMeta("preventUpdate",!e),!0}return u&&a.setMeta("preventUpdate",!e),f.insertContentAt({from:0,to:v.content.size},r,{parseOptions:t,errorOnInvalidContent:(m=i.errorOnInvalidContent)!==null&&m!==void 0?m:o.options.enableContentCheck})};function Gb(r,e){const t=ao(e,r.schema),{from:i,to:o,empty:a}=r.selection,u=[];a?(r.storedMarks&&u.push(...r.storedMarks),u.push(...r.selection.$head.marks())):r.doc.nodesBetween(i,o,h=>{u.push(...h.marks)});const f=u.find(h=>h.type.name===t.name);return f?{...f.attrs}:{}}function lT(r){for(let e=0;e<r.edgeCount;e+=1){const{type:t}=r.edge(e);if(t.isTextblock&&!t.hasRequiredAttrs())return t}return null}function aT(r,e){for(let t=r.depth;t>0;t-=1){const i=r.node(t);if(e(i))return{pos:t>0?r.before(t):0,start:r.start(t),depth:t,node:i}}}function Bp(r){return e=>aT(e.$from,r)}function uT(r,e){const t={from:0,to:r.content.size};return Hb(r,t,e)}function cT(r,e){const t=Bn(e,r.schema),{from:i,to:o}=r.selection,a=[];r.doc.nodesBetween(i,o,f=>{a.push(f)});const u=a.reverse().find(f=>f.type.name===t.name);return u?{...u.attrs}:{}}function fT(r,e){const t=kf(typeof e=="string"?e:e.name,r.schema);return t==="node"?cT(r,e):t==="mark"?Gb(r,e):{}}function $b(r,e,t){const i=[];return r===e?t.resolve(r).marks().forEach(o=>{const a=t.resolve(r),u=Rp(a,o.type);u&&i.push({mark:o,...u})}):t.nodesBetween(r,e,(o,a)=>{!o||(o==null?void 0:o.nodeSize)===void 0||i.push(...o.marks.map(u=>({from:a,to:a+o.nodeSize,mark:u})))}),i}function Fc(r,e,t){return Object.fromEntries(Object.entries(t).filter(([i])=>{const o=r.find(a=>a.type===e&&a.name===i);return o?o.attribute.keepOnSplit:!1}))}function ap(r,e,t={}){const{empty:i,ranges:o}=r.selection,a=e?ao(e,r.schema):null;if(i)return!!(r.storedMarks||r.selection.$from.marks()).filter(S=>a?a.name===S.type.name:!0).find(S=>ff(S.attrs,t,{strict:!1}));let u=0;const f=[];if(o.forEach(({$from:S,$to:w})=>{const O=S.pos,T=w.pos;r.doc.nodesBetween(O,T,(A,R)=>{if(!A.isText&&!A.marks.length)return;const W=Math.max(O,R),Te=Math.min(T,R+A.nodeSize),_e=Te-W;u+=_e,f.push(...A.marks.map(Le=>({mark:Le,from:W,to:Te})))})}),u===0)return!1;const h=f.filter(S=>a?a.name===S.mark.type.name:!0).filter(S=>ff(S.mark.attrs,t,{strict:!1})).reduce((S,w)=>S+w.to-w.from,0),m=f.filter(S=>a?S.mark.type!==a&&S.mark.type.excludes(a):!0).reduce((S,w)=>S+w.to-w.from,0);return(h>0?h+m:h)>=u}function dT(r,e,t={}){if(!e)return xu(r,null,t)||ap(r,null,t);const i=kf(e,r.schema);return i==="node"?xu(r,e,t):i==="mark"?ap(r,e,t):!1}function F0(r,e){const{nodeExtensions:t}=Mf(e),i=t.find(u=>u.name===r);if(!i)return!1;const o={name:i.name,options:i.options,storage:i.storage},a=ht(Ie(i,"group",o));return typeof a!="string"?!1:a.split(" ").includes("list")}function zp(r,{checkChildren:e=!0,ignoreWhitespace:t=!1}={}){var i;if(t){if(r.type.name==="hardBreak")return!0;if(r.isText)return/^\s*$/m.test((i=r.text)!==null&&i!==void 0?i:"")}if(r.isText)return!r.text;if(r.isAtom||r.isLeaf)return!1;if(r.content.childCount===0)return!0;if(e){let o=!0;return r.content.forEach(a=>{o!==!1&&(zp(a,{ignoreWhitespace:t,checkChildren:e})||(o=!1))}),o}return!1}function hT(r){return r instanceof Xe}function pT(r,e,t){var i;const{selection:o}=e;let a=null;if(Vb(o)&&(a=o.$cursor),a){const f=(i=r.storedMarks)!==null&&i!==void 0?i:a.marks();return!!t.isInSet(f)||!f.some(h=>h.type.excludes(t))}const{ranges:u}=o;return u.some(({$from:f,$to:h})=>{let m=f.depth===0?r.doc.inlineContent&&r.doc.type.allowsMarkType(t):!1;return r.doc.nodesBetween(f.pos,h.pos,(v,S,w)=>{if(m)return!1;if(v.isInline){const O=!w||w.type.allowsMarkType(t),T=!!t.isInSet(v.marks)||!v.marks.some(A=>A.type.excludes(t));m=O&&T}return!m}),m})}const mT=(r,e={})=>({tr:t,state:i,dispatch:o})=>{const{selection:a}=t,{empty:u,ranges:f}=a,h=ao(r,i.schema);if(o)if(u){const m=Gb(i,h);t.addStoredMark(h.create({...m,...e}))}else f.forEach(m=>{const v=m.$from.pos,S=m.$to.pos;i.doc.nodesBetween(v,S,(w,O)=>{const T=Math.max(O,v),A=Math.min(O+w.nodeSize,S);w.marks.find(W=>W.type===h)?w.marks.forEach(W=>{h===W.type&&t.addMark(T,A,h.create({...W.attrs,...e}))}):t.addMark(T,A,h.create(e))})});return pT(i,t,h)},gT=(r,e)=>({tr:t})=>(t.setMeta(r,e),!0),yT=(r,e={})=>({state:t,dispatch:i,chain:o})=>{const a=Bn(r,t.schema);let u;return t.selection.$anchor.sameParent(t.selection.$head)&&(u=t.selection.$anchor.parent.attrs),a.isTextblock?o().command(({commands:f})=>K0(a,{...u,...e})(t)?!0:f.clearNodes()).command(({state:f})=>K0(a,{...u,...e})(f,i)).run():(console.warn('[tiptap warn]: Currently "setNode()" only supports text block nodes.'),!1)},vT=r=>({tr:e,dispatch:t})=>{if(t){const{doc:i}=e,o=Uo(r,0,i.content.size),a=Xe.create(i,o);e.setSelection(a)}return!0},bT=r=>({tr:e,dispatch:t})=>{if(t){const{doc:i}=e,{from:o,to:a}=typeof r=="number"?{from:r,to:r}:r,u=it.atStart(i).from,f=it.atEnd(i).to,h=Uo(o,u,f),m=Uo(a,u,f),v=it.create(i,h,m);e.setSelection(v)}return!0},ST=r=>({state:e,dispatch:t})=>{const i=Bn(r,e.schema);return tw(i)(e,t)};function Q0(r,e){const t=r.storedMarks||r.selection.$to.parentOffset&&r.selection.$from.marks();if(t){const i=t.filter(o=>e==null?void 0:e.includes(o.type.name));r.tr.ensureMarks(i)}}const xT=({keepMarks:r=!0}={})=>({tr:e,state:t,dispatch:i,editor:o})=>{const{selection:a,doc:u}=e,{$from:f,$to:h}=a,m=o.extensionManager.attributes,v=Fc(m,f.node().type.name,f.node().attrs);if(a instanceof Xe&&a.node.isBlock)return!f.parentOffset||!ms(u,f.pos)?!1:(i&&(r&&Q0(t,o.extensionManager.splittableMarks),e.split(f.pos).scrollIntoView()),!0);if(!f.parent.isBlock)return!1;const S=h.parentOffset===h.parent.content.size,w=f.depth===0?void 0:lT(f.node(-1).contentMatchAt(f.indexAfter(-1)));let O=S&&w?[{type:w,attrs:v}]:void 0,T=ms(e.doc,e.mapping.map(f.pos),1,O);if(!O&&!T&&ms(e.doc,e.mapping.map(f.pos),1,w?[{type:w}]:void 0)&&(T=!0,O=w?[{type:w,attrs:v}]:void 0),i){if(T&&(a instanceof it&&e.deleteSelection(),e.split(e.mapping.map(f.pos),1,O),w&&!S&&!f.parentOffset&&f.parent.type!==w)){const A=e.mapping.map(f.before()),R=e.doc.resolve(A);f.node(-1).canReplaceWith(R.index(),R.index()+1,w)&&e.setNodeMarkup(e.mapping.map(f.before()),w)}r&&Q0(t,o.extensionManager.splittableMarks),e.scrollIntoView()}return T},ET=(r,e={})=>({tr:t,state:i,dispatch:o,editor:a})=>{var u;const f=Bn(r,i.schema),{$from:h,$to:m}=i.selection,v=i.selection.node;if(v&&v.isBlock||h.depth<2||!h.sameParent(m))return!1;const S=h.node(-1);if(S.type!==f)return!1;const w=a.extensionManager.attributes;if(h.parent.content.size===0&&h.node(-1).childCount===h.indexAfter(-1)){if(h.depth===2||h.node(-3).type!==f||h.index(-2)!==h.node(-2).childCount-1)return!1;if(o){let W=ae.empty;const Te=h.index(-1)?1:h.index(-2)?2:3;for(let me=h.depth-Te;me>=h.depth-3;me-=1)W=ae.from(h.node(me).copy(W));const _e=h.indexAfter(-1)<h.node(-2).childCount?1:h.indexAfter(-2)<h.node(-3).childCount?2:3,Le={...Fc(w,h.node().type.name,h.node().attrs),...e},ve=((u=f.contentMatch.defaultType)===null||u===void 0?void 0:u.createAndFill(Le))||void 0;W=W.append(ae.from(f.createAndFill(null,ve)||void 0));const Re=h.before(h.depth-(Te-1));t.replace(Re,h.after(-_e),new De(W,4-Te,0));let Fe=-1;t.doc.nodesBetween(Re,t.doc.content.size,(me,Ce)=>{if(Fe>-1)return!1;me.isTextblock&&me.content.size===0&&(Fe=Ce+1)}),Fe>-1&&t.setSelection(it.near(t.doc.resolve(Fe))),t.scrollIntoView()}return!0}const O=m.pos===h.end()?S.contentMatchAt(0).defaultType:null,T={...Fc(w,S.type.name,S.attrs),...e},A={...Fc(w,h.node().type.name,h.node().attrs),...e};t.delete(h.pos,m.pos);const R=O?[{type:f,attrs:T},{type:O,attrs:A}]:[{type:f,attrs:T}];if(!ms(t.doc,h.pos,2))return!1;if(o){const{selection:W,storedMarks:Te}=i,{splittableMarks:_e}=a.extensionManager,Le=Te||W.$to.parentOffset&&W.$from.marks();if(t.split(h.pos,2,R).scrollIntoView(),!Le||!o)return!0;const ve=Le.filter(Re=>_e.includes(Re.type.name));t.ensureMarks(ve)}return!0},jh=(r,e)=>{const t=Bp(u=>u.type===e)(r.selection);if(!t)return!0;const i=r.doc.resolve(Math.max(0,t.pos-1)).before(t.depth);if(i===void 0)return!0;const o=r.doc.nodeAt(i);return t.node.type===(o==null?void 0:o.type)&&oo(r.doc,t.pos)&&r.join(t.pos),!0},Hh=(r,e)=>{const t=Bp(u=>u.type===e)(r.selection);if(!t)return!0;const i=r.doc.resolve(t.start).after(t.depth);if(i===void 0)return!0;const o=r.doc.nodeAt(i);return t.node.type===(o==null?void 0:o.type)&&oo(r.doc,i)&&r.join(i),!0},MT=(r,e,t,i={})=>({editor:o,tr:a,state:u,dispatch:f,chain:h,commands:m,can:v})=>{const{extensions:S,splittableMarks:w}=o.extensionManager,O=Bn(r,u.schema),T=Bn(e,u.schema),{selection:A,storedMarks:R}=u,{$from:W,$to:Te}=A,_e=W.blockRange(Te),Le=R||A.$to.parentOffset&&A.$from.marks();if(!_e)return!1;const ve=Bp(Re=>F0(Re.type.name,S))(A);if(_e.depth>=1&&ve&&_e.depth-ve.depth<=1){if(ve.node.type===O)return m.liftListItem(T);if(F0(ve.node.type.name,S)&&O.validContent(ve.node.content)&&f)return h().command(()=>(a.setNodeMarkup(ve.pos,O),!0)).command(()=>jh(a,O)).command(()=>Hh(a,O)).run()}return!t||!Le||!f?h().command(()=>v().wrapInList(O,i)?!0:m.clearNodes()).wrapInList(O,i).command(()=>jh(a,O)).command(()=>Hh(a,O)).run():h().command(()=>{const Re=v().wrapInList(O,i),Fe=Le.filter(me=>w.includes(me.type.name));return a.ensureMarks(Fe),Re?!0:m.clearNodes()}).wrapInList(O,i).command(()=>jh(a,O)).command(()=>Hh(a,O)).run()},wT=(r,e={},t={})=>({state:i,commands:o})=>{const{extendEmptyMarkRange:a=!1}=t,u=ao(r,i.schema);return ap(i,u,e)?o.unsetMark(u,{extendEmptyMarkRange:a}):o.setMark(u,e)},TT=(r,e,t={})=>({state:i,commands:o})=>{const a=Bn(r,i.schema),u=Bn(e,i.schema),f=xu(i,a,t);let h;return i.selection.$anchor.sameParent(i.selection.$head)&&(h=i.selection.$anchor.parent.attrs),f?o.setNode(u,h):o.setNode(a,{...h,...t})},OT=(r,e={})=>({state:t,commands:i})=>{const o=Bn(r,t.schema);return xu(t,o,e)?i.lift(o):i.wrapIn(o,e)},kT=()=>({state:r,dispatch:e})=>{const t=r.plugins;for(let i=0;i<t.length;i+=1){const o=t[i];let a;if(o.spec.isInputRules&&(a=o.getState(r))){if(e){const u=r.tr,f=a.transform;for(let h=f.steps.length-1;h>=0;h-=1)u.step(f.steps[h].invert(f.docs[h]));if(a.text){const h=u.doc.resolve(a.from).marks();u.replaceWith(a.from,a.to,r.schema.text(a.text,h))}else u.delete(a.from,a.to)}return!0}}return!1},CT=()=>({tr:r,dispatch:e})=>{const{selection:t}=r,{empty:i,ranges:o}=t;return i||e&&o.forEach(a=>{r.removeMark(a.$from.pos,a.$to.pos)}),!0},AT=(r,e={})=>({tr:t,state:i,dispatch:o})=>{var a;const{extendEmptyMarkRange:u=!1}=e,{selection:f}=t,h=ao(r,i.schema),{$from:m,empty:v,ranges:S}=f;if(!o)return!0;if(v&&u){let{from:w,to:O}=f;const T=(a=m.marks().find(R=>R.type===h))===null||a===void 0?void 0:a.attrs,A=Rp(m,h,T);A&&(w=A.from,O=A.to),t.removeMark(w,O,h)}else S.forEach(w=>{t.removeMark(w.$from.pos,w.$to.pos,h)});return t.removeStoredMark(h),!0},_T=(r,e={})=>({tr:t,state:i,dispatch:o})=>{let a=null,u=null;const f=kf(typeof r=="string"?r:r.name,i.schema);return f?(f==="node"&&(a=Bn(r,i.schema)),f==="mark"&&(u=ao(r,i.schema)),o&&t.selection.ranges.forEach(h=>{const m=h.$from.pos,v=h.$to.pos;let S,w,O,T;t.selection.empty?i.doc.nodesBetween(m,v,(A,R)=>{a&&a===A.type&&(O=Math.max(R,m),T=Math.min(R+A.nodeSize,v),S=R,w=A)}):i.doc.nodesBetween(m,v,(A,R)=>{R<m&&a&&a===A.type&&(O=Math.max(R,m),T=Math.min(R+A.nodeSize,v),S=R,w=A),R>=m&&R<=v&&(a&&a===A.type&&t.setNodeMarkup(R,void 0,{...A.attrs,...e}),u&&A.marks.length&&A.marks.forEach(W=>{if(u===W.type){const Te=Math.max(R,m),_e=Math.min(R+A.nodeSize,v);t.addMark(Te,_e,u.create({...W.attrs,...e}))}}))}),w&&(S!==void 0&&t.setNodeMarkup(S,void 0,{...w.attrs,...e}),u&&w.marks.length&&w.marks.forEach(A=>{u===A.type&&t.addMark(O,T,u.create({...A.attrs,...e}))}))}),!0):!1},NT=(r,e={})=>({state:t,dispatch:i})=>{const o=Bn(r,t.schema);return XM(o,e)(t,i)},DT=(r,e={})=>({state:t,dispatch:i})=>{const o=Bn(r,t.schema);return FM(o,e)(t,i)};var RT=Object.freeze({__proto__:null,blur:vw,clearContent:bw,clearNodes:Sw,command:xw,createParagraphNear:Ew,cut:Mw,deleteCurrentNode:ww,deleteNode:Tw,deleteRange:Ow,deleteSelection:kw,enter:Cw,exitCode:Aw,extendMarkRange:_w,first:Nw,focus:Dw,forEach:Rw,insertContent:Bw,insertContentAt:jw,joinBackward:Uw,joinDown:qw,joinForward:Vw,joinItemBackward:Iw,joinItemForward:Kw,joinTextblockBackward:Pw,joinTextblockForward:Yw,joinUp:Hw,keyboardShortcut:$w,lift:Xw,liftEmptyBlock:Fw,liftListItem:Qw,newlineInCode:Jw,resetAttributes:Zw,scrollIntoView:Ww,selectAll:eT,selectNodeBackward:tT,selectNodeForward:nT,selectParentNode:rT,selectTextblockEnd:iT,selectTextblockStart:sT,setContent:oT,setMark:mT,setMeta:gT,setNode:yT,setNodeSelection:vT,setTextSelection:bT,sinkListItem:ST,splitBlock:xT,splitListItem:ET,toggleList:MT,toggleMark:wT,toggleNode:TT,toggleWrap:OT,undoInputRule:kT,unsetAllMarks:CT,unsetMark:AT,updateAttributes:_T,wrapIn:NT,wrapInList:DT});const BT=hr.create({name:"commands",addCommands(){return{...RT}}}),zT=hr.create({name:"drop",addProseMirrorPlugins(){return[new Mr({key:new Ii("tiptapDrop"),props:{handleDrop:(r,e,t,i)=>{this.editor.emit("drop",{editor:this.editor,event:e,slice:t,moved:i})}}})]}}),LT=hr.create({name:"editable",addProseMirrorPlugins(){return[new Mr({key:new Ii("editable"),props:{editable:()=>this.editor.options.editable}})]}}),jT=new Ii("focusEvents"),HT=hr.create({name:"focusEvents",addProseMirrorPlugins(){const{editor:r}=this;return[new Mr({key:jT,props:{handleDOMEvents:{focus:(e,t)=>{r.isFocused=!0;const i=r.state.tr.setMeta("focus",{event:t}).setMeta("addToHistory",!1);return e.dispatch(i),!1},blur:(e,t)=>{r.isFocused=!1;const i=r.state.tr.setMeta("blur",{event:t}).setMeta("addToHistory",!1);return e.dispatch(i),!1}}}})]}}),qT=hr.create({name:"keymap",addKeyboardShortcuts(){const r=()=>this.editor.commands.first(({commands:u})=>[()=>u.undoInputRule(),()=>u.command(({tr:f})=>{const{selection:h,doc:m}=f,{empty:v,$anchor:S}=h,{pos:w,parent:O}=S,T=S.parent.isTextblock&&w>0?f.doc.resolve(w-1):S,A=T.parent.type.spec.isolating,R=S.pos-S.parentOffset,W=A&&T.parent.childCount===1?R===S.pos:ct.atStart(m).from===w;return!v||!O.type.isTextblock||O.textContent.length||!W||W&&S.parent.type.name==="paragraph"?!1:u.clearNodes()}),()=>u.deleteSelection(),()=>u.joinBackward(),()=>u.selectNodeBackward()]),e=()=>this.editor.commands.first(({commands:u})=>[()=>u.deleteSelection(),()=>u.deleteCurrentNode(),()=>u.joinForward(),()=>u.selectNodeForward()]),i={Enter:()=>this.editor.commands.first(({commands:u})=>[()=>u.newlineInCode(),()=>u.createParagraphNear(),()=>u.liftEmptyBlock(),()=>u.splitBlock()]),"Mod-Enter":()=>this.editor.commands.exitCode(),Backspace:r,"Mod-Backspace":r,"Shift-Backspace":r,Delete:e,"Mod-Delete":e,"Mod-a":()=>this.editor.commands.selectAll()},o={...i},a={...i,"Ctrl-h":r,"Alt-Backspace":r,"Ctrl-d":e,"Ctrl-Alt-Backspace":e,"Alt-Delete":e,"Alt-d":e,"Ctrl-a":()=>this.editor.commands.selectTextblockStart(),"Ctrl-e":()=>this.editor.commands.selectTextblockEnd()};return Of()||Yb()?a:o},addProseMirrorPlugins(){return[new Mr({key:new Ii("clearDocument"),appendTransaction:(r,e,t)=>{if(r.some(A=>A.getMeta("composition")))return;const i=r.some(A=>A.docChanged)&&!e.doc.eq(t.doc),o=r.some(A=>A.getMeta("preventClearDocument"));if(!i||o)return;const{empty:a,from:u,to:f}=e.selection,h=ct.atStart(e.doc).from,m=ct.atEnd(e.doc).to;if(a||!(u===h&&f===m)||!zp(t.doc))return;const w=t.tr,O=xf({state:t,transaction:w}),{commands:T}=new Ef({editor:this.editor,state:O});if(T.clearNodes(),!!w.steps.length)return w}})]}}),UT=hr.create({name:"paste",addProseMirrorPlugins(){return[new Mr({key:new Ii("tiptapPaste"),props:{handlePaste:(r,e,t)=>{this.editor.emit("paste",{editor:this.editor,event:e,slice:t})}}})]}}),VT=hr.create({name:"tabindex",addProseMirrorPlugins(){return[new Mr({key:new Ii("tabindex"),props:{attributes:()=>this.editor.isEditable?{tabindex:"0"}:{}}})]}});class jo{get name(){return this.node.type.name}constructor(e,t,i=!1,o=null){this.currentNode=null,this.actualDepth=null,this.isBlock=i,this.resolvedPos=e,this.editor=t,this.currentNode=o}get node(){return this.currentNode||this.resolvedPos.node()}get element(){return this.editor.view.domAtPos(this.pos).node}get depth(){var e;return(e=this.actualDepth)!==null&&e!==void 0?e:this.resolvedPos.depth}get pos(){return this.resolvedPos.pos}get content(){return this.node.content}set content(e){let t=this.from,i=this.to;if(this.isBlock){if(this.content.size===0){console.error(`You cant set content on a block node. Tried to set content on ${this.name} at ${this.pos}`);return}t=this.from+1,i=this.to-1}this.editor.commands.insertContentAt({from:t,to:i},e)}get attributes(){return this.node.attrs}get textContent(){return this.node.textContent}get size(){return this.node.nodeSize}get from(){return this.isBlock?this.pos:this.resolvedPos.start(this.resolvedPos.depth)}get range(){return{from:this.from,to:this.to}}get to(){return this.isBlock?this.pos+this.size:this.resolvedPos.end(this.resolvedPos.depth)+(this.node.isText?0:1)}get parent(){if(this.depth===0)return null;const e=this.resolvedPos.start(this.resolvedPos.depth-1),t=this.resolvedPos.doc.resolve(e);return new jo(t,this.editor)}get before(){let e=this.resolvedPos.doc.resolve(this.from-(this.isBlock?1:2));return e.depth!==this.depth&&(e=this.resolvedPos.doc.resolve(this.from-3)),new jo(e,this.editor)}get after(){let e=this.resolvedPos.doc.resolve(this.to+(this.isBlock?2:1));return e.depth!==this.depth&&(e=this.resolvedPos.doc.resolve(this.to+3)),new jo(e,this.editor)}get children(){const e=[];return this.node.content.forEach((t,i)=>{const o=t.isBlock&&!t.isTextblock,a=t.isAtom&&!t.isText,u=this.pos+i+(a?0:1),f=this.resolvedPos.doc.resolve(u);if(!o&&f.depth<=this.depth)return;const h=new jo(f,this.editor,o,o?t:null);o&&(h.actualDepth=this.depth+1),e.push(new jo(f,this.editor,o,o?t:null))}),e}get firstChild(){return this.children[0]||null}get lastChild(){const e=this.children;return e[e.length-1]||null}closest(e,t={}){let i=null,o=this.parent;for(;o&&!i;){if(o.node.type.name===e)if(Object.keys(t).length>0){const a=o.node.attrs,u=Object.keys(t);for(let f=0;f<u.length;f+=1){const h=u[f];if(a[h]!==t[h])break}}else i=o;o=o.parent}return i}querySelector(e,t={}){return this.querySelectorAll(e,t,!0)[0]||null}querySelectorAll(e,t={},i=!1){let o=[];if(!this.children||this.children.length===0)return o;const a=Object.keys(t);return this.children.forEach(u=>{i&&o.length>0||(u.node.type.name===e&&a.every(h=>t[h]===u.node.attrs[h])&&o.push(u),!(i&&o.length>0)&&(o=o.concat(u.querySelectorAll(e,t,i))))}),o}setAttribute(e){const{tr:t}=this.editor.state;t.setNodeMarkup(this.from,void 0,{...this.node.attrs,...e}),this.editor.view.dispatch(t)}}const IT=`.ProseMirror {
  position: relative;
}

.ProseMirror {
  word-wrap: break-word;
  white-space: pre-wrap;
  white-space: break-spaces;
  -webkit-font-variant-ligatures: none;
  font-variant-ligatures: none;
  font-feature-settings: "liga" 0; /* the above doesn't seem to work in Edge */
}

.ProseMirror [contenteditable="false"] {
  white-space: normal;
}

.ProseMirror [contenteditable="false"] [contenteditable="true"] {
  white-space: pre-wrap;
}

.ProseMirror pre {
  white-space: pre-wrap;
}

img.ProseMirror-separator {
  display: inline !important;
  border: none !important;
  margin: 0 !important;
  width: 0 !important;
  height: 0 !important;
}

.ProseMirror-gapcursor {
  display: none;
  pointer-events: none;
  position: absolute;
  margin: 0;
}

.ProseMirror-gapcursor:after {
  content: "";
  display: block;
  position: absolute;
  top: -2px;
  width: 20px;
  border-top: 1px solid black;
  animation: ProseMirror-cursor-blink 1.1s steps(2, start) infinite;
}

@keyframes ProseMirror-cursor-blink {
  to {
    visibility: hidden;
  }
}

.ProseMirror-hideselection *::selection {
  background: transparent;
}

.ProseMirror-hideselection *::-moz-selection {
  background: transparent;
}

.ProseMirror-hideselection * {
  caret-color: transparent;
}

.ProseMirror-focused .ProseMirror-gapcursor {
  display: block;
}

.tippy-box[data-animation=fade][data-state=hidden] {
  opacity: 0
}`;function KT(r,e,t){const i=document.querySelector("style[data-tiptap-style]");if(i!==null)return i;const o=document.createElement("style");return e&&o.setAttribute("nonce",e),o.setAttribute("data-tiptap-style",""),o.innerHTML=r,document.getElementsByTagName("head")[0].appendChild(o),o}class PT extends nw{constructor(e={}){super(),this.isFocused=!1,this.isInitialized=!1,this.extensionStorage={},this.options={element:document.createElement("div"),content:"",injectCSS:!0,injectNonce:void 0,extensions:[],autofocus:!1,editable:!0,editorProps:{},parseOptions:{},coreExtensionOptions:{},enableInputRules:!0,enablePasteRules:!0,enableCoreExtensions:!0,enableContentCheck:!1,onBeforeCreate:()=>null,onCreate:()=>null,onUpdate:()=>null,onSelectionUpdate:()=>null,onTransaction:()=>null,onFocus:()=>null,onBlur:()=>null,onDestroy:()=>null,onContentError:({error:t})=>{throw t},onPaste:()=>null,onDrop:()=>null},this.isCapturingTransaction=!1,this.capturedTransaction=null,this.setOptions(e),this.createExtensionManager(),this.createCommandManager(),this.createSchema(),this.on("beforeCreate",this.options.onBeforeCreate),this.emit("beforeCreate",{editor:this}),this.on("contentError",this.options.onContentError),this.createView(),this.injectCSS(),this.on("create",this.options.onCreate),this.on("update",this.options.onUpdate),this.on("selectionUpdate",this.options.onSelectionUpdate),this.on("transaction",this.options.onTransaction),this.on("focus",this.options.onFocus),this.on("blur",this.options.onBlur),this.on("destroy",this.options.onDestroy),this.on("drop",({event:t,slice:i,moved:o})=>this.options.onDrop(t,i,o)),this.on("paste",({event:t,slice:i})=>this.options.onPaste(t,i)),window.setTimeout(()=>{this.isDestroyed||(this.commands.focus(this.options.autofocus),this.emit("create",{editor:this}),this.isInitialized=!0)},0)}get storage(){return this.extensionStorage}get commands(){return this.commandManager.commands}chain(){return this.commandManager.chain()}can(){return this.commandManager.can()}injectCSS(){this.options.injectCSS&&document&&(this.css=KT(IT,this.options.injectNonce))}setOptions(e={}){this.options={...this.options,...e},!(!this.view||!this.state||this.isDestroyed)&&(this.options.editorProps&&this.view.setProps(this.options.editorProps),this.view.updateState(this.state))}setEditable(e,t=!0){this.setOptions({editable:e}),t&&this.emit("update",{editor:this,transaction:this.state.tr})}get isEditable(){return this.options.editable&&this.view&&this.view.editable}get state(){return this.view.state}registerPlugin(e,t){const i=jb(t)?t(e,[...this.state.plugins]):[...this.state.plugins,e],o=this.state.reconfigure({plugins:i});return this.view.updateState(o),o}unregisterPlugin(e){if(this.isDestroyed)return;const t=this.state.plugins;let i=t;if([].concat(e).forEach(a=>{const u=typeof a=="string"?`${a}$`:a.key;i=i.filter(f=>!f.key.startsWith(u))}),t.length===i.length)return;const o=this.state.reconfigure({plugins:i});return this.view.updateState(o),o}createExtensionManager(){var e,t;const o=[...this.options.enableCoreExtensions?[LT,yw.configure({blockSeparator:(t=(e=this.options.coreExtensionOptions)===null||e===void 0?void 0:e.clipboardTextSerializer)===null||t===void 0?void 0:t.blockSeparator}),BT,HT,qT,VT,zT,UT].filter(a=>typeof this.options.enableCoreExtensions=="object"?this.options.enableCoreExtensions[a.name]!==!1:!0):[],...this.options.extensions].filter(a=>["extension","node","mark"].includes(a==null?void 0:a.type));this.extensionManager=new Fl(o,this)}createCommandManager(){this.commandManager=new Ef({editor:this})}createSchema(){this.schema=this.extensionManager.schema}createView(){var e;let t;try{t=lp(this.options.content,this.schema,this.options.parseOptions,{errorOnInvalidContent:this.options.enableContentCheck})}catch(u){if(!(u instanceof Error)||!["[tiptap error]: Invalid JSON content","[tiptap error]: Invalid HTML content"].includes(u.message))throw u;this.emit("contentError",{editor:this,error:u,disableCollaboration:()=>{this.storage.collaboration&&(this.storage.collaboration.isDisabled=!0),this.options.extensions=this.options.extensions.filter(f=>f.name!=="collaboration"),this.createExtensionManager()}}),t=lp(this.options.content,this.schema,this.options.parseOptions,{errorOnInvalidContent:!1})}const i=Ib(t,this.options.autofocus);this.view=new TM(this.options.element,{...this.options.editorProps,attributes:{role:"textbox",...(e=this.options.editorProps)===null||e===void 0?void 0:e.attributes},dispatchTransaction:this.dispatchTransaction.bind(this),state:Xl.create({doc:t,selection:i||void 0})});const o=this.state.reconfigure({plugins:this.extensionManager.plugins});this.view.updateState(o),this.createNodeViews(),this.prependClass();const a=this.view.dom;a.editor=this}createNodeViews(){this.view.isDestroyed||this.view.setProps({nodeViews:this.extensionManager.nodeViews})}prependClass(){this.view.dom.className=`tiptap ${this.view.dom.className}`}captureTransaction(e){this.isCapturingTransaction=!0,e(),this.isCapturingTransaction=!1;const t=this.capturedTransaction;return this.capturedTransaction=null,t}dispatchTransaction(e){if(this.view.isDestroyed)return;if(this.isCapturingTransaction){if(!this.capturedTransaction){this.capturedTransaction=e;return}e.steps.forEach(u=>{var f;return(f=this.capturedTransaction)===null||f===void 0?void 0:f.step(u)});return}const t=this.state.apply(e),i=!this.state.selection.eq(t.selection);this.emit("beforeTransaction",{editor:this,transaction:e,nextState:t}),this.view.updateState(t),this.emit("transaction",{editor:this,transaction:e}),i&&this.emit("selectionUpdate",{editor:this,transaction:e});const o=e.getMeta("focus"),a=e.getMeta("blur");o&&this.emit("focus",{editor:this,event:o.event,transaction:e}),a&&this.emit("blur",{editor:this,event:a.event,transaction:e}),!(!e.docChanged||e.getMeta("preventUpdate"))&&this.emit("update",{editor:this,transaction:e})}getAttributes(e){return fT(this.state,e)}isActive(e,t){const i=typeof e=="string"?e:null,o=typeof e=="string"?t:e;return dT(this.state,i,o)}getJSON(){return this.state.doc.toJSON()}getHTML(){return Np(this.state.doc.content,this.schema)}getText(e){const{blockSeparator:t=`

`,textSerializers:i={}}=e||{};return uT(this.state.doc,{blockSeparator:t,textSerializers:{...qb(this.schema),...i}})}get isEmpty(){return zp(this.state.doc)}getCharacterCount(){return console.warn('[tiptap warn]: "editor.getCharacterCount()" is deprecated. Please use "editor.storage.characterCount.characters()" instead.'),this.state.doc.content.size-2}destroy(){if(this.emit("destroy"),this.view){const e=this.view.dom;e&&e.editor&&delete e.editor,this.view.destroy()}this.removeAllListeners()}get isDestroyed(){var e;return!(!((e=this.view)===null||e===void 0)&&e.docView)}$node(e,t){var i;return((i=this.$doc)===null||i===void 0?void 0:i.querySelector(e,t))||null}$nodes(e,t){var i;return((i=this.$doc)===null||i===void 0?void 0:i.querySelectorAll(e,t))||null}$pos(e){const t=this.state.doc.resolve(e);return new jo(t,this)}get $doc(){return this.$pos(0)}}function na(r){return new wf({find:r.find,handler:({state:e,range:t,match:i})=>{const o=ht(r.getAttributes,void 0,i);if(o===!1||o===null)return null;const{tr:a}=e,u=i[i.length-1],f=i[0];if(u){const h=f.search(/\S/),m=t.from+f.indexOf(u),v=m+u.length;if($b(t.from,t.to,e.doc).filter(O=>O.mark.type.excluded.find(A=>A===r.type&&A!==O.mark.type)).filter(O=>O.to>m).length)return null;v<t.to&&a.delete(v,t.to),m>t.from&&a.delete(t.from+h,m);const w=t.from+h+u.length;a.addMark(t.from+h,w,r.type.create(o||{})),a.removeStoredMark(r.type)}}})}function YT(r){return new wf({find:r.find,handler:({state:e,range:t,match:i})=>{const o=ht(r.getAttributes,void 0,i)||{},{tr:a}=e,u=t.from;let f=t.to;const h=r.type.create(o);if(i[1]){const m=i[0].lastIndexOf(i[1]);let v=u+m;v>f?v=f:f=v+i[1].length;const S=i[0][i[0].length-1];a.insertText(S,u+i[0].length-1),a.replaceWith(v,f,h)}else if(i[0]){const m=r.type.isInline?u:u-1;a.insert(m,r.type.create(o)).delete(a.mapping.map(u),a.mapping.map(f))}a.scrollIntoView()}})}function up(r){return new wf({find:r.find,handler:({state:e,range:t,match:i})=>{const o=e.doc.resolve(t.from),a=ht(r.getAttributes,void 0,i)||{};if(!o.node(-1).canReplaceWith(o.index(-1),o.indexAfter(-1),r.type))return null;e.tr.delete(t.from,t.to).setBlockType(t.from,t.from,r.type,a)}})}function Eu(r){return new wf({find:r.find,handler:({state:e,range:t,match:i,chain:o})=>{const a=ht(r.getAttributes,void 0,i)||{},u=e.tr.delete(t.from,t.to),h=u.doc.resolve(t.from).blockRange(),m=h&&mp(h,r.type,a);if(!m)return null;if(u.wrap(h,m),r.keepMarks&&r.editor){const{selection:S,storedMarks:w}=e,{splittableMarks:O}=r.editor.extensionManager,T=w||S.$to.parentOffset&&S.$from.marks();if(T){const A=T.filter(R=>O.includes(R.type.name));u.ensureMarks(A)}}if(r.keepAttributes){const S=r.type.name==="bulletList"||r.type.name==="orderedList"?"listItem":"taskList";o().updateAttributes(S,a).run()}const v=u.doc.resolve(t.from-1).nodeBefore;v&&v.type===r.type&&oo(u.doc,t.from-1)&&(!r.joinPredicate||r.joinPredicate(i,v))&&u.join(t.from-1)}})}class nr{constructor(e={}){this.type="node",this.name="node",this.parent=null,this.child=null,this.config={name:this.name,defaultOptions:{}},this.config={...this.config,...e},this.name=this.config.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${this.name}".`),this.options=this.config.defaultOptions,this.config.addOptions&&(this.options=ht(Ie(this,"addOptions",{name:this.name}))),this.storage=ht(Ie(this,"addStorage",{name:this.name,options:this.options}))||{}}static create(e={}){return new nr(e)}configure(e={}){const t=this.extend({...this.config,addOptions:()=>Tf(this.options,e)});return t.name=this.name,t.parent=this.parent,t}extend(e={}){const t=new nr(e);return t.parent=this,this.child=t,t.name=e.name?e.name:t.parent.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${t.name}".`),t.options=ht(Ie(t,"addOptions",{name:t.name})),t.storage=ht(Ie(t,"addStorage",{name:t.name,options:t.options})),t}}class GT{constructor(e,t,i){this.isDragging=!1,this.component=e,this.editor=t.editor,this.options={stopEvent:null,ignoreMutation:null,...i},this.extension=t.extension,this.node=t.node,this.decorations=t.decorations,this.innerDecorations=t.innerDecorations,this.view=t.view,this.HTMLAttributes=t.HTMLAttributes,this.getPos=t.getPos,this.mount()}mount(){}get dom(){return this.editor.view.dom}get contentDOM(){return null}onDragStart(e){var t,i,o,a,u,f,h;const{view:m}=this.editor,v=e.target,S=v.nodeType===3?(t=v.parentElement)===null||t===void 0?void 0:t.closest("[data-drag-handle]"):v.closest("[data-drag-handle]");if(!this.dom||!((i=this.contentDOM)===null||i===void 0)&&i.contains(v)||!S)return;let w=0,O=0;if(this.dom!==S){const Te=this.dom.getBoundingClientRect(),_e=S.getBoundingClientRect(),Le=(o=e.offsetX)!==null&&o!==void 0?o:(a=e.nativeEvent)===null||a===void 0?void 0:a.offsetX,ve=(u=e.offsetY)!==null&&u!==void 0?u:(f=e.nativeEvent)===null||f===void 0?void 0:f.offsetY;w=_e.x-Te.x+Le,O=_e.y-Te.y+ve}const T=this.dom.cloneNode(!0);(h=e.dataTransfer)===null||h===void 0||h.setDragImage(T,w,O);const A=this.getPos();if(typeof A!="number")return;const R=Xe.create(m.state.doc,A),W=m.state.tr.setSelection(R);m.dispatch(W)}stopEvent(e){var t;if(!this.dom)return!1;if(typeof this.options.stopEvent=="function")return this.options.stopEvent({event:e});const i=e.target;if(!(this.dom.contains(i)&&!(!((t=this.contentDOM)===null||t===void 0)&&t.contains(i))))return!1;const a=e.type.startsWith("drag"),u=e.type==="drop";if((["INPUT","BUTTON","SELECT","TEXTAREA"].includes(i.tagName)||i.isContentEditable)&&!u&&!a)return!0;const{isEditable:h}=this.editor,{isDragging:m}=this,v=!!this.node.type.spec.draggable,S=Xe.isSelectable(this.node),w=e.type==="copy",O=e.type==="paste",T=e.type==="cut",A=e.type==="mousedown";if(!v&&S&&a&&e.target===this.dom&&e.preventDefault(),v&&a&&!m&&e.target===this.dom)return e.preventDefault(),!1;if(v&&h&&!m&&A){const R=i.closest("[data-drag-handle]");R&&(this.dom===R||this.dom.contains(R))&&(this.isDragging=!0,document.addEventListener("dragend",()=>{this.isDragging=!1},{once:!0}),document.addEventListener("drop",()=>{this.isDragging=!1},{once:!0}),document.addEventListener("mouseup",()=>{this.isDragging=!1},{once:!0}))}return!(m||u||w||O||T||A&&S)}ignoreMutation(e){return!this.dom||!this.contentDOM?!0:typeof this.options.ignoreMutation=="function"?this.options.ignoreMutation({mutation:e}):this.node.isLeaf||this.node.isAtom?!0:e.type==="selection"||this.dom.contains(e.target)&&e.type==="childList"&&(Of()||Kb())&&this.editor.isFocused&&[...Array.from(e.addedNodes),...Array.from(e.removedNodes)].every(i=>i.isContentEditable)?!1:this.contentDOM===e.target&&e.type==="attributes"?!0:!this.contentDOM.contains(e.target)}updateAttributes(e){this.editor.commands.command(({tr:t})=>{const i=this.getPos();return typeof i!="number"?!1:(t.setNodeMarkup(i,void 0,{...this.node.attrs,...e}),!0)})}deleteNode(){const e=this.getPos();if(typeof e!="number")return;const t=e+this.node.nodeSize;this.editor.commands.deleteRange({from:e,to:t})}}function ra(r){return new fw({find:r.find,handler:({state:e,range:t,match:i,pasteEvent:o})=>{const a=ht(r.getAttributes,void 0,i,o);if(a===!1||a===null)return null;const{tr:u}=e,f=i[i.length-1],h=i[0];let m=t.to;if(f){const v=h.search(/\S/),S=t.from+h.indexOf(f),w=S+f.length;if($b(t.from,t.to,e.doc).filter(T=>T.mark.type.excluded.find(R=>R===r.type&&R!==T.mark.type)).filter(T=>T.to>S).length)return null;w<t.to&&u.delete(w,t.to),S>t.from&&u.delete(t.from+v,S),m=t.from+v+f.length,u.addMark(t.from+v,m,r.type.create(a||{})),u.removeStoredMark(r.type)}}})}var Xb=cv();const $T=Mu(Xb);function XT(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}var Fb={exports:{}},qh={};/**
 * @license React
 * use-sync-external-store-shim.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var J0;function FT(){if(J0)return qh;J0=1;var r=rn;function e(S,w){return S===w&&(S!==0||1/S===1/w)||S!==S&&w!==w}var t=typeof Object.is=="function"?Object.is:e,i=r.useState,o=r.useEffect,a=r.useLayoutEffect,u=r.useDebugValue;function f(S,w){var O=w(),T=i({inst:{value:O,getSnapshot:w}}),A=T[0].inst,R=T[1];return a(function(){A.value=O,A.getSnapshot=w,h(A)&&R({inst:A})},[S,O,w]),o(function(){return h(A)&&R({inst:A}),S(function(){h(A)&&R({inst:A})})},[S]),u(O),O}function h(S){var w=S.getSnapshot;S=S.value;try{var O=w();return!t(S,O)}catch{return!0}}function m(S,w){return w()}var v=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?m:f;return qh.useSyncExternalStore=r.useSyncExternalStore!==void 0?r.useSyncExternalStore:v,qh}Fb.exports=FT();var Lp=Fb.exports;const QT=(...r)=>e=>{r.forEach(t=>{typeof t=="function"?t(e):t&&(t.current=e)})},JT=({contentComponent:r})=>{const e=Lp.useSyncExternalStore(r.subscribe,r.getSnapshot,r.getServerSnapshot);return rn.createElement(rn.Fragment,null,Object.values(e))};function ZT(){const r=new Set;let e={};return{subscribe(t){return r.add(t),()=>{r.delete(t)}},getSnapshot(){return e},getServerSnapshot(){return e},setRenderer(t,i){e={...e,[t]:$T.createPortal(i.reactElement,i.element,t)},r.forEach(o=>o())},removeRenderer(t){const i={...e};delete i[t],e=i,r.forEach(o=>o())}}}class WT extends rn.Component{constructor(e){var t;super(e),this.editorContentRef=rn.createRef(),this.initialized=!1,this.state={hasContentComponentInitialized:!!(!((t=e.editor)===null||t===void 0)&&t.contentComponent)}}componentDidMount(){this.init()}componentDidUpdate(){this.init()}init(){const e=this.props.editor;if(e&&!e.isDestroyed&&e.options.element){if(e.contentComponent)return;const t=this.editorContentRef.current;t.append(...e.options.element.childNodes),e.setOptions({element:t}),e.contentComponent=ZT(),this.state.hasContentComponentInitialized||(this.unsubscribeToContentComponent=e.contentComponent.subscribe(()=>{this.setState(i=>i.hasContentComponentInitialized?i:{hasContentComponentInitialized:!0}),this.unsubscribeToContentComponent&&this.unsubscribeToContentComponent()})),e.createNodeViews(),this.initialized=!0}}componentWillUnmount(){const e=this.props.editor;if(!e||(this.initialized=!1,e.isDestroyed||e.view.setProps({nodeViews:{}}),this.unsubscribeToContentComponent&&this.unsubscribeToContentComponent(),e.contentComponent=null,!e.options.element.firstChild))return;const t=document.createElement("div");t.append(...e.options.element.childNodes),e.setOptions({element:t})}render(){const{editor:e,innerRef:t,...i}=this.props;return rn.createElement(rn.Fragment,null,rn.createElement("div",{ref:QT(t,this.editorContentRef),...i}),(e==null?void 0:e.contentComponent)&&rn.createElement(JT,{contentComponent:e.contentComponent}))}}const eO=Pe.forwardRef((r,e)=>{const t=rn.useMemo(()=>Math.floor(Math.random()*4294967295).toString(),[r.editor]);return rn.createElement(WT,{key:t,innerRef:e,...r})}),tO=rn.memo(eO);var nO=function r(e,t){if(e===t)return!0;if(e&&t&&typeof e=="object"&&typeof t=="object"){if(e.constructor!==t.constructor)return!1;var i,o,a;if(Array.isArray(e)){if(i=e.length,i!=t.length)return!1;for(o=i;o--!==0;)if(!r(e[o],t[o]))return!1;return!0}if(e instanceof Map&&t instanceof Map){if(e.size!==t.size)return!1;for(o of e.entries())if(!t.has(o[0]))return!1;for(o of e.entries())if(!r(o[1],t.get(o[0])))return!1;return!0}if(e instanceof Set&&t instanceof Set){if(e.size!==t.size)return!1;for(o of e.entries())if(!t.has(o[0]))return!1;return!0}if(ArrayBuffer.isView(e)&&ArrayBuffer.isView(t)){if(i=e.length,i!=t.length)return!1;for(o=i;o--!==0;)if(e[o]!==t[o])return!1;return!0}if(e.constructor===RegExp)return e.source===t.source&&e.flags===t.flags;if(e.valueOf!==Object.prototype.valueOf)return e.valueOf()===t.valueOf();if(e.toString!==Object.prototype.toString)return e.toString()===t.toString();if(a=Object.keys(e),i=a.length,i!==Object.keys(t).length)return!1;for(o=i;o--!==0;)if(!Object.prototype.hasOwnProperty.call(t,a[o]))return!1;for(o=i;o--!==0;){var u=a[o];if(!(u==="_owner"&&e.$$typeof)&&!r(e[u],t[u]))return!1}return!0}return e!==e&&t!==t},rO=XT(nO),Qb={exports:{}},Uh={};/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Z0;function iO(){if(Z0)return Uh;Z0=1;var r=rn,e=Lp;function t(m,v){return m===v&&(m!==0||1/m===1/v)||m!==m&&v!==v}var i=typeof Object.is=="function"?Object.is:t,o=e.useSyncExternalStore,a=r.useRef,u=r.useEffect,f=r.useMemo,h=r.useDebugValue;return Uh.useSyncExternalStoreWithSelector=function(m,v,S,w,O){var T=a(null);if(T.current===null){var A={hasValue:!1,value:null};T.current=A}else A=T.current;T=f(function(){function W(Re){if(!Te){if(Te=!0,_e=Re,Re=w(Re),O!==void 0&&A.hasValue){var Fe=A.value;if(O(Fe,Re))return Le=Fe}return Le=Re}if(Fe=Le,i(_e,Re))return Fe;var me=w(Re);return O!==void 0&&O(Fe,me)?Fe:(_e=Re,Le=me)}var Te=!1,_e,Le,ve=S===void 0?null:S;return[function(){return W(v())},ve===null?void 0:function(){return W(ve())}]},[v,S,w,O]);var R=o(m,T[0],T[1]);return u(function(){A.hasValue=!0,A.value=R},[R]),h(R),R},Uh}Qb.exports=iO();var sO=Qb.exports;const oO=typeof window<"u"?Pe.useLayoutEffect:Pe.useEffect;class lO{constructor(e){this.transactionNumber=0,this.lastTransactionNumber=0,this.subscribers=new Set,this.editor=e,this.lastSnapshot={editor:e,transactionNumber:0},this.getSnapshot=this.getSnapshot.bind(this),this.getServerSnapshot=this.getServerSnapshot.bind(this),this.watch=this.watch.bind(this),this.subscribe=this.subscribe.bind(this)}getSnapshot(){return this.transactionNumber===this.lastTransactionNumber?this.lastSnapshot:(this.lastTransactionNumber=this.transactionNumber,this.lastSnapshot={editor:this.editor,transactionNumber:this.transactionNumber},this.lastSnapshot)}getServerSnapshot(){return{editor:null,transactionNumber:0}}subscribe(e){return this.subscribers.add(e),()=>{this.subscribers.delete(e)}}watch(e){if(this.editor=e,this.editor){const t=()=>{this.transactionNumber+=1,this.subscribers.forEach(o=>o())},i=this.editor;return i.on("transaction",t),()=>{i.off("transaction",t)}}}}function aO(r){var e;const[t]=Pe.useState(()=>new lO(r.editor)),i=sO.useSyncExternalStoreWithSelector(t.subscribe,t.getSnapshot,t.getServerSnapshot,r.selector,(e=r.equalityFn)!==null&&e!==void 0?e:rO);return oO(()=>t.watch(r.editor),[r.editor,t]),Pe.useDebugValue(i),i}const uO=!1,cp=typeof window>"u",cO=cp||!!(typeof window<"u"&&window.next);class jp{constructor(e){this.editor=null,this.subscriptions=new Set,this.isComponentMounted=!1,this.previousDeps=null,this.instanceId="",this.options=e,this.subscriptions=new Set,this.setEditor(this.getInitialEditor()),this.scheduleDestroy(),this.getEditor=this.getEditor.bind(this),this.getServerSnapshot=this.getServerSnapshot.bind(this),this.subscribe=this.subscribe.bind(this),this.refreshEditorInstance=this.refreshEditorInstance.bind(this),this.scheduleDestroy=this.scheduleDestroy.bind(this),this.onRender=this.onRender.bind(this),this.createEditor=this.createEditor.bind(this)}setEditor(e){this.editor=e,this.instanceId=Math.random().toString(36).slice(2,9),this.subscriptions.forEach(t=>t())}getInitialEditor(){return this.options.current.immediatelyRender===void 0?cp||cO?null:this.createEditor():(this.options.current.immediatelyRender,this.options.current.immediatelyRender?this.createEditor():null)}createEditor(){const e={...this.options.current,onBeforeCreate:(...i)=>{var o,a;return(a=(o=this.options.current).onBeforeCreate)===null||a===void 0?void 0:a.call(o,...i)},onBlur:(...i)=>{var o,a;return(a=(o=this.options.current).onBlur)===null||a===void 0?void 0:a.call(o,...i)},onCreate:(...i)=>{var o,a;return(a=(o=this.options.current).onCreate)===null||a===void 0?void 0:a.call(o,...i)},onDestroy:(...i)=>{var o,a;return(a=(o=this.options.current).onDestroy)===null||a===void 0?void 0:a.call(o,...i)},onFocus:(...i)=>{var o,a;return(a=(o=this.options.current).onFocus)===null||a===void 0?void 0:a.call(o,...i)},onSelectionUpdate:(...i)=>{var o,a;return(a=(o=this.options.current).onSelectionUpdate)===null||a===void 0?void 0:a.call(o,...i)},onTransaction:(...i)=>{var o,a;return(a=(o=this.options.current).onTransaction)===null||a===void 0?void 0:a.call(o,...i)},onUpdate:(...i)=>{var o,a;return(a=(o=this.options.current).onUpdate)===null||a===void 0?void 0:a.call(o,...i)},onContentError:(...i)=>{var o,a;return(a=(o=this.options.current).onContentError)===null||a===void 0?void 0:a.call(o,...i)},onDrop:(...i)=>{var o,a;return(a=(o=this.options.current).onDrop)===null||a===void 0?void 0:a.call(o,...i)},onPaste:(...i)=>{var o,a;return(a=(o=this.options.current).onPaste)===null||a===void 0?void 0:a.call(o,...i)}};return new PT(e)}getEditor(){return this.editor}getServerSnapshot(){return null}subscribe(e){return this.subscriptions.add(e),()=>{this.subscriptions.delete(e)}}static compareOptions(e,t){return Object.keys(e).every(i=>["onCreate","onBeforeCreate","onDestroy","onUpdate","onTransaction","onFocus","onBlur","onSelectionUpdate","onContentError","onDrop","onPaste"].includes(i)?!0:i==="extensions"&&e.extensions&&t.extensions?e.extensions.length!==t.extensions.length?!1:e.extensions.every((o,a)=>{var u;return o===((u=t.extensions)===null||u===void 0?void 0:u[a])}):e[i]===t[i])}onRender(e){return()=>(this.isComponentMounted=!0,clearTimeout(this.scheduledDestructionTimeout),this.editor&&!this.editor.isDestroyed&&e.length===0?jp.compareOptions(this.options.current,this.editor.options)||this.editor.setOptions({...this.options.current,editable:this.editor.isEditable}):this.refreshEditorInstance(e),()=>{this.isComponentMounted=!1,this.scheduleDestroy()})}refreshEditorInstance(e){if(this.editor&&!this.editor.isDestroyed){if(this.previousDeps===null){this.previousDeps=e;return}if(this.previousDeps.length===e.length&&this.previousDeps.every((i,o)=>i===e[o]))return}this.editor&&!this.editor.isDestroyed&&this.editor.destroy(),this.setEditor(this.createEditor()),this.previousDeps=e}scheduleDestroy(){const e=this.instanceId,t=this.editor;this.scheduledDestructionTimeout=setTimeout(()=>{if(this.isComponentMounted&&this.instanceId===e){t&&t.setOptions(this.options.current);return}t&&!t.isDestroyed&&(t.destroy(),this.instanceId===e&&this.setEditor(null))},1)}}function fO(r={},e=[]){const t=Pe.useRef(r);t.current=r;const[i]=Pe.useState(()=>new jp(t)),o=Lp.useSyncExternalStore(i.subscribe,i.getEditor,i.getServerSnapshot);return Pe.useDebugValue(o),Pe.useEffect(i.onRender(e)),aO({editor:o,selector:({transactionNumber:a})=>r.shouldRerenderOnTransaction===!1?null:r.immediatelyRender&&a===0?0:a+1}),o}const dO=Pe.createContext({editor:null});dO.Consumer;const Jb=Pe.createContext({onDragStart:void 0}),Zb=()=>Pe.useContext(Jb),hO=r=>{const e=r.as||"div",{nodeViewContentRef:t}=Zb();return rn.createElement(e,{...r,ref:t,"data-node-view-content":"",style:{whiteSpace:"pre-wrap",...r.style}})},Wb=rn.forwardRef((r,e)=>{const{onDragStart:t}=Zb(),i=r.as||"div";return rn.createElement(i,{...r,ref:e,"data-node-view-wrapper":"",onDragStart:t,style:{whiteSpace:"normal",...r.style}})});function pO(r){return!!(typeof r=="function"&&r.prototype&&r.prototype.isReactComponent)}function mO(r){var e;return typeof r=="object"&&((e=r.$$typeof)===null||e===void 0?void 0:e.toString())==="Symbol(react.forward_ref)"}class gO{constructor(e,{editor:t,props:i={},as:o="div",className:a=""}){this.ref=null,this.id=Math.floor(Math.random()*4294967295).toString(),this.component=e,this.editor=t,this.props=i,this.element=document.createElement(o),this.element.classList.add("react-renderer"),a&&this.element.classList.add(...a.split(" ")),this.editor.isInitialized?Xb.flushSync(()=>{this.render()}):this.render()}render(){var e;const t=this.component,i=this.props,o=this.editor;(pO(t)||mO(t))&&(i.ref=a=>{this.ref=a}),this.reactElement=rn.createElement(t,{...i}),(e=o==null?void 0:o.contentComponent)===null||e===void 0||e.setRenderer(this.id,this)}updateProps(e={}){this.props={...this.props,...e},this.render()}destroy(){var e;const t=this.editor;(e=t==null?void 0:t.contentComponent)===null||e===void 0||e.removeRenderer(this.id)}updateAttributes(e){Object.keys(e).forEach(t=>{this.element.setAttribute(t,e[t])})}}class yO extends GT{mount(){const e={editor:this.editor,node:this.node,decorations:this.decorations,innerDecorations:this.innerDecorations,view:this.view,selected:!1,extension:this.extension,HTMLAttributes:this.HTMLAttributes,getPos:()=>this.getPos(),updateAttributes:(m={})=>this.updateAttributes(m),deleteNode:()=>this.deleteNode()};if(!this.component.displayName){const m=v=>v.charAt(0).toUpperCase()+v.substring(1);this.component.displayName=m(this.extension.name)}const o={onDragStart:this.onDragStart.bind(this),nodeViewContentRef:m=>{m&&this.contentDOMElement&&m.firstChild!==this.contentDOMElement&&m.appendChild(this.contentDOMElement)}},a=this.component,u=rn.memo(m=>rn.createElement(Jb.Provider,{value:o},rn.createElement(a,m)));u.displayName="ReactNodeView",this.node.isLeaf?this.contentDOMElement=null:this.options.contentDOMElementTag?this.contentDOMElement=document.createElement(this.options.contentDOMElementTag):this.contentDOMElement=document.createElement(this.node.isInline?"span":"div"),this.contentDOMElement&&(this.contentDOMElement.dataset.nodeViewContentReact="",this.contentDOMElement.style.whiteSpace="inherit");let f=this.node.isInline?"span":"div";this.options.as&&(f=this.options.as);const{className:h=""}=this.options;this.handleSelectionUpdate=this.handleSelectionUpdate.bind(this),this.renderer=new gO(u,{editor:this.editor,props:e,as:f,className:`node-${this.node.type.name} ${h}`.trim()}),this.editor.on("selectionUpdate",this.handleSelectionUpdate),this.updateElementAttributes()}get dom(){var e;if(this.renderer.element.firstElementChild&&!(!((e=this.renderer.element.firstElementChild)===null||e===void 0)&&e.hasAttribute("data-node-view-wrapper")))throw Error("Please use the NodeViewWrapper component for your node view.");return this.renderer.element}get contentDOM(){return this.node.isLeaf?null:this.contentDOMElement}handleSelectionUpdate(){const{from:e,to:t}=this.editor.state.selection,i=this.getPos();if(typeof i=="number")if(e<=i&&t>=i+this.node.nodeSize){if(this.renderer.props.selected)return;this.selectNode()}else{if(!this.renderer.props.selected)return;this.deselectNode()}}update(e,t,i){const o=a=>{this.renderer.updateProps(a),typeof this.options.attrs=="function"&&this.updateElementAttributes()};if(e.type!==this.node.type)return!1;if(typeof this.options.update=="function"){const a=this.node,u=this.decorations,f=this.innerDecorations;return this.node=e,this.decorations=t,this.innerDecorations=i,this.options.update({oldNode:a,oldDecorations:u,newNode:e,newDecorations:t,oldInnerDecorations:f,innerDecorations:i,updateProps:()=>o({node:e,decorations:t,innerDecorations:i})})}return e===this.node&&this.decorations===t&&this.innerDecorations===i||(this.node=e,this.decorations=t,this.innerDecorations=i,o({node:e,decorations:t,innerDecorations:i})),!0}selectNode(){this.renderer.updateProps({selected:!0}),this.renderer.element.classList.add("ProseMirror-selectednode")}deselectNode(){this.renderer.updateProps({selected:!1}),this.renderer.element.classList.remove("ProseMirror-selectednode")}destroy(){this.renderer.destroy(),this.editor.off("selectionUpdate",this.handleSelectionUpdate),this.contentDOMElement=null}updateElementAttributes(){if(this.options.attrs){let e={};if(typeof this.options.attrs=="function"){const t=this.editor.extensionManager.attributes,i=cf(this.node,t);e=this.options.attrs({node:this.node,HTMLAttributes:i})}else e=this.options.attrs;this.renderer.updateAttributes(e)}}}function e1(r,e){return t=>t.editor.contentComponent?new yO(r,t,e):{}}const vO="_button_1eesi_1",bO="_active_1eesi_27",W0={button:vO,active:bO},SO=({onClick:r,isActive:e=!1,children:t,title:i})=>ue.jsx("button",{onClick:r,title:i,className:`${W0.button} ${e?W0.active:""}`,type:"button",children:t}),Il=({buttons:r,editor:e,actions:t,activeStates:i})=>ue.jsx(ue.Fragment,{children:r.map(({id:o,icon:a,title:u,action:f,data:h})=>ue.jsx(SO,{onClick:()=>{var m;return(m=t[f])==null?void 0:m.call(t,h)},isActive:i[o]||!1,title:u,children:ue.jsx(a,{size:18})},o))}),xO="_toolbar_1j7em_1",EO="_divider_1j7em_13",t1={toolbar:xO,divider:EO},Kl=({children:r,showDivider:e=!0})=>ue.jsxs(ue.Fragment,{children:[r,e&&ue.jsx("div",{className:t1.divider})]}),MO=r=>{const e=()=>r.chain().focus().toggleBold().run(),t=()=>r.chain().focus().toggleItalic().run(),i=()=>r.chain().focus().toggleUnderline().run(),o=()=>r.chain().focus().unsetAllMarks().run(),a=()=>r.chain().focus().setParagraph().run(),u=h=>r.chain().focus().toggleHeading({level:h}).run(),f=r.isActive("heading",{level:1})||r.isActive("heading",{level:2})||r.isActive("heading",{level:3});return{toggleBold:e,toggleItalic:t,toggleUnderline:i,clearTextFormatting:o,toggleParagraph:a,toggleHeading:u,isAnyHeadingActive:f}},wO=r=>({toggleBulletList:()=>r.chain().focus().toggleBulletList().run(),toggleOrderedList:()=>r.chain().focus().toggleOrderedList().run(),sinkListItem:()=>r.chain().focus().sinkListItem("listItem").run(),liftListItem:()=>r.chain().focus().liftListItem("listItem").run()}),TO=(r,e)=>({insertImageFromFile:async()=>{const o=document.createElement("input");o.type="file",o.accept="image/*",o.onchange=async a=>{var f;const u=(f=a.target.files)==null?void 0:f[0];if(u)try{const h=await hu.create({blob:u,documentId:e});r.chain().focus().setImage({src:`db:${h}`,alt:u.name.split(".")[0]}).run()}catch(h){console.error("Failed to save image:",h),alert("Failed to save image")}},o.click()},insertImageFromUrl:()=>{const o=prompt("Enter image URL:");if(o&&o.trim())try{new URL(o),r.chain().focus().setImage({src:o.trim()}).run()}catch{alert("Please enter a valid URL")}}}),OO=r=>{const e=T=>(r.getHTML().match(T)||[]).length,t=(T,A,R,W)=>`<${T} id="${A}" data-toc-title="${R}"><p>${W}</p></${T}>`,i=(T,A)=>{const R=r.chain().focus();A!==void 0?R.insertContentAt(A,T):R.insertContent(T),R.run()},o=(T,A)=>{const{state:R}=r;for(let W=R.selection.$from.depth;W>0;W--){const Te=R.selection.$from.node(W);if(Te.type.name==="section"&&W===T&&(!A||Te.attrs.tagName===A))return{found:!0,start:R.selection.$from.start(W)-1,size:Te.nodeSize}}return{found:!1}},a=()=>{const{state:T}=r;for(let A=T.selection.$from.depth;A>0;A--){const R=T.selection.$from.node(A);if(R.type.name==="section"&&R.attrs.tagName==="div")return A}},u=(T,A)=>{const R=o(T,A);return R.found?R.start+R.size:void 0},f=()=>o(1).found,h=()=>o(2).found,m=()=>o(2,"div").found||o(3,"div").found||o(4,"div").found;return{insertChapter:()=>{const T=e(/<section[^>]*data-toc-title="[^"]*"[^>]*>/g)+1,A=t("section",`chapter${T}`,`Chapter ${T}`,"Chapter content goes here..."),R=o(1),W=R.found?R.start+R.size:r.state.doc.content.size;i(A,W)},insertPart:()=>{if(!f()){alert("Parts can only be added inside chapters. Please position your cursor inside a chapter first.");return}const T=e(/<section[^>]*data-toc-title="[^"]*"[^>]*>/g)+1,A=t("section",`part${T}`,`Part ${T}`,"Part content goes here..."),R=h()?u(2):void 0;i(A,R)},insertContainer:()=>{if(!h()&&!m()){alert("Special containers can only be added inside parts or other containers. Please position your cursor inside a part or container first.");return}const T=e(/<div[^>]*data-toc-title="[^"]*"[^>]*>/g)+1,A=t("div",`container${T}`,`Container ${T}`,"Container content goes here...");let R;if(m()){const W=a();W!==void 0&&(R=u(W,"div"))}i(A,R)},insertNestedContainer:()=>{if(!h()&&!m()){alert("Special containers can only be added inside parts or other containers. Please position your cursor inside a part or container first.");return}const T=e(/<div[^>]*data-toc-title="[^"]*"[^>]*>/g)+1,A=t("div",`container${T}`,`Container ${T}`,"Container content goes here...");i(A)}}},n1='<section id="prologue" data-toc-title="Prologue" data-section-type="chapter"><section id="prologue_intro" data-toc-title="Intro" data-section-type="part"><p></p></section></section>',kO=(r,e,t,i)=>{const o=MO(r),a=wO(r),u=TO(r,e),f=OO(r),h=async()=>{try{e&&(await Yc.delete(e),await hu.cleanupOrphaned()),t==null||t(void 0),r==null||r.commands.setContent(n1)}catch(S){console.error("Failed to delete document:",S)}};return{actions:{toggleFormat:S=>{var O;const w={bold:o.toggleBold,italic:o.toggleItalic,underline:o.toggleUnderline};(O=w[S])==null||O.call(w)},clearFormatting:o.clearTextFormatting,toggleParagraph:o.toggleParagraph,toggleHeading:S=>o.toggleHeading(S),toggleBulletList:a.toggleBulletList,toggleOrderedList:a.toggleOrderedList,insertImageFromUrl:u.insertImageFromUrl,insertImageFromFile:u.insertImageFromFile,insertChapter:f.insertChapter,insertPart:f.insertPart,insertContainer:f.insertContainer,insertNestedContainer:f.insertNestedContainer,deleteCurrentDocument:h},getActiveStates:()=>({bold:r.isActive("bold"),italic:r.isActive("italic"),underline:r.isActive("underline"),paragraph:!o.isAnyHeadingActive&&r.isActive("paragraph"),h1:r.isActive("heading",{level:1}),h2:r.isActive("heading",{level:2}),h3:r.isActive("heading",{level:3}),bulletList:r.isActive("bulletList"),orderedList:r.isActive("orderedList")})}};/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CO=r=>r.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),AO=r=>r.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,i)=>i?i.toUpperCase():t.toLowerCase()),ev=r=>{const e=AO(r);return e.charAt(0).toUpperCase()+e.slice(1)},r1=(...r)=>r.filter((e,t,i)=>!!e&&e.trim()!==""&&i.indexOf(e)===t).join(" ").trim(),_O=r=>{for(const e in r)if(e.startsWith("aria-")||e==="role"||e==="title")return!0};/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var NO={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DO=Pe.forwardRef(({color:r="currentColor",size:e=24,strokeWidth:t=2,absoluteStrokeWidth:i,className:o="",children:a,iconNode:u,...f},h)=>Pe.createElement("svg",{ref:h,...NO,width:e,height:e,stroke:r,strokeWidth:i?Number(t)*24/Number(e):t,className:r1("lucide",o),...!a&&!_O(f)&&{"aria-hidden":"true"},...f},[...u.map(([m,v])=>Pe.createElement(m,v)),...Array.isArray(a)?a:[a]]));/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mn=(r,e)=>{const t=Pe.forwardRef(({className:i,...o},a)=>Pe.createElement(DO,{ref:a,iconNode:e,className:r1(`lucide-${CO(ev(r))}`,`lucide-${r}`,i),...o}));return t.displayName=ev(r),t};/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RO=[["path",{d:"M17 7 7 17",key:"15tmo1"}],["path",{d:"M17 17H7V7",key:"1org7z"}]],BO=mn("arrow-down-left",RO);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zO=[["path",{d:"M6 12h9a4 4 0 0 1 0 8H7a1 1 0 0 1-1-1V5a1 1 0 0 1 1-1h7a4 4 0 0 1 0 8",key:"mg9rjx"}]],LO=mn("bold",zO);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jO=[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]],HO=mn("book-open",jO);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qO=[["path",{d:"M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z",key:"hh9hay"}],["path",{d:"m3.3 7 8.7 5 8.7-5",key:"g66t2b"}],["path",{d:"M12 22V12",key:"d0xqtd"}]],UO=mn("box",qO);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VO=[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]],IO=mn("copy",VO);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KO=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],PO=mn("file-text",KO);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YO=[["path",{d:"M4 12h8",key:"17cfdx"}],["path",{d:"M4 18V6",key:"1rz3zl"}],["path",{d:"M12 18V6",key:"zqpxq5"}],["path",{d:"m17 12 3-2v8",key:"1hhhft"}]],GO=mn("heading-1",YO);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $O=[["path",{d:"M4 12h8",key:"17cfdx"}],["path",{d:"M4 18V6",key:"1rz3zl"}],["path",{d:"M12 18V6",key:"zqpxq5"}],["path",{d:"M21 18h-4c0-4 4-3 4-6 0-1.5-2-2.5-4-1",key:"9jr5yi"}]],XO=mn("heading-2",$O);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FO=[["path",{d:"M4 12h8",key:"17cfdx"}],["path",{d:"M4 18V6",key:"1rz3zl"}],["path",{d:"M12 18V6",key:"zqpxq5"}],["path",{d:"M17.5 10.5c1.7-1 3.5 0 3.5 1.5a2 2 0 0 1-2 2",key:"68ncm8"}],["path",{d:"M17 17.5c2 1.5 4 .3 4-1.5a2 2 0 0 0-2-2",key:"1ejuhz"}]],QO=mn("heading-3",FO);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JO=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]],ZO=mn("image",JO);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WO=[["line",{x1:"19",x2:"10",y1:"4",y2:"4",key:"15jd3p"}],["line",{x1:"14",x2:"5",y1:"20",y2:"20",key:"bu0au3"}],["line",{x1:"15",x2:"9",y1:"4",y2:"20",key:"uljnxc"}]],ek=mn("italic",WO);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tk=[["path",{d:"M10 12h11",key:"6m4ad9"}],["path",{d:"M10 18h11",key:"11hvi2"}],["path",{d:"M10 6h11",key:"c7qv1k"}],["path",{d:"M4 10h2",key:"16xx2s"}],["path",{d:"M4 6h1v4",key:"cnovpq"}],["path",{d:"M6 18H4c0-1 2-2 2-3s-1-1.5-2-1",key:"m9a95d"}]],nk=mn("list-ordered",tk);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rk=[["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M3 18h.01",key:"1tta3j"}],["path",{d:"M3 6h.01",key:"1rqtza"}],["path",{d:"M8 12h13",key:"1za7za"}],["path",{d:"M8 18h13",key:"1lx6n3"}],["path",{d:"M8 6h13",key:"ik3vkj"}]],ik=mn("list",rk);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sk=[["path",{d:"M4 7V4h16v3",key:"9msm58"}],["path",{d:"M5 20h6",key:"1h6pxn"}],["path",{d:"M13 4 8 20",key:"kqq6aj"}],["path",{d:"m15 15 5 5",key:"me55sn"}],["path",{d:"m20 15-5 5",key:"11p7ol"}]],ok=mn("remove-formatting",sk);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lk=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]],ak=mn("rotate-ccw",lk);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uk=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]],ck=mn("square",uk);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fk=[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]],dk=mn("trash-2",fk);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hk=[["path",{d:"M12 4v16",key:"1654pz"}],["path",{d:"M4 7V5a1 1 0 0 1 1-1h14a1 1 0 0 1 1 1v2",key:"e0r10z"}],["path",{d:"M9 20h6",key:"s66wpe"}]],pk=mn("type",hk);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mk=[["path",{d:"M6 4v6a6 6 0 0 0 12 0V4",key:"9kb039"}],["line",{x1:"4",x2:"20",y1:"20",y2:"20",key:"nun2al"}]],gk=mn("underline",mk);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yk=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],fp=mn("x",yk),Pl={formatting:[{id:"bold",icon:LO,title:"Bold",action:"toggleFormat",data:"bold"},{id:"italic",icon:ek,title:"Italic",action:"toggleFormat",data:"italic"},{id:"underline",icon:gk,title:"Underline",action:"toggleFormat",data:"underline"},{id:"clear",icon:ok,title:"Reset formatting",action:"clearFormatting"}],headings:[{id:"paragraph",icon:pk,title:"Normal Text",action:"toggleParagraph"},{id:"h1",icon:GO,title:"Heading 1",action:"toggleHeading",data:1},{id:"h2",icon:XO,title:"Heading 2",action:"toggleHeading",data:2},{id:"h3",icon:QO,title:"Heading 3",action:"toggleHeading",data:3}],lists:[{id:"bulletList",icon:ik,title:"Bullet List",action:"toggleBulletList"},{id:"orderedList",icon:nk,title:"Numbered List",action:"toggleOrderedList"}],media:[{id:"imageFile",icon:ZO,title:"Add image",action:"insertImageFromFile"}],structure:[{id:"chapter",icon:HO,title:"Add Chapter (root level)",action:"insertChapter"},{id:"part",icon:PO,title:"Add Part (section)",action:"insertPart"},{id:"container",icon:UO,title:"Add Container (as sibling)",action:"insertContainer"},{id:"nestedContainer",icon:ck,title:"Add Nested Container (inside current)",action:"insertNestedContainer"}],document:[{id:"deleteAndNew",icon:dk,title:"Delete Document & Create New",action:"deleteCurrentDocument"}]},vk=({editor:r,currentDocumentId:e,setCurrentDocumentId:t})=>{const{actions:i,getActiveStates:o}=kO(r,e,t),a=o();return ue.jsxs("div",{className:t1.toolbar,children:[ue.jsx(Kl,{children:ue.jsx(Il,{buttons:Pl.formatting,editor:r,actions:i,activeStates:a})}),ue.jsx(Kl,{children:ue.jsx(Il,{buttons:Pl.headings,editor:r,actions:i,activeStates:a})}),ue.jsx(Kl,{children:ue.jsx(Il,{buttons:Pl.lists,editor:r,actions:i,activeStates:a})}),ue.jsx(Kl,{children:ue.jsx(Il,{buttons:Pl.media,editor:r,actions:i,activeStates:a})}),ue.jsx(Kl,{children:ue.jsx(Il,{buttons:Pl.structure,editor:r,actions:i,activeStates:a})}),ue.jsx(Kl,{children:ue.jsx(Il,{buttons:Pl.document,editor:r,actions:i,activeStates:a})})]})},bk=/^\s*>\s$/,Sk=nr.create({name:"blockquote",addOptions(){return{HTMLAttributes:{}}},content:"block+",group:"block",defining:!0,parseHTML(){return[{tag:"blockquote"}]},renderHTML({HTMLAttributes:r}){return["blockquote",zn(this.options.HTMLAttributes,r),0]},addCommands(){return{setBlockquote:()=>({commands:r})=>r.wrapIn(this.name),toggleBlockquote:()=>({commands:r})=>r.toggleWrap(this.name),unsetBlockquote:()=>({commands:r})=>r.lift(this.name)}},addKeyboardShortcuts(){return{"Mod-Shift-b":()=>this.editor.commands.toggleBlockquote()}},addInputRules(){return[Eu({find:bk,type:this.type})]}}),xk=/(?:^|\s)(\*\*(?!\s+\*\*)((?:[^*]+))\*\*(?!\s+\*\*))$/,Ek=/(?:^|\s)(\*\*(?!\s+\*\*)((?:[^*]+))\*\*(?!\s+\*\*))/g,Mk=/(?:^|\s)(__(?!\s+__)((?:[^_]+))__(?!\s+__))$/,wk=/(?:^|\s)(__(?!\s+__)((?:[^_]+))__(?!\s+__))/g,Tk=ys.create({name:"bold",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"strong"},{tag:"b",getAttrs:r=>r.style.fontWeight!=="normal"&&null},{style:"font-weight=400",clearMark:r=>r.type.name===this.name},{style:"font-weight",getAttrs:r=>/^(bold(er)?|[5-9]\d{2,})$/.test(r)&&null}]},renderHTML({HTMLAttributes:r}){return["strong",zn(this.options.HTMLAttributes,r),0]},addCommands(){return{setBold:()=>({commands:r})=>r.setMark(this.name),toggleBold:()=>({commands:r})=>r.toggleMark(this.name),unsetBold:()=>({commands:r})=>r.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-b":()=>this.editor.commands.toggleBold(),"Mod-B":()=>this.editor.commands.toggleBold()}},addInputRules(){return[na({find:xk,type:this.type}),na({find:Mk,type:this.type})]},addPasteRules(){return[ra({find:Ek,type:this.type}),ra({find:wk,type:this.type})]}}),Ok="listItem",tv="textStyle",nv=/^\s*([-+*])\s$/,kk=nr.create({name:"bulletList",addOptions(){return{itemTypeName:"listItem",HTMLAttributes:{},keepMarks:!1,keepAttributes:!1}},group:"block list",content(){return`${this.options.itemTypeName}+`},parseHTML(){return[{tag:"ul"}]},renderHTML({HTMLAttributes:r}){return["ul",zn(this.options.HTMLAttributes,r),0]},addCommands(){return{toggleBulletList:()=>({commands:r,chain:e})=>this.options.keepAttributes?e().toggleList(this.name,this.options.itemTypeName,this.options.keepMarks).updateAttributes(Ok,this.editor.getAttributes(tv)).run():r.toggleList(this.name,this.options.itemTypeName,this.options.keepMarks)}},addKeyboardShortcuts(){return{"Mod-Shift-8":()=>this.editor.commands.toggleBulletList()}},addInputRules(){let r=Eu({find:nv,type:this.type});return(this.options.keepMarks||this.options.keepAttributes)&&(r=Eu({find:nv,type:this.type,keepMarks:this.options.keepMarks,keepAttributes:this.options.keepAttributes,getAttributes:()=>this.editor.getAttributes(tv),editor:this.editor})),[r]}}),Ck=/(^|[^`])`([^`]+)`(?!`)/,Ak=/(^|[^`])`([^`]+)`(?!`)/g,_k=ys.create({name:"code",addOptions(){return{HTMLAttributes:{}}},excludes:"_",code:!0,exitable:!0,parseHTML(){return[{tag:"code"}]},renderHTML({HTMLAttributes:r}){return["code",zn(this.options.HTMLAttributes,r),0]},addCommands(){return{setCode:()=>({commands:r})=>r.setMark(this.name),toggleCode:()=>({commands:r})=>r.toggleMark(this.name),unsetCode:()=>({commands:r})=>r.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-e":()=>this.editor.commands.toggleCode()}},addInputRules(){return[na({find:Ck,type:this.type})]},addPasteRules(){return[ra({find:Ak,type:this.type})]}}),Nk=/^```([a-z]+)?[\s\n]$/,Dk=/^~~~([a-z]+)?[\s\n]$/,Rk=nr.create({name:"codeBlock",addOptions(){return{languageClassPrefix:"language-",exitOnTripleEnter:!0,exitOnArrowDown:!0,defaultLanguage:null,HTMLAttributes:{}}},content:"text*",marks:"",group:"block",code:!0,defining:!0,addAttributes(){return{language:{default:this.options.defaultLanguage,parseHTML:r=>{var e;const{languageClassPrefix:t}=this.options,a=[...((e=r.firstElementChild)===null||e===void 0?void 0:e.classList)||[]].filter(u=>u.startsWith(t)).map(u=>u.replace(t,""))[0];return a||null},rendered:!1}}},parseHTML(){return[{tag:"pre",preserveWhitespace:"full"}]},renderHTML({node:r,HTMLAttributes:e}){return["pre",zn(this.options.HTMLAttributes,e),["code",{class:r.attrs.language?this.options.languageClassPrefix+r.attrs.language:null},0]]},addCommands(){return{setCodeBlock:r=>({commands:e})=>e.setNode(this.name,r),toggleCodeBlock:r=>({commands:e})=>e.toggleNode(this.name,"paragraph",r)}},addKeyboardShortcuts(){return{"Mod-Alt-c":()=>this.editor.commands.toggleCodeBlock(),Backspace:()=>{const{empty:r,$anchor:e}=this.editor.state.selection,t=e.pos===1;return!r||e.parent.type.name!==this.name?!1:t||!e.parent.textContent.length?this.editor.commands.clearNodes():!1},Enter:({editor:r})=>{if(!this.options.exitOnTripleEnter)return!1;const{state:e}=r,{selection:t}=e,{$from:i,empty:o}=t;if(!o||i.parent.type!==this.type)return!1;const a=i.parentOffset===i.parent.nodeSize-2,u=i.parent.textContent.endsWith(`

`);return!a||!u?!1:r.chain().command(({tr:f})=>(f.delete(i.pos-2,i.pos),!0)).exitCode().run()},ArrowDown:({editor:r})=>{if(!this.options.exitOnArrowDown)return!1;const{state:e}=r,{selection:t,doc:i}=e,{$from:o,empty:a}=t;if(!a||o.parent.type!==this.type||!(o.parentOffset===o.parent.nodeSize-2))return!1;const f=o.after();return f===void 0?!1:i.nodeAt(f)?r.commands.command(({tr:m})=>(m.setSelection(ct.near(i.resolve(f))),!0)):r.commands.exitCode()}}},addInputRules(){return[up({find:Nk,type:this.type,getAttributes:r=>({language:r[1]})}),up({find:Dk,type:this.type,getAttributes:r=>({language:r[1]})})]},addProseMirrorPlugins(){return[new Mr({key:new Ii("codeBlockVSCodeHandler"),props:{handlePaste:(r,e)=>{if(!e.clipboardData||this.editor.isActive(this.type.name))return!1;const t=e.clipboardData.getData("text/plain"),i=e.clipboardData.getData("vscode-editor-data"),o=i?JSON.parse(i):void 0,a=o==null?void 0:o.mode;if(!t||!a)return!1;const{tr:u,schema:f}=r.state,h=f.text(t.replace(/\r\n?/g,`
`));return u.replaceSelectionWith(this.type.create({language:a},h)),u.selection.$from.parent.type!==this.type&&u.setSelection(it.near(u.doc.resolve(Math.max(0,u.selection.from-2)))),u.setMeta("paste",!0),r.dispatch(u),!0}}})]}}),Bk=nr.create({name:"doc",topNode:!0,content:"block+"});function zk(r={}){return new Mr({view(e){return new Lk(e,r)}})}class Lk{constructor(e,t){var i;this.editorView=e,this.cursorPos=null,this.element=null,this.timeout=-1,this.width=(i=t.width)!==null&&i!==void 0?i:1,this.color=t.color===!1?void 0:t.color||"black",this.class=t.class,this.handlers=["dragover","dragend","drop","dragleave"].map(o=>{let a=u=>{this[o](u)};return e.dom.addEventListener(o,a),{name:o,handler:a}})}destroy(){this.handlers.forEach(({name:e,handler:t})=>this.editorView.dom.removeEventListener(e,t))}update(e,t){this.cursorPos!=null&&t.doc!=e.state.doc&&(this.cursorPos>e.state.doc.content.size?this.setCursor(null):this.updateOverlay())}setCursor(e){e!=this.cursorPos&&(this.cursorPos=e,e==null?(this.element.parentNode.removeChild(this.element),this.element=null):this.updateOverlay())}updateOverlay(){let e=this.editorView.state.doc.resolve(this.cursorPos),t=!e.parent.inlineContent,i,o=this.editorView.dom,a=o.getBoundingClientRect(),u=a.width/o.offsetWidth,f=a.height/o.offsetHeight;if(t){let S=e.nodeBefore,w=e.nodeAfter;if(S||w){let O=this.editorView.nodeDOM(this.cursorPos-(S?S.nodeSize:0));if(O){let T=O.getBoundingClientRect(),A=S?T.bottom:T.top;S&&w&&(A=(A+this.editorView.nodeDOM(this.cursorPos).getBoundingClientRect().top)/2);let R=this.width/2*f;i={left:T.left,right:T.right,top:A-R,bottom:A+R}}}}if(!i){let S=this.editorView.coordsAtPos(this.cursorPos),w=this.width/2*u;i={left:S.left-w,right:S.left+w,top:S.top,bottom:S.bottom}}let h=this.editorView.dom.offsetParent;this.element||(this.element=h.appendChild(document.createElement("div")),this.class&&(this.element.className=this.class),this.element.style.cssText="position: absolute; z-index: 50; pointer-events: none;",this.color&&(this.element.style.backgroundColor=this.color)),this.element.classList.toggle("prosemirror-dropcursor-block",t),this.element.classList.toggle("prosemirror-dropcursor-inline",!t);let m,v;if(!h||h==document.body&&getComputedStyle(h).position=="static")m=-pageXOffset,v=-pageYOffset;else{let S=h.getBoundingClientRect(),w=S.width/h.offsetWidth,O=S.height/h.offsetHeight;m=S.left-h.scrollLeft*w,v=S.top-h.scrollTop*O}this.element.style.left=(i.left-m)/u+"px",this.element.style.top=(i.top-v)/f+"px",this.element.style.width=(i.right-i.left)/u+"px",this.element.style.height=(i.bottom-i.top)/f+"px"}scheduleRemoval(e){clearTimeout(this.timeout),this.timeout=setTimeout(()=>this.setCursor(null),e)}dragover(e){if(!this.editorView.editable)return;let t=this.editorView.posAtCoords({left:e.clientX,top:e.clientY}),i=t&&t.inside>=0&&this.editorView.state.doc.nodeAt(t.inside),o=i&&i.type.spec.disableDropCursor,a=typeof o=="function"?o(this.editorView,t,e):o;if(t&&!a){let u=t.pos;if(this.editorView.dragging&&this.editorView.dragging.slice){let f=jv(this.editorView.state.doc,u,this.editorView.dragging.slice);f!=null&&(u=f)}this.setCursor(u),this.scheduleRemoval(5e3)}}dragend(){this.scheduleRemoval(20)}drop(){this.scheduleRemoval(20)}dragleave(e){this.editorView.dom.contains(e.relatedTarget)||this.setCursor(null)}}const jk=hr.create({name:"dropCursor",addOptions(){return{color:"currentColor",width:1,class:void 0}},addProseMirrorPlugins(){return[zk(this.options)]}});class Zt extends ct{constructor(e){super(e,e)}map(e,t){let i=e.resolve(t.map(this.head));return Zt.valid(i)?new Zt(i):ct.near(i)}content(){return De.empty}eq(e){return e instanceof Zt&&e.head==this.head}toJSON(){return{type:"gapcursor",pos:this.head}}static fromJSON(e,t){if(typeof t.pos!="number")throw new RangeError("Invalid input for GapCursor.fromJSON");return new Zt(e.resolve(t.pos))}getBookmark(){return new Hp(this.anchor)}static valid(e){let t=e.parent;if(t.isTextblock||!Hk(e)||!qk(e))return!1;let i=t.type.spec.allowGapCursor;if(i!=null)return i;let o=t.contentMatchAt(e.index()).defaultType;return o&&o.isTextblock}static findGapCursorFrom(e,t,i=!1){e:for(;;){if(!i&&Zt.valid(e))return e;let o=e.pos,a=null;for(let u=e.depth;;u--){let f=e.node(u);if(t>0?e.indexAfter(u)<f.childCount:e.index(u)>0){a=f.child(t>0?e.indexAfter(u):e.index(u)-1);break}else if(u==0)return null;o+=t;let h=e.doc.resolve(o);if(Zt.valid(h))return h}for(;;){let u=t>0?a.firstChild:a.lastChild;if(!u){if(a.isAtom&&!a.isText&&!Xe.isSelectable(a)){e=e.doc.resolve(o+a.nodeSize*t),i=!1;continue e}break}a=u,o+=t;let f=e.doc.resolve(o);if(Zt.valid(f))return f}return null}}}Zt.prototype.visible=!1;Zt.findFrom=Zt.findGapCursorFrom;ct.jsonID("gapcursor",Zt);class Hp{constructor(e){this.pos=e}map(e){return new Hp(e.map(this.pos))}resolve(e){let t=e.resolve(this.pos);return Zt.valid(t)?new Zt(t):ct.near(t)}}function Hk(r){for(let e=r.depth;e>=0;e--){let t=r.index(e),i=r.node(e);if(t==0){if(i.type.spec.isolating)return!0;continue}for(let o=i.child(t-1);;o=o.lastChild){if(o.childCount==0&&!o.inlineContent||o.isAtom||o.type.spec.isolating)return!0;if(o.inlineContent)return!1}}return!0}function qk(r){for(let e=r.depth;e>=0;e--){let t=r.indexAfter(e),i=r.node(e);if(t==i.childCount){if(i.type.spec.isolating)return!0;continue}for(let o=i.child(t);;o=o.firstChild){if(o.childCount==0&&!o.inlineContent||o.isAtom||o.type.spec.isolating)return!0;if(o.inlineContent)return!1}}return!0}function Uk(){return new Mr({props:{decorations:Pk,createSelectionBetween(r,e,t){return e.pos==t.pos&&Zt.valid(t)?new Zt(t):null},handleClick:Ik,handleKeyDown:Vk,handleDOMEvents:{beforeinput:Kk}}})}const Vk=Mb({ArrowLeft:Vc("horiz",-1),ArrowRight:Vc("horiz",1),ArrowUp:Vc("vert",-1),ArrowDown:Vc("vert",1)});function Vc(r,e){const t=r=="vert"?e>0?"down":"up":e>0?"right":"left";return function(i,o,a){let u=i.selection,f=e>0?u.$to:u.$from,h=u.empty;if(u instanceof it){if(!a.endOfTextblock(t)||f.depth==0)return!1;h=!1,f=i.doc.resolve(e>0?f.after():f.before())}let m=Zt.findGapCursorFrom(f,e,h);return m?(o&&o(i.tr.setSelection(new Zt(m))),!0):!1}}function Ik(r,e,t){if(!r||!r.editable)return!1;let i=r.state.doc.resolve(e);if(!Zt.valid(i))return!1;let o=r.posAtCoords({left:t.clientX,top:t.clientY});return o&&o.inside>-1&&Xe.isSelectable(r.state.doc.nodeAt(o.inside))?!1:(r.dispatch(r.state.tr.setSelection(new Zt(i))),!0)}function Kk(r,e){if(e.inputType!="insertCompositionText"||!(r.state.selection instanceof Zt))return!1;let{$from:t}=r.state.selection,i=t.parent.contentMatchAt(t.index()).findWrapping(r.state.schema.nodes.text);if(!i)return!1;let o=ae.empty;for(let u=i.length-1;u>=0;u--)o=ae.from(i[u].createAndFill(null,o));let a=r.state.tr.replace(t.pos,t.pos,new De(o,0,0));return a.setSelection(it.near(a.doc.resolve(t.pos+1))),r.dispatch(a),!1}function Pk(r){if(!(r.selection instanceof Zt))return null;let e=document.createElement("div");return e.className="ProseMirror-gapcursor",En.create(r.doc,[ii.widget(r.selection.head,e,{key:"gapcursor"})])}const Yk=hr.create({name:"gapCursor",addProseMirrorPlugins(){return[Uk()]},extendNodeSchema(r){var e;const t={name:r.name,options:r.options,storage:r.storage};return{allowGapCursor:(e=ht(Ie(r,"allowGapCursor",t)))!==null&&e!==void 0?e:null}}}),Gk=nr.create({name:"hardBreak",addOptions(){return{keepMarks:!0,HTMLAttributes:{}}},inline:!0,group:"inline",selectable:!1,linebreakReplacement:!0,parseHTML(){return[{tag:"br"}]},renderHTML({HTMLAttributes:r}){return["br",zn(this.options.HTMLAttributes,r)]},renderText(){return`
`},addCommands(){return{setHardBreak:()=>({commands:r,chain:e,state:t,editor:i})=>r.first([()=>r.exitCode(),()=>r.command(()=>{const{selection:o,storedMarks:a}=t;if(o.$from.parent.type.spec.isolating)return!1;const{keepMarks:u}=this.options,{splittableMarks:f}=i.extensionManager,h=a||o.$to.parentOffset&&o.$from.marks();return e().insertContent({type:this.name}).command(({tr:m,dispatch:v})=>{if(v&&h&&u){const S=h.filter(w=>f.includes(w.type.name));m.ensureMarks(S)}return!0}).run()})])}},addKeyboardShortcuts(){return{"Mod-Enter":()=>this.editor.commands.setHardBreak(),"Shift-Enter":()=>this.editor.commands.setHardBreak()}}}),$k=nr.create({name:"heading",addOptions(){return{levels:[1,2,3,4,5,6],HTMLAttributes:{}}},content:"inline*",group:"block",defining:!0,addAttributes(){return{level:{default:1,rendered:!1}}},parseHTML(){return this.options.levels.map(r=>({tag:`h${r}`,attrs:{level:r}}))},renderHTML({node:r,HTMLAttributes:e}){return[`h${this.options.levels.includes(r.attrs.level)?r.attrs.level:this.options.levels[0]}`,zn(this.options.HTMLAttributes,e),0]},addCommands(){return{setHeading:r=>({commands:e})=>this.options.levels.includes(r.level)?e.setNode(this.name,r):!1,toggleHeading:r=>({commands:e})=>this.options.levels.includes(r.level)?e.toggleNode(this.name,"paragraph",r):!1}},addKeyboardShortcuts(){return this.options.levels.reduce((r,e)=>({...r,[`Mod-Alt-${e}`]:()=>this.editor.commands.toggleHeading({level:e})}),{})},addInputRules(){return this.options.levels.map(r=>up({find:new RegExp(`^(#{${Math.min(...this.options.levels)},${r}})\\s$`),type:this.type,getAttributes:{level:r}}))}});var hf=200,Rn=function(){};Rn.prototype.append=function(e){return e.length?(e=Rn.from(e),!this.length&&e||e.length<hf&&this.leafAppend(e)||this.length<hf&&e.leafPrepend(this)||this.appendInner(e)):this};Rn.prototype.prepend=function(e){return e.length?Rn.from(e).append(this):this};Rn.prototype.appendInner=function(e){return new Xk(this,e)};Rn.prototype.slice=function(e,t){return e===void 0&&(e=0),t===void 0&&(t=this.length),e>=t?Rn.empty:this.sliceInner(Math.max(0,e),Math.min(this.length,t))};Rn.prototype.get=function(e){if(!(e<0||e>=this.length))return this.getInner(e)};Rn.prototype.forEach=function(e,t,i){t===void 0&&(t=0),i===void 0&&(i=this.length),t<=i?this.forEachInner(e,t,i,0):this.forEachInvertedInner(e,t,i,0)};Rn.prototype.map=function(e,t,i){t===void 0&&(t=0),i===void 0&&(i=this.length);var o=[];return this.forEach(function(a,u){return o.push(e(a,u))},t,i),o};Rn.from=function(e){return e instanceof Rn?e:e&&e.length?new i1(e):Rn.empty};var i1=function(r){function e(i){r.call(this),this.values=i}r&&(e.__proto__=r),e.prototype=Object.create(r&&r.prototype),e.prototype.constructor=e;var t={length:{configurable:!0},depth:{configurable:!0}};return e.prototype.flatten=function(){return this.values},e.prototype.sliceInner=function(o,a){return o==0&&a==this.length?this:new e(this.values.slice(o,a))},e.prototype.getInner=function(o){return this.values[o]},e.prototype.forEachInner=function(o,a,u,f){for(var h=a;h<u;h++)if(o(this.values[h],f+h)===!1)return!1},e.prototype.forEachInvertedInner=function(o,a,u,f){for(var h=a-1;h>=u;h--)if(o(this.values[h],f+h)===!1)return!1},e.prototype.leafAppend=function(o){if(this.length+o.length<=hf)return new e(this.values.concat(o.flatten()))},e.prototype.leafPrepend=function(o){if(this.length+o.length<=hf)return new e(o.flatten().concat(this.values))},t.length.get=function(){return this.values.length},t.depth.get=function(){return 0},Object.defineProperties(e.prototype,t),e}(Rn);Rn.empty=new i1([]);var Xk=function(r){function e(t,i){r.call(this),this.left=t,this.right=i,this.length=t.length+i.length,this.depth=Math.max(t.depth,i.depth)+1}return r&&(e.__proto__=r),e.prototype=Object.create(r&&r.prototype),e.prototype.constructor=e,e.prototype.flatten=function(){return this.left.flatten().concat(this.right.flatten())},e.prototype.getInner=function(i){return i<this.left.length?this.left.get(i):this.right.get(i-this.left.length)},e.prototype.forEachInner=function(i,o,a,u){var f=this.left.length;if(o<f&&this.left.forEachInner(i,o,Math.min(a,f),u)===!1||a>f&&this.right.forEachInner(i,Math.max(o-f,0),Math.min(this.length,a)-f,u+f)===!1)return!1},e.prototype.forEachInvertedInner=function(i,o,a,u){var f=this.left.length;if(o>f&&this.right.forEachInvertedInner(i,o-f,Math.max(a,f)-f,u+f)===!1||a<f&&this.left.forEachInvertedInner(i,Math.min(o,f),a,u)===!1)return!1},e.prototype.sliceInner=function(i,o){if(i==0&&o==this.length)return this;var a=this.left.length;return o<=a?this.left.slice(i,o):i>=a?this.right.slice(i-a,o-a):this.left.slice(i,a).append(this.right.slice(0,o-a))},e.prototype.leafAppend=function(i){var o=this.right.leafAppend(i);if(o)return new e(this.left,o)},e.prototype.leafPrepend=function(i){var o=this.left.leafPrepend(i);if(o)return new e(o,this.right)},e.prototype.appendInner=function(i){return this.left.depth>=Math.max(this.right.depth,i.depth)+1?new e(this.left,new e(this.right,i)):new e(this,i)},e}(Rn);const Fk=500;class Mi{constructor(e,t){this.items=e,this.eventCount=t}popEvent(e,t){if(this.eventCount==0)return null;let i=this.items.length;for(;;i--)if(this.items.get(i-1).selection){--i;break}let o,a;t&&(o=this.remapping(i,this.items.length),a=o.maps.length);let u=e.tr,f,h,m=[],v=[];return this.items.forEach((S,w)=>{if(!S.step){o||(o=this.remapping(i,w+1),a=o.maps.length),a--,v.push(S);return}if(o){v.push(new Hi(S.map));let O=S.step.map(o.slice(a)),T;O&&u.maybeStep(O).doc&&(T=u.mapping.maps[u.mapping.maps.length-1],m.push(new Hi(T,void 0,void 0,m.length+v.length))),a--,T&&o.appendMap(T,a)}else u.maybeStep(S.step);if(S.selection)return f=o?S.selection.map(o.slice(a)):S.selection,h=new Mi(this.items.slice(0,i).append(v.reverse().concat(m)),this.eventCount-1),!1},this.items.length,0),{remaining:h,transform:u,selection:f}}addTransform(e,t,i,o){let a=[],u=this.eventCount,f=this.items,h=!o&&f.length?f.get(f.length-1):null;for(let v=0;v<e.steps.length;v++){let S=e.steps[v].invert(e.docs[v]),w=new Hi(e.mapping.maps[v],S,t),O;(O=h&&h.merge(w))&&(w=O,v?a.pop():f=f.slice(0,f.length-1)),a.push(w),t&&(u++,t=void 0),o||(h=w)}let m=u-i.depth;return m>Jk&&(f=Qk(f,m),u-=m),new Mi(f.append(a),u)}remapping(e,t){let i=new gu;return this.items.forEach((o,a)=>{let u=o.mirrorOffset!=null&&a-o.mirrorOffset>=e?i.maps.length-o.mirrorOffset:void 0;i.appendMap(o.map,u)},e,t),i}addMaps(e){return this.eventCount==0?this:new Mi(this.items.append(e.map(t=>new Hi(t))),this.eventCount)}rebased(e,t){if(!this.eventCount)return this;let i=[],o=Math.max(0,this.items.length-t),a=e.mapping,u=e.steps.length,f=this.eventCount;this.items.forEach(w=>{w.selection&&f--},o);let h=t;this.items.forEach(w=>{let O=a.getMirror(--h);if(O==null)return;u=Math.min(u,O);let T=a.maps[O];if(w.step){let A=e.steps[O].invert(e.docs[O]),R=w.selection&&w.selection.map(a.slice(h+1,O));R&&f++,i.push(new Hi(T,A,R))}else i.push(new Hi(T))},o);let m=[];for(let w=t;w<u;w++)m.push(new Hi(a.maps[w]));let v=this.items.slice(0,o).append(m).append(i),S=new Mi(v,f);return S.emptyItemCount()>Fk&&(S=S.compress(this.items.length-i.length)),S}emptyItemCount(){let e=0;return this.items.forEach(t=>{t.step||e++}),e}compress(e=this.items.length){let t=this.remapping(0,e),i=t.maps.length,o=[],a=0;return this.items.forEach((u,f)=>{if(f>=e)o.push(u),u.selection&&a++;else if(u.step){let h=u.step.map(t.slice(i)),m=h&&h.getMap();if(i--,m&&t.appendMap(m,i),h){let v=u.selection&&u.selection.map(t.slice(i));v&&a++;let S=new Hi(m.invert(),h,v),w,O=o.length-1;(w=o.length&&o[O].merge(S))?o[O]=w:o.push(S)}}else u.map&&i--},this.items.length,0),new Mi(Rn.from(o.reverse()),a)}}Mi.empty=new Mi(Rn.empty,0);function Qk(r,e){let t;return r.forEach((i,o)=>{if(i.selection&&e--==0)return t=o,!1}),r.slice(t)}class Hi{constructor(e,t,i,o){this.map=e,this.step=t,this.selection=i,this.mirrorOffset=o}merge(e){if(this.step&&e.step&&!e.selection){let t=e.step.merge(this.step);if(t)return new Hi(t.getMap().invert(),t,this.selection)}}}class Fs{constructor(e,t,i,o,a){this.done=e,this.undone=t,this.prevRanges=i,this.prevTime=o,this.prevComposition=a}}const Jk=20;function Zk(r,e,t,i){let o=t.getMeta(Yo),a;if(o)return o.historyState;t.getMeta(tC)&&(r=new Fs(r.done,r.undone,null,0,-1));let u=t.getMeta("appendedTransaction");if(t.steps.length==0)return r;if(u&&u.getMeta(Yo))return u.getMeta(Yo).redo?new Fs(r.done.addTransform(t,void 0,i,Qc(e)),r.undone,rv(t.mapping.maps),r.prevTime,r.prevComposition):new Fs(r.done,r.undone.addTransform(t,void 0,i,Qc(e)),null,r.prevTime,r.prevComposition);if(t.getMeta("addToHistory")!==!1&&!(u&&u.getMeta("addToHistory")===!1)){let f=t.getMeta("composition"),h=r.prevTime==0||!u&&r.prevComposition!=f&&(r.prevTime<(t.time||0)-i.newGroupDelay||!Wk(t,r.prevRanges)),m=u?Vh(r.prevRanges,t.mapping):rv(t.mapping.maps);return new Fs(r.done.addTransform(t,h?e.selection.getBookmark():void 0,i,Qc(e)),Mi.empty,m,t.time,f??r.prevComposition)}else return(a=t.getMeta("rebased"))?new Fs(r.done.rebased(t,a),r.undone.rebased(t,a),Vh(r.prevRanges,t.mapping),r.prevTime,r.prevComposition):new Fs(r.done.addMaps(t.mapping.maps),r.undone.addMaps(t.mapping.maps),Vh(r.prevRanges,t.mapping),r.prevTime,r.prevComposition)}function Wk(r,e){if(!e)return!1;if(!r.docChanged)return!0;let t=!1;return r.mapping.maps[0].forEach((i,o)=>{for(let a=0;a<e.length;a+=2)i<=e[a+1]&&o>=e[a]&&(t=!0)}),t}function rv(r){let e=[];for(let t=r.length-1;t>=0&&e.length==0;t--)r[t].forEach((i,o,a,u)=>e.push(a,u));return e}function Vh(r,e){if(!r)return null;let t=[];for(let i=0;i<r.length;i+=2){let o=e.map(r[i],1),a=e.map(r[i+1],-1);o<=a&&t.push(o,a)}return t}function eC(r,e,t){let i=Qc(e),o=Yo.get(e).spec.config,a=(t?r.undone:r.done).popEvent(e,i);if(!a)return null;let u=a.selection.resolve(a.transform.doc),f=(t?r.done:r.undone).addTransform(a.transform,e.selection.getBookmark(),o,i),h=new Fs(t?f:a.remaining,t?a.remaining:f,null,0,-1);return a.transform.setSelection(u).setMeta(Yo,{redo:t,historyState:h})}let Ih=!1,iv=null;function Qc(r){let e=r.plugins;if(iv!=e){Ih=!1,iv=e;for(let t=0;t<e.length;t++)if(e[t].spec.historyPreserveItems){Ih=!0;break}}return Ih}const Yo=new Ii("history"),tC=new Ii("closeHistory");function nC(r={}){return r={depth:r.depth||100,newGroupDelay:r.newGroupDelay||500},new Mr({key:Yo,state:{init(){return new Fs(Mi.empty,Mi.empty,null,0,-1)},apply(e,t,i){return Zk(t,i,e,r)}},config:r,props:{handleDOMEvents:{beforeinput(e,t){let i=t.inputType,o=i=="historyUndo"?o1:i=="historyRedo"?l1:null;return o?(t.preventDefault(),o(e.state,e.dispatch)):!1}}}})}function s1(r,e){return(t,i)=>{let o=Yo.getState(t);if(!o||(r?o.undone:o.done).eventCount==0)return!1;if(i){let a=eC(o,t,r);a&&i(e?a.scrollIntoView():a)}return!0}}const o1=s1(!1,!0),l1=s1(!0,!0),rC=hr.create({name:"history",addOptions(){return{depth:100,newGroupDelay:500}},addCommands(){return{undo:()=>({state:r,dispatch:e})=>o1(r,e),redo:()=>({state:r,dispatch:e})=>l1(r,e)}},addProseMirrorPlugins(){return[nC(this.options)]},addKeyboardShortcuts(){return{"Mod-z":()=>this.editor.commands.undo(),"Shift-Mod-z":()=>this.editor.commands.redo(),"Mod-y":()=>this.editor.commands.redo(),"Mod-":()=>this.editor.commands.undo(),"Shift-Mod-":()=>this.editor.commands.redo()}}}),iC=nr.create({name:"horizontalRule",addOptions(){return{HTMLAttributes:{}}},group:"block",parseHTML(){return[{tag:"hr"}]},renderHTML({HTMLAttributes:r}){return["hr",zn(this.options.HTMLAttributes,r)]},addCommands(){return{setHorizontalRule:()=>({chain:r,state:e})=>{const{selection:t}=e,{$from:i,$to:o}=t,a=r();return i.parentOffset===0?a.insertContentAt({from:Math.max(i.pos-1,0),to:o.pos},{type:this.name}):hT(t)?a.insertContentAt(o.pos,{type:this.name}):a.insertContent({type:this.name}),a.command(({tr:u,dispatch:f})=>{var h;if(f){const{$to:m}=u.selection,v=m.end();if(m.nodeAfter)m.nodeAfter.isTextblock?u.setSelection(it.create(u.doc,m.pos+1)):m.nodeAfter.isBlock?u.setSelection(Xe.create(u.doc,m.pos)):u.setSelection(it.create(u.doc,m.pos));else{const S=(h=m.parent.type.contentMatch.defaultType)===null||h===void 0?void 0:h.create();S&&(u.insert(v,S),u.setSelection(it.create(u.doc,v+1)))}u.scrollIntoView()}return!0}).run()}}},addInputRules(){return[YT({find:/^(?:---|-|___\s|\*\*\*\s)$/,type:this.type})]}}),sC=/(?:^|\s)(\*(?!\s+\*)((?:[^*]+))\*(?!\s+\*))$/,oC=/(?:^|\s)(\*(?!\s+\*)((?:[^*]+))\*(?!\s+\*))/g,lC=/(?:^|\s)(_(?!\s+_)((?:[^_]+))_(?!\s+_))$/,aC=/(?:^|\s)(_(?!\s+_)((?:[^_]+))_(?!\s+_))/g,uC=ys.create({name:"italic",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"em"},{tag:"i",getAttrs:r=>r.style.fontStyle!=="normal"&&null},{style:"font-style=normal",clearMark:r=>r.type.name===this.name},{style:"font-style=italic"}]},renderHTML({HTMLAttributes:r}){return["em",zn(this.options.HTMLAttributes,r),0]},addCommands(){return{setItalic:()=>({commands:r})=>r.setMark(this.name),toggleItalic:()=>({commands:r})=>r.toggleMark(this.name),unsetItalic:()=>({commands:r})=>r.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-i":()=>this.editor.commands.toggleItalic(),"Mod-I":()=>this.editor.commands.toggleItalic()}},addInputRules(){return[na({find:sC,type:this.type}),na({find:lC,type:this.type})]},addPasteRules(){return[ra({find:oC,type:this.type}),ra({find:aC,type:this.type})]}}),cC=nr.create({name:"listItem",addOptions(){return{HTMLAttributes:{},bulletListTypeName:"bulletList",orderedListTypeName:"orderedList"}},content:"paragraph block*",defining:!0,parseHTML(){return[{tag:"li"}]},renderHTML({HTMLAttributes:r}){return["li",zn(this.options.HTMLAttributes,r),0]},addKeyboardShortcuts(){return{Enter:()=>this.editor.commands.splitListItem(this.name),Tab:()=>this.editor.commands.sinkListItem(this.name),"Shift-Tab":()=>this.editor.commands.liftListItem(this.name)}}}),fC="listItem",sv="textStyle",ov=/^(\d+)\.\s$/,dC=nr.create({name:"orderedList",addOptions(){return{itemTypeName:"listItem",HTMLAttributes:{},keepMarks:!1,keepAttributes:!1}},group:"block list",content(){return`${this.options.itemTypeName}+`},addAttributes(){return{start:{default:1,parseHTML:r=>r.hasAttribute("start")?parseInt(r.getAttribute("start")||"",10):1},type:{default:null,parseHTML:r=>r.getAttribute("type")}}},parseHTML(){return[{tag:"ol"}]},renderHTML({HTMLAttributes:r}){const{start:e,...t}=r;return e===1?["ol",zn(this.options.HTMLAttributes,t),0]:["ol",zn(this.options.HTMLAttributes,r),0]},addCommands(){return{toggleOrderedList:()=>({commands:r,chain:e})=>this.options.keepAttributes?e().toggleList(this.name,this.options.itemTypeName,this.options.keepMarks).updateAttributes(fC,this.editor.getAttributes(sv)).run():r.toggleList(this.name,this.options.itemTypeName,this.options.keepMarks)}},addKeyboardShortcuts(){return{"Mod-Shift-7":()=>this.editor.commands.toggleOrderedList()}},addInputRules(){let r=Eu({find:ov,type:this.type,getAttributes:e=>({start:+e[1]}),joinPredicate:(e,t)=>t.childCount+t.attrs.start===+e[1]});return(this.options.keepMarks||this.options.keepAttributes)&&(r=Eu({find:ov,type:this.type,keepMarks:this.options.keepMarks,keepAttributes:this.options.keepAttributes,getAttributes:e=>({start:+e[1],...this.editor.getAttributes(sv)}),joinPredicate:(e,t)=>t.childCount+t.attrs.start===+e[1],editor:this.editor})),[r]}}),hC=nr.create({name:"paragraph",priority:1e3,addOptions(){return{HTMLAttributes:{}}},group:"block",content:"inline*",parseHTML(){return[{tag:"p"}]},renderHTML({HTMLAttributes:r}){return["p",zn(this.options.HTMLAttributes,r),0]},addCommands(){return{setParagraph:()=>({commands:r})=>r.setNode(this.name)}},addKeyboardShortcuts(){return{"Mod-Alt-0":()=>this.editor.commands.setParagraph()}}}),pC=/(?:^|\s)(~~(?!\s+~~)((?:[^~]+))~~(?!\s+~~))$/,mC=/(?:^|\s)(~~(?!\s+~~)((?:[^~]+))~~(?!\s+~~))/g,gC=ys.create({name:"strike",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"s"},{tag:"del"},{tag:"strike"},{style:"text-decoration",consuming:!1,getAttrs:r=>r.includes("line-through")?{}:!1}]},renderHTML({HTMLAttributes:r}){return["s",zn(this.options.HTMLAttributes,r),0]},addCommands(){return{setStrike:()=>({commands:r})=>r.setMark(this.name),toggleStrike:()=>({commands:r})=>r.toggleMark(this.name),unsetStrike:()=>({commands:r})=>r.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-Shift-s":()=>this.editor.commands.toggleStrike()}},addInputRules(){return[na({find:pC,type:this.type})]},addPasteRules(){return[ra({find:mC,type:this.type})]}}),yC=nr.create({name:"text",group:"inline"}),vC=hr.create({name:"starterKit",addExtensions(){const r=[];return this.options.bold!==!1&&r.push(Tk.configure(this.options.bold)),this.options.blockquote!==!1&&r.push(Sk.configure(this.options.blockquote)),this.options.bulletList!==!1&&r.push(kk.configure(this.options.bulletList)),this.options.code!==!1&&r.push(_k.configure(this.options.code)),this.options.codeBlock!==!1&&r.push(Rk.configure(this.options.codeBlock)),this.options.document!==!1&&r.push(Bk.configure(this.options.document)),this.options.dropcursor!==!1&&r.push(jk.configure(this.options.dropcursor)),this.options.gapcursor!==!1&&r.push(Yk.configure(this.options.gapcursor)),this.options.hardBreak!==!1&&r.push(Gk.configure(this.options.hardBreak)),this.options.heading!==!1&&r.push($k.configure(this.options.heading)),this.options.history!==!1&&r.push(rC.configure(this.options.history)),this.options.horizontalRule!==!1&&r.push(iC.configure(this.options.horizontalRule)),this.options.italic!==!1&&r.push(uC.configure(this.options.italic)),this.options.listItem!==!1&&r.push(cC.configure(this.options.listItem)),this.options.orderedList!==!1&&r.push(dC.configure(this.options.orderedList)),this.options.paragraph!==!1&&r.push(hC.configure(this.options.paragraph)),this.options.strike!==!1&&r.push(gC.configure(this.options.strike)),this.options.text!==!1&&r.push(yC.configure(this.options.text)),r}}),bC=ys.create({name:"underline",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"u"},{style:"text-decoration",consuming:!1,getAttrs:r=>r.includes("underline")?{}:!1}]},renderHTML({HTMLAttributes:r}){return["u",zn(this.options.HTMLAttributes,r),0]},addCommands(){return{setUnderline:()=>({commands:r})=>r.setMark(this.name),toggleUnderline:()=>({commands:r})=>r.toggleMark(this.name),unsetUnderline:()=>({commands:r})=>r.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-u":()=>this.editor.commands.toggleUnderline(),"Mod-U":()=>this.editor.commands.toggleUnderline()}}}),SC="_sectionWrapper_t9f9a_1",xC="_sectionHeader_t9f9a_37",EC="_displayMode_t9f9a_52",MC="_title_t9f9a_59",wC="_titleEditing_t9f9a_99",TC="_id_t9f9a_107",OC="_idEditing_t9f9a_126",kC="_exitHint_t9f9a_134",CC="_actionButtons_t9f9a_149",AC="_exitButton_t9f9a_155",_C="_deleteButton_t9f9a_182",NC="_sectionContent_t9f9a_209",ti={sectionWrapper:SC,sectionHeader:xC,displayMode:EC,title:MC,titleEditing:wC,id:TC,idEditing:OC,exitHint:kC,actionButtons:CC,exitButton:AC,deleteButton:_C,sectionContent:NC},DC=({node:r,updateAttributes:e,deleteNode:t,editor:i})=>{const[o,a]=Pe.useState(!1),[u,f]=Pe.useState(!1),h=Pe.useRef(null),m=Pe.useRef(null),v=Pe.useMemo(()=>{if(r.attrs.sectionType){const Ce=r.attrs.sectionType.toLowerCase();if(Ce==="chapter")return{level:1,type:"chapter",color:"#8cc8ff",canExit:!1};if(Ce==="part")return{level:2,type:"part",color:"#8ce99a",canExit:!1};if(Ce==="container")return{level:3,type:"container",color:"#ffe066",canExit:!0};if(Ce==="section")return{level:4,type:"section",color:"#ffb3d9",canExit:!0}}const me=(r.attrs.title||"Untitled").toLowerCase();return me.startsWith("chapter")?{level:1,type:"chapter",color:"#8cc8ff",canExit:!1}:me.startsWith("part")?{level:2,type:"part",color:"#8ce99a",canExit:!1}:me.startsWith("container")?{level:3,type:"container",color:"#ffe066",canExit:!0}:me.startsWith("section")?{level:4,type:"section",color:"#ffb3d9",canExit:!0}:{level:1,type:"custom",color:"#8cc8ff",canExit:!0}},[r.attrs.title,r.attrs.sectionType]),S=()=>{a(!0),setTimeout(()=>{if(h.current){h.current.focus();const me=document.createRange();me.selectNodeContents(h.current);const Ce=window.getSelection();Ce==null||Ce.removeAllRanges(),Ce==null||Ce.addRange(me)}},0)},w=me=>{me.stopPropagation(),f(!0),setTimeout(()=>{if(m.current){m.current.focus();const Ce=document.createRange();Ce.selectNodeContents(m.current);const St=window.getSelection();St==null||St.removeAllRanges(),St==null||St.addRange(Ce)}},0)},O=me=>{me.key==="Enter"?(me.preventDefault(),A()):me.key==="Escape"&&(me.preventDefault(),W())},T=me=>{me.key==="Enter"?(me.preventDefault(),R()):me.key==="Escape"&&(me.preventDefault(),Te())},A=()=>{var Ce,St;const me=((St=(Ce=h.current)==null?void 0:Ce.textContent)==null?void 0:St.trim())||"Untitled";e({title:me}),a(!1)},R=()=>{var Ce,St;let me=((St=(Ce=m.current)==null?void 0:Ce.textContent)==null?void 0:St.trim())||"";me=me.startsWith("#")?me.slice(1):me,e({id:me||`section${Date.now()}`}),f(!1)},W=()=>{h.current&&(h.current.textContent=r.attrs.title||"Untitled"),a(!1)},Te=()=>{m.current&&(m.current.textContent=r.attrs.id||""),f(!1)},_e=()=>{A()},Le=()=>{R()},ve=me=>{me.preventDefault(),me.stopPropagation(),window.confirm(`Delete this ${v.type}?`)&&t()},Re=me=>{var Ce;me.preventDefault(),me.stopPropagation(),(Ce=i==null?void 0:i.commands)!=null&&Ce.exitSection&&i.commands.exitSection()},Fe=me=>{me.preventDefault(),S()};return ue.jsxs(Wb,{className:ti.sectionWrapper,"data-level":v.level,"data-type":v.type,style:{"--section-color":v.color},children:[ue.jsxs("div",{className:ti.sectionHeader,contentEditable:!1,onContextMenu:Fe,children:[ue.jsxs("div",{className:ti.displayMode,children:[ue.jsx("span",{ref:h,className:`${ti.title} ${o?ti.titleEditing:""}`,contentEditable:o,onDoubleClick:S,onKeyDown:O,onBlur:_e,suppressContentEditableWarning:!0,onMouseDown:me=>o&&me.stopPropagation(),onFocus:me=>me.stopPropagation(),children:r.attrs.title||"Untitled"}),r.attrs.id&&ue.jsxs("span",{ref:m,className:`${ti.id} ${u?ti.idEditing:""}`,contentEditable:u,onDoubleClick:w,onKeyDown:T,onBlur:Le,suppressContentEditableWarning:!0,onMouseDown:me=>u&&me.stopPropagation(),onFocus:me=>me.stopPropagation(),children:["#",r.attrs.id]}),v.canExit&&ue.jsx("span",{className:ti.exitHint,children:v.type==="container"?"Shift+Enter or  to exit":" to exit"})]}),ue.jsxs("div",{className:ti.actionButtons,children:[v.canExit&&ue.jsx("button",{onClick:Re,className:ti.exitButton,title:`Exit ${v.type} and continue writing outside`,onMouseDown:me=>me.stopPropagation(),type:"button",children:ue.jsx(BO,{size:14})}),ue.jsx("button",{onClick:ve,className:ti.deleteButton,title:`Delete ${v.type}`,onMouseDown:me=>me.stopPropagation(),type:"button",children:ue.jsx(fp,{size:14})})]})]}),ue.jsx("div",{className:ti.sectionContent,children:ue.jsx(hO,{})})]})},RC=nr.create({name:"section",priority:1e3,addOptions(){return{HTMLAttributes:{}}},group:"block",content:"block*",defining:!0,isolating:!0,addAttributes(){return{id:{default:null,parseHTML:r=>r.getAttribute("id"),renderHTML:r=>r.id?{id:r.id}:{}},title:{default:"Untitled",parseHTML:r=>r.getAttribute("data-toc-title"),renderHTML:r=>r.title?{"data-toc-title":r.title}:{}},sectionType:{default:null,parseHTML:r=>r.getAttribute("data-section-type"),renderHTML:r=>r.sectionType?{"data-section-type":r.sectionType}:{}},tagName:{default:"section",parseHTML:r=>r.tagName.toLowerCase()==="div"?"div":"section",renderHTML:r=>({})}}},parseHTML(){return[{tag:"section[data-toc-title]"},{tag:"div[data-toc-title]"}]},renderHTML({HTMLAttributes:r,node:e}){return[e.attrs.tagName||"section",zn(this.options.HTMLAttributes,r),0]},addNodeView(){return e1(DC)},addCommands(){return{setSection:r=>({commands:e})=>{const{id:t=`section${Date.now()}`,title:i="Untitled",tagName:o="section",sectionType:a}=r||{},u=o==="div"?"div":"section",f=a?` data-section-type="${a}"`:"",h=`<${u} id="${t}" data-toc-title="${i}"${f}><p></p></${u}>`;return e.insertContent(h)},exitSection:()=>({tr:r,state:e,dispatch:t})=>{const{selection:i}=e,{$from:o}=i;let a=-1,u=-1;for(let v=o.depth;v>0;v--)if(o.node(v).type.name==="section"){a=v,u=o.start(v)-1;break}if(a===-1)return!1;const f=o.node(a),h=u+f.nodeSize,m=e.schema.nodes.paragraph.create();if(t){r.insert(h,m);const v=h+1,S=r.doc.resolve(v);r.setSelection(it.near(S)),t(r)}return!0}}},addKeyboardShortcuts(){const r=e=>{if(e.attrs.sectionType)return e.attrs.sectionType;const t=(e.attrs.title||"").toLowerCase();return t.startsWith("chapter")?"chapter":t.startsWith("part")?"part":t.startsWith("container")?"container":"section"};return{"Mod-Shift-s":()=>this.editor.commands.setSection({tagName:"section"}),"Mod-Shift-d":()=>this.editor.commands.setSection({tagName:"div"}),Enter:({editor:e})=>{const{state:t}=e,{selection:i}=t,{$from:o}=i;let a=null;for(let h=o.depth;h>0;h--){const m=o.node(h);if(m.type.name==="section"){a=m;break}}if(!a)return!1;const u=r(a),f=o.parent;if(f.type.name==="paragraph"&&f.content.size===0)if(u==="container"){const h=o.nodeBefore;if(h&&h.type.name==="paragraph"&&h.content.size===0)return e.commands.exitSection()}else if(u==="chapter"||u==="part"){const h=o.nodeBefore;if(h&&h.type.name==="paragraph"&&h.content.size===0){const m=o.pos-h.nodeSize-1;if(m>0){const v=t.doc.resolve(m).nodeBefore;if(v&&v.type.name==="paragraph"&&v.content.size===0)return e.commands.exitSection()}}}else{const h=o.nodeBefore;if(h&&h.type.name==="paragraph"&&h.content.size===0)return e.commands.exitSection()}return!1},"Mod-Enter":({editor:e})=>{const{state:t}=e,{selection:i}=t,{$from:o}=i;for(let a=o.depth;a>0;a--)if(o.node(a).type.name==="section")return e.commands.exitSection();return!1},"Shift-Enter":({editor:e})=>{const{state:t}=e,{selection:i}=t,{$from:o}=i;for(let a=o.depth;a>0;a--){const u=o.node(a);if(u.type.name==="section"){if(r(u)==="container")return e.commands.exitSection();break}}return!1},Backspace:({editor:e})=>{const{state:t}=e,{selection:i}=t,{$from:o}=i;if(o.parentOffset===0)for(let a=o.depth;a>0;a--){const u=o.node(a);if(u.type.name==="section"){const f=o.parent;if(f.type.name==="paragraph"&&f.content.size===0&&u.content.size<=2){const h=o.start(a)-1;return e.commands.deleteRange({from:h,to:h+u.nodeSize}),!0}break}}return!1}}}}),BC="_imageWrapper_1jrcq_2",zC="_selected_1jrcq_11",LC="_imageContainer_1jrcq_21",jC="_image_1jrcq_2",HC="_loadingContainer_1jrcq_36",qC="_skeleton_1jrcq_46",UC="_loadingSpinner_1jrcq_55",VC="_errorContainer_1jrcq_70",IC="_errorContent_1jrcq_80",KC="_errorText_1jrcq_87",PC="_errorActions_1jrcq_93",YC="_retryButton_1jrcq_98",GC="_deleteButton_1jrcq_100",$C="_toolbar_1jrcq_141",XC="_toolbarButton_1jrcq_159",FC="_selectionHint_1jrcq_188",Wn={imageWrapper:BC,selected:zC,imageContainer:LC,image:jC,loadingContainer:HC,skeleton:qC,loadingSpinner:UC,errorContainer:VC,errorContent:IC,errorText:KC,errorActions:PC,retryButton:YC,deleteButton:GC,toolbar:$C,toolbarButton:XC,selectionHint:FC},QC=({node:r,updateAttributes:e,selected:t,deleteNode:i,editor:o})=>{const[a,u]=Pe.useState(!0),[f,h]=Pe.useState(!1),[m,v]=Pe.useState(""),S=Pe.useRef(null),w=Pe.useRef(null),O=Pe.useCallback(()=>{u(!1),h(!1)},[]),T=Pe.useCallback(()=>{u(!1),h(!0)},[]),A=Pe.useCallback(async()=>{if(r.attrs.src.startsWith("db:")){const Le=parseInt(r.attrs.src.replace("db:",""));try{await hu.delete(Le)}catch(ve){console.error("Failed to delete image from database:",ve)}}i()},[i,r.attrs.src]),R=Pe.useCallback(()=>{u(!0),h(!1),S.current&&(S.current.src=r.attrs.src)},[r.attrs.src]),W=Pe.useCallback(async Le=>{if(Le.startsWith("db:")){const ve=parseInt(Le.replace("db:",""));try{const Re=await hu.getById(ve);if(Re)return URL.createObjectURL(Re.blob)}catch(Re){console.error("Failed to load image from database:",Re)}return Le}return Le},[]),Te=Pe.useCallback(()=>{o.chain().focus().insertContent("<p></p>").run()},[o]);Pe.useEffect(()=>{const Le=ve=>{if(t)switch(ve.key){case"Delete":case"Backspace":ve.preventDefault(),A();break;case"Enter":ve.preventDefault(),Te();break}};if(t)return document.addEventListener("keydown",Le),()=>document.removeEventListener("keydown",Le)},[t,A,Te]),Pe.useEffect(()=>{(async()=>{const ve=await W(r.attrs.src);v(ve)})()},[r.attrs.src,W]);const _e={width:r.attrs.width?`${r.attrs.width}px`:"auto",height:r.attrs.height?`${r.attrs.height}px`:"auto",maxWidth:"100%",display:a?"none":"block"};return ue.jsx(Wb,{className:`${Wn.imageWrapper} ${t?Wn.selected:""}`,ref:w,"data-drag-handle":!0,children:ue.jsxs("div",{className:Wn.imageContainer,children:[a&&ue.jsx("div",{className:Wn.loadingContainer,children:ue.jsxs("div",{className:Wn.skeleton,children:[ue.jsx("div",{className:Wn.loadingSpinner}),ue.jsx("span",{children:"Loading image..."})]})}),f&&!a&&ue.jsx("div",{className:Wn.errorContainer,children:ue.jsxs("div",{className:Wn.errorContent,children:[ue.jsx("span",{className:Wn.errorText,children:"Failed to load image"}),ue.jsxs("div",{className:Wn.errorActions,children:[ue.jsxs("button",{onClick:R,className:Wn.retryButton,children:[ue.jsx(ak,{size:14}),"Retry"]}),ue.jsxs("button",{onClick:A,className:Wn.deleteButton,children:[ue.jsx(fp,{size:14}),"Remove"]})]})]})}),!f&&ue.jsx("img",{ref:S,src:m,alt:r.attrs.alt||"",title:r.attrs.title||"",style:_e,onLoad:O,onError:T,className:Wn.image}),t&&!a&&!f&&ue.jsx("div",{className:Wn.toolbar,children:ue.jsx("button",{onClick:A,className:Wn.toolbarButton,title:"Delete",children:ue.jsx(fp,{size:14})})}),t&&!a&&!f&&ue.jsx("div",{className:Wn.selectionHint,children:"Press Enter to add content after this image"})]})})},JC=nr.create({name:"customImage",addOptions(){return{inline:!1,allowBase64:!0,HTMLAttributes:{}}},inline(){return this.options.inline},group(){return this.options.inline?"inline":"block"},draggable:!0,selectable:!0,addAttributes(){return{src:{default:null,parseHTML:r=>r.getAttribute("src"),renderHTML:r=>r.src?{src:r.src}:{}},alt:{default:null,parseHTML:r=>r.getAttribute("alt"),renderHTML:r=>r.alt?{alt:r.alt}:{}},title:{default:null,parseHTML:r=>r.getAttribute("title"),renderHTML:r=>r.title?{title:r.title}:{}},width:{default:null,parseHTML:r=>{const e=r.getAttribute("width");return e?parseInt(e,10):null},renderHTML:r=>r.width?{width:r.width}:{}},height:{default:null,parseHTML:r=>{const e=r.getAttribute("height");return e?parseInt(e,10):null},renderHTML:r=>r.height?{height:r.height}:{}}}},parseHTML(){return[{tag:this.options.allowBase64?"img[src]":'img[src]:not([src^="data:"])'}]},renderHTML({HTMLAttributes:r}){return["img",zn(this.options.HTMLAttributes,r)]},addCommands(){return{setImage:r=>({commands:e})=>e.insertContent({type:this.name,attrs:r}),updateImage:r=>({commands:e})=>e.updateAttributes(this.name,r)}},addNodeView(){return e1(QC)}}),ZC=({content:r,onChange:e})=>{const[t,i]=Pe.useState(),o=Pe.useRef(void 0),a=fO({extensions:[vC,bC,RC,JC],content:r,onUpdate:({editor:f})=>{e(f.getHTML()),clearTimeout(o.current),o.current=setTimeout(async()=>{const h=f.getJSON(),m="Untitled";if(t)await Yc.update(t,{title:m,content:h});else{const v=await Yc.create({title:m,content:h});i(v)}},1e3)},editorProps:{handleKeyDown:(f,h)=>a&&h.key==="Tab"&&a.isActive("listItem")?h.shiftKey?a.chain().focus().liftListItem("listItem").run():a.chain().focus().sinkListItem("listItem").run():!1}}),u=async f=>{try{let h;f||(h=(await Yc.getAll())[0]),h&&a&&(i(h.id),a.commands.setContent(h.content))}catch(h){console.error("Failed to load document:",h)}};return Pe.useEffect(()=>{a&&u()},[a]),{editor:a,currentDocumentId:t,setCurrentDocumentId:i}},WC="_editor_7la4t_1",eA="_content_7la4t_17",lv={editor:WC,content:eA},tA=({content:r="",onChange:e=()=>{}})=>{const{editor:t,currentDocumentId:i,setCurrentDocumentId:o}=ZC({content:r,onChange:e});return Pe.useEffect(()=>{if(!t)return;const a=()=>{const u=t.getHTML();e(u)};return t.on("transaction",a),()=>{t.off("transaction",a)}},[t,e]),t?ue.jsxs("div",{className:lv.editor,children:[ue.jsx(vk,{editor:t,currentDocumentId:i,setCurrentDocumentId:o}),ue.jsx("div",{className:lv.content,children:ue.jsx(tO,{editor:t})})]}):null},nA="_editorPanel_mfhcq_3",rA="_header_mfhcq_21",iA="_title_mfhcq_33",sA="_editorContent_mfhcq_47",Ic={editorPanel:nA,header:rA,title:iA,editorContent:sA},oA=({content:r,onChange:e})=>{const t=i=>{e(i),console.log("Content updated:",i)};return ue.jsxs("div",{className:Ic.editorPanel,children:[ue.jsx("div",{className:Ic.header,children:ue.jsx("h1",{className:Ic.title,children:"Editor"})}),ue.jsx("div",{className:Ic.editorContent,children:ue.jsx(tA,{content:r,onChange:t})})]})},lA=()=>{const[r,e]=Pe.useState(!1);return{copyToClipboard:Pe.useCallback(async i=>{try{await navigator.clipboard.writeText(i),e(!0),setTimeout(()=>e(!1),1e3),console.log("Text copied to clipboard")}catch(o){console.error("Failed to copy text:",o);const a=document.createElement("textarea");a.value=i,document.body.appendChild(a),a.select(),document.execCommand("copy"),document.body.removeChild(a),e(!0),setTimeout(()=>e(!1),1e3)}},[]),showCopiedMessage:r}},aA="_copyButton_uw4v3_3",uA="_visible_uw4v3_61",cA="_hidden_uw4v3_69",fA="_copiedMessage_uw4v3_79",Kc={copyButton:aA,visible:uA,hidden:cA,copiedMessage:fA},dA=({text:r,isVisible:e=!0})=>{const{copyToClipboard:t,showCopiedMessage:i}=lA(),o=()=>{t(r)};return ue.jsxs(ue.Fragment,{children:[ue.jsx("button",{className:`${Kc.copyButton} ${e?Kc.visible:Kc.hidden}`,onClick:o,title:"Copy to clipboard",children:ue.jsx(IO,{size:16})}),i&&ue.jsx("div",{className:Kc.copiedMessage,children:"Copied!"})]})};var Kh,av;function hA(){if(av)return Kh;av=1;function r(z){return z instanceof Map?z.clear=z.delete=z.set=function(){throw new Error("map is read-only")}:z instanceof Set&&(z.add=z.clear=z.delete=function(){throw new Error("set is read-only")}),Object.freeze(z),Object.getOwnPropertyNames(z).forEach(ie=>{const Se=z[ie],We=typeof Se;(We==="object"||We==="function")&&!Object.isFrozen(Se)&&r(Se)}),z}class e{constructor(ie){ie.data===void 0&&(ie.data={}),this.data=ie.data,this.isMatchIgnored=!1}ignoreMatch(){this.isMatchIgnored=!0}}function t(z){return z.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#x27;")}function i(z,...ie){const Se=Object.create(null);for(const We in z)Se[We]=z[We];return ie.forEach(function(We){for(const Ot in We)Se[Ot]=We[Ot]}),Se}const o="</span>",a=z=>!!z.scope,u=(z,{prefix:ie})=>{if(z.startsWith("language:"))return z.replace("language:","language-");if(z.includes(".")){const Se=z.split(".");return[`${ie}${Se.shift()}`,...Se.map((We,Ot)=>`${We}${"_".repeat(Ot+1)}`)].join(" ")}return`${ie}${z}`};class f{constructor(ie,Se){this.buffer="",this.classPrefix=Se.classPrefix,ie.walk(this)}addText(ie){this.buffer+=t(ie)}openNode(ie){if(!a(ie))return;const Se=u(ie.scope,{prefix:this.classPrefix});this.span(Se)}closeNode(ie){a(ie)&&(this.buffer+=o)}value(){return this.buffer}span(ie){this.buffer+=`<span class="${ie}">`}}const h=(z={})=>{const ie={children:[]};return Object.assign(ie,z),ie};class m{constructor(){this.rootNode=h(),this.stack=[this.rootNode]}get top(){return this.stack[this.stack.length-1]}get root(){return this.rootNode}add(ie){this.top.children.push(ie)}openNode(ie){const Se=h({scope:ie});this.add(Se),this.stack.push(Se)}closeNode(){if(this.stack.length>1)return this.stack.pop()}closeAllNodes(){for(;this.closeNode(););}toJSON(){return JSON.stringify(this.rootNode,null,4)}walk(ie){return this.constructor._walk(ie,this.rootNode)}static _walk(ie,Se){return typeof Se=="string"?ie.addText(Se):Se.children&&(ie.openNode(Se),Se.children.forEach(We=>this._walk(ie,We)),ie.closeNode(Se)),ie}static _collapse(ie){typeof ie!="string"&&ie.children&&(ie.children.every(Se=>typeof Se=="string")?ie.children=[ie.children.join("")]:ie.children.forEach(Se=>{m._collapse(Se)}))}}class v extends m{constructor(ie){super(),this.options=ie}addText(ie){ie!==""&&this.add(ie)}startScope(ie){this.openNode(ie)}endScope(){this.closeNode()}__addSublanguage(ie,Se){const We=ie.root;Se&&(We.scope=`language:${Se}`),this.add(We)}toHTML(){return new f(this,this.options).value()}finalize(){return this.closeAllNodes(),!0}}function S(z){return z?typeof z=="string"?z:z.source:null}function w(z){return A("(?=",z,")")}function O(z){return A("(?:",z,")*")}function T(z){return A("(?:",z,")?")}function A(...z){return z.map(Se=>S(Se)).join("")}function R(z){const ie=z[z.length-1];return typeof ie=="object"&&ie.constructor===Object?(z.splice(z.length-1,1),ie):{}}function W(...z){return"("+(R(z).capture?"":"?:")+z.map(We=>S(We)).join("|")+")"}function Te(z){return new RegExp(z.toString()+"|").exec("").length-1}function _e(z,ie){const Se=z&&z.exec(ie);return Se&&Se.index===0}const Le=/\[(?:[^\\\]]|\\.)*\]|\(\??|\\([1-9][0-9]*)|\\./;function ve(z,{joinWith:ie}){let Se=0;return z.map(We=>{Se+=1;const Ot=Se;let Ct=S(We),Ae="";for(;Ct.length>0;){const ge=Le.exec(Ct);if(!ge){Ae+=Ct;break}Ae+=Ct.substring(0,ge.index),Ct=Ct.substring(ge.index+ge[0].length),ge[0][0]==="\\"&&ge[1]?Ae+="\\"+String(Number(ge[1])+Ot):(Ae+=ge[0],ge[0]==="("&&Se++)}return Ae}).map(We=>`(${We})`).join(ie)}const Re=/\b\B/,Fe="[a-zA-Z]\\w*",me="[a-zA-Z_]\\w*",Ce="\\b\\d+(\\.\\d+)?",St="(-?)(\\b0[xX][a-fA-F0-9]+|(\\b\\d+(\\.\\d*)?|\\.\\d+)([eE][-+]?\\d+)?)",sn="\\b(0b[01]+)",jt="!|!=|!==|%|%=|&|&&|&=|\\*|\\*=|\\+|\\+=|,|-|-=|/=|/|:|;|<<|<<=|<=|<|===|==|=|>>>=|>>=|>=|>>>|>>|>|\\?|\\[|\\{|\\(|\\^|\\^=|\\||\\|=|\\|\\||~",Ln=(z={})=>{const ie=/^#![ ]*\//;return z.binary&&(z.begin=A(ie,/.*\b/,z.binary,/\b.*/)),i({scope:"meta",begin:ie,end:/$/,relevance:0,"on:begin":(Se,We)=>{Se.index!==0&&We.ignoreMatch()}},z)},ir={begin:"\\\\[\\s\\S]",relevance:0},Xt={scope:"string",begin:"'",end:"'",illegal:"\\n",contains:[ir]},te={scope:"string",begin:'"',end:'"',illegal:"\\n",contains:[ir]},ke={begin:/\b(a|an|the|are|I'm|isn't|don't|doesn't|won't|but|just|should|pretty|simply|enough|gonna|going|wtf|so|such|will|you|your|they|like|more)\b/},Ke=function(z,ie,Se={}){const We=i({scope:"comment",begin:z,end:ie,contains:[]},Se);We.contains.push({scope:"doctag",begin:"[ ]*(?=(TODO|FIXME|NOTE|BUG|OPTIMIZE|HACK|XXX):)",end:/(TODO|FIXME|NOTE|BUG|OPTIMIZE|HACK|XXX):/,excludeBegin:!0,relevance:0});const Ot=W("I","a","is","so","us","to","at","if","in","it","on",/[A-Za-z]+['](d|ve|re|ll|t|s|n)/,/[A-Za-z]+[-][a-z]+/,/[A-Za-z][a-z]{2,}/);return We.contains.push({begin:A(/[ ]+/,"(",Ot,/[.]?[:]?([.][ ]|[ ])/,"){3}")}),We},vt=Ke("//","$"),L=Ke("/\\*","\\*/"),le=Ke("#","$"),Ne={scope:"number",begin:Ce,relevance:0},xe={scope:"number",begin:St,relevance:0},Ge={scope:"number",begin:sn,relevance:0},ft={scope:"regexp",begin:/\/(?=[^/\n]*\/)/,end:/\/[gimuy]*/,contains:[ir,{begin:/\[/,end:/\]/,relevance:0,contains:[ir]}]},Qe={scope:"title",begin:Fe,relevance:0},gn={scope:"title",begin:me,relevance:0},Nt={begin:"\\.\\s*"+me,relevance:0};var oi=Object.freeze({__proto__:null,APOS_STRING_MODE:Xt,BACKSLASH_ESCAPE:ir,BINARY_NUMBER_MODE:Ge,BINARY_NUMBER_RE:sn,COMMENT:Ke,C_BLOCK_COMMENT_MODE:L,C_LINE_COMMENT_MODE:vt,C_NUMBER_MODE:xe,C_NUMBER_RE:St,END_SAME_AS_BEGIN:function(z){return Object.assign(z,{"on:begin":(ie,Se)=>{Se.data._beginMatch=ie[1]},"on:end":(ie,Se)=>{Se.data._beginMatch!==ie[1]&&Se.ignoreMatch()}})},HASH_COMMENT_MODE:le,IDENT_RE:Fe,MATCH_NOTHING_RE:Re,METHOD_GUARD:Nt,NUMBER_MODE:Ne,NUMBER_RE:Ce,PHRASAL_WORDS_MODE:ke,QUOTE_STRING_MODE:te,REGEXP_MODE:ft,RE_STARTERS_RE:jt,SHEBANG:Ln,TITLE_MODE:Qe,UNDERSCORE_IDENT_RE:me,UNDERSCORE_TITLE_MODE:gn});function li(z,ie){z.input[z.index-1]==="."&&ie.ignoreMatch()}function xt(z,ie){z.className!==void 0&&(z.scope=z.className,delete z.className)}function ai(z,ie){ie&&z.beginKeywords&&(z.begin="\\b("+z.beginKeywords.split(" ").join("|")+")(?!\\.)(?=\\b|\\s)",z.__beforeBegin=li,z.keywords=z.keywords||z.beginKeywords,delete z.beginKeywords,z.relevance===void 0&&(z.relevance=0))}function uo(z,ie){Array.isArray(z.illegal)&&(z.illegal=W(...z.illegal))}function ui(z,ie){if(z.match){if(z.begin||z.end)throw new Error("begin & end are not supported with match");z.begin=z.match,delete z.match}}function sa(z,ie){z.relevance===void 0&&(z.relevance=1)}const pr=(z,ie)=>{if(!z.beforeMatch)return;if(z.starts)throw new Error("beforeMatch cannot be used with starts");const Se=Object.assign({},z);Object.keys(z).forEach(We=>{delete z[We]}),z.keywords=Se.keywords,z.begin=A(Se.beforeMatch,w(Se.begin)),z.starts={relevance:0,contains:[Object.assign(Se,{endsParent:!0})]},z.relevance=0,delete Se.beforeMatch},oa=["of","and","for","in","not","or","if","then","parent","list","value"],Jo="keyword";function Ki(z,ie,Se=Jo){const We=Object.create(null);return typeof z=="string"?Ot(Se,z.split(" ")):Array.isArray(z)?Ot(Se,z):Object.keys(z).forEach(function(Ct){Object.assign(We,Ki(z[Ct],ie,Ct))}),We;function Ot(Ct,Ae){ie&&(Ae=Ae.map(ge=>ge.toLowerCase())),Ae.forEach(function(ge){const ye=ge.split("|");We[ye[0]]=[Ct,jn(ye[0],ye[1])]})}}function jn(z,ie){return ie?Number(ie):Zo(z)?0:1}function Zo(z){return oa.includes(z.toLowerCase())}const ci={},qr=z=>{console.error(z)},Ti=(z,...ie)=>{console.log(`WARN: ${z}`,...ie)},on=(z,ie)=>{ci[`${z}/${ie}`]||(console.log(`Deprecated as of ${z}. ${ie}`),ci[`${z}/${ie}`]=!0)},Ht=new Error;function sr(z,ie,{key:Se}){let We=0;const Ot=z[Se],Ct={},Ae={};for(let ge=1;ge<=ie.length;ge++)Ae[ge+We]=Ot[ge],Ct[ge+We]=!0,We+=Te(ie[ge-1]);z[Se]=Ae,z[Se]._emit=Ct,z[Se]._multi=!0}function Wt(z){if(Array.isArray(z.begin)){if(z.skip||z.excludeBegin||z.returnBegin)throw qr("skip, excludeBegin, returnBegin not compatible with beginScope: {}"),Ht;if(typeof z.beginScope!="object"||z.beginScope===null)throw qr("beginScope must be object"),Ht;sr(z,z.begin,{key:"beginScope"}),z.begin=ve(z.begin,{joinWith:""})}}function co(z){if(Array.isArray(z.end)){if(z.skip||z.excludeEnd||z.returnEnd)throw qr("skip, excludeEnd, returnEnd not compatible with endScope: {}"),Ht;if(typeof z.endScope!="object"||z.endScope===null)throw qr("endScope must be object"),Ht;sr(z,z.end,{key:"endScope"}),z.end=ve(z.end,{joinWith:""})}}function vs(z){z.scope&&typeof z.scope=="object"&&z.scope!==null&&(z.beginScope=z.scope,delete z.scope)}function fi(z){vs(z),typeof z.beginScope=="string"&&(z.beginScope={_wrap:z.beginScope}),typeof z.endScope=="string"&&(z.endScope={_wrap:z.endScope}),Wt(z),co(z)}function di(z){function ie(Ae,ge){return new RegExp(S(Ae),"m"+(z.case_insensitive?"i":"")+(z.unicodeRegex?"u":"")+(ge?"g":""))}class Se{constructor(){this.matchIndexes={},this.regexes=[],this.matchAt=1,this.position=0}addRule(ge,ye){ye.position=this.position++,this.matchIndexes[this.matchAt]=ye,this.regexes.push([ye,ge]),this.matchAt+=Te(ge)+1}compile(){this.regexes.length===0&&(this.exec=()=>null);const ge=this.regexes.map(ye=>ye[1]);this.matcherRe=ie(ve(ge,{joinWith:"|"}),!0),this.lastIndex=0}exec(ge){this.matcherRe.lastIndex=this.lastIndex;const ye=this.matcherRe.exec(ge);if(!ye)return null;const lt=ye.findIndex((Vr,ki)=>ki>0&&Vr!==void 0),qt=this.matchIndexes[lt];return ye.splice(0,lt),Object.assign(ye,qt)}}class We{constructor(){this.rules=[],this.multiRegexes=[],this.count=0,this.lastIndex=0,this.regexIndex=0}getMatcher(ge){if(this.multiRegexes[ge])return this.multiRegexes[ge];const ye=new Se;return this.rules.slice(ge).forEach(([lt,qt])=>ye.addRule(lt,qt)),ye.compile(),this.multiRegexes[ge]=ye,ye}resumingScanAtSamePosition(){return this.regexIndex!==0}considerAll(){this.regexIndex=0}addRule(ge,ye){this.rules.push([ge,ye]),ye.type==="begin"&&this.count++}exec(ge){const ye=this.getMatcher(this.regexIndex);ye.lastIndex=this.lastIndex;let lt=ye.exec(ge);if(this.resumingScanAtSamePosition()&&!(lt&&lt.index===this.lastIndex)){const qt=this.getMatcher(0);qt.lastIndex=this.lastIndex+1,lt=qt.exec(ge)}return lt&&(this.regexIndex+=lt.position+1,this.regexIndex===this.count&&this.considerAll()),lt}}function Ot(Ae){const ge=new We;return Ae.contains.forEach(ye=>ge.addRule(ye.begin,{rule:ye,type:"begin"})),Ae.terminatorEnd&&ge.addRule(Ae.terminatorEnd,{type:"end"}),Ae.illegal&&ge.addRule(Ae.illegal,{type:"illegal"}),ge}function Ct(Ae,ge){const ye=Ae;if(Ae.isCompiled)return ye;[xt,ui,fi,pr].forEach(qt=>qt(Ae,ge)),z.compilerExtensions.forEach(qt=>qt(Ae,ge)),Ae.__beforeBegin=null,[ai,uo,sa].forEach(qt=>qt(Ae,ge)),Ae.isCompiled=!0;let lt=null;return typeof Ae.keywords=="object"&&Ae.keywords.$pattern&&(Ae.keywords=Object.assign({},Ae.keywords),lt=Ae.keywords.$pattern,delete Ae.keywords.$pattern),lt=lt||/\w+/,Ae.keywords&&(Ae.keywords=Ki(Ae.keywords,z.case_insensitive)),ye.keywordPatternRe=ie(lt,!0),ge&&(Ae.begin||(Ae.begin=/\B|\b/),ye.beginRe=ie(ye.begin),!Ae.end&&!Ae.endsWithParent&&(Ae.end=/\B|\b/),Ae.end&&(ye.endRe=ie(ye.end)),ye.terminatorEnd=S(ye.end)||"",Ae.endsWithParent&&ge.terminatorEnd&&(ye.terminatorEnd+=(Ae.end?"|":"")+ge.terminatorEnd)),Ae.illegal&&(ye.illegalRe=ie(Ae.illegal)),Ae.contains||(Ae.contains=[]),Ae.contains=[].concat(...Ae.contains.map(function(qt){return Mn(qt==="self"?Ae:qt)})),Ae.contains.forEach(function(qt){Ct(qt,ye)}),Ae.starts&&Ct(Ae.starts,ge),ye.matcher=Ot(ye),ye}if(z.compilerExtensions||(z.compilerExtensions=[]),z.contains&&z.contains.includes("self"))throw new Error("ERR: contains `self` is not supported at the top-level of a language.  See documentation.");return z.classNameAliases=i(z.classNameAliases||{}),Ct(z)}function hi(z){return z?z.endsWithParent||hi(z.starts):!1}function Mn(z){return z.variants&&!z.cachedVariants&&(z.cachedVariants=z.variants.map(function(ie){return i(z,{variants:null},ie)})),z.cachedVariants?z.cachedVariants:hi(z)?i(z,{starts:z.starts?i(z.starts):null}):Object.isFrozen(z)?i(z):z}var je="11.11.1";class wr extends Error{constructor(ie,Se){super(ie),this.name="HTMLInjectionError",this.html=Se}}const Tr=t,Oi=i,we=Symbol("nomatch"),Pi=7,pi=function(z){const ie=Object.create(null),Se=Object.create(null),We=[];let Ot=!0;const Ct="Could not find the language '{}', did you forget to load/include a language module?",Ae={disableAutodetect:!0,name:"Plain text",contains:[]};let ge={ignoreUnescapedHTML:!1,throwUnescapedHTML:!1,noHighlightRe:/^(no-?highlight)$/i,languageDetectRe:/\blang(?:uage)?-([\w-]+)\b/i,classPrefix:"hljs-",cssSelector:"pre code",languages:null,__emitter:v};function ye(ce){return ge.noHighlightRe.test(ce)}function lt(ce){let He=ce.className+" ";He+=ce.parentNode?ce.parentNode.className:"";const st=ge.languageDetectRe.exec(He);if(st){const bt=yn(st[1]);return bt||(Ti(Ct.replace("{}",st[1])),Ti("Falling back to no-highlight mode for this block.",ce)),bt?st[1]:"no-highlight"}return He.split(/\s+/).find(bt=>ye(bt)||yn(bt))}function qt(ce,He,st){let bt="",Vt="";typeof He=="object"?(bt=ce,st=He.ignoreIllegals,Vt=He.language):(on("10.7.0","highlight(lang, code, ...args) has been deprecated."),on("10.7.0",`Please use highlight(code, options) instead.
https://github.com/highlightjs/highlight.js/issues/2277`),Vt=ce,bt=He),st===void 0&&(st=!0);const tt={code:bt,language:Vt};gr("before:highlight",tt);const yr=tt.result?tt.result:Vr(tt.language,tt.code,st);return yr.code=tt.code,gr("after:highlight",yr),yr}function Vr(ce,He,st,bt){const Vt=Object.create(null);function tt(Me,ze){return Me.keywords[ze]}function yr(){if(!Oe.keywords){Ft.addText(wt);return}let Me=0;Oe.keywordPatternRe.lastIndex=0;let ze=Oe.keywordPatternRe.exec(wt),qe="";for(;ze;){qe+=wt.substring(Me,ze.index);const at=bn.case_insensitive?ze[0].toLowerCase():ze[0],It=tt(Oe,at);if(It){const[Tn,vi]=It;if(Ft.addText(qe),qe="",Vt[at]=(Vt[at]||0)+1,Vt[at]<=Pi&&(an+=vi),Tn.startsWith("_"))qe+=ze[0];else{const un=bn.classNameAliases[Tn]||Tn;pt(ze[0],un)}}else qe+=ze[0];Me=Oe.keywordPatternRe.lastIndex,ze=Oe.keywordPatternRe.exec(wt)}qe+=wt.substring(Me),Ft.addText(qe)}function ln(){if(wt==="")return;let Me=null;if(typeof Oe.subLanguage=="string"){if(!ie[Oe.subLanguage]){Ft.addText(wt);return}Me=Vr(Oe.subLanguage,wt,!0,Gi[Oe.subLanguage]),Gi[Oe.subLanguage]=Me._top}else Me=mi(wt,Oe.subLanguage.length?Oe.subLanguage:null);Oe.relevance>0&&(an+=Me.relevance),Ft.__addSublanguage(Me._emitter,Me.language)}function vn(){Oe.subLanguage!=null?ln():yr(),wt=""}function pt(Me,ze){Me!==""&&(Ft.startScope(ze),Ft.addText(Me),Ft.endScope())}function Cr(Me,ze){let qe=1;const at=ze.length-1;for(;qe<=at;){if(!Me._emit[qe]){qe++;continue}const It=bn.classNameAliases[Me[qe]]||Me[qe],Tn=ze[qe];It?pt(Tn,It):(wt=Tn,yr(),wt=""),qe++}}function yi(Me,ze){return Me.scope&&typeof Me.scope=="string"&&Ft.openNode(bn.classNameAliases[Me.scope]||Me.scope),Me.beginScope&&(Me.beginScope._wrap?(pt(wt,bn.classNameAliases[Me.beginScope._wrap]||Me.beginScope._wrap),wt=""):Me.beginScope._multi&&(Cr(Me.beginScope,ze),wt="")),Oe=Object.create(Me,{parent:{value:Oe}}),Oe}function vr(Me,ze,qe){let at=_e(Me.endRe,qe);if(at){if(Me["on:end"]){const It=new e(Me);Me["on:end"](ze,It),It.isMatchIgnored&&(at=!1)}if(at){for(;Me.endsParent&&Me.parent;)Me=Me.parent;return Me}}if(Me.endsWithParent)return vr(Me.parent,ze,qe)}function ho(Me){return Oe.matcher.regexIndex===0?(wt+=Me[0],1):(Xn=!0,0)}function wn(Me){const ze=Me[0],qe=Me.rule,at=new e(qe),It=[qe.__beforeBegin,qe["on:begin"]];for(const Tn of It)if(Tn&&(Tn(Me,at),at.isMatchIgnored))return ho(ze);return qe.skip?wt+=ze:(qe.excludeBegin&&(wt+=ze),vn(),!qe.returnBegin&&!qe.excludeBegin&&(wt=ze)),yi(qe,Me),qe.returnBegin?0:ze.length}function Ci(Me){const ze=Me[0],qe=He.substring(Me.index),at=vr(Oe,Me,qe);if(!at)return we;const It=Oe;Oe.endScope&&Oe.endScope._wrap?(vn(),pt(ze,Oe.endScope._wrap)):Oe.endScope&&Oe.endScope._multi?(vn(),Cr(Oe.endScope,Me)):It.skip?wt+=ze:(It.returnEnd||It.excludeEnd||(wt+=ze),vn(),It.excludeEnd&&(wt=ze));do Oe.scope&&Ft.closeNode(),!Oe.skip&&!Oe.subLanguage&&(an+=Oe.relevance),Oe=Oe.parent;while(Oe!==at.parent);return at.starts&&yi(at.starts,Me),It.returnEnd?0:ze.length}function po(){const Me=[];for(let ze=Oe;ze!==bn;ze=ze.parent)ze.scope&&Me.unshift(ze.scope);Me.forEach(ze=>Ft.openNode(ze))}let Ar={};function Yr(Me,ze){const qe=ze&&ze[0];if(wt+=Me,qe==null)return vn(),0;if(Ar.type==="begin"&&ze.type==="end"&&Ar.index===ze.index&&qe===""){if(wt+=He.slice(ze.index,ze.index+1),!Ot){const at=new Error(`0 width match regex (${ce})`);throw at.languageName=ce,at.badRule=Ar.rule,at}return 1}if(Ar=ze,ze.type==="begin")return wn(ze);if(ze.type==="illegal"&&!st){const at=new Error('Illegal lexeme "'+qe+'" for mode "'+(Oe.scope||"<unnamed>")+'"');throw at.mode=Oe,at}else if(ze.type==="end"){const at=Ci(ze);if(at!==we)return at}if(ze.type==="illegal"&&qe==="")return wt+=`
`,1;if(_r>1e5&&_r>ze.index*3)throw new Error("potential infinite loop, way more iterations than matches");return wt+=qe,qe.length}const bn=yn(ce);if(!bn)throw qr(Ct.replace("{}",ce)),new Error('Unknown language: "'+ce+'"');const mo=di(bn);let Gr="",Oe=bt||mo;const Gi={},Ft=new ge.__emitter(ge);po();let wt="",an=0,$n=0,_r=0,Xn=!1;try{if(bn.__emitTokens)bn.__emitTokens(He,Ft);else{for(Oe.matcher.considerAll();;){_r++,Xn?Xn=!1:Oe.matcher.considerAll(),Oe.matcher.lastIndex=$n;const Me=Oe.matcher.exec(He);if(!Me)break;const ze=He.substring($n,Me.index),qe=Yr(ze,Me);$n=Me.index+qe}Yr(He.substring($n))}return Ft.finalize(),Gr=Ft.toHTML(),{language:ce,value:Gr,relevance:an,illegal:!1,_emitter:Ft,_top:Oe}}catch(Me){if(Me.message&&Me.message.includes("Illegal"))return{language:ce,value:Tr(He),illegal:!0,relevance:0,_illegalBy:{message:Me.message,index:$n,context:He.slice($n-100,$n+100),mode:Me.mode,resultSoFar:Gr},_emitter:Ft};if(Ot)return{language:ce,value:Tr(He),illegal:!1,relevance:0,errorRaised:Me,_emitter:Ft,_top:Oe};throw Me}}function ki(ce){const He={value:Tr(ce),illegal:!1,relevance:0,_top:Ae,_emitter:new ge.__emitter(ge)};return He._emitter.addText(ce),He}function mi(ce,He){He=He||ge.languages||Object.keys(ie);const st=ki(ce),bt=He.filter(yn).filter(Or).map(vn=>Vr(vn,ce,!1));bt.unshift(st);const Vt=bt.sort((vn,pt)=>{if(vn.relevance!==pt.relevance)return pt.relevance-vn.relevance;if(vn.language&&pt.language){if(yn(vn.language).supersetOf===pt.language)return 1;if(yn(pt.language).supersetOf===vn.language)return-1}return 0}),[tt,yr]=Vt,ln=tt;return ln.secondBest=yr,ln}function Yi(ce,He,st){const bt=He&&Se[He]||st;ce.classList.add("hljs"),ce.classList.add(`language-${bt}`)}function Gn(ce){let He=null;const st=lt(ce);if(ye(st))return;if(gr("before:highlightElement",{el:ce,language:st}),ce.dataset.highlighted){console.log("Element previously highlighted. To highlight again, first unset `dataset.highlighted`.",ce);return}if(ce.children.length>0&&(ge.ignoreUnescapedHTML||(console.warn("One of your code blocks includes unescaped HTML. This is a potentially serious security risk."),console.warn("https://github.com/highlightjs/highlight.js/wiki/security"),console.warn("The element with unescaped HTML:"),console.warn(ce)),ge.throwUnescapedHTML))throw new wr("One of your code blocks includes unescaped HTML.",ce.innerHTML);He=ce;const bt=He.textContent,Vt=st?qt(bt,{language:st,ignoreIllegals:!0}):mi(bt);ce.innerHTML=Vt.value,ce.dataset.highlighted="yes",Yi(ce,st,Vt.language),ce.result={language:Vt.language,re:Vt.relevance,relevance:Vt.relevance},Vt.secondBest&&(ce.secondBest={language:Vt.secondBest.language,relevance:Vt.secondBest.relevance}),gr("after:highlightElement",{el:ce,result:Vt,text:bt})}function or(ce){ge=Oi(ge,ce)}const Hn=()=>{Mt(),on("10.6.0","initHighlighting() deprecated.  Use highlightAll() now.")};function Ir(){Mt(),on("10.6.0","initHighlightingOnLoad() deprecated.  Use highlightAll() now.")}let gi=!1;function Mt(){function ce(){Mt()}if(document.readyState==="loading"){gi||window.addEventListener("DOMContentLoaded",ce,!1),gi=!0;return}document.querySelectorAll(ge.cssSelector).forEach(Gn)}function fo(ce,He){let st=null;try{st=He(z)}catch(bt){if(qr("Language definition for '{}' could not be registered.".replace("{}",ce)),Ot)qr(bt);else throw bt;st=Ae}st.name||(st.name=ce),ie[ce]=st,st.rawDefinition=He.bind(null,z),st.aliases&&Ut(st.aliases,{languageName:ce})}function Kr(ce){delete ie[ce];for(const He of Object.keys(Se))Se[He]===ce&&delete Se[He]}function Pr(){return Object.keys(ie)}function yn(ce){return ce=(ce||"").toLowerCase(),ie[ce]||ie[Se[ce]]}function Ut(ce,{languageName:He}){typeof ce=="string"&&(ce=[ce]),ce.forEach(st=>{Se[st.toLowerCase()]=He})}function Or(ce){const He=yn(ce);return He&&!He.disableAutodetect}function mr(ce){ce["before:highlightBlock"]&&!ce["before:highlightElement"]&&(ce["before:highlightElement"]=He=>{ce["before:highlightBlock"](Object.assign({block:He.el},He))}),ce["after:highlightBlock"]&&!ce["after:highlightElement"]&&(ce["after:highlightElement"]=He=>{ce["after:highlightBlock"](Object.assign({block:He.el},He))})}function Wo(ce){mr(ce),We.push(ce)}function kr(ce){const He=We.indexOf(ce);He!==-1&&We.splice(He,1)}function gr(ce,He){const st=ce;We.forEach(function(bt){bt[st]&&bt[st](He)})}function lr(ce){return on("10.7.0","highlightBlock will be removed entirely in v12.0"),on("10.7.0","Please use highlightElement now."),Gn(ce)}Object.assign(z,{highlight:qt,highlightAuto:mi,highlightAll:Mt,highlightElement:Gn,highlightBlock:lr,configure:or,initHighlighting:Hn,initHighlightingOnLoad:Ir,registerLanguage:fo,unregisterLanguage:Kr,listLanguages:Pr,getLanguage:yn,registerAliases:Ut,autoDetection:Or,inherit:Oi,addPlugin:Wo,removePlugin:kr}),z.debugMode=function(){Ot=!1},z.safeMode=function(){Ot=!0},z.versionString=je,z.regex={concat:A,lookahead:w,either:W,optional:T,anyNumberOfTimes:O};for(const ce in oi)typeof oi[ce]=="object"&&r(oi[ce]);return Object.assign(z,oi),z},Ur=pi({});return Ur.newInstance=()=>pi({}),Kh=Ur,Ur.HighlightJS=Ur,Ur.default=Ur,Kh}var pA=hA();const qp=Mu(pA);function a1(r){const e=r.regex,t=e.concat(/[\p{L}_]/u,e.optional(/[\p{L}0-9_.-]*:/u),/[\p{L}0-9_.-]*/u),i=/[\p{L}0-9._:-]+/u,o={className:"symbol",begin:/&[a-z]+;|&#[0-9]+;|&#x[a-f0-9]+;/},a={begin:/\s/,contains:[{className:"keyword",begin:/#?[a-z_][a-z1-9_-]+/,illegal:/\n/}]},u=r.inherit(a,{begin:/\(/,end:/\)/}),f=r.inherit(r.APOS_STRING_MODE,{className:"string"}),h=r.inherit(r.QUOTE_STRING_MODE,{className:"string"}),m={endsWithParent:!0,illegal:/</,relevance:0,contains:[{className:"attr",begin:i,relevance:0},{begin:/=\s*/,relevance:0,contains:[{className:"string",endsParent:!0,variants:[{begin:/"/,end:/"/,contains:[o]},{begin:/'/,end:/'/,contains:[o]},{begin:/[^\s"'=<>`]+/}]}]}]};return{name:"HTML, XML",aliases:["html","xhtml","rss","atom","xjb","xsd","xsl","plist","wsf","svg"],case_insensitive:!0,unicodeRegex:!0,contains:[{className:"meta",begin:/<![a-z]/,end:/>/,relevance:10,contains:[a,h,f,u,{begin:/\[/,end:/\]/,contains:[{className:"meta",begin:/<![a-z]/,end:/>/,contains:[a,u,h,f]}]}]},r.COMMENT(/<!--/,/-->/,{relevance:10}),{begin:/<!\[CDATA\[/,end:/\]\]>/,relevance:10},o,{className:"meta",end:/\?>/,variants:[{begin:/<\?xml/,relevance:10,contains:[h]},{begin:/<\?[a-z][a-z0-9]+/}]},{className:"tag",begin:/<style(?=\s|>)/,end:/>/,keywords:{name:"style"},contains:[m],starts:{end:/<\/style>/,returnEnd:!0,subLanguage:["css","xml"]}},{className:"tag",begin:/<script(?=\s|>)/,end:/>/,keywords:{name:"script"},contains:[m],starts:{end:/<\/script>/,returnEnd:!0,subLanguage:["javascript","handlebars","xml"]}},{className:"tag",begin:/<>|<\/>/},{className:"tag",begin:e.concat(/</,e.lookahead(e.concat(t,e.either(/\/>/,/>/,/\s/)))),end:/\/?>/,contains:[{className:"name",begin:t,relevance:0,starts:m}]},{className:"tag",begin:e.concat(/<\//,e.lookahead(e.concat(t,/>/))),contains:[{className:"name",begin:t,relevance:0},{begin:/>/,relevance:0,endsParent:!0}]}]}}const mA="_codePreview_fuze7_3",gA={codePreview:mA};qp.registerLanguage("html",a1);qp.registerLanguage("xml",a1);const yA=({code:r,language:e="html"})=>{const t=Pe.useRef(null);return Pe.useEffect(()=>{t.current&&(t.current.removeAttribute("data-highlighted"),t.current.className="",qp.highlightElement(t.current))},[r,e]),ue.jsx("pre",{className:gA.codePreview,"data-language":e,children:ue.jsx("code",{ref:t,className:`language-${e}`,children:r})})},vA="_outputPanel_neqwf_3",bA="_header_neqwf_21",SA="_title_neqwf_33",xA="_content_neqwf_47",EA="_outputContainer_neqwf_61",MA="_codeContainer_neqwf_71",Yl={outputPanel:vA,header:bA,title:SA,content:xA,outputContainer:EA,codeContainer:MA},wA=({width:r,formattedHtml:e})=>{const[t,i]=Pe.useState(!1);return ue.jsxs("div",{className:Yl.outputPanel,style:{width:`${r}px`},children:[ue.jsx("div",{className:Yl.header,children:ue.jsx("h2",{className:Yl.title,children:"HTML Output"})}),ue.jsx("div",{className:Yl.content,children:ue.jsx("div",{className:Yl.outputContainer,onMouseEnter:()=>i(!0),onMouseLeave:()=>i(!1),children:ue.jsxs("div",{className:Yl.codeContainer,children:[ue.jsx(dA,{text:e,isVisible:t}),ue.jsx(yA,{code:e})]})})})]})},TA="_resizeHandle_vu4f3_3",OA={resizeHandle:TA},uv=({onMouseDown:r})=>ue.jsx("div",{className:OA.resizeHandle,onMouseDown:r}),kA="_layoutContainer_wvg27_3",CA={layoutContainer:kA},AA=({content:r,setContent:e,formattedHtml:t})=>{const{leftPanelWidth:i,rightPanelWidth:o,containerRef:a,handleLeftMouseDown:u,handleRightMouseDown:f}=IS();return ue.jsxs("div",{className:CA.layoutContainer,ref:a,children:[ue.jsx(QS,{width:i}),ue.jsx(uv,{onMouseDown:u}),ue.jsx(oA,{content:r,onChange:e}),ue.jsx(uv,{onMouseDown:f}),ue.jsx(wA,{width:o,formattedHtml:t})]})},_A=r=>{const e="  ";let t="",i=0;return r.split(/>[\s\r\n]*</).forEach(o=>{o.match(/^\/\w/)&&i--,t+=e.repeat(i<0?0:i)+"<"+o+`>
`,o.match(/^<?\w[^>]*[^\/>]$/)&&!o.startsWith("input")&&!o.match(/br/i)&&i++}),t.substring(1,t.length-2)},NA=r=>r.replace(/\s*data-section-type="[^"]*"/g,""),DA=(r=n1,e)=>{const[t,i]=Pe.useState(r),[o,a]=Pe.useState("");return Pe.useEffect(()=>{},[e]),Pe.useEffect(()=>{const u=NA(t);a(_A(u))},[t]),{content:t,setContent:i,formattedHtml:o}},RA="_appContainer_13ao3_1",BA={appContainer:RA},zA=()=>{const{content:r,setContent:e,formattedHtml:t}=DA();return Pe.useEffect(()=>{(async()=>{try{await new Promise(a=>setTimeout(a,100));const o=await hu.cleanupOrphaned();o>0&&console.log(`Cleaned up ${o} orphaned images on startup`)}catch(o){console.error("Startup cleanup failed:",o)}})()},[]),ue.jsx("div",{className:BA.appContainer,children:ue.jsx(AA,{content:r,setContent:e,formattedHtml:t})})};LS.createRoot(document.getElementById("root")).render(ue.jsx(rn.StrictMode,{children:ue.jsx(zA,{})}));
